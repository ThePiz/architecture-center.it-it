---
title: Elenco di controllo della disponibilità
description: Elenco di controllo in cui vengono fornite le linee guida per i problemi di disponibilità durante la progettazione.
author: dragon119
ms.date: 01/10/2018
ms.custom: checklist
ms.openlocfilehash: 324d8200d822eb1a7dce95ba4b2a7f29b00fb291
ms.sourcegitcommit: 441185360db49cfb3cf39527b68f318d17d4cb3d
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/19/2018
ms.locfileid: "27973111"
---
# <a name="availability-checklist"></a><span data-ttu-id="fcd8a-103">Elenco di controllo della disponibilità</span><span class="sxs-lookup"><span data-stu-id="fcd8a-103">Availability checklist</span></span>

<span data-ttu-id="fcd8a-104">La disponibilità è la percentuale di tempo in cui un sistema è funzionante ed è uno dei [punti chiave della qualità del software](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-104">Availability is the proportion of time that a system is functional and working, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="fcd8a-105">Usare questo elenco di controllo per esaminare l'architettura delle applicazioni in relazione alla disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-105">Use this checklist to review your application architecture from an availability standpoint.</span></span> 

## <a name="application-design"></a><span data-ttu-id="fcd8a-106">Progettazione di applicazioni</span><span class="sxs-lookup"><span data-stu-id="fcd8a-106">Application design</span></span>

<span data-ttu-id="fcd8a-107">**Evitare i singoli punti di errore.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-107">**Avoid any single point of failure.**</span></span> <span data-ttu-id="fcd8a-108">Tutti i componenti, i servizi, le risorse e le istanze di calcolo devono essere distribuiti come istanze multiple, per impedire che un singolo punto di errore influisca sulla disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-108">All components, services, resources, and compute instances should be deployed as multiple instances to prevent a single point of failure from affecting availability.</span></span> <span data-ttu-id="fcd8a-109">Sono inclusi i meccanismi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-109">This includes authentication mechanisms.</span></span> <span data-ttu-id="fcd8a-110">Progettare l'applicazione in modo che possa essere configurata per utilizzare più istanze e per rilevare gli errori e reindirizzare le richieste a istanze senza errori, nei casi in cui la piattaforma non esegue questa operazione automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-110">Design the application to be configurable to use multiple instances, and to automatically detect failures and redirect requests to non-failed instances where the platform does not do this automatically.</span></span>

<span data-ttu-id="fcd8a-111">**Scomporre i carichi di lavoro in base all'obiettivo a livello di servizio.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-111">**Decompose workloads by service-level objective.**</span></span> <span data-ttu-id="fcd8a-112">Se un servizio è composto da carichi di lavoro critici e meno critici, gestirli in modo diverso e specificare le funzionalità del servizio e il numero di istanze per soddisfare i rispettivi requisiti di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-112">If a service is composed of critical and less-critical workloads, manage them differently and specify the service features and number of instances to meet their availability requirements.</span></span>

<span data-ttu-id="fcd8a-113">**Ridurre al minimo e comprendere le dipendenze del servizio.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-113">**Minimize and understand service dependencies.**</span></span> <span data-ttu-id="fcd8a-114">Ridurre al minimo il numero dei servizi diversi utilizzati laddove possibile e assicurarsi di comprendere tutte le dipendenze di funzionalità e servizi presenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-114">Minimize the number of different services used where possible, and ensure you understand all of the feature and service dependencies that exist in the system.</span></span> <span data-ttu-id="fcd8a-115">Ciò include la natura di tali dipendenze e l'impatto dell’errore o del peggioramento delle prestazioni in ciascuna di esse sull’applicazione globale.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-115">This includes the nature of these dependencies, and the impact of failure or reduced performance in each one on the overall application.</span></span> <span data-ttu-id="fcd8a-116">Vedere [Definizione dei requisiti di resilienza](../resiliency/index.md#defining-your-resiliency-requirements).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-116">See [Defining your resiliency requirements](../resiliency/index.md#defining-your-resiliency-requirements).</span></span>

<span data-ttu-id="fcd8a-117">**Progettare attività e messaggi in modo che siano idempotenti, se possibile**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-117">**Design tasks and messages to be idempotent where possible**.</span></span> <span data-ttu-id="fcd8a-118">Un'operazione è idempotente se può essere ripetuta più volte producendo lo stesso risultato.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-118">An operation is idempotent if it can be repeated multiple times and produce the same result.</span></span> <span data-ttu-id="fcd8a-119">L'idempotenza può garantire che richieste duplicate non causino problemi.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-119">Idempotency can ensure that duplicated requests don't cause problems.</span></span> <span data-ttu-id="fcd8a-120">I consumer di messaggi e le operazioni da essi effettuate devono essere idempotenti, affinché la ripetizione di un'operazione eseguita in precedenza non invalidi i risultati.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-120">Message consumers and the operations they carry out should be idempotent so that repeating a previously executed operation does not render the results invalid.</span></span> <span data-ttu-id="fcd8a-121">Ciò potrebbe significare rilevamento di messaggi duplicati, oppure la garanzia di coerenza tramite un approccio ottimistico alla gestione dei conflitti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-121">This may mean detecting duplicated messages, or ensuring consistency by using an optimistic approach to handling conflicts.</span></span>

<span data-ttu-id="fcd8a-122">**Utilizzare un gestore dei messaggi che implementa l’elevata disponibilità per le transazioni critiche.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-122">**Use a message broker that implements high availability for critical transactions.**</span></span> <span data-ttu-id="fcd8a-123">Molte applicazioni cloud usano la messaggistica per avviare attività eseguite in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-123">Many cloud applications use messaging to initiate tasks that are performed asynchronously.</span></span> <span data-ttu-id="fcd8a-124">Per garantire il recapito dei messaggi, il sistema di messaggistica deve garantire un'elevata disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-124">To guarantee delivery of messages, the messaging system should provide high availability.</span></span> <span data-ttu-id="fcd8a-125">La [messaggistica del bus di servizio di Azure](/azure/service-bus-messaging) implementa la semantica di tipo *At-Least-Once*.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-125">[Azure Service Bus Messaging](/azure/service-bus-messaging) implements *at least once* semantics.</span></span> <span data-ttu-id="fcd8a-126">In questo modo, un messaggio inviato a una coda non andrà perso, anche se in alcune circostanze potrebbero essere recapitate copie duplicate.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-126">This means that a message posted to a queue will not be lost, although duplicate copies may be delivered under certain circumstances.</span></span> <span data-ttu-id="fcd8a-127">Se l'elaborazione dei messaggi è idempotente (vedere la voce precedente), il recapito ripetuto non dovrebbe essere un problema.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-127">If message processing is idempotent (see the previous item), repeated delivery should not be a problem.</span></span>

<span data-ttu-id="fcd8a-128">**Progettare le applicazioni in modo che le prestazioni si riducano in modo non drastico.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-128">**Design applications to gracefully degrade.**</span></span> <span data-ttu-id="fcd8a-129">Il carico su un'applicazione può superare la capacità di una o più parti e causare così una riduzione della disponibilità ed errori di connessione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-129">The load on an application may exceed the capacity of one or more parts, causing reduced availability and failed connections.</span></span> <span data-ttu-id="fcd8a-130">Il ridimensionamento consente di ovviare a questo problema, ma può raggiungere un limite imposto da altri fattori quali la disponibilità delle risorse o costi.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-130">Scaling can help to alleviate this, but it may reach a limit imposed by other factors, such as resource availability or cost.</span></span> <span data-ttu-id="fcd8a-131">Quando un'applicazione raggiunge il limite di una risorsa, deve eseguire le operazioni necessarie per ridurre al minimo l'impatto per l'utente.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-131">When an application reaches a resource limit, it should take appropriate action to minimize the impact for the user.</span></span> <span data-ttu-id="fcd8a-132">In un sistema di e-commerce, ad esempio, se il sottosistema di elaborazione degli ordini è sotto pressione o in errore, è possibile disabilitare temporaneamente tale sottosistema supportando al tempo stesso altre funzionalità, come l'esplorazione del catalogo prodotti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-132">For example, in an ecommerce system, if the order-processing subsystem is under strain or fails, it can be temporarily disabled while allowing other functionality, such as browsing the product catalog.</span></span> <span data-ttu-id="fcd8a-133">Potrebbe essere opportuno posticipare le richieste a un sottosistema in errore, ad esempio consentendo comunque agli utenti di inviare ordini ma salvandoli per l'elaborazione successiva quando il sottosistema di ordini è nuovamente disponibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-133">It might be appropriate to postpone requests to a failing subsystem, for example still enabling customers to submit orders but saving them for later processing, when the orders subsystem is available again.</span></span>

<span data-ttu-id="fcd8a-134">**Gestire correttamente gli eventi burst rapidi.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-134">**Gracefully handle rapid burst events.**</span></span> <span data-ttu-id="fcd8a-135">La maggior parte delle applicazioni deve gestire carichi di lavoro variabili nel tempo.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-135">Most applications need to handle varying workloads over time.</span></span> <span data-ttu-id="fcd8a-136">La scalabilità automatica consente di gestire il carico, ma potrebbe richiedere tempo per portare online istanze aggiuntive e gestire le richieste.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-136">Auto-scaling can help to handle the load, but it may take some time for additional instances to come online and handle requests.</span></span> <span data-ttu-id="fcd8a-137">Evitare che picchi di attività improvvisi e inattesi causino il sovraccarico dell'applicazione progettando quest'ultima in modo che accodi le richieste ai servizi che usa e riduca le prestazioni in modo non drastico quando le code sono vicine alla capacità completa.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-137">Prevent sudden and unexpected bursts of activity from overwhelming the application: design it to queue requests to the services it uses and degrade gracefully when queues are near to full capacity.</span></span> <span data-ttu-id="fcd8a-138">Assicurarsi che le prestazioni e la capacità disponibili siano sufficienti in condizioni di non burst a svuotare le code e gestire le richieste in sospeso.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-138">Ensure that there is sufficient performance and capacity available under non-burst conditions to drain the queues and handle outstanding requests.</span></span> <span data-ttu-id="fcd8a-139">Per ulteriori informazioni, vedere il [modello di livellamento dei carichi basato sulle code](https://msdn.microsoft.com/library/dn589783.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-139">For more information, see the [Queue-Based Load Leveling Pattern](https://msdn.microsoft.com/library/dn589783.aspx).</span></span>

## <a name="deployment-and-maintenance"></a><span data-ttu-id="fcd8a-140">Distribuzione e manutenzione</span><span class="sxs-lookup"><span data-stu-id="fcd8a-140">Deployment and maintenance</span></span>

<span data-ttu-id="fcd8a-141">**Distribuire più istanze di servizi.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-141">**Deploy multiple instances of services.**</span></span> <span data-ttu-id="fcd8a-142">Se l'applicazione dipende da una singola istanza di un servizio, crea un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-142">If your application depends on a single instance of a service, it creates a single point of failure.</span></span> <span data-ttu-id="fcd8a-143">Il provisioning di più istanze migliora sia la resilienza che la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-143">Provisioning multiple instances improves both resiliency and scalability.</span></span> <span data-ttu-id="fcd8a-144">Per [Servizio app di Azure](/azure/app-service/app-service-value-prop-what-is/) selezionare un [Piano di servizio app](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) che offra più istanze.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-144">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service Plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span> <span data-ttu-id="fcd8a-145">Per Servizi cloud di Azure, configurare ognuno dei ruoli in modo da usare [più istanze](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-145">For Azure Cloud Services, configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span> <span data-ttu-id="fcd8a-146">Per [Macchine virtuali di Microsoft Azure](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), verificare che l'architettura VM includa più macchine virtuali e che ogni macchina virtuale sia inclusa in un [set di disponibilità][availability-sets].</span><span class="sxs-lookup"><span data-stu-id="fcd8a-146">For [Azure Virtual Machines (VMs)](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your VM architecture includes more than one VM and that each VM is included in an [availability set][availability-sets].</span></span>

<span data-ttu-id="fcd8a-147">**Considerare di distribuire l'applicazione tra più aree.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-147">**Consider deploying your application across multiple regions.**</span></span> <span data-ttu-id="fcd8a-148">Se l'applicazione è distribuita in un'unica area, nel raro caso in cui l'intera area diventi non disponibile, anche l'applicazione diventa non disponibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-148">If your application is deployed to a single region, in the rare event the entire region becomes unavailable, your application will also be unavailable.</span></span> <span data-ttu-id="fcd8a-149">Questa circostanza potrebbe essere inaccettabile in base alle condizioni del contratto di servizio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-149">This may be unacceptable under the terms of your application's SLA.</span></span> <span data-ttu-id="fcd8a-150">In questo caso, occorre considerare la possibilità di distribuire l'applicazione e i relativi servizi tra più aree.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-150">If so, consider deploying your application and its services across multiple regions.</span></span>

<span data-ttu-id="fcd8a-151">**Automatizzare ed eseguire il test delle attività di distribuzione e manutenzione.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-151">**Automate and test deployment and maintenance tasks.**</span></span> <span data-ttu-id="fcd8a-152">Le applicazioni distribuite sono costituite da più parti che devono interagire tra loro.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-152">Distributed applications consist of multiple parts that must work together.</span></span> <span data-ttu-id="fcd8a-153">La distribuzione deve essere automatizzata, con meccanismi testati e collaudati come gli script.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-153">Deployment should be automated, using tested and proven mechanisms such as scripts.</span></span> <span data-ttu-id="fcd8a-154">È necessario inoltre utilizzare tecniche automatizzate per eseguire aggiornamenti di tutte le applicazioni o di parte di esse.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-154">These can update and validate configuration, and automate the deployment process.</span></span> <span data-ttu-id="fcd8a-155">Usare [modelli di Azure Resource Manager](/azure/azure-resource-manager/resource-group-authoring-templates) per effettuare il provisioning della risorsa di Azure</span><span class="sxs-lookup"><span data-stu-id="fcd8a-155">Use [Azure Resource Manager templates](/azure/azure-resource-manager/resource-group-authoring-templates) to provision Azure resource.</span></span> <span data-ttu-id="fcd8a-156">e tecniche automatizzate per eseguire gli aggiornamenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-156">Also use automated techniques to perform application updates.</span></span> <span data-ttu-id="fcd8a-157">Tutti gli strumenti di distribuzione devono disporre di limitazioni della sicurezza appropriati per proteggere l'applicazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-157">It is vital to test all of these processes fully to ensure that errors do not cause additional downtime.</span></span> <span data-ttu-id="fcd8a-158">Definire e applicare i criteri di distribuzione con attenzione e ridurre al minimo la necessità dell’intervento umano.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-158">All deployment tools must have suitable security restrictions to protect the deployed application; define and enforce deployment policies carefully and minimize the need for human intervention.</span></span>

<span data-ttu-id="fcd8a-159">**Usare le funzionalità di staging e di produzione della piattaforma.**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-159">**Use staging and production features of the platform.**.</span></span> <span data-ttu-id="fcd8a-160">Il servizio app di Azure, ad esempio, supporta [slot di distribuzione](/azure/app-service/web-sites-staged-publishing) che possono essere usati per lo staging di una distribuzione prima dell'implementazione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-160">For example, Azure App Service supports [deployment slots](/azure/app-service/web-sites-staged-publishing), which you can use to stage a deployment before swapping it to production.</span></span> <span data-ttu-id="fcd8a-161">Azure Service Fabric supporta [aggiornamenti in sequenza](/azure/service-fabric/service-fabric-application-upgrade) dei servizi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-161">Azure Service Fabric supports [rolling upgrades](/azure/service-fabric/service-fabric-application-upgrade) to application services.</span></span>

<span data-ttu-id="fcd8a-162">**Inserire le macchine virtuali (VM) in un set di disponibilità.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-162">**Place virtual machines (VMs) in an availability set.**</span></span> <span data-ttu-id="fcd8a-163">Per ottimizzare la disponibilità, creare più istanze di ogni ruolo VM e inserire tali istanze nello stesso set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-163">To maximize availability, create multiple instances of each VM role and place these instances in the same availability set.</span></span> <span data-ttu-id="fcd8a-164">Se sono presenti più VM per ruoli diversi, ad esempio diversi livelli dell'applicazione, creare un set di disponibilità per ogni ruolo VM.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-164">If have multiple VMs that serve different roles, such as different application tiers, create an availability set for each VM role.</span></span> <span data-ttu-id="fcd8a-165">Ad esempio, creare un set di disponibilità per il livello Web e un altro per il livello dati.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-165">For example, create an availability set for the web tier and another for the data tier.</span></span>

## <a name="data-management"></a><span data-ttu-id="fcd8a-166">Gestione dei dati</span><span class="sxs-lookup"><span data-stu-id="fcd8a-166">Data management</span></span>

<span data-ttu-id="fcd8a-167">**Dati di replica geografica in Archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-167">**Geo-replicate data in Azure Storage**.</span></span> <span data-ttu-id="fcd8a-168">I dati in Archiviazione di Azure vengono replicati automaticamente in un datacenter.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-168">Data in Azure Storage is automatically replicated within in a datacenter.</span></span> <span data-ttu-id="fcd8a-169">Per una disponibilità ancora maggiore, usare l'Archiviazione con ridondanza geografica e accesso in lettura, che replica i dati in un'area secondaria e fornisce l'accesso in sola lettura ai dati nella posizione secondaria.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-169">For even higher availability, use Read-access geo-redundant storage (-RAGRS), which replicates your data to a secondary region and provides read-only access to the data in the secondary location.</span></span> <span data-ttu-id="fcd8a-170">I dati sono presenti anche in caso di interruzione totale nell'area o in caso di emergenza.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-170">The data is durable even in the case of a complete regional outage or a disaster.</span></span> <span data-ttu-id="fcd8a-171">Per altre informazioni, vedere [Replica di Archiviazione di Azure](/azure/storage/storage-redundancy).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-171">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy).</span></span>

<span data-ttu-id="fcd8a-172">**Eseguire la replica geografica dei dati**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-172">**Geo-replicate databases**.</span></span> <span data-ttu-id="fcd8a-173">Database SQL di Azure e Cosmos DB supportano entrambi la replica geografica che consente di configurare le repliche del database secondario in altre aree.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-173">Azure SQL Database and Cosmos DB both support geo-replication, which enables you to configure secondary database replicas in other regions.</span></span> <span data-ttu-id="fcd8a-174">Sono disponibili database secondari per l'esecuzione di query e il failover in caso di interruzione di un data center o dell'impossibilità di connettersi al database primario.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-174">Secondary databases are available for querying and for failover in the case of a data center outage or the inability to connect to the primary database.</span></span> <span data-ttu-id="fcd8a-175">Per altre informazioni, vedere [Gruppi di failover e replica geografica attiva](/azure/sql-database/sql-database-geo-replication-overview) (Database SQL) e [Come distribuire i dati a livello globale con Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-175">For more information, see [Failover groups and active geo-replication](/azure/sql-database/sql-database-geo-replication-overview) (SQL Database) and [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

<span data-ttu-id="fcd8a-176">**Usare la concorrenza ottimistica e la coerenza finale**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-176">**Use optimistic concurrency and eventual consistency**.</span></span> <span data-ttu-id="fcd8a-177">Le transazioni che bloccano l'accesso alle risorse tramite il blocco (concorrenza pessimistica) possono influire negativamente sulle prestazioni e ridurre notevolmente la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-177">Transactions that block access to resources through locking (pessimistic concurrency) can cause poor performance and considerably reduce availability.</span></span> <span data-ttu-id="fcd8a-178">Questi problemi possono diventare particolarmente gravi nei sistemi distribuiti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-178">These problems can become especially acute in distributed systems.</span></span> <span data-ttu-id="fcd8a-179">In molti casi, un'attenta progettazione e tecniche come il partizionamento possono ridurre al minimo il rischio del verificarsi di conflitti tra gli aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-179">In many cases, careful design and techniques such as partitioning can minimize the chances of conflicting updates occurring.</span></span> <span data-ttu-id="fcd8a-180">Quando i dati vengono replicati o vengono letti da un archivio aggiornato separatamente, i dati saranno coerenti solo alla fine.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-180">Where data is replicated, or is read from a separately updated store, the data will only be eventually consistent.</span></span> <span data-ttu-id="fcd8a-181">I vantaggi superano in genere notevolmente l'impatto sulla disponibilità rispetto all'uso di transazioni per assicurare la coerenza immediata.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-181">But the advantages usually far outweigh the impact on availability of using transactions to ensure immediate consistency.</span></span>

<span data-ttu-id="fcd8a-182">**Usare il backup periodico e il ripristino temporizzato**.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-182">**Use periodic backup and point-in-time restore**.</span></span> <span data-ttu-id="fcd8a-183">Eseguire il backup automatico regolare dei dati non viene mantenuti in un'altra posizione e verificare che sia possibile ripristinare i dati e l'applicazione stessa in modo affidabile nel caso in cui si verifichi un errore.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-183">Regularly and automatically back up data that is not preserved elsewhere, and verify you can reliably restore both the data and the application itself should a failure occur.</span></span> <span data-ttu-id="fcd8a-184">Verificare che i backup soddisfino l'obiettivo del punto di ripristino (RPO).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-184">Ensure that backups meet your Recovery Point Objective (RPO).</span></span> <span data-ttu-id="fcd8a-185">La replica dei dati non è una funzionalità di backup, perché operazioni dannose o errori umani possono danneggiare i dati in tutte le repliche.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-185">Data replication is not a backup feature, because human error or malicious operations can corrupt data across all the replicas.</span></span> <span data-ttu-id="fcd8a-186">Il processo di backup deve essere sicuro, per proteggere i dati in transito e nel servizio di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-186">The backup process must be secure to protect the data in transit and in storage.</span></span> <span data-ttu-id="fcd8a-187">I database o le parti di un archivio dati possono essere generalmente recuperati a un punto precedente nel tempo utilizzando i log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-187">Databases or parts of a data store can usually be recovered to a previous point in time by using transaction logs.</span></span> <span data-ttu-id="fcd8a-188">Per altre informazioni, vedere [Ripristino dal danneggiamento o dall'eliminazione accidentale dei dati](../resiliency/recovery-data-corruption.md).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-188">For more information, see [Recover from data corruption or accidental deletion](../resiliency/recovery-data-corruption.md)</span></span>

## <a name="errors-and-failures"></a><span data-ttu-id="fcd8a-189">Errori e operazioni non riuscite</span><span class="sxs-lookup"><span data-stu-id="fcd8a-189">Errors and failures</span></span>

<span data-ttu-id="fcd8a-190">**Configurare i timeout delle richieste.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-190">**Configure request timeouts.**</span></span> <span data-ttu-id="fcd8a-191">Servizi e risorse possono diventare non disponibili, causando la mancata riuscita delle richieste.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-191">Services and resources may become unavailable, causing requests to fail.</span></span> <span data-ttu-id="fcd8a-192">Assicurarsi che i timeout applicati siano appropriati per ogni servizio o risorsa, oltre che per il client che vi accede.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-192">Ensure that the timeouts you apply are appropriate for each service or resource as well as the client that is accessing them.</span></span> <span data-ttu-id="fcd8a-193">In alcuni casi si potrebbe consentire un timeout più lungo per una determinata istanza di un client, in base al contesto e alle altre azioni eseguite dal client.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-193">In some cases, you might allow a longer timeout for a particular instance of a client, depending on the context and other actions that the client is performing.</span></span> <span data-ttu-id="fcd8a-194">I timeout molto brevi potrebbero provocare un numero eccessivo di nuovi tentativi per i servizi e le risorse con latenza notevole.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-194">Very short timeouts may cause excessive retry operations for services and resources that have considerable latency.</span></span> <span data-ttu-id="fcd8a-195">I timeout molto lunghi possono provocare il blocco se viene accodato un numero elevato di richieste, in attesa della risposta di un servizio o di una risorsa.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-195">Very long timeouts can cause blocking if a large number of requests are queued, waiting for a service or resource to respond.</span></span>

<span data-ttu-id="fcd8a-196">**Riprovare a eseguire operazioni non riuscite causate da errori temporanei.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-196">**Retry failed operations caused by transient faults.**</span></span> <span data-ttu-id="fcd8a-197">Progettare una strategia di tentativi per l'accesso a tutti i servizi e risorse se non supportano i tentativi di connessione automatica.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-197">Design a retry strategy for access to all services and resources where they do not inherently support automatic connection retry.</span></span> <span data-ttu-id="fcd8a-198">Usare una strategia che includa l'aumento del ritardo tra i tentativi in proporzione all'aumento del numero di errori per impedire il sovraccarico della risorsa e consentire il ripristino e la gestione normali delle richieste in coda.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-198">Use a strategy that includes an increasing delay between retries as the number of failures increases, to prevent overloading of the resource and to allow it to gracefully recover and handle queued requests.</span></span> <span data-ttu-id="fcd8a-199">Tentativi continui con ritardi molto brevi possono aggravare il problema.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-199">Continual retries with very short delays are likely to exacerbate the problem.</span></span> <span data-ttu-id="fcd8a-200">Per altre informazioni, vedere [Retry guidance for specific services](../best-practices/retry-service-specific.md) (Linee guida per la ripetizione dei tentativi per servizi specifici).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-200">For more information, see [Retry guidance for specific services](../best-practices/retry-service-specific.md).</span></span>

<span data-ttu-id="fcd8a-201">**Implementare l'interruzione del circuito per evitare errori a catena.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-201">**Implement circuit breaking to avoid cascading failures.**</span></span> <span data-ttu-id="fcd8a-202">In alcune situazioni, errori temporanei o altri errori, dalla perdita parziale di connettività al guasto completo di un servizio, richiedono tempi più lunghi del previsto per tornare alla normalità.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-202">There may be situations in which transient or other faults, ranging in severity from a partial loss of connectivity to the complete failure of a service, take much longer than expected to return to normal.</span></span> <span data-ttu-id="fcd8a-203">Se un servizio è molto occupato, un errore in una parte del sistema può causare errori a catena e far sì che molte operazioni restino bloccate pur continuando a usare risorse di sistema critiche come memoria, thread e connessioni di database.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-203">, if a service is very busy, failure in one part of the system may lead to cascading failures, and result in many operations becoming blocked while holding onto critical system resources such as memory, threads, and database connections.</span></span> <span data-ttu-id="fcd8a-204">Anziché riprovare continuamente a eseguire un'operazione che è improbabile venga eseguita correttamente, l'applicazione deve accettare rapidamente che l'operazione non riesce e gestire correttamente l'errore.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-204">Instead of continually retrying an operation that is unlikely to succeed, the application should quickly accept that the operation has failed, and gracefully handle this failure.</span></span> <span data-ttu-id="fcd8a-205">Usare il modello a interruttore per rifiutare le richieste per operazioni specifiche per periodi definiti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-205">Use the Circuit Breaker pattern to reject requests for specific operations for defined periods.</span></span> <span data-ttu-id="fcd8a-206">Per altre informazioni, vedere [Circuit Breaker Pattern](../patterns/circuit-breaker.md) (Modello a interruttore).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-206">For more information, see [Circuit Breaker Pattern](../patterns/circuit-breaker.md).</span></span>

<span data-ttu-id="fcd8a-207">**Comporre più componenti o eseguire il fallback.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-207">**Compose or fall back to multiple components.**</span></span> <span data-ttu-id="fcd8a-208">Progettare le applicazioni in modo da usare più istanze senza impatto sul funzionamento e sulle connessioni esistenti, se possibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-208">Design applications to use multiple instances without affecting operation and existing connections where possible.</span></span> <span data-ttu-id="fcd8a-209">Per ottimizzare la disponibilità, usare più istanze e distribuire le richieste tra di esse, rilevare ed evitare l'invio di richieste a istanze non riuscite.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-209">Use multiple instances and distribute requests between them, and detect and avoid sending requests to failed instances, in order to maximize availability.</span></span>

<span data-ttu-id="fcd8a-210">**Eseguire il fallback a un altro servizio o flusso di lavoro.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-210">**Fall back to a different service or workflow.**</span></span> <span data-ttu-id="fcd8a-211">Se la scrittura nel database SQL ha esito negativo, ad esempio, archiviare temporaneamente i dati nell'archivio BLOB o nella cache Redis.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-211">For example, if writing to SQL Database fails, temporarily store data in blob storage or Redis Cache.</span></span> <span data-ttu-id="fcd8a-212">Fornire un modo per ripetere le scritture nel database SQL quando il servizio risulta disponibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-212">Provide a way to replay the writes to SQL Database when the service becomes available.</span></span> <span data-ttu-id="fcd8a-213">In alcuni casi, un'operazione non riuscita può avere un'azione alternativa che consente all'applicazione di continuare a funzionare persino in caso di errore di un componente o di un servizio.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-213">In some cases, a failed operation may have an alternative action that allows the application to continue to work even when a component or service fails.</span></span> <span data-ttu-id="fcd8a-214">Se possibile, rilevare gli errori e reindirizzare le richieste ad altri servizi in grado di offrire una funzionalità alternativa adatta, o per eseguire il backup o ridurre le istanze di funzionalità in grado di gestire operazioni di base mentre il servizio primario è offline.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-214">If possible, detect failures and redirect requests to other services that can offer a suitable alternative functionality, or to back up or reduced functionality instances that can maintain core operations while the primary service is offline.</span></span>

## <a name="monitoring-and-disaster-recovery"></a><span data-ttu-id="fcd8a-215">Monitoraggio e ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="fcd8a-215">Monitoring and disaster recovery</span></span>

<span data-ttu-id="fcd8a-216">**Fornire strumenti avanzati per probabili errori ed eventi di errore** per segnalare la situazione al personale addetto alle operazioni.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-216">**Provide rich instrumentation for likely failures and failure events** to report the situation to operations staff.</span></span> <span data-ttu-id="fcd8a-217">Per gli errori che sono probabili ma che non si sono ancora verificati, fornire i dati sufficienti per consentire al personale addetto alle operazioni di determinare la causa, ridurre la situazione e garantire che il sistema rimanga disponibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-217">For failures that are likely but have not yet occurred, provide sufficient data to enable operations staff to determine the cause, mitigate the situation, and ensure that the system remains available.</span></span> <span data-ttu-id="fcd8a-218">Per gli errori che si sono già verificati, l'applicazione deve restituire all'utente un messaggio di errore appropriato, ma deve provare a continuare l'esecuzione, sebbene con funzionalità ridotte.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-218">For failures that have already occurred, the application should return an appropriate error message to the user but attempt to continue running, albeit with reduced functionality.</span></span> <span data-ttu-id="fcd8a-219">In tutti i casi, il sistema di monitoraggio deve acquisire i dettagli completi per consentire al personale addetto alle operazioni di effettuare un ripristino rapido e, se necessario per progettisti e sviluppatori, di modificare il sistema per impedire che si verifichi nuovamente la situazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-219">In all cases, the monitoring system should capture comprehensive details to enable operations staff to effect a quick recovery, and if necessary, for designers and developers to modify the system to prevent the situation from arising again.</span></span>

<span data-ttu-id="fcd8a-220">**Monitorare l'integrità di sistema mediante l'implementazione di funzioni di controllo.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-220">**Monitor system health by implementing checking functions.**</span></span> <span data-ttu-id="fcd8a-221">L'integrità e le prestazioni di un'applicazione possono peggiorare nel tempo senza che il peggioramento sia evidente, fino a quando non si verificano degli errori.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-221">The health and performance of an application can degrade over time, without being noticeable until it fails.</span></span> <span data-ttu-id="fcd8a-222">Implementare funzioni di tipo probe o di controllo che vengono eseguite regolarmente dall'esterno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-222">Implement probes or check functions that are executed regularly from outside the application.</span></span> <span data-ttu-id="fcd8a-223">Questi controlli possono essere semplici come la misurazione del tempo di risposta per l'intera applicazione, per le singole parti dell'applicazione, per i singoli servizi utilizzati dall'applicazione o per i singoli componenti.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-223">These checks can be as simple as measuring response time for the application as a whole, for individual parts of the application, for individual services that the application uses, or for individual components.</span></span> <span data-ttu-id="fcd8a-224">Le funzioni di controllo possono eseguire processi per garantire la produzione di risultati validi, misurare la latenza, controllare la disponibilità ed estrarre informazioni dal sistema.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-224">Check functions can execute processes to ensure they produce valid results, measure latency and check availability, and extract information from the system.</span></span>

<span data-ttu-id="fcd8a-225">**Testare regolarmente tutti i sistemi di failover e fallback.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-225">**Regularly test all failover and fallback systems.**</span></span> <span data-ttu-id="fcd8a-226">Le modifiche ai sistemi e alle operazioni possono influire sulle funzioni di fallback e failover, ma l'impatto potrebbe non essere rilevato fino a quando si verifica un errore nel sistema principale o finché questo non è in overload.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-226">Changes to systems and operations may affect failover and fallback functions, but the impact may not be detected until the main system fails or becomes overloaded.</span></span> <span data-ttu-id="fcd8a-227">Eseguire il test del sistema prima che divenga necessario per risolvere un problema in tempo reale in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-227">Test it before it is required to compensate for a live problem at runtime.</span></span>

<span data-ttu-id="fcd8a-228">**Eseguire il test dei sistemi di monitoraggio.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-228">**Test the monitoring systems.**</span></span> <span data-ttu-id="fcd8a-229">I sistemi automatizzati di failover e fallback e la visualizzazione manuale dell'integrità e delle prestazioni del sistema tramite i dashboard dipendono tutti dal funzionamento corretto del monitoraggio e della strumentazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-229">Automated failover and fallback systems, and manual visualization of system health and performance by using dashboards, all depend on monitoring and instrumentation functioning correctly.</span></span> <span data-ttu-id="fcd8a-230">In caso di errore di questi elementi, in assenza di informazioni importanti o in caso di segnalazione di dati non precisi, un operatore potrebbe non rendersi conto che il sistema è danneggiato o guasto.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-230">If these elements fail, miss critical information, or report inaccurate data, an operator might not realize that the system is unhealthy or failing.</span></span>

<span data-ttu-id="fcd8a-231">**Tenere traccia dello stato di avanzamento dei flussi di lavoro a esecuzione prolungata e riprovare in caso di errore.**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-231">**Track the progress of long-running workflows and retry on failure.**</span></span> <span data-ttu-id="fcd8a-232">I flussi di lavoro con esecuzione prolungata sono spesso costituiti da più passaggi.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-232">Long-running workflows are often composed of multiple steps.</span></span> <span data-ttu-id="fcd8a-233">Assicurarsi che ogni passaggio sia indipendente e possa essere ripetuto per ridurre al minimo le probabilità della necessità di un rollback dell'intero flusso di lavoro o dell'esecuzione di più transazioni di compensazione.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-233">Ensure that each step is independent and can be retried to minimize the chance that the entire workflow will need to be rolled back, or that multiple compensating transactions need to be executed.</span></span> <span data-ttu-id="fcd8a-234">Monitorare e gestire lo stato dei flussi di lavoro a esecuzione prolungata implementando un modello come il [modello supervisore dell'agente dell'utilità di pianificazione](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="fcd8a-234">Monitor and manage the progress of long-running workflows by implementing a pattern such as [Scheduler Agent Supervisor Pattern](../patterns/scheduler-agent-supervisor.md).</span></span>

<span data-ttu-id="fcd8a-235">**Pianificare il ripristino di emergenza**</span><span class="sxs-lookup"><span data-stu-id="fcd8a-235">**Plan for disaster recovery.**</span></span> <span data-ttu-id="fcd8a-236">Creare un piano accettato e interamente testato per qualsiasi tipo di errore che potrebbe influire sulla disponibilità del sistema.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-236">Create an accepted, fully-tested plan for recovery from any type of failure that may affect system availability.</span></span> <span data-ttu-id="fcd8a-237">Scegliere un'architettura di ripristino di emergenza multisito per tutte le applicazioni di importanza critica.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-237">Choose a multi-site disaster recovery architecture for any mission-critical applications.</span></span> <span data-ttu-id="fcd8a-238">Identificare un proprietario specifico per il piano di ripristino di emergenza che comprende l'automazione e i test.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-238">Identify a specific owner of the disaster recovery plan, including automation and testing.</span></span> <span data-ttu-id="fcd8a-239">Verificare che il piano sia ben documentato e automatizzare il processo il più possibile.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-239">Ensure the plan is well-documented, and automate the process as much as possible.</span></span> <span data-ttu-id="fcd8a-240">Stabilire una strategia di backup per tutti i dati di riferimento e transazionali e testare il ripristino di questi backup in modo regolare.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-240">Establish a backup strategy for all reference and transactional data, and test the restoration of these backups regularly.</span></span> <span data-ttu-id="fcd8a-241">Eseguire il training del personale addetto alle operazioni di esecuzione del piano ed eseguire simulazioni regolari per convalidare e migliorare il piano.</span><span class="sxs-lookup"><span data-stu-id="fcd8a-241">Train operations staff to execute the plan, and perform regular disaster simulations to validate and improve the plan.</span></span>

<!-- links -->
[availability-sets]:/azure/virtual-machines/virtual-machines-windows-manage-availability/
