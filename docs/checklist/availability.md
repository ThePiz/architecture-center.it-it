---
title: "Elenco di controllo della disponibilità"
description: "Elenco di controllo in cui vengono fornite le linee guida per i problemi di disponibilità durante la progettazione."
author: dragon119
ms.date: 03/24/2017
ms.custom: checklist
ms.openlocfilehash: 14e6cd6f25f613ea9793b5cf6c4f1abe6f405b74
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/14/2017
---
# <a name="availability-checklist"></a>Elenco di controllo della disponibilità
[!INCLUDE [header](../_includes/header.md)]

## <a name="application-design"></a>Progettazione di applicazioni
* **Evitare i singoli punti di errore.** Tutti i componenti, i servizi, le risorse e le istanze di calcolo devono essere distribuiti come istanze multiple, per impedire che un singolo punto di errore influisca sulla disponibilità. Sono inclusi i meccanismi di autenticazione. Progettare l'applicazione in modo che possa essere configurata per utilizzare più istanze e per rilevare gli errori e reindirizzare le richieste a istanze senza errori, nei casi in cui la piattaforma non esegue questa operazione automaticamente.
* **Decomporre il carico di lavoro in base ai diversi contratti di servizio.** Se un servizio è composto da carichi di lavoro critici e meno critici, gestirli in modo diverso e specificare le funzionalità del servizio e il numero di istanze per soddisfare i rispettivi requisiti di disponibilità.
* **Ridurre al minimo e comprendere le dipendenze del servizio.** Ridurre al minimo il numero dei servizi diversi utilizzati laddove possibile e assicurarsi di comprendere tutte le dipendenze di funzionalità e servizi presenti nel sistema. Ciò include la natura di tali dipendenze e l'impatto dell’errore o del peggioramento delle prestazioni in ciascuna di esse sull’applicazione globale. Microsoft garantisce una disponibilità di almeno il 99,9% per la maggior parte dei servizi, ma ciò significa che ogni servizio aggiuntivo su cui si basa un'applicazione riduce il contratto di servizio per la disponibilità complessiva del sistema dello 0,1%.
* **Progettare attività e messaggi in modo che siano idempotenti (ripetibili in modo sicuro), laddove possibile,**per far sì che le richieste duplicate non causino problemi. Ad esempio, un servizio può fungere da consumer che gestisce i messaggi inviati come richieste da altre parti del sistema che agiscono da produttori. Se si verifica un errore del consumer dopo l'elaborazione del messaggio, ma prima del riconoscimento che il messaggio è stato elaborato, un produttore potrebbe inviare una richiesta di ripetizione che può essere gestita da un'altra istanza del consumer. Per questo motivo, i consumer e le operazioni da essi effettuate devono essere idempotenti, affinché la ripetizione di un'operazione eseguita in precedenza non invalidi il risultato. Ciò potrebbe significare rilevamento di messaggi duplicati, oppure la garanzia di coerenza tramite un approccio ottimistico alla gestione dei conflitti.
* **Utilizzare un gestore dei messaggi che implementa l’elevata disponibilità per le transazioni critiche.** Molti scenari per l’avvio di attività o l'accesso ai servizi remoti utilizzano la messaggistica per passare le istruzioni tra l'applicazione e il servizio di destinazione. Per prestazioni ottimali, l'applicazione deve essere in grado di inviare il messaggio e quindi tornare a elaborare altre richieste senza dover attendere una risposta. Per garantire il recapito dei messaggi, il sistema di messaggistica deve garantire un'elevata disponibilità. Le code di messaggi del bus di servizio di Azure implementano la semantica di tipo *At-Least-Once*. Ogni messaggio inviato a una coda non andrà quindi perso, nonostante in alcune circostanze è possibile che vengano recapitate copie duplicate. Se l'elaborazione dei messaggi è idempotente (vedere la voce precedente), il recapito ripetuto non dovrebbe essere un problema.
* **Progettare le applicazioni in modo che le prestazioni si riducano in modo non drastico** quando raggiungono i limiti delle risorse e intraprendere l'azione appropriata per ridurre al minimo l'impatto dell'utente. In alcuni casi, il carico sull’applicazione può superare la capacità di una o più parti, causando una ridotta disponibilità e problemi ed errori di connessione. Il ridimensionamento consente di ovviare a questo problema, ma può raggiungere un limite imposto da altri fattori quali la disponibilità delle risorse o costi. Progettare l'applicazione in modo che, in questa situazione sia in grado di ridurre automaticamente e non drasticamente le prestazioni. Ad esempio, in un sistema di e-commerce, se il sottosistema di elaborazione degli ordini è sotto pressione o se è completamente in errore, può essere disabilitato temporaneamente, consentendo ad altre funzionalità, come l'esplorazione del catalogo prodotti, di continuare. Potrebbe essere opportuno posticipare le richieste a un sottosistema in errore, ad esempio consentendo comunque agli utenti di inviare ordini ma salvandoli per l'elaborazione successiva quando il sottosistema di ordini è nuovamente disponibile.
* **Gestire correttamente gli eventi burst rapidi.** La maggior parte delle applicazioni deve gestire diversi carichi di lavoro nel tempo, ad esempio i picchi innanzitutto al mattino in un'applicazione aziendale o quando viene rilasciato un nuovo prodotto in un sito di e-commerce. La scalabilità automatica consente di gestire il carico, ma potrebbe richiedere tempo per portare online istanze aggiuntive e gestire le richieste. Evitare che picchi di attività improvvisi e inattesi causino il sovraccarico dell'applicazione progettando quest'ultima in modo che accodi le richieste ai servizi che usa e riduca le prestazioni in modo non drastico quando le code sono vicine alla capacità completa. Assicurarsi che le prestazioni e la capacità disponibili siano sufficienti in condizioni di non burst a svuotare le code e gestire le richieste in sospeso. Per ulteriori informazioni, vedere il [modello di livellamento dei carichi basato sulle code](https://msdn.microsoft.com/library/dn589783.aspx).

## <a name="deployment-and-maintenance"></a>Distribuzione e manutenzione
* **Distribuire più istanze dei ruoli per ogni servizio.** Microsoft garantisce la disponibilità per i servizi creati e distribuiti dall’utente, ma tale garanzia è valida solo se si distribuiscono almeno due istanze di ciascun ruolo nel servizio. In tal modo, mentre un ruolo non è disponibile, l'altro rimane attivo. Ciò è particolarmente importante se è necessario distribuire gli aggiornamenti a un sistema in tempo reale, senza interrompere le attività dei client. Le istanze possono essere rese inattive e aggiornate singolarmente, mentre le altre continuano a essere online.
* **Eseguire l’host delle applicazioni in più data center.** Nonostante sia estremamente improbabile, è possibile che un intero data center sia offline a causa di un evento, ad esempio una calamità naturale o un errore di Internet. Le applicazioni aziendali fondamentali devono essere ospitate in più data center per garantire la massima disponibilità. Ciò può anche ridurre la latenza per gli utenti locali e offre altre opportunità per una maggiore flessibilità durante l'aggiornamento delle applicazioni.
* **Automatizzare ed eseguire il test delle attività di distribuzione e manutenzione.** Le applicazioni distribuite sono costituite da più parti che devono interagire tra loro. La distribuzione deve essere quindi automatizzata tramite meccanismi testati e comprovati come script e applicazioni di distribuzione, che consentono di aggiornare e convalidare la configurazione e di automatizzare il processo di distribuzione. È necessario inoltre utilizzare tecniche automatizzate per eseguire aggiornamenti di tutte le applicazioni o di parte di esse. È fondamentale eseguire il test completo di tutti questi processi per garantire che gli errori non causino tempi di inattività aggiuntivi. Tutti gli strumenti di distribuzione devono disporre di limitazioni della sicurezza appropriati per proteggere l'applicazione distribuita. Definire e applicare i criteri di distribuzione con attenzione e ridurre al minimo la necessità dell’intervento umano.
* **Prendere in considerazione l’utilizzo di funzionalità di gestione temporanea e produzione della piattaforma** , se disponibili. Ad esempio, l'utilizzo di ambienti di gestione temporanea e produzione di Servizi Cloud di Azure consente alle applicazioni di passare da uno all’altro tramite uno scambio di indirizzo IP virtuale (scambio VIP). Tuttavia, se si preferisce la gestione temporanea locale o la distribuzione contemporanea di versioni diverse dell'applicazione, migrando gli utenti gradualmente, si potrebbe non essere in grado di eseguire un'operazione di scambio VIP.
* **Applicare modifiche di configurazione senza riciclare** l'istanza quando possibile. In molti casi, le impostazioni di configurazione per un’applicazione o un servizio Azure possono essere modificate senza che sia necessario riavviare il ruolo. Il ruolo espone eventi che possono essere gestiti per rilevare le modifiche alla configurazione e applicarle ai componenti all’interno dell'applicazione. Tuttavia, alcune modifiche alle impostazioni di piattaforma di base richiedono il riavvio di un ruolo. Durante la creazione di componenti e servizi, ottimizzare la disponibilità e ridurre al minimo il tempo di inattività, progettandoli in modo da accettare le modifiche alle impostazioni di configurazione senza dover riavviare completamente l'applicazione.
* **Usare i domini di aggiornamento per ridurre a zero il tempo di inattività durante gli aggiornamenti.** Per aggiornare i domini vengono allocate le unità di calcolo di Azure quali i ruoli Web e di lavoro. Aggiornare le istanze del ruolo gruppo di domini in modo che, quando si verifica un aggiornamento in sequenza, ogni ruolo nel dominio di aggiornamento venga arrestato, aggiornato e riavviato a sua volta, per ridurre al minimo l'impatto sulla disponibilità dell'applicazione. È possibile specificare il numero domini di aggiornamento che è necessario creare per un servizio quando il servizio viene distribuito.
  
  > [!NOTE]
  > I ruoli inoltre vengono distribuiti anche tra domini di errore, ognuno dei quali è ragionevolmente indipendente da altri domini di errore in termini di rack di server, alimentazione e raffreddamento, al fine di ridurre al minimo le probabilità di un errore che influisca su tutte le istanze del ruolo. Questa distribuzione viene eseguita automaticamente e non è possibile controllarla.
  > 
  > 
* **Configurare set di disponibilità per le macchine virtuali di Azure.** Collocando due o più macchine virtuali nello stesso set di disponibilità si garantisce che queste macchine virtuali non verranno distribuite nello stesso dominio di errore. Per ottimizzare la disponibilità, è necessario creare più istanze di ciascuna macchina virtuale critica utilizzata del sistema e inserire tali istanze nello stesso set di disponibilità. Se si eseguono più macchine virtuali usate per scopi diversi, creare un set di disponibilità per ogni macchina virtuale e aggiungere istanze di ogni macchina virtuale a ogni set di disponibilità. Ad esempio, se sono state create macchine virtuali separate che funzionino come server Web e un server di report, creare un set di disponibilità per il server Web e un altro set di disponibilità per il server di report. Aggiungere le istanze della macchina virtuale del server Web al set di disponibilità del server Web e aggiungere istanze della macchina virtuale server di report al set di disponibilità del server di report.

## <a name="data-management"></a>Gestione dati

* **Dati di replica geografica in Archiviazione di Azure**. I dati in Archiviazione di Azure vengono replicati automaticamente in un datacenter. Per una disponibilità ancora maggiore, usare l'Archiviazione con ridondanza geografica e accesso in lettura, che replica i dati in un'area secondaria e fornisce l'accesso in sola lettura ai dati nella posizione secondaria. I dati sono presenti anche in caso di interruzione totale nell'area o in caso di emergenza. Per altre informazioni, vedere [Replica di Archiviazione di Azure](/azure/storage/storage-redundancy).
* **Eseguire la replica geografica dei dati**. Database SQL di Azure e Cosmos DB supportano entrambi la replica geografica che consente di configurare le repliche del database secondario in altre aree. Sono disponibili database secondari per l'esecuzione di query e il failover in caso di interruzione di un data center o dell'impossibilità di connettersi al database primario. Per altre informazioni, vedere [Gruppi di failover e replica geografica attiva](/azure/sql-database/sql-database-geo-replication-overview) (Database SQL) e [Come distribuire i dati a livello globale con Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).
* **Utilizzare la concorrenza ottimistica e la coerenza finale** laddove possibile. Le transazioni che bloccano l'accesso alle risorse tramite il blocco (concorrenza pessimistica) possono influire negativamente sulle prestazioni e ridurre notevolmente la disponibilità. Questi problemi possono diventare particolarmente gravi nei sistemi distribuiti. In molti casi, un'attenta progettazione e tecniche come il partizionamento possono ridurre al minimo il rischio del verificarsi di conflitti tra gli aggiornamenti. Quando i dati vengono replicati o vengono letti da un archivio aggiornato separatamente, i dati saranno coerenti solo alla fine. I vantaggi superano in genere notevolmente l'impatto sulla disponibilità rispetto all'uso di transazioni per assicurare la coerenza immediata.
* **Usare il backup periodico e il ripristino temporizzato**e assicurarsi che soddisfi l'obiettivo del punto di ripristino. Eseguire il backup automatico regolare dei dati non viene mantenuti in un'altra posizione e verificare che sia possibile ripristinare i dati e l'applicazione stessa in modo affidabile nel caso in cui si verifichi un errore. La replica dei dati non è una funzionalità di backup, in quanto gli errori e le incoerenze introdotte tramite operazioni dannose, errori o guasti, vengono replicati tra gli archivi. Il processo di backup deve essere sicuro, per proteggere i dati in transito e nel servizio di archiviazione. I database o le parti di un archivio dati possono essere generalmente recuperati a un punto precedente nel tempo utilizzando i log delle transazioni. Microsoft Azure fornisce una funzionalità di backup per i dati archiviati nel database SQL di Azure. I dati vengono esportati in un pacchetto di backup nell'archivio BLOB di Azure e possono essere scaricati in un percorso protetto in locale per l'archiviazione.
* **Abilitare l'opzione di disponibilità elevata per mantenere una copia secondaria di una Cache Redis di Azure.** Quando si usa la Cache Redis di Azure, scegliere l'opzione Standard per mantenere una copia secondaria del contenuto. Per altre informazioni, vedere [Creare una cache in Cache Redis di Azure](https://msdn.microsoft.com/library/dn690516.aspx).

## <a name="errors-and-failures"></a>Errori e operazioni non riuscite
* **Introdurre il concetto di timeout.** Servizi e risorse possono diventare non disponibili, causando la mancata riuscita delle richieste. Assicurarsi che i timeout applicati siano appropriati per ogni servizio o risorsa, oltre che per il client che vi accede. In alcuni casi potrebbe essere opportuno consentire un timeout più lungo per un'istanza specifica di un client, in base al contesto e ad altre azioni eseguite dal client. I timeout molto brevi potrebbero provocare un numero eccessivo di nuovi tentativi per i servizi e le risorse con latenza notevole. I timeout molto lunghi possono provocare il blocco se viene accodato un numero elevato di richieste, in attesa della risposta di un servizio o di una risorsa.
* **Riprovare a eseguire operazioni non riuscite causate da errori temporanei.** Progettare una strategia di tentativi per l'accesso a tutti i servizi e risorse se non supportano i tentativi di connessione automatica. Usare una strategia che includa l'aumento del ritardo tra i tentativi in proporzione all'aumento del numero di errori per impedire il sovraccarico della risorsa e consentire il ripristino e la gestione normali delle richieste in coda. Tentativi continui con ritardi molto brevi possono aggravare il problema.
* **Smettere di inviare richieste per evitare errori a catena** quando i servizi remoti non sono disponibili. In alcune situazioni, errori temporanei o altri errori, dalla perdita parziale di connettività al guasto completo di un servizio, richiedono tempi più lunghi del previsto per tornare alla normalità. Inoltre, se un servizio è molto occupato, un errore in una parte del sistema può causare errori a catena e comportare il blocco di molte operazioni e allo stesso tempo l’utilizzo di risorse di sistema critiche, ad esempio memoria, thread e connessioni di database. Anziché riprovare continuamente a eseguire un'operazione che è improbabile venga eseguita correttamente, l'applicazione deve accettare rapidamente che l'operazione non riesce e gestire correttamente l'errore. È possibile usare il modello a interruttore per rifiutare le richieste di operazioni specifiche per periodi definiti. Per altre informazioni, vedere [Circuit Breaker Pattern](../patterns/circuit-breaker.md) (Modello a interruttore).
* **Comporre o eseguire il fallback di più componenti** per ridurre l'impatto di un servizio specifico offline o non disponibile. Progettare applicazioni per sfruttare più istanze senza influire negativamente sul funzionamento e sulle connessioni esistenti, se possibile. Per ottimizzare la disponibilità, usare più istanze e distribuire le richieste tra di esse, rilevare ed evitare l'invio di richieste a istanze non riuscite.
* **Eseguire il fallback a un altro servizio o un flusso di lavoro** , se possibile. Ad esempio, se non è possibile scrivere nel database SQL, archiviare temporaneamente i dati nell'archivio BLOB. Fornire una funzionalità per la ripetizione delle scritture dell'archivio BLOB nel database SQL quando il servizio risulta disponibile. In alcuni casi, un'operazione non riuscita può avere un'azione alternativa che consente all'applicazione di continuare a funzionare persino in caso di errore di un componente o di un servizio. Se possibile, rilevare gli errori e reindirizzare le richieste ad altri servizi in grado di offrire una funzionalità alternativa adatta, o per eseguire il backup o ridurre le istanze di funzionalità in grado di gestire operazioni di base mentre il servizio primario è offline.

## <a name="monitoring-and-disaster-recovery"></a>Monitoraggio e ripristino di emergenza
* **Fornire strumenti avanzati per probabili errori ed eventi di errore** per segnalare la situazione al personale addetto alle operazioni. Per gli errori che sono probabili ma che non si sono ancora verificati, fornire i dati sufficienti per consentire al personale addetto alle operazioni di determinare la causa, ridurre la situazione e garantire che il sistema rimanga disponibile. Per gli errori che si sono già verificati, l'applicazione deve restituire all'utente un messaggio di errore appropriato, ma deve provare a continuare l'esecuzione, sebbene con funzionalità ridotte. In tutti i casi, il sistema di monitoraggio deve acquisire i dettagli completi per consentire al personale addetto alle operazioni di effettuare un ripristino rapido e, se necessario per progettisti e sviluppatori, di modificare il sistema per impedire che si verifichi nuovamente la situazione.
* **Monitorare l'integrità di sistema mediante l'implementazione di funzioni di controllo.** L'integrità e le prestazioni di un'applicazione possono peggiorare nel tempo senza che il peggioramento sia evidente, fino a quando non si verificano degli errori. Implementare funzioni di tipo probe o di controllo che vengono eseguite regolarmente dall'esterno dell'applicazione. Questi controlli possono essere semplici come la misurazione del tempo di risposta per l'intera applicazione, per le singole parti dell'applicazione, per i singoli servizi utilizzati dall'applicazione o per i singoli componenti. Le funzioni di controllo possono eseguire processi per garantire la produzione di risultati validi, misurare la latenza, controllare la disponibilità ed estrarre informazioni dal sistema.
* **Effettuare regolarmente test di tutti i sistemi di failover e fallback** per garantire che siano disponibili e che funzionino nel modo previsto. Le modifiche ai sistemi e alle operazioni possono influire sulle funzioni di fallback e failover, ma l'impatto potrebbe non essere rilevato fino a quando si verifica un errore nel sistema principale o finché questo non è in overload. Eseguire il test del sistema prima che divenga necessario per risolvere un problema in tempo reale in fase di esecuzione.
* **Eseguire il test dei sistemi di monitoraggio.** I sistemi automatizzati di failover e fallback e la visualizzazione manuale dell'integrità e delle prestazioni del sistema tramite i dashboard dipendono tutti dal funzionamento corretto del monitoraggio e della strumentazione. In caso di errore di questi elementi, in assenza di informazioni importanti o in caso di segnalazione di dati non precisi, un operatore potrebbe non rendersi conto che il sistema è danneggiato o guasto.
* **Tenere traccia dello stato dei flussi di lavoro con esecuzione prolungata** e riprovare in caso di errore. I flussi di lavoro con esecuzione prolungata sono spesso costituiti da più passaggi. Assicurarsi che ogni passaggio sia indipendente e possa essere ripetuto per ridurre al minimo le probabilità della necessità di un rollback dell'intero flusso di lavoro o dell'esecuzione di più transazioni di compensazione. Monitorare e gestire lo stato dei flussi di lavoro a esecuzione prolungata implementando un modello come il [modello supervisore dell'agente dell'utilità di pianificazione](https://msdn.microsoft.com/library/dn589780.aspx).
* **Pianificare il ripristino di emergenza** Creare un piano accettato e interamente testato per qualsiasi tipo di errore che potrebbe influire sulla disponibilità del sistema. Scegliere un'architettura di ripristino di emergenza multisito per tutte le applicazioni di importanza critica. Identificare un proprietario specifico per il piano di ripristino di emergenza che comprende l'automazione e i test. Verificare che il piano sia ben documentato e automatizzare il processo il più possibile. Stabilire una strategia di backup per tutti i dati di riferimento e transazionali e testare il ripristino di questi backup in modo regolare. Eseguire il training del personale addetto alle operazioni di esecuzione del piano ed eseguire simulazioni regolari per convalidare e migliorare il piano.
