---
title: Elenco di controllo per la resilienza per i servizi di Azure
description: Elenco di controllo contenente indicazioni per la resilienza per vari servizi di Azure.
author: petertaylor9999
ms.date: 03/02/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 50808a837132e905cc89c3c43d40852a04f4885c
ms.sourcegitcommit: b2a4eb132857afa70201e28d662f18458865a48e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/05/2018
ms.locfileid: "48819194"
---
# <a name="resiliency-checklist-for-specific-azure-services"></a><span data-ttu-id="e1db4-103">Elenco di controllo per la resilienza per servizi di Azure specifici</span><span class="sxs-lookup"><span data-stu-id="e1db4-103">Resiliency checklist for specific Azure services</span></span>

<span data-ttu-id="e1db4-104">La resilienza è la capacità di un sistema di recuperare in caso di errore e continuare a funzionare ed è uno dei [punti chiave della qualità del software](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="e1db4-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="e1db4-105">Ogni tecnologia ha modalità di errore specifiche che è necessario tenere in considerazione durante la progettazione e l'implementazione di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-105">Every technology has its own particular failure modes, which you must consider when designing and implementing your application.</span></span> <span data-ttu-id="e1db4-106">Usare questo elenco di controllo per esaminare le considerazioni relative alla resilienza per servizi di Azure specifici.</span><span class="sxs-lookup"><span data-stu-id="e1db4-106">Use this checklist to review the resiliency considerations for specific Azure services.</span></span> <span data-ttu-id="e1db4-107">Vedere anche l'[elenco di controllo generale per la resilienza](./resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="e1db4-107">Also review the [general resiliency checklist](./resiliency.md).</span></span>

## <a name="app-service"></a><span data-ttu-id="e1db4-108">Servizio app</span><span class="sxs-lookup"><span data-stu-id="e1db4-108">App Service</span></span>

<span data-ttu-id="e1db4-109">**Usare il livello Standard o Premium.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-109">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="e1db4-110">Questi livelli supportano gli slot di staging e i backup automatici.</span><span class="sxs-lookup"><span data-stu-id="e1db4-110">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="e1db4-111">Per altre informazioni, vedere [Panoramica approfondita dei piani per Servizio app di Azure](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span><span class="sxs-lookup"><span data-stu-id="e1db4-111">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="e1db4-112">**Evitare il ridimensionamento.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-112">**Avoid scaling up or down.**</span></span> <span data-ttu-id="e1db4-113">Selezionare invece un livello e una dimensione di istanza che soddisfino i requisiti di prestazioni in condizioni di carico tipico e quindi [scalare orizzontalmente](/azure/app-service-web/web-sites-scale/) le istanze per gestire le modifiche nel volume del traffico.</span><span class="sxs-lookup"><span data-stu-id="e1db4-113">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="e1db4-114">Il ridimensionamento può determinare il riavvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-114">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="e1db4-115">**Archiviare la configurazione come impostazioni dell'app.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-115">**Store configuration as app settings.**</span></span> <span data-ttu-id="e1db4-116">Usare le impostazioni dell'app per conservare le impostazioni di configurazione come impostazioni dell'app.</span><span class="sxs-lookup"><span data-stu-id="e1db4-116">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="e1db4-117">Definire le impostazioni nei modelli di Resource Manager oppure tramite PowerShell, in modo da poterle applicare come parte di un processo di distribuzione/aggiornamento automatizzato, che è più affidabile.</span><span class="sxs-lookup"><span data-stu-id="e1db4-117">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="e1db4-118">Per altre informazioni, vedere [Configurazione delle app Web in Servizio app di Azure](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-118">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="e1db4-119">**Creare piani di servizio app separati per la produzione e per il test.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-119">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="e1db4-120">Non usare gli slot nella distribuzione di produzione per il test.</span><span class="sxs-lookup"><span data-stu-id="e1db4-120">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="e1db4-121">Tutte le app contenute nello stesso piano di servizio app condividono le stesse istanze di VM.</span><span class="sxs-lookup"><span data-stu-id="e1db4-121">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="e1db4-122">L'inserimento delle distribuzioni di produzione e di test nello stesso piano può influire negativamente sulla distribuzione di produzione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-122">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="e1db4-123">I test di carico, ad esempio, possono ridurre le prestazioni del sito di produzione attivo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-123">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="e1db4-124">Se si inseriscono le distribuzioni di test in un piano separato, le si isola dalla versione di produzione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-124">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="e1db4-125">**Separare le app Web dalle API Web.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-125">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="e1db4-126">Se la soluzione contiene sia un front-end Web che un'API Web, si può considerare di scomporli in app del Servizio app separate.</span><span class="sxs-lookup"><span data-stu-id="e1db4-126">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="e1db4-127">Questa progettazione rende più semplice scomporre la soluzione in base al carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e1db4-127">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="e1db4-128">Si possono eseguire l'app Web e l'API Web in piani di servizio app separati in modo che le si possa scalare in maniera indipendente.</span><span class="sxs-lookup"><span data-stu-id="e1db4-128">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="e1db4-129">Se inizialmente questo livello di scalabilità non è necessario, è possibile distribuire le app nello stesso piano e spostarle successivamente in piani separati, se necessario.</span><span class="sxs-lookup"><span data-stu-id="e1db4-129">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="e1db4-130">**Evitare di usare la funzionalità di backup del Servizio app per eseguire il backup dei database SQL di Azure.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-130">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="e1db4-131">Usare invece i [backup automatici del database SQL][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="e1db4-131">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="e1db4-132">Il backup del Servizio app di Azure esporta il database in un file SQL con estensione bacpac, che ha un costo in DTU.</span><span class="sxs-lookup"><span data-stu-id="e1db4-132">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="e1db4-133">**Distribuire in uno slot di staging.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-133">**Deploy to a staging slot.**</span></span> <span data-ttu-id="e1db4-134">Creare uno slot di distribuzione per lo staging.</span><span class="sxs-lookup"><span data-stu-id="e1db4-134">Create a deployment slot for staging.</span></span> <span data-ttu-id="e1db4-135">Distribuire gli aggiornamenti dell'applicazione nello slot di staging e verificare la distribuzione prima di scambiarla nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-135">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="e1db4-136">In questo modo, diminuiscono le probabilità che si esegua un aggiornamento non corretto nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-136">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="e1db4-137">Assicura inoltre che tutte le istanze siano pronte per essere scambiate nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-137">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="e1db4-138">Molte applicazioni presentano tempi di riscaldamento e di avvio a freddo piuttosto lunghi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-138">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="e1db4-139">Per altre informazioni, vedere [Configurare ambienti di staging per le app Web nel Servizio app di Azure](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-139">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="e1db4-140">**Creare uno slot di distribuzione per contenere l'ultima distribuzione valida nota.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-140">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="e1db4-141">Quando si distribuisce un aggiornamento nell'ambiente di produzione, spostare la distribuzione di produzione precedente nell'ultimo slot valido noto.</span><span class="sxs-lookup"><span data-stu-id="e1db4-141">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="e1db4-142">Questa operazione rende più semplice eseguire il rollback di una distribuzione non corretta.</span><span class="sxs-lookup"><span data-stu-id="e1db4-142">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="e1db4-143">Se viene rilevato un problema in un secondo momento, è possibile ripristinare rapidamente l'ultima versione valida nota.</span><span class="sxs-lookup"><span data-stu-id="e1db4-143">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="e1db4-144">Per altre informazioni, vedere [Applicazione Web di base](../reference-architectures/app-service-web-app/basic-web-app.md).</span><span class="sxs-lookup"><span data-stu-id="e1db4-144">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="e1db4-145">**Abilitare la registrazione diagnostica**, includendo la registrazione delle applicazioni e del server Web.</span><span class="sxs-lookup"><span data-stu-id="e1db4-145">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="e1db4-146">La registrazione è importante per il monitoraggio e la diagnostica.</span><span class="sxs-lookup"><span data-stu-id="e1db4-146">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="e1db4-147">Vedere [Abilitare la registrazione diagnostica per le app Web nel servizio app di Azure](/azure/app-service-web/web-sites-enable-diagnostic-log/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-147">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="e1db4-148">**Registrare nell'archivio BLOB.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-148">**Log to blob storage.**</span></span> <span data-ttu-id="e1db4-149">Questa operazione rende più semplice raccogliere e analizzare i dati.</span><span class="sxs-lookup"><span data-stu-id="e1db4-149">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="e1db4-150">**Creare un account di archiviazione separato per i log.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-150">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="e1db4-151">Non usare lo stesso account di archiviazione per i log e i dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-151">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="e1db4-152">In questo modo si impedisce che la registrazione riduca le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-152">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="e1db4-153">**Monitorare le prestazioni.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-153">**Monitor performance.**</span></span> <span data-ttu-id="e1db4-154">Usare un servizio di monitoraggio delle prestazioni, ad esempio [New Relic](https://newrelic.com/) o [Application Insights](/azure/application-insights/app-insights-overview/) per monitorare le prestazioni dell'applicazione e il comportamento sotto carico.</span><span class="sxs-lookup"><span data-stu-id="e1db4-154">Use a performance monitoring service such as [New Relic](https://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="e1db4-155">Il monitoraggio delle prestazioni offre informazioni approfondite in tempo reale sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-155">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="e1db4-156">Consente di diagnosticare i problemi e di eseguire l'analisi della causa radice degli errori.</span><span class="sxs-lookup"><span data-stu-id="e1db4-156">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

## <a name="application-gateway"></a><span data-ttu-id="e1db4-157">Gateway applicazione</span><span class="sxs-lookup"><span data-stu-id="e1db4-157">Application Gateway</span></span>

<span data-ttu-id="e1db4-158">**Eseguire il provisioning di almeno due istanze.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-158">**Provision at least two instances.**</span></span> <span data-ttu-id="e1db4-159">Distribuire il gateway applicazione con almeno due istanze.</span><span class="sxs-lookup"><span data-stu-id="e1db4-159">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="e1db4-160">Un'istanza singola è un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="e1db4-160">A single instance is a single point of failure.</span></span> <span data-ttu-id="e1db4-161">Usare due o più istanze per la ridondanza e la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="e1db4-161">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="e1db4-162">Per essere idonei al [contratto di servizio](https://azure.microsoft.com/support/legal/sla/application-gateway), è necessario eseguire il provisioning di due o più istanze di medie o grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="e1db4-162">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway), you must provision two or more medium or larger instances.</span></span>

## <a name="cosmos-db"></a><span data-ttu-id="e1db4-163">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e1db4-163">Cosmos DB</span></span>

<span data-ttu-id="e1db4-164">**Replicare il database tra aree.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-164">**Replicate the database across regions.**</span></span> <span data-ttu-id="e1db4-165">Azure Cosmos DB consente di associare qualsiasi numero di aree di Azure a un account del database Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e1db4-165">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="e1db4-166">Un database Microsoft Azure Cosmos DB può avere più aree di lettura e un'area di scrittura.</span><span class="sxs-lookup"><span data-stu-id="e1db4-166">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="e1db4-167">Se si verifica un errore nell'area di scrittura, è possibile leggere da un'altra replica.</span><span class="sxs-lookup"><span data-stu-id="e1db4-167">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="e1db4-168">Il client SDK gestisce questa situazione automaticamente.</span><span class="sxs-lookup"><span data-stu-id="e1db4-168">The Client SDK handles this automatically.</span></span> <span data-ttu-id="e1db4-169">È anche possibile eseguire il failover dell'area di scrittura in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="e1db4-169">You can also fail over the write region to another region.</span></span> <span data-ttu-id="e1db4-170">Per altre informazioni, vedere [Come distribuire i dati a livello globale con Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="e1db4-170">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

## <a name="event-hubs"></a><span data-ttu-id="e1db4-171">Hub eventi</span><span class="sxs-lookup"><span data-stu-id="e1db4-171">Event Hubs</span></span>

<span data-ttu-id="e1db4-172">**Usare i checkpoint.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-172">**Use checkpoints**.</span></span>  <span data-ttu-id="e1db4-173">Un consumer eventi deve scrivere la propria posizione corrente nell'archivio permanente a intervalli di tempo predefiniti.</span><span class="sxs-lookup"><span data-stu-id="e1db4-173">An event consumer should write its current position to persistent storage at some predefined interval.</span></span> <span data-ttu-id="e1db4-174">In tal modo, se si verifica un errore del consumer (ad esempio, in caso di arresto anomalo del consumer o errore dell'host), una nuova istanza può riprendere la lettura del flusso dall'ultima posizione registrata.</span><span class="sxs-lookup"><span data-stu-id="e1db4-174">That way, if the consumer experiences a fault (for example, the consumer crashes, or the host fails), then a new instance can resume reading the stream from the last recorded position.</span></span> <span data-ttu-id="e1db4-175">Per altre informazioni, vedere [Consumer eventi](/azure/event-hubs/event-hubs-features#event-consumers).</span><span class="sxs-lookup"><span data-stu-id="e1db4-175">For more information, see [Event consumers](/azure/event-hubs/event-hubs-features#event-consumers).</span></span>

<span data-ttu-id="e1db4-176">**Gestire i messaggi duplicati.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-176">**Handle duplicate messages.**</span></span> <span data-ttu-id="e1db4-177">In caso di errore di un consumer eventi, l'elaborazione dei messaggi viene ripresa dall'ultimo checkpoint registrato.</span><span class="sxs-lookup"><span data-stu-id="e1db4-177">If an event consumer fails, message processing is resumed from the last recorded checkpoint.</span></span> <span data-ttu-id="e1db4-178">I messaggi che sono già stati elaborati dopo l'ultimo checkpoint verranno elaborati di nuovo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-178">Any messages that were already processed after the last checkpoint will be processed again.</span></span> <span data-ttu-id="e1db4-179">È quindi necessario che la logica di elaborazione dei messaggi sia idempotente o che l'applicazione possa deduplicare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-179">Therefore, your message processing logic must be idempotent, or the application must be able to deduplicate messages.</span></span>

<span data-ttu-id="e1db4-180">**Gestire le eccezioni.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-180">**Handle exceptions.**.</span></span> <span data-ttu-id="e1db4-181">Un consumer eventi in genere elabora un batch di messaggi in un ciclo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-181">An event consumer typically processes a batch of messages in a loop.</span></span> <span data-ttu-id="e1db4-182">È consigliabile gestire le eccezioni all'interno di questo ciclo di elaborazione per evitare di perdere un intero batch di messaggi se un singolo messaggio causa un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-182">You should handle exceptions within this processing loop to avoid losing an entire batch of messages if a single message causes an exception.</span></span>

<span data-ttu-id="e1db4-183">**Usare una coda di messaggi non recapitabili.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-183">**Use a dead-letter queue.**</span></span> <span data-ttu-id="e1db4-184">Se l'elaborazione di un messaggio determina un errore non temporaneo, inserire il messaggio in una coda di messaggi non recapitabili per poterne monitorare lo stato.</span><span class="sxs-lookup"><span data-stu-id="e1db4-184">If processing a message results in a non-transient failure, put the message onto a dead-letter queue, so that you can track the status.</span></span> <span data-ttu-id="e1db4-185">A seconda dello scenario, è possibile eseguire un nuovo tentativo in un secondo momento, applicare una transazione di compensazione o effettuare altre azioni.</span><span class="sxs-lookup"><span data-stu-id="e1db4-185">Depending on the scenario, you might retry the message later, apply a compensating transaction, or take some other action.</span></span> <span data-ttu-id="e1db4-186">Si noti che Hub eventi non ha funzionalità predefinite per l'inserimento in una coda di messaggi non recapitabili.</span><span class="sxs-lookup"><span data-stu-id="e1db4-186">Note that Event Hubs does not have any built-in dead-letter queue functionality.</span></span> <span data-ttu-id="e1db4-187">È possibile usare l'archivio code o il bus di servizio di Azure per implementare una coda di messaggi non recapitabili oppure usare Funzioni di Azure o altri meccanismi di gestione eventi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-187">You can use Azure Queue Storage or Service Bus to implement a dead-letter queue, or use Azure Functions or some other eventing mechanism.</span></span>  

<span data-ttu-id="e1db4-188">**Implementare il ripristino di emergenza effettuando il failover in uno spazio dei nomi di Hub eventi secondario.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-188">**Implement disaster recovery by failing over to a secondary Event Hubs namespace.**</span></span> <span data-ttu-id="e1db4-189">Per altre informazioni, vedere [Ripristino di emergenza geografico nel servizio Hub eventi di Azure](/azure/event-hubs/event-hubs-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="e1db4-189">For more information, see [Azure Event Hubs Geo-disaster recovery](/azure/event-hubs/event-hubs-geo-dr).</span></span>

## <a name="redis-cache"></a><span data-ttu-id="e1db4-190">Cache Redis</span><span class="sxs-lookup"><span data-stu-id="e1db4-190">Redis Cache</span></span>

<span data-ttu-id="e1db4-191">**Configurare la replica geografica**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-191">**Configure Geo-replication**.</span></span> <span data-ttu-id="e1db4-192">La replica geografica fornisce un meccanismo per il collegamento di due istanze di Cache Redis di Azure di livello Premium.</span><span class="sxs-lookup"><span data-stu-id="e1db4-192">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="e1db4-193">I dati scritti nella cache primaria vengono replicati in una cache secondaria di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="e1db4-193">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="e1db4-194">Per altre informazioni, vedere [Come configurare la replica geografica per Cache Redis di Azure](/azure/redis-cache/cache-how-to-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="e1db4-194">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="e1db4-195">**Configurare la persistenza dei dati.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-195">**Configure data persistence.**</span></span> <span data-ttu-id="e1db4-196">La persistenza di Redis consente di rendere persistenti i dati archiviati in Redis.</span><span class="sxs-lookup"><span data-stu-id="e1db4-196">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="e1db4-197">È inoltre possibile creare snapshot ed eseguire il backup dei dati, per consentirne il caricamento in caso di errore hardware.</span><span class="sxs-lookup"><span data-stu-id="e1db4-197">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="e1db4-198">Per altre informazioni, vedere [Come configurare la persistenza dei dati per una Cache Redis di Azure Premium](/azure/redis-cache/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="e1db4-198">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="e1db4-199">Se si usa Redis Cache come cache di dati temporanea e non come archivio persistente, questi consigli potrebbero non essere applicabili.</span><span class="sxs-lookup"><span data-stu-id="e1db4-199">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

## <a name="search"></a><span data-ttu-id="e1db4-200">Ricerca</span><span class="sxs-lookup"><span data-stu-id="e1db4-200">Search</span></span>

<span data-ttu-id="e1db4-201">**Eseguire il provisioning di più repliche.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-201">**Provision more than one replica.**</span></span> <span data-ttu-id="e1db4-202">Usare almeno due repliche per la disponibilità elevata in lettura o tre per la disponibilità elevata in scrittura.</span><span class="sxs-lookup"><span data-stu-id="e1db4-202">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="e1db4-203">**Configurare gli indicizzatori per le distribuzioni in più aree.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-203">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="e1db4-204">Con una distribuzione in più aree, si possono considerare le opzioni per la continuità nell'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-204">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="e1db4-205">Se l'origine dati viene replicata geograficamente, occorre puntare ogni indicizzatore di ogni servizio di Ricerca di Azure regionale sulla replica dell'origine dati locale.</span><span class="sxs-lookup"><span data-stu-id="e1db4-205">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="e1db4-206">Tale approccio non è tuttavia consigliato per i set di dati di grandi dimensioni archiviati nel database di SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="e1db4-206">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="e1db4-207">Il motivo è che Ricerca di Azure non può eseguire l'indicizzazione incrementale da repliche di database SQL secondarie, ma solo da repliche primarie.</span><span class="sxs-lookup"><span data-stu-id="e1db4-207">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="e1db4-208">Puntare quindi tutti gli indicizzatori sulla replica primaria.</span><span class="sxs-lookup"><span data-stu-id="e1db4-208">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="e1db4-209">Dopo un failover, puntare gli indicizzatori di Ricerca di Azure sulla nuova replica primaria.</span><span class="sxs-lookup"><span data-stu-id="e1db4-209">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="e1db4-210">Se l'origine dati non è replicata geograficamente, puntare più indicizzatori sulla stessa origine dati, in modo che i servizi di Ricerca di Azure in più aree eseguano l'indicizzazione dall'origine dati in modo continuativo e indipendente.</span><span class="sxs-lookup"><span data-stu-id="e1db4-210">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="e1db4-211">Per altre informazioni, vedere [Considerazioni sulle prestazioni e sull'ottimizzazione di Ricerca di Azure][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="e1db4-211">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

## <a name="service-bus"></a><span data-ttu-id="e1db4-212">Bus di servizio</span><span class="sxs-lookup"><span data-stu-id="e1db4-212">Service Bus</span></span>

<span data-ttu-id="e1db4-213">**Usare il livello Premium per i carichi di lavoro di produzione**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-213">**Use Premium tier for production workloads**.</span></span> <span data-ttu-id="e1db4-214">La [messaggistica Premium del bus di servizio](/azure/service-bus-messaging/service-bus-premium-messaging) offre risorse di elaborazione dedicate e riservate, oltre alla capacità di memoria per supportare velocità effettiva e prestazioni prevedibili.</span><span class="sxs-lookup"><span data-stu-id="e1db4-214">[Service Bus Premium Messaging](/azure/service-bus-messaging/service-bus-premium-messaging) provides dedicated and reserved processing resources, and memory capacity to support predictable performance and throughput.</span></span> <span data-ttu-id="e1db4-215">Il livello di messaggistica Premium consente anche di accedere alle nuove funzionalità disponibili in un primo momento solo per i clienti Premium.</span><span class="sxs-lookup"><span data-stu-id="e1db4-215">Premium Messaging tier also gives you access to new features that are available only to premium customers at first.</span></span> <span data-ttu-id="e1db4-216">È possibile decidere il numero di unità di messaggistica in base ai carichi di lavoro previsti.</span><span class="sxs-lookup"><span data-stu-id="e1db4-216">You can decide the number of messaging units based on expected workloads.</span></span>

<span data-ttu-id="e1db4-217">**Gestire i messaggi duplicati**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-217">**Handle duplicate messages**.</span></span> <span data-ttu-id="e1db4-218">Se in un server di pubblicazione si verifica un errore subito dopo l'invio di un messaggio o se si riscontrano problemi di rete o di sistema, potrebbe erroneamente non venire registrato che il messaggio è stato recapitato e lo stesso messaggio potrebbe essere inviato due volte al sistema.</span><span class="sxs-lookup"><span data-stu-id="e1db4-218">If a publisher fails immediately after sending a message, or experiences network or system issues, it may erroneously fail to record that the message was delivered, and may send the same message to the system twice.</span></span> <span data-ttu-id="e1db4-219">Il bus di servizio può gestire questo problema abilitando il rilevamento dei messaggi duplicati.</span><span class="sxs-lookup"><span data-stu-id="e1db4-219">Service Bus can handle this issue by enabling duplicate detection.</span></span> <span data-ttu-id="e1db4-220">Per altre informazioni, vedere [Rilevamento duplicati](/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="e1db4-220">For more information, see [Duplicate detection](/azure/service-bus-messaging/duplicate-detection).</span></span>

<span data-ttu-id="e1db4-221">**Gestire le eccezioni**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-221">**Handle exceptions**.</span></span> <span data-ttu-id="e1db4-222">Le API di messaggistica generano eccezioni quando si verifica un errore dell'utente, un errore di configurazione o un errore di altro tipo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-222">Messaging APIs generate exceptions when a user error, configuration error, or other error occurs.</span></span> <span data-ttu-id="e1db4-223">Il codice client (mittenti e ricevitori) dovrebbe gestire queste eccezioni nel codice.</span><span class="sxs-lookup"><span data-stu-id="e1db4-223">The client code (senders and receivers) should handle these exceptions in their code.</span></span> <span data-ttu-id="e1db4-224">Questo aspetto è particolarmente importante nell'elaborazione batch, in cui la gestione delle eccezioni può essere usata per evitare di perdere un intero batch di messaggi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-224">This is especially important in batch processing, where exception handling can be used to avoid losing an entire batch of messages.</span></span> <span data-ttu-id="e1db4-225">Per altre informazioni, vedere [Eccezioni di messaggistica del bus di servizio](/azure/service-bus-messaging/service-bus-messaging-exceptions).</span><span class="sxs-lookup"><span data-stu-id="e1db4-225">For more information, see [Service Bus messaging exceptions](/azure/service-bus-messaging/service-bus-messaging-exceptions).</span></span>

<span data-ttu-id="e1db4-226">**Criteri di ripetizione**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-226">**Retry policy**.</span></span> <span data-ttu-id="e1db4-227">Il bus di servizio consente di selezionare i criteri di ripetizione più appropriati per le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e1db4-227">Service Bus allows you to pick the best retry policy for your applications.</span></span> <span data-ttu-id="e1db4-228">Il criterio predefinito consente un massimo di 9 tentativi di ripetizione e un'attesa di 30 secondi, ma può essere modificato ulteriormente.</span><span class="sxs-lookup"><span data-stu-id="e1db4-228">The default policy is to allow 9 maximum retry attempts, and wait for 30 seconds but this can be further adjusted.</span></span> <span data-ttu-id="e1db4-229">Per altre informazioni, vedere [Criteri di ripetizione - Bus di servizio](/azure/architecture/best-practices/retry-service-specific#service-bus).</span><span class="sxs-lookup"><span data-stu-id="e1db4-229">For more information, see [Retry policy – Service Bus](/azure/architecture/best-practices/retry-service-specific#service-bus).</span></span>

<span data-ttu-id="e1db4-230">**Usare una coda di messaggi non recapitabili**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-230">**Use a dead-letter queue**.</span></span> <span data-ttu-id="e1db4-231">Se un messaggio non può essere elaborato o recapitato ad alcun destinatario dopo più tentativi, viene spostato in una coda di messaggi non recapitabili.</span><span class="sxs-lookup"><span data-stu-id="e1db4-231">If a message cannot be processed or delivered to any receiver after multiple retries, it is moved to a dead letter queue.</span></span> <span data-ttu-id="e1db4-232">Implementare un processo per leggere i messaggi dalla coda di messaggi non recapitabili, controllarli e risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="e1db4-232">Implement a process to read messages from the dead letter queue, inspect them, and remediate the problem.</span></span> <span data-ttu-id="e1db4-233">A seconda dello scenario, è possibile riprovare a inviare il messaggio così com'è, apportare le modifiche e riprovare oppure eliminare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="e1db4-233">Depending on the scenario, you might retry the message as-is, make changes and retry, or discard the message.</span></span> <span data-ttu-id="e1db4-234">Per altre informazioni, vedere [Panoramica delle code dei messaggi non recapitabili del bus di servizio](/azure/service-bus-messaging/service-bus-dead-letter-queues).</span><span class="sxs-lookup"><span data-stu-id="e1db4-234">For more information, see [Overview of Service Bus dead-letter queues](/azure/service-bus-messaging/service-bus-dead-letter-queues).</span></span>

<span data-ttu-id="e1db4-235">**Usare il ripristino di emergenza geografico**.</span><span class="sxs-lookup"><span data-stu-id="e1db4-235">**Use Geo-Disaster Recovery**.</span></span> <span data-ttu-id="e1db4-236">Il ripristino di emergenza geografico assicura che l'elaborazione dei dati continui a funzionare in un'area o un data center diverso se un'intera area o data center di Azure diventa non disponibile a causa di una situazione di emergenza.</span><span class="sxs-lookup"><span data-stu-id="e1db4-236">Geo-disaster recovery ensures that data processing continues to operate in a different region or datacenter if an entire Azure region or datacenter becomes unavailable due to a disaster.</span></span> <span data-ttu-id="e1db4-237">Per altre informazioni, vedere [Ripristino di emergenza geografico per il bus di servizio di Azure](/azure/service-bus-messaging/service-bus-geo-dr).</span><span class="sxs-lookup"><span data-stu-id="e1db4-237">For more information, see [Azure Service Bus Geo-disaster recovery](/azure/service-bus-messaging/service-bus-geo-dr).</span></span>


## <a name="storage"></a><span data-ttu-id="e1db4-238">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="e1db4-238">Storage</span></span>

<span data-ttu-id="e1db4-239">**Per i dati dell'applicazione, usare l'Archiviazione con ridondanza geografica e accesso in lettura (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="e1db4-239">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="e1db4-240">L'archiviazione RA-GRS replica i dati in un'area secondaria e fornisce l'accesso in sola lettura dall'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="e1db4-240">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="e1db4-241">Se si verifica un'interruzione dell'archiviazione nell'area primaria, l'applicazione può leggere i dati dall'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="e1db4-241">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="e1db4-242">Per altre informazioni, vedere [Replica di Archiviazione di Azure](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-242">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="e1db4-243">**Per i dischi di VM, usare Managed Disks.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-243">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="e1db4-244">Il servizio [Managed Disks][managed-disks] offre una maggiore affidabilità per le VM in un set di disponibilità, perché fa in modo che i dischi siano sufficientemente isolati gli uni dagli altri per evitare singoli punti di errore.</span><span class="sxs-lookup"><span data-stu-id="e1db4-244">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="e1db4-245">I dischi gestiti, inoltre, non sono soggetti ai limiti delle operazioni di I/O al secondo dei dischi rigidi virtuali creati in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-245">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="e1db4-246">Per altre informazioni, vedere [Gestire la disponibilità delle macchine virtuali Windows in Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="e1db4-246">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="e1db4-247">**Per l'archiviazione code, creare una coda di backup in un'altra area.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-247">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="e1db4-248">Per l'archiviazione code, una replica di sola lettura ha un uso limitato, perché non è possibile accodare o rimuovere oggetti dalla coda.</span><span class="sxs-lookup"><span data-stu-id="e1db4-248">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="e1db4-249">Creare invece una coda di backup in un account di archiviazione in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="e1db4-249">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="e1db4-250">Se si verifica un'interruzione nell'archiviazione, l'applicazione può usare la coda di backup finché l'area primaria non torna nuovamente disponibile.</span><span class="sxs-lookup"><span data-stu-id="e1db4-250">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="e1db4-251">In questo modo, l'applicazione può comunque elaborare nuove richieste.</span><span class="sxs-lookup"><span data-stu-id="e1db4-251">That way, the application can still process new requests.</span></span>  

## <a name="sql-database"></a><span data-ttu-id="e1db4-252">Database SQL</span><span class="sxs-lookup"><span data-stu-id="e1db4-252">SQL Database</span></span>

<span data-ttu-id="e1db4-253">**Usare il livello Standard o Premium.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-253">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="e1db4-254">Questi livelli offrono un periodo di ripristino temporizzato più lungo (35 giorni).</span><span class="sxs-lookup"><span data-stu-id="e1db4-254">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="e1db4-255">Per altre informazioni vedere [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/) (Prestazioni e opzioni del database SQL).</span><span class="sxs-lookup"><span data-stu-id="e1db4-255">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="e1db4-256">**Abilitare il controllo del database SQL.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-256">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="e1db4-257">Il controllo può essere usato per diagnosticare errori umani o attacchi dannosi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-257">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="e1db4-258">Per altre informazioni, vedere l' [Introduzione al controllo del database SQL](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-258">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="e1db4-259">**Usare la replica geografica attiva.** Usare la replica geografica attiva per crearne una secondaria leggibile in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="e1db4-259">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="e1db4-260">Se il database primario restituisce un errore o deve semplicemente essere portato offline, eseguire un failover manuale al database secondario.</span><span class="sxs-lookup"><span data-stu-id="e1db4-260">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="e1db4-261">Nella fase di failover il database secondario rimane in sola lettura.</span><span class="sxs-lookup"><span data-stu-id="e1db4-261">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="e1db4-262">Per altre informazioni, vedere [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) (Replica geografica attiva del database SQL).</span><span class="sxs-lookup"><span data-stu-id="e1db4-262">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="e1db4-263">**Usare il partizionamento orizzontale.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-263">**Use sharding.**</span></span> <span data-ttu-id="e1db4-264">Considerare l'utilizzo del partizionamento orizzontale per il database.</span><span class="sxs-lookup"><span data-stu-id="e1db4-264">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="e1db4-265">Il partizionamento orizzontale può isolare gli errori.</span><span class="sxs-lookup"><span data-stu-id="e1db4-265">Sharding can provide fault isolation.</span></span> <span data-ttu-id="e1db4-266">Per altre informazioni, vedere [Aumentare il numero di istanze con il database SQL di Azure](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-266">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="e1db4-267">**Usare il ripristino temporizzato per recuperare da un errore umano.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-267">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="e1db4-268">Il ripristino temporizzato riporta il database a un punto precedente nel tempo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-268">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="e1db4-269">Per altre informazioni, vedere [Ripristinare un database SQL di Azure mediante i backup automatici del database][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="e1db4-269">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="e1db4-270">**Eseguire il ripristino a livello geografico per recuperare da un'interruzione del servizio.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-270">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="e1db4-271">Il ripristino geografico recupera un database da un backup con ridondanza geografica.</span><span class="sxs-lookup"><span data-stu-id="e1db4-271">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="e1db4-272">Per altre informazioni, vedere [Ripristinare un database SQL di Azure mediante i backup automatici del database][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="e1db4-272">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

## <a name="sql-data-warehouse"></a><span data-ttu-id="e1db4-273">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="e1db4-273">SQL Data Warehouse</span></span>

<span data-ttu-id="e1db4-274">**Non disabilitare il backup geografico.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-274">**Do not disable geo-backup.**</span></span> <span data-ttu-id="e1db4-275">Per impostazione predefinita, SQL Data Warehouse esegue il backup completo dei dati ogni 24 ore per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="e1db4-275">By default, SQL Data Warehouse takes a full backup of your data every 24 hours for disaster recovery.</span></span> <span data-ttu-id="e1db4-276">È sconsigliato disattivare la funzionalità.</span><span class="sxs-lookup"><span data-stu-id="e1db4-276">It is not recommended to turn this feature off.</span></span> <span data-ttu-id="e1db4-277">Per altre informazioni, consultare [Backup geografici](/azure/sql-data-warehouse/backup-and-restore#geo-backups).</span><span class="sxs-lookup"><span data-stu-id="e1db4-277">For more information, see [Geo-backups](/azure/sql-data-warehouse/backup-and-restore#geo-backups).</span></span>

## <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="e1db4-278">SQL Server in esecuzione in una VM</span><span class="sxs-lookup"><span data-stu-id="e1db4-278">SQL Server running in a VM</span></span>

<span data-ttu-id="e1db4-279">**Replicare il database.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-279">**Replicate the database.**</span></span> <span data-ttu-id="e1db4-280">Usare i gruppi di disponibilità AlwaysOn di SQL Server per replicare il database.</span><span class="sxs-lookup"><span data-stu-id="e1db4-280">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="e1db4-281">Questo approccio offre disponibilità elevata se un'istanza di SQL Server ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="e1db4-281">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="e1db4-282">Per altre informazioni, vedere [Eseguire macchine virtuali Windows per un'applicazione a più livelli](../reference-architectures/virtual-machines-windows/n-tier.md).</span><span class="sxs-lookup"><span data-stu-id="e1db4-282">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="e1db4-283">**Eseguire il backup del database.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-283">**Back up the database**.</span></span> <span data-ttu-id="e1db4-284">Se si usa già [Backup di Azure](https://azure.microsoft.com/documentation/services/backup/) per eseguire il backup delle VM, considerare di usare [Backup di Azure per carichi di lavoro di SQL Server con DPM](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-284">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="e1db4-285">Con questo approccio, si usano un solo ruolo di amministratore di backup per l'organizzazione e una procedura di ripristino unificata per le macchine virtuali e SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e1db4-285">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="e1db4-286">Usare altrimenti [Backup gestito di SQL Server in Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1db4-286">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

## <a name="traffic-manager"></a><span data-ttu-id="e1db4-287">Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="e1db4-287">Traffic Manager</span></span>

<span data-ttu-id="e1db4-288">**Eseguire il failback manuale.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-288">**Perform manual failback.**</span></span> <span data-ttu-id="e1db4-289">Dopo un failover di Gestione traffico, eseguire il failback manuale anziché automatico.</span><span class="sxs-lookup"><span data-stu-id="e1db4-289">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="e1db4-290">Prima del failback, verificare che tutti i sottosistemi dell'applicazione siano integri.</span><span class="sxs-lookup"><span data-stu-id="e1db4-290">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="e1db4-291">In caso contrario, si potrebbe creare una situazione in cui l'applicazione passa alternativamente da un data center all'altro.</span><span class="sxs-lookup"><span data-stu-id="e1db4-291">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="e1db4-292">Per altre informazioni, vedere [Eseguire macchine virtuali in più aree per una disponibilità elevata](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="e1db4-292">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="e1db4-293">**Creare un endpoint di probe di integrità.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-293">**Create a health probe endpoint.**</span></span> <span data-ttu-id="e1db4-294">Creare un endpoint personalizzato che segnali l'integrità generale dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-294">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="e1db4-295">Gestione traffico può così eseguire il failover se si verifica un errore in un percorso critico, non solo nel front-end.</span><span class="sxs-lookup"><span data-stu-id="e1db4-295">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="e1db4-296">L'endpoint restituisce un codice di errore HTTP se una qualsiasi dipendenza critica non è integra o non è raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="e1db4-296">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="e1db4-297">Non segnalare tuttavia gli errori relativi ai servizi non critici.</span><span class="sxs-lookup"><span data-stu-id="e1db4-297">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="e1db4-298">In caso contrario, il probe di integrità potrebbe generare il failover quando non è necessario e creare di conseguenza falsi positivi.</span><span class="sxs-lookup"><span data-stu-id="e1db4-298">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="e1db4-299">Per altre informazioni, vedere [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/) (Monitoraggio degli endpoint di Gestione traffico e failover).</span><span class="sxs-lookup"><span data-stu-id="e1db4-299">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="e1db4-300">Macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="e1db4-300">Virtual Machines</span></span>

<span data-ttu-id="e1db4-301">**Evitare di eseguire un carico di lavoro di produzione in una singola VM.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-301">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="e1db4-302">La distribuzione in una singola macchina virtuale non è resistente alle operazioni di manutenzione pianificate o non pianificate.</span><span class="sxs-lookup"><span data-stu-id="e1db4-302">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="e1db4-303">Inserire invece più macchine virtuali in un set di disponibilità o [set di scalabilità di macchine virtuali](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), con un servizio di bilanciamento del carico in primo piano.</span><span class="sxs-lookup"><span data-stu-id="e1db4-303">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="e1db4-304">**Specificare un set di disponibilità quando si esegue il provisioning della VM.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-304">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="e1db4-305">Non è possibile attualmente aggiungere una macchina virtuale a un set di disponibilità dopo avere eseguito il provisioning della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e1db4-305">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="e1db4-306">Quando si aggiunge una nuova macchina virtuale a un set di disponibilità esistente, assicurarsi di creare una scheda di rete per la macchina virtuale e aggiungere la scheda di rete al pool di indirizzi back-end nel servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="e1db4-306">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="e1db4-307">In caso contrario, il servizio di bilanciamento del carico non instrada il traffico di rete a tale macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e1db4-307">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="e1db4-308">**Inserire ogni livello applicazione in un set di disponibilità separato.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-308">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="e1db4-309">In un'applicazione a più livelli, non inserire le macchine virtuali appartenenti a livelli differenti nello stesso set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="e1db4-309">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="e1db4-310">Le macchine virtuali in un set di disponibilità sono posizionate in più domini di errore (FD) e di aggiornamento (UD).</span><span class="sxs-lookup"><span data-stu-id="e1db4-310">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="e1db4-311">Per ottenere il vantaggio della ridondanza dei domini di errore e dei domini di aggiornamento, tuttavia, ogni macchina virtuale nel set di disponibilità deve essere in grado di gestire le stesse richieste del client.</span><span class="sxs-lookup"><span data-stu-id="e1db4-311">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="e1db4-312">**Scegliere le dimensioni di VM corrette in base ai requisiti di prestazioni.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-312">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="e1db4-313">Quando si sposta un carico di lavoro esistente in Azure, per iniziare scegliere le dimensioni di VM più simili a quelle dei server locali.</span><span class="sxs-lookup"><span data-stu-id="e1db4-313">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="e1db4-314">Misurare quindi le prestazioni del carico di lavoro effettivo in relazione agli aspetti di CPU, memoria e operazioni di I/O al secondo del disco e regolare le dimensioni secondo le necessità.</span><span class="sxs-lookup"><span data-stu-id="e1db4-314">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="e1db4-315">Ciò aiuta a garantire il corretto funzionamento dell'applicazione in un ambiente cloud.</span><span class="sxs-lookup"><span data-stu-id="e1db4-315">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="e1db4-316">Inoltre, se sono necessarie più schede di interfaccia di rete, tenerne presente il limite per ogni dimensione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-316">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="e1db4-317">**Usare Managed Disks per i dischi rigidi virtuali.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-317">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="e1db4-318">Il servizio [Managed Disks][managed-disks] offre una maggiore affidabilità per le VM in un set di disponibilità, perché fa in modo che i dischi siano sufficientemente isolati gli uni dagli altri per evitare singoli punti di errore.</span><span class="sxs-lookup"><span data-stu-id="e1db4-318">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="e1db4-319">I dischi gestiti, inoltre, non sono soggetti ai limiti delle operazioni di I/O al secondo dei dischi rigidi virtuali creati in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-319">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="e1db4-320">Per altre informazioni, vedere [Gestire la disponibilità delle macchine virtuali Windows in Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="e1db4-320">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="e1db4-321">**Installare le applicazioni in un disco di dati, non nel disco del sistema operativo.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-321">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="e1db4-322">In caso contrario, è possibile raggiungere il limite delle dimensioni del disco.</span><span class="sxs-lookup"><span data-stu-id="e1db4-322">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="e1db4-323">**Usare Backup di Azure per eseguire il backup delle VM.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-323">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="e1db4-324">I backup proteggono contro la perdita di dati accidentale.</span><span class="sxs-lookup"><span data-stu-id="e1db4-324">Backups protect against accidental data loss.</span></span> <span data-ttu-id="e1db4-325">Per altre informazioni, vedere [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/) (Proteggere le VM di Azure con l'insieme di credenziali dei servizi di ripristino).</span><span class="sxs-lookup"><span data-stu-id="e1db4-325">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="e1db4-326">**Abilitare i log di diagnostica**, inclusi le metriche di integrità di base, i log dell'infrastruttura e la [diagnostica di avvio][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="e1db4-326">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="e1db4-327">La diagnostica di avvio permette di diagnosticare gli errori di avvio quando la VM passa a uno stato non avviabile.</span><span class="sxs-lookup"><span data-stu-id="e1db4-327">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="e1db4-328">Per altre informazioni, vedere [Overview of Azure Diagnostic Logs][diagnostics-logs] (Panoramica dei log di diagnostica di Azure).</span><span class="sxs-lookup"><span data-stu-id="e1db4-328">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="e1db4-329">**Usare l'estensione AzureLogCollector.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-329">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="e1db4-330">Solo VM Windows. Questa estensione aggrega i log della piattaforma Azure e li carica in Archiviazione di Azure, senza che l'operatore acceda in remoto alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e1db4-330">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="e1db4-331">Per altre informazioni, vedere [Estensione AzureLogCollector](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e1db4-331">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="virtual-network"></a><span data-ttu-id="e1db4-332">Rete virtuale</span><span class="sxs-lookup"><span data-stu-id="e1db4-332">Virtual Network</span></span>

<span data-ttu-id="e1db4-333">**Per inserire nell'elenco degli elementi consentiti o bloccare gli indirizzi IP pubblici, aggiungere un gruppo di sicurezza di rete (NSG) alla subnet.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-333">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="e1db4-334">Bloccare l'accesso di utenti malintenzionati o consentire l'accesso solo agli utenti che dispongono delle autorizzazioni per accedere all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-334">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="e1db4-335">**Creare un probe di integrità personalizzato.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-335">**Create a custom health probe.**</span></span> <span data-ttu-id="e1db4-336">I probe di integrità di Load Balancer possono testare i protocolli HTTP o TCP.</span><span class="sxs-lookup"><span data-stu-id="e1db4-336">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="e1db4-337">Se una macchina virtuale viene eseguita in un server HTTP, il migliore indicatore dello stato di integrità è un probe HTTP rispetto a un probe TCP.</span><span class="sxs-lookup"><span data-stu-id="e1db4-337">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="e1db4-338">Per un probe HTTP, usare un endpoint personalizzato che segnali l'integrità complessiva dell'applicazione, incluse tutte le dipendenze critiche.</span><span class="sxs-lookup"><span data-stu-id="e1db4-338">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="e1db4-339">Per altre informazioni, vedere [Panoramica di Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="e1db4-339">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="e1db4-340">**Non bloccare il probe di integrità.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-340">**Don't block the health probe.**</span></span> <span data-ttu-id="e1db4-341">Il probe di integrità di Load Balancer viene inviato da un indirizzo IP noto, 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="e1db4-341">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="e1db4-342">Non bloccare il traffico da o verso questo indirizzo IP nei criteri del firewall o nelle regole del gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="e1db4-342">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="e1db4-343">Se si blocca il probe di integrità, il servizio di bilanciamento del carico rimuove la macchina virtuale dalla rotazione.</span><span class="sxs-lookup"><span data-stu-id="e1db4-343">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="e1db4-344">**Abilitare la registrazione di Load Balancer.**</span><span class="sxs-lookup"><span data-stu-id="e1db4-344">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="e1db4-345">I log mostrano il numero di macchine virtuali nel back-end che non ricevono il traffico di rete a causa di risposte del probe non riuscite.</span><span class="sxs-lookup"><span data-stu-id="e1db4-345">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="e1db4-346">Per altre informazioni, vedere [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/) (Analisi dei log per Azure Load Balancer).</span><span class="sxs-lookup"><span data-stu-id="e1db4-346">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>

<!-- links -->
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
