---
title: Identificazione dei limiti dei microservizi
description: Identificazione dei limiti dei microservizi.
author: MikeWasson
ms.date: 10/23/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: 961dd98081978c312ca6e0e347c66bef70f01624
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54484194"
---
# <a name="designing-microservices-identifying-microservice-boundaries"></a><span data-ttu-id="ce748-103">Progettazione di microservizi: Identificazione dei limiti dei microservizi</span><span class="sxs-lookup"><span data-stu-id="ce748-103">Designing microservices: Identifying microservice boundaries</span></span>

<span data-ttu-id="ce748-104">Definizione delle dimensioni corrette di un microservizio</span><span class="sxs-lookup"><span data-stu-id="ce748-104">What is the right size for a microservice?</span></span> <span data-ttu-id="ce748-105">Nella definizione delle dimensioni, vengono spesso consigliate vaghe vie di mezzo &mdash; che tuttavia non sono molto utili nella pratica.</span><span class="sxs-lookup"><span data-stu-id="ce748-105">You often hear something to the effect of, "not too big and not too small" &mdash; and while that's certainly correct, it's not very helpful in practice.</span></span> <span data-ttu-id="ce748-106">Se tuttavia si inizia da un modello di dominio progettato con attenzione, è molto più facile definire i microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-106">But if you start from a carefully designed domain model, it's much easier to reason about microservices.</span></span>

![Diagramma dei contesti delimitati](./images/bounded-contexts.png)

## <a name="from-domain-model-to-microservices"></a><span data-ttu-id="ce748-108">Dal modello di dominio ai microservizi</span><span class="sxs-lookup"><span data-stu-id="ce748-108">From domain model to microservices</span></span>

<span data-ttu-id="ce748-109">Nel [capitolo precedente](./domain-analysis.md) è stato definito un set di contesti delimitati per l'applicazione di recapito tramite drone.</span><span class="sxs-lookup"><span data-stu-id="ce748-109">In the [previous chapter](./domain-analysis.md), we defined a set of bounded contexts for the Drone Delivery application.</span></span> <span data-ttu-id="ce748-110">È stato esaminato più attentamente uno di questi contesti delimitati, ovvero il contesto delimitato per il recapito, ed è stato identificato un set di entità, aggregazioni e servizi di dominio per tale contesto delimitato.</span><span class="sxs-lookup"><span data-stu-id="ce748-110">Then we looked more closely at one of these bounded contexts, the Shipping bounded context, and identified a set of entities, aggregates, and domain services for that bounded context.</span></span>

<span data-ttu-id="ce748-111">Ora è possibile passare dal modello di dominio alla progettazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ce748-111">Now we're ready to go from domain model to application design.</span></span> <span data-ttu-id="ce748-112">Di seguito è riportato un approccio che è possibile usare per ottenere microservizi dal modello di dominio.</span><span class="sxs-lookup"><span data-stu-id="ce748-112">Here's an approach that you can use to derive microservices from the domain model.</span></span>

1. <span data-ttu-id="ce748-113">Iniziare con un contesto delimitato.</span><span class="sxs-lookup"><span data-stu-id="ce748-113">Start with a bounded context.</span></span> <span data-ttu-id="ce748-114">In generale, la funzionalità presente in un microservizio non deve estendersi oltre un contesto delimitato.</span><span class="sxs-lookup"><span data-stu-id="ce748-114">In general, the functionality in a microservice should not span more than one bounded context.</span></span> <span data-ttu-id="ce748-115">Un contesto delimitato segna per definizione il limite di un modello di dominio specifico.</span><span class="sxs-lookup"><span data-stu-id="ce748-115">By definition, a bounded context marks the boundary of a particular domain model.</span></span> <span data-ttu-id="ce748-116">Se si nota che un microservizio combina modelli di dominio diversi, potrebbe essere necessario tornare indietro e perfezionare l'analisi del dominio.</span><span class="sxs-lookup"><span data-stu-id="ce748-116">If you find that a microservice mixes different domain models together, that's a sign that you may need to go back and refine your domain analysis.</span></span>

2. <span data-ttu-id="ce748-117">Esaminare quindi le aggregazioni nel modello di dominio.</span><span class="sxs-lookup"><span data-stu-id="ce748-117">Next, look at the aggregates in your domain model.</span></span> <span data-ttu-id="ce748-118">Le aggregazioni sono spesso buoni candidati per i microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-118">Aggregates are often good candidates for microservices.</span></span> <span data-ttu-id="ce748-119">Un'aggregazione progettata correttamente presenta molte delle caratteristiche di un microservizio ben progettato, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="ce748-119">A well-designed aggregate exhibits many of the characteristics of a well-designed microservice, such as:</span></span>

    - <span data-ttu-id="ce748-120">Un'aggregazione deriva da requisiti aziendali piuttosto che da considerazioni di tipo tecnico, ad esempio l'accesso ai dati o la messaggistica.</span><span class="sxs-lookup"><span data-stu-id="ce748-120">An aggregate is derived from business requirements, rather than technical concerns such as data access or messaging.</span></span>
    - <span data-ttu-id="ce748-121">Un'aggregazione deve avere un'elevata coesione funzionale.</span><span class="sxs-lookup"><span data-stu-id="ce748-121">An aggregate should have high functional cohesion.</span></span>
    - <span data-ttu-id="ce748-122">Un'aggregazione è un limite di persistenza.</span><span class="sxs-lookup"><span data-stu-id="ce748-122">An aggregate is a boundary of persistence.</span></span>
    - <span data-ttu-id="ce748-123">Le aggregazioni devono essere a regime di controllo libero.</span><span class="sxs-lookup"><span data-stu-id="ce748-123">Aggregates should be loosely coupled.</span></span>

3. <span data-ttu-id="ce748-124">Anche i servizi di dominio sono buoni candidati per i microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-124">Domain services are also good candidates for microservices.</span></span> <span data-ttu-id="ce748-125">I servizi di dominio sono operazioni senza stato tra più aggregazioni.</span><span class="sxs-lookup"><span data-stu-id="ce748-125">Domain services are stateless operations across multiple aggregates.</span></span> <span data-ttu-id="ce748-126">Un esempio tipico è un flusso di lavoro che comprende più microservizi,</span><span class="sxs-lookup"><span data-stu-id="ce748-126">A typical example is a workflow that involves several microservices.</span></span> <span data-ttu-id="ce748-127">come nell'applicazione di recapito tramite drone che verrà esaminata.</span><span class="sxs-lookup"><span data-stu-id="ce748-127">We'll see an example of this in the Drone Delivery application.</span></span>

4. <span data-ttu-id="ce748-128">Considerare infine i requisiti non funzionali.</span><span class="sxs-lookup"><span data-stu-id="ce748-128">Finally, consider non-functional requirements.</span></span> <span data-ttu-id="ce748-129">Esaminare fattori quali dimensioni del team, tipi di dati, tecnologie, requisiti di scalabilità, requisiti di disponibilità e requisiti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ce748-129">Look at factors such as team size, data types, technologies, scalability requirements, availability requirements, and security requirements.</span></span> <span data-ttu-id="ce748-130">Questi fattori possono indurre a scomporre ulteriormente un microservizio in due o più servizi più piccoli oppure a effettuare l'operazione inversa, riunendo più microservizi in uno.</span><span class="sxs-lookup"><span data-stu-id="ce748-130">These factors may lead you to further decompose a microservice into two or more smaller services, or do the opposite and combine several microservices into one.</span></span>

<span data-ttu-id="ce748-131">Dopo aver identificato i microservizi nell'applicazione, convalidare la progettazione in base ai criteri seguenti:</span><span class="sxs-lookup"><span data-stu-id="ce748-131">After you identify the microservices in your application, validate your design against the following criteria:</span></span>

- <span data-ttu-id="ce748-132">Ogni servizio ha un'unica responsabilità.</span><span class="sxs-lookup"><span data-stu-id="ce748-132">Each service has a single responsibility.</span></span>
- <span data-ttu-id="ce748-133">Non sono presenti chiamate frammentate tra servizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-133">There are no chatty calls between services.</span></span> <span data-ttu-id="ce748-134">Se la suddivisione delle funzioni in due servizi provoca un'eccessiva frammentazione dei servizi stessi, è possibile che queste funzioni debbano risiedere nello stesso servizio.</span><span class="sxs-lookup"><span data-stu-id="ce748-134">If splitting functionality into two services causes them to be overly chatty, it may be a symptom that these functions belong in the same service.</span></span>
- <span data-ttu-id="ce748-135">Ogni servizio è sufficientemente piccolo da poter essere creato da un team di piccole dimensioni che opera in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="ce748-135">Each service is small enough that it can be built by a small team working independently.</span></span>
- <span data-ttu-id="ce748-136">Non sono presenti interdipendenze che richiedono la distribuzione di due o più servizi contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ce748-136">There are no inter-dependencies that will require two or more services to be deployed in lock-step.</span></span> <span data-ttu-id="ce748-137">Deve essere sempre possibile distribuire un servizio senza ridistribuirne altri.</span><span class="sxs-lookup"><span data-stu-id="ce748-137">It should always be possible to deploy a service without redeploying any other services.</span></span>
- <span data-ttu-id="ce748-138">I servizi non sono strettamente collegati e possono evolvere in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="ce748-138">Services are not tightly coupled, and can evolve independently.</span></span>
- <span data-ttu-id="ce748-139">I limiti dei servizi non creeranno problemi di coerenza o integrità dei dati.</span><span class="sxs-lookup"><span data-stu-id="ce748-139">Your service boundaries will not create problems with data consistency or integrity.</span></span> <span data-ttu-id="ce748-140">In alcuni casi è importante mantenere la coerenza dei dati inserendo la funzionalità in un singolo microservizio.</span><span class="sxs-lookup"><span data-stu-id="ce748-140">Sometimes it's important to maintain data consistency by putting functionality into a single microservice.</span></span> <span data-ttu-id="ce748-141">Ciò premesso, valutare se è realmente necessaria una coerenza di alto livello.</span><span class="sxs-lookup"><span data-stu-id="ce748-141">That said, consider whether you really need strong consistency.</span></span> <span data-ttu-id="ce748-142">Sono disponibili strategie per la coerenza finale in un sistema distribuito e i vantaggi della scomposizione dei servizi superano spesso la complessità di gestione della coerenza finale.</span><span class="sxs-lookup"><span data-stu-id="ce748-142">There are strategies for addressing eventual consistency in a distributed system, and the benefits of decomposing services often outweigh the challenges of managing eventual consistency.</span></span>

<span data-ttu-id="ce748-143">È soprattutto importante essere pragmatici e ricordare che la progettazione basata su dominio è un processo iterativo.</span><span class="sxs-lookup"><span data-stu-id="ce748-143">Above all, it's important to be pragmatic, and remember that domain-driven design is an iterative process.</span></span> <span data-ttu-id="ce748-144">In caso di dubbi, iniziare con microservizi con granularità grossolana.</span><span class="sxs-lookup"><span data-stu-id="ce748-144">When in doubt, start with more coarse-grained microservices.</span></span> <span data-ttu-id="ce748-145">La suddivisione di un microservizio in due servizi più piccoli è più semplice del refactoring della funzionalità tra più microservizi esistenti.</span><span class="sxs-lookup"><span data-stu-id="ce748-145">Splitting a microservice into two smaller services is easier than refactoring functionality across several existing microservices.</span></span>
  
## <a name="drone-delivery-defining-the-microservices"></a><span data-ttu-id="ce748-146">Recapito tramite drone: definizione dei microservizi</span><span class="sxs-lookup"><span data-stu-id="ce748-146">Drone Delivery: Defining the microservices</span></span>

<span data-ttu-id="ce748-147">È importante ricordare che il team di sviluppo ha identificato le quattro aggregazioni &mdash;Recapito, Pacchetto, Drone e Account &mdash; e due servizi di dominio, ovvero Utilità di pianificazione e Supervisore.</span><span class="sxs-lookup"><span data-stu-id="ce748-147">Recall that the development team had identified the four aggregates &mdash; Delivery, Package, Drone, and Account &mdash; and two domain services, Scheduler and Supervisor.</span></span>

<span data-ttu-id="ce748-148">Recapito e Pacchetto sono candidati ovvi per i microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-148">Delivery and Package are obvious candidates for microservices.</span></span> <span data-ttu-id="ce748-149">L'Utilità di pianificazione e il Supervisore coordinano le attività eseguite da altri microservizi, quindi è opportuno implementare questi servizi di dominio come microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-149">The Scheduler and Supervisor coordinate the activities performed by other microservices, so it makes sense to implement these domain services as microservices.</span></span>

<span data-ttu-id="ce748-150">Drone e Account sono interessanti perché appartengono ad altri contesti delimitati.</span><span class="sxs-lookup"><span data-stu-id="ce748-150">Drone and Account are interesting because they belong to other bounded contexts.</span></span> <span data-ttu-id="ce748-151">Una possibilità è che l'Utilità di pianificazione chiami direttamente i contesti delimitati Drone e Account.</span><span class="sxs-lookup"><span data-stu-id="ce748-151">One option is for the Scheduler to call the Drone and Account bounded contexts directly.</span></span> <span data-ttu-id="ce748-152">Un'altra opzione consiste nel creare i microservizi Drone e Account nel contesto delimitato per il recapito.</span><span class="sxs-lookup"><span data-stu-id="ce748-152">Another option is to create Drone and Account microservices inside the Shipping bounded context.</span></span> <span data-ttu-id="ce748-153">Questi microservizi svolgerebbero una funzione di mediazione tra i contesti delimitati, esponendo API o schemi di dati più adatti al contesto per il recapito.</span><span class="sxs-lookup"><span data-stu-id="ce748-153">These microservices would mediate between the bounded contexts, by exposing APIs or data schemas that are more suited to the Shipping context.</span></span>

<span data-ttu-id="ce748-154">I dettagli dei contesti delimitati per il drone e l'account non rientrano nell'ambito di queste indicazioni, quindi sono stati creati servizi fittizi nell'implementazione di riferimento.</span><span class="sxs-lookup"><span data-stu-id="ce748-154">The details of the Drone and Account bounded contexts are beyond the scope of this guidance, so we created mock services for them in our reference implementation.</span></span> <span data-ttu-id="ce748-155">Ecco alcuni fattori da prendere in considerazione in questa situazione:</span><span class="sxs-lookup"><span data-stu-id="ce748-155">But here are some factors to consider in this situation:</span></span>

- <span data-ttu-id="ce748-156">Qual è il sovraccarico di rete in caso di chiamata diretta all'altro contesto delimitato?</span><span class="sxs-lookup"><span data-stu-id="ce748-156">What is the network overhead of calling directly into the other bounded context?</span></span>

- <span data-ttu-id="ce748-157">Lo schema di dati dell'altro contesto delimitato è idoneo per questo contesto oppure è meglio uno schema personalizzato in funzione di questo contesto delimitato?</span><span class="sxs-lookup"><span data-stu-id="ce748-157">Is the data schema for the other bounded context suitable for this context, or is it better to have a schema that's tailored to this bounded context?</span></span>

- <span data-ttu-id="ce748-158">L'altro contesto delimitato è un sistema legacy?</span><span class="sxs-lookup"><span data-stu-id="ce748-158">Is the other bounded context a legacy system?</span></span> <span data-ttu-id="ce748-159">Se sì, è possibile creare un servizio che funga da [livello antidanneggiamento](../patterns/anti-corruption-layer.md) per le attività di conversione tra il sistema legacy e l'applicazione moderna.</span><span class="sxs-lookup"><span data-stu-id="ce748-159">If so, you might create a service that acts as an [anti-corruption layer](../patterns/anti-corruption-layer.md) to translate between the legacy system and the modern application.</span></span>

- <span data-ttu-id="ce748-160">Qual è la struttura del team?</span><span class="sxs-lookup"><span data-stu-id="ce748-160">What is the team structure?</span></span> <span data-ttu-id="ce748-161">È facile comunicare con il team responsabile dell'altro contesto delimitato?</span><span class="sxs-lookup"><span data-stu-id="ce748-161">Is it easy to communicate with the team that's responsible for the other bounded context?</span></span> <span data-ttu-id="ce748-162">In caso contrario, la creazione di un servizio che funga da intermediario tra i due contesti consente di ridurre il costo delle comunicazioni tra i team.</span><span class="sxs-lookup"><span data-stu-id="ce748-162">If not, creating a service that mediates between the two contexts can help to mitigate the cost of cross-team communication.</span></span>

<span data-ttu-id="ce748-163">Sinora non sono stati presi in considerazione requisiti funzionali.</span><span class="sxs-lookup"><span data-stu-id="ce748-163">So far, we haven't considered any non-functional requirements.</span></span> <span data-ttu-id="ce748-164">Pensando ai requisiti di velocità effettiva dell'applicazione, il team di sviluppo decide di creare un microservizio di inserimento separato responsabile dell'inserimento delle richieste dei client.</span><span class="sxs-lookup"><span data-stu-id="ce748-164">Thinking about the application's throughput requirements, the development team decided to create a separate Ingestion microservice that is responsible for ingesting client requests.</span></span> <span data-ttu-id="ce748-165">Questo microservizio implementerà il [livellamento del carico](../patterns/queue-based-load-leveling.md) inserendo le richieste in ingresso in un buffer per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="ce748-165">This microservice will implement [load leveling](../patterns/queue-based-load-leveling.md) by putting incoming requests into a buffer for processing.</span></span> <span data-ttu-id="ce748-166">L'Utilità di pianificazione leggerà le richieste presenti nel buffer ed eseguirà il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ce748-166">The Scheduler will read the requests from the buffer and execute the workflow.</span></span>

<span data-ttu-id="ce748-167">I requisiti non funzionali inducono il team a creare un servizio aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="ce748-167">Non-functional requirements led the team to create one additional service.</span></span> <span data-ttu-id="ce748-168">Tutti i servizi sono stati sinora incentrati sulla pianificazione e il recapito di pacchetti in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="ce748-168">All of the services so far have been about the process of scheduling and delivering packages in real time.</span></span> <span data-ttu-id="ce748-169">Il sistema deve tuttavia anche inserire la cronologia di ogni recapito nell'archiviazione a lungo termine per l'analisi dei dati.</span><span class="sxs-lookup"><span data-stu-id="ce748-169">But the system also needs to store the history of every delivery in long-term storage for data analysis.</span></span> <span data-ttu-id="ce748-170">Il team considera l'ipotesi di affidare questa attività al servizio di recapito.</span><span class="sxs-lookup"><span data-stu-id="ce748-170">The team considered making this the responsibility of the Delivery service.</span></span> <span data-ttu-id="ce748-171">I requisiti di archiviazione dei dati sono tuttavia sostanzialmente diversi per l'analisi cronologica rispetto alle operazioni in elaborazione (vedere [Considerazioni sui dati](./data-considerations.md)).</span><span class="sxs-lookup"><span data-stu-id="ce748-171">However, the data storage requirements are quite different for historical analysis versus in-flight operations (see [Data considerations](./data-considerations.md)).</span></span> <span data-ttu-id="ce748-172">Il team decide quindi di creare un servizio cronologia di recapito distinto, che rimarrà in ascolto degli eventi DeliveryTracking del servizio di recapito e scriverà gli eventi nell'archiviazione a lungo termine.</span><span class="sxs-lookup"><span data-stu-id="ce748-172">Therefore, the team decided to create a separate Delivery History service, which will listen for DeliveryTracking events from the Delivery service and write the events into long-term storage.</span></span>

<span data-ttu-id="ce748-173">Questa fase del progetto è illustrata nel diagramma seguente:</span><span class="sxs-lookup"><span data-stu-id="ce748-173">The following diagram shows the design at this point:</span></span>

![Diagramma di progettazione](./images/microservices.png)

## <a name="choosing-a-compute-option"></a><span data-ttu-id="ce748-175">Scelta di un'opzione di calcolo</span><span class="sxs-lookup"><span data-stu-id="ce748-175">Choosing a compute option</span></span>

<span data-ttu-id="ce748-176">Il termine *calcolo* fa riferimento al modello di hosting per le risorse di calcolo in cui viene eseguita l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ce748-176">The term *compute* refers to the hosting model for the computing resources that your application runs on.</span></span> <span data-ttu-id="ce748-177">Per un'architettura di microservizi sono particolarmente diffusi due approcci:</span><span class="sxs-lookup"><span data-stu-id="ce748-177">For a microservices architecture, two approaches are especially popular:</span></span>

- <span data-ttu-id="ce748-178">Un agente di orchestrazione dei servizi che gestisce i servizi in esecuzione in nodi dedicati (VM).</span><span class="sxs-lookup"><span data-stu-id="ce748-178">A service orchestrator that manages services running on dedicated nodes (VMs).</span></span>
- <span data-ttu-id="ce748-179">Un'architettura senza server che usa le funzioni come servizio (FaaS).</span><span class="sxs-lookup"><span data-stu-id="ce748-179">A serverless architecture using functions as a service (FaaS).</span></span>

<span data-ttu-id="ce748-180">Anche se queste non sono le uniche opzioni disponibili, si tratta di approcci comprovati alla creazione di microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-180">While these aren't the only options, they are both proven approaches to building microservices.</span></span> <span data-ttu-id="ce748-181">Un'applicazione può includere entrambi gli approcci.</span><span class="sxs-lookup"><span data-stu-id="ce748-181">An application might include both approaches.</span></span>

### <a name="service-orchestrators"></a><span data-ttu-id="ce748-182">Agenti di orchestrazione dei servizi</span><span class="sxs-lookup"><span data-stu-id="ce748-182">Service orchestrators</span></span>

<span data-ttu-id="ce748-183">Un agente di orchestrazione gestisce attività correlate alla distribuzione e alla gestione di un set di servizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-183">An orchestrator handles tasks related to deploying and managing a set of services.</span></span> <span data-ttu-id="ce748-184">Queste attività includono il posizionamento dei servizi nei nodi, il monitoraggio dell'integrità dei servizi, il riavvio dei servizi non integri, il bilanciamento del carico del traffico di rete tra istanze dei servizi, l'individuazione dei servizi, il ridimensionamento del numero di istanze di un servizio e l'applicazione degli aggiornamenti della configurazione.</span><span class="sxs-lookup"><span data-stu-id="ce748-184">These tasks include placing services on nodes, monitoring the health of services, restarting unhealthy services, load balancing network traffic across service instances, service discovery, scaling the number of instances of a service, and applying configuration updates.</span></span> <span data-ttu-id="ce748-185">Gli agenti di orchestrazione più diffusi includono Kubernetes, Service Fabric, DC/OS, e Docker Swarm.</span><span class="sxs-lookup"><span data-stu-id="ce748-185">Popular orchestrators include Kubernetes, Service Fabric, DC/OS, and Docker Swarm.</span></span>

<span data-ttu-id="ce748-186">Nella piattaforma Azure prendere in considerazione le opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ce748-186">On the Azure platform, consider the following options:</span></span>

- <span data-ttu-id="ce748-187">Il [servizio Azure Kubernetes](/azure/aks/) è un ambiente Kubernetes gestito.</span><span class="sxs-lookup"><span data-stu-id="ce748-187">[Azure Kubernetes Service](/azure/aks/) (AKS) is a managed Kubernetes service.</span></span> <span data-ttu-id="ce748-188">Il servizio Azure Container effettua il provisioning di Kubernetes ed espone gli endpoint delle API Kubernetes, ma ospita e gestisce il pannello di controllo di Kubernetes, eseguendo aggiornamenti automatici, applicazione di patch automatica, ridimensionamento automatico e altre attività di gestione.</span><span class="sxs-lookup"><span data-stu-id="ce748-188">AKS provisions Kubernetes and exposes the Kubernetes API endpoints, but hosts and manages the Kubernetes control plane, performing automated upgrades, automated patching, autoscaling, and other management tasks.</span></span> <span data-ttu-id="ce748-189">Il servizio Azure Container può essere considerato "API Kubernetes come servizio".</span><span class="sxs-lookup"><span data-stu-id="ce748-189">You can think of AKS as being "Kubernetes APIs as a service."</span></span>

- <span data-ttu-id="ce748-190">[Service Fabric](/azure/service-fabric/) è una piattaforma di sistemi distribuiti per la creazione di pacchetti, la distribuzione e la gestione di microservizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-190">[Service Fabric](/azure/service-fabric/) is a distributed systems platform for packaging, deploying, and managing microservices.</span></span> <span data-ttu-id="ce748-191">I microservizi possono essere distribuiti in Service Fabric come contenitori, file binari eseguibili oppure come [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction).</span><span class="sxs-lookup"><span data-stu-id="ce748-191">Microservices can be deployed to Service Fabric as containers, as binary executables, or as [Reliable Services](/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="ce748-192">Con il modello di programmazione di Reliable Services, i servizi possono usare direttamente le API di programmazione di Service Fabric per eseguire query sul sistema, creare report di integrità, ricevere notifiche relative a modifiche di configurazione e codice e individuare altri servizi.</span><span class="sxs-lookup"><span data-stu-id="ce748-192">Using the Reliable Services programming model, services can directly use Service Fabric programming APIs to query the system, report health, receive notifications about configuration and code changes, and discover other services.</span></span> <span data-ttu-id="ce748-193">Un fattore essenziale per la differenziazione di Service Fabric è la creazione di servizi con stato tramite [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span><span class="sxs-lookup"><span data-stu-id="ce748-193">A key differentiation with Service Fabric is its strong focus on building stateful services using [Reliable Collections](/azure/service-fabric/service-fabric-reliable-services-reliable-collections).</span></span>

- <span data-ttu-id="ce748-194">Il [servizio Azure Container](/azure/container-service/) è un servizio di Azure che consente di distribuire un cluster DC/OS, Docker Swarm o Kubernetes pronto per la produzione.</span><span class="sxs-lookup"><span data-stu-id="ce748-194">[Azure Container Service](/azure/container-service/) (ACS) is an Azure service that lets you deploy a production-ready DC/OS, Docker Swarm, or Kubernetes cluster.</span></span>

  > [!NOTE]
  > <span data-ttu-id="ce748-195">Anche se Kubernetes è supportato dal servizio Azure Container, è consigliabile usare servizio Azure Kubernetes per l'esecuzione di Kubernetes in Azure.</span><span class="sxs-lookup"><span data-stu-id="ce748-195">Although Kubernetes is supported by ACS, we recommended AKS for running Kubernetes on Azure.</span></span> <span data-ttu-id="ce748-196">servizio Azure Kubernetes offre funzionalità di gestione avanzate e maggiori vantaggi in termini di costi.</span><span class="sxs-lookup"><span data-stu-id="ce748-196">AKS provides enhanced management capabilities and cost benefits.</span></span>

### <a name="containers"></a><span data-ttu-id="ce748-197">Contenitori</span><span class="sxs-lookup"><span data-stu-id="ce748-197">Containers</span></span>

<span data-ttu-id="ce748-198">Talvolta si parla di contenitori e microservizi come se fossero sinonimi.</span><span class="sxs-lookup"><span data-stu-id="ce748-198">Sometimes people talk about containers and microservices as if they were the same thing.</span></span> <span data-ttu-id="ce748-199">Anche se ciò non corrisponde al vero &mdash; non sono necessari contenitori per creare microservizi&mdash; i contenitori offrono effettivamente alcuni vantaggi particolarmente significativi per i microservizi, tra cui:</span><span class="sxs-lookup"><span data-stu-id="ce748-199">While that's not true &mdash; you don't need containers to build microservices &mdash; containers do have some benefits that are particularly relevant to microservices, such as:</span></span>

- <span data-ttu-id="ce748-200">**Portabilità**.</span><span class="sxs-lookup"><span data-stu-id="ce748-200">**Portability**.</span></span> <span data-ttu-id="ce748-201">Un'immagine del contenitore è un pacchetto autonomo che viene eseguito senza dover installare librerie o altre dipendenze.</span><span class="sxs-lookup"><span data-stu-id="ce748-201">A container image is a standalone package that runs without needing to install libraries or other dependencies.</span></span> <span data-ttu-id="ce748-202">Ciò ne semplifica la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ce748-202">That makes them easy to deploy.</span></span> <span data-ttu-id="ce748-203">I contenitori possono essere avviati e arrestati rapidamente, quindi è possibile creare nuove istanze per gestire un carico maggiore o eseguire il ripristino dopo un errore di nodo.</span><span class="sxs-lookup"><span data-stu-id="ce748-203">Containers can be started and stopped quickly, so you can spin up new instances to handle more load or to recover from node failures.</span></span>

- <span data-ttu-id="ce748-204">**Densità**.</span><span class="sxs-lookup"><span data-stu-id="ce748-204">**Density**.</span></span> <span data-ttu-id="ce748-205">I contenitori sono leggeri rispetto all'esecuzione di una macchina virtuale, perché condividono risorse del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="ce748-205">Containers are lightweight compared with running a virtual machine, because they share OS resources.</span></span> <span data-ttu-id="ce748-206">È quindi possibile riunire più contenitori in un singolo nodo, operazione particolarmente utile quando l'applicazione è costituita da molti servizi di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="ce748-206">That makes it possible to pack multiple containers onto a single node, which is especially useful when the application consists of many small services.</span></span>

- <span data-ttu-id="ce748-207">**Isolamento delle risorse**.</span><span class="sxs-lookup"><span data-stu-id="ce748-207">**Resource isolation**.</span></span> <span data-ttu-id="ce748-208">È possibile limitare la quantità di memoria e CPU disponibile per un contenitore, assicurando così che un processo con eccessivo tempo di esecuzione non esaurisca le risorse dell'host.</span><span class="sxs-lookup"><span data-stu-id="ce748-208">You can limit the amount of memory and CPU that is available to a container, which can help to ensure that a runaway process doesn't exhaust the host resources.</span></span> <span data-ttu-id="ce748-209">Per altre informazioni, vedere [Modello A scomparti](../patterns/bulkhead.md).</span><span class="sxs-lookup"><span data-stu-id="ce748-209">See the [Bulkhead pattern](../patterns/bulkhead.md) for more information.</span></span>

### <a name="serverless-functions-as-a-service"></a><span data-ttu-id="ce748-210">Senza server (funzioni come servizio)</span><span class="sxs-lookup"><span data-stu-id="ce748-210">Serverless (Functions as a Service)</span></span>

<span data-ttu-id="ce748-211">Con un'architettura [serverless](https://azure.microsoft.com/solutions/serverless/) non si gestiscono le macchine virtuali o l'infrastruttura di rete virtuale,</span><span class="sxs-lookup"><span data-stu-id="ce748-211">With a [serverless](https://azure.microsoft.com/solutions/serverless/) architecture, you don't manage the VMs or the virtual network infrastructure.</span></span> <span data-ttu-id="ce748-212">ma si distribuisce il codice e il servizio di hosting gestisce l'inserimento di tale codice in una VM e la relativa esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ce748-212">Instead, you deploy code and the hosting service handles putting that code onto a VM and executing it.</span></span> <span data-ttu-id="ce748-213">Questo approccio tende a preferire piccole funzioni granulari coordinate tramite trigger basati su eventi.</span><span class="sxs-lookup"><span data-stu-id="ce748-213">This approach tends to favor small granular functions that are coordinated using event-based triggers.</span></span> <span data-ttu-id="ce748-214">Ad esempio, un messaggio inserito in una coda può attivare una funzione che legge la coda ed elabora il messaggio.</span><span class="sxs-lookup"><span data-stu-id="ce748-214">For example, a message being placed onto a queue might trigger a function that reads from the queue and processes the message.</span></span>

<span data-ttu-id="ce748-215">[Funzioni di Azure][functions] è un servizio di calcolo senza server che supporta diversi trigger di funzione, incluse le richieste HTTP, le code del bus di servizio e gli eventi di Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ce748-215">[Azure Functions][functions] is a serverless compute service that supports various function triggers, including HTTP requests, Service Bus queues, and Event Hubs events.</span></span> <span data-ttu-id="ce748-216">Per un elenco completo, vedere [Concetti relativi a trigger e associazioni in Funzioni di Azure][functions-triggers].</span><span class="sxs-lookup"><span data-stu-id="ce748-216">For a complete list, see [Azure Functions triggers and bindings concepts][functions-triggers].</span></span> <span data-ttu-id="ce748-217">Prendere in considerazione anche [Griglia di eventi di Azure][event-grid], che è un servizio di routing di eventi gestito in Azure.</span><span class="sxs-lookup"><span data-stu-id="ce748-217">Also consider [Azure Event Grid][event-grid], which is a managed event routing service in Azure.</span></span>

<!-- markdownlint-disable MD026 -->

### <a name="orchestrator-or-serverless"></a><span data-ttu-id="ce748-218">Agente di orchestrazione o senza server?</span><span class="sxs-lookup"><span data-stu-id="ce748-218">Orchestrator or serverless?</span></span>

<!-- markdownlint-enable MD026 -->

<span data-ttu-id="ce748-219">Ecco alcuni fattori da considerare nella scelta tra un approccio con agente di orchestrazione e un approccio senza server.</span><span class="sxs-lookup"><span data-stu-id="ce748-219">Here are some factors to consider when choosing between an orchestrator approach and a serverless approach.</span></span>

<span data-ttu-id="ce748-220">**Gestibilità**. Un'applicazione senza server è semplice da gestire perché la piattaforma gestisce automaticamente tutte le risorse di calcolo.</span><span class="sxs-lookup"><span data-stu-id="ce748-220">**Manageability** A serverless application is easy to manage, because the platform manages all the of compute resources for you.</span></span> <span data-ttu-id="ce748-221">Anche se l'agente di orchestrazione estrae alcuni aspetti della gestione e configurazione di un cluster, non nasconde completamente le macchine virtuali di sottostanti.</span><span class="sxs-lookup"><span data-stu-id="ce748-221">While an orchestrator abstracts some aspects of managing and configuring a cluster, it does not completely hide the underlying VMs.</span></span> <span data-ttu-id="ce748-222">Con un agente di orchestrazione è necessario tener conto di aspetti quali il bilanciamento del carico, l'utilizzo della CPU e la rete.</span><span class="sxs-lookup"><span data-stu-id="ce748-222">With an orchestrator, you will need to think about issues such as load balancing, CPU and memory usage, and networking.</span></span>

<span data-ttu-id="ce748-223">**Flessibilità e controllo**.</span><span class="sxs-lookup"><span data-stu-id="ce748-223">**Flexibility and control**.</span></span> <span data-ttu-id="ce748-224">Un agente di orchestrazione offre un elevato livello di controllo sulla configurazione e la gestione dei servizi e del cluster.</span><span class="sxs-lookup"><span data-stu-id="ce748-224">An orchestrator gives you a great deal of control over configuring and managing your services and the cluster.</span></span> <span data-ttu-id="ce748-225">Il compromesso è la maggiore complessità.</span><span class="sxs-lookup"><span data-stu-id="ce748-225">The tradeoff is additional complexity.</span></span> <span data-ttu-id="ce748-226">Con un'architettura senza server si rinuncia a parte del controllo perché questi dettagli vengono estratti.</span><span class="sxs-lookup"><span data-stu-id="ce748-226">With a serverless architecture, you give up some degree of control because these details are abstracted.</span></span>

<span data-ttu-id="ce748-227">**Portabilità**.</span><span class="sxs-lookup"><span data-stu-id="ce748-227">**Portability**.</span></span> <span data-ttu-id="ce748-228">Tutti gli agenti di orchestrazione qui elencati (Kubernetes, DC/OS, Docker Swarm e Service Fabric) possono essere eseguiti in locale oppure in più cloud pubblici.</span><span class="sxs-lookup"><span data-stu-id="ce748-228">All of the orchestrators listed here (Kubernetes, DC/OS, Docker Swarm, and Service Fabric) can run on-premises or in multiple public clouds.</span></span>

<span data-ttu-id="ce748-229">**Integrazione delle applicazioni**.</span><span class="sxs-lookup"><span data-stu-id="ce748-229">**Application integration**.</span></span> <span data-ttu-id="ce748-230">Può essere complicato creare un'applicazione complessa usando un'architettura senza server.</span><span class="sxs-lookup"><span data-stu-id="ce748-230">It can be challenging to build a complex application using a serverless architecture.</span></span> <span data-ttu-id="ce748-231">In Azure è possibile usare le [app per la logica di Azure](/azure/logic-apps/) per coordinare un set di Funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="ce748-231">One option in Azure is to use [Azure Logic Apps](/azure/logic-apps/) to coordinate a set of Azure Functions.</span></span> <span data-ttu-id="ce748-232">Per un esempio di questo approccio, vedere [Creare una funzione che si integra con le app per la logica di Azure](/azure/azure-functions/functions-twitter-email).</span><span class="sxs-lookup"><span data-stu-id="ce748-232">For an example of this approach, see [Create a function that integrates with Azure Logic Apps](/azure/azure-functions/functions-twitter-email).</span></span>

<span data-ttu-id="ce748-233">**Costo**.</span><span class="sxs-lookup"><span data-stu-id="ce748-233">**Cost**.</span></span> <span data-ttu-id="ce748-234">Con un agente di orchestrazione si pagano le macchine virtuali in esecuzione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="ce748-234">With an orchestrator, you pay for the VMs that are running in the cluster.</span></span> <span data-ttu-id="ce748-235">Con un'applicazione senza server si pagano solo le risorse di calcolo effettivamente utilizzate.</span><span class="sxs-lookup"><span data-stu-id="ce748-235">With a serverless application, you pay only for the actual compute resources consumed.</span></span> <span data-ttu-id="ce748-236">In entrambi i casi è necessario tener conto del costo di servizi aggiuntivi, ad esempio archiviazione, database e servizi di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="ce748-236">In both cases, you need to factor in the cost of any additional services, such as storage, databases, and messaging services.</span></span>

<span data-ttu-id="ce748-237">**Scalabilità**.</span><span class="sxs-lookup"><span data-stu-id="ce748-237">**Scalability**.</span></span> <span data-ttu-id="ce748-238">Funzioni di Azure si ridimensiona automaticamente per soddisfare le richieste, in base al numero di eventi in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ce748-238">Azure Functions scales automatically to meet demand, based on the number of incoming events.</span></span> <span data-ttu-id="ce748-239">Con un agente di orchestrazione è possibile aumentare il numero di istanze del servizio in esecuzione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="ce748-239">With an orchestrator, you can scale out by increasing the number of service instances running in the cluster.</span></span> <span data-ttu-id="ce748-240">È anche possibile aumentare il numero di istanze aggiungendo macchine virtuali al cluster.</span><span class="sxs-lookup"><span data-stu-id="ce748-240">You can also scale by adding additional VMs to the cluster.</span></span>

<span data-ttu-id="ce748-241">L'implementazione di riferimento usa principalmente Kubernetes, ma è stato usato Funzioni di Azure per un servizio, ovvero il servizio cronologia di recapito.</span><span class="sxs-lookup"><span data-stu-id="ce748-241">Our reference implementation primarily uses Kubernetes, but we did use Azure Functions for one service, namely the Delivery History service.</span></span> <span data-ttu-id="ce748-242">Funzioni di Azure era un'ottima soluzione per questo particolare servizio, perché si tratta di un carico di lavoro basato su eventi.</span><span class="sxs-lookup"><span data-stu-id="ce748-242">Azure Functions was a good fit for this particular service, because it's is an event-driven workload.</span></span> <span data-ttu-id="ce748-243">Usando un trigger di Hub eventi per richiamare la funzione, per il servizio è stata necessaria una quantità di codice minima.</span><span class="sxs-lookup"><span data-stu-id="ce748-243">By using an Event Hubs trigger to invoke the function, the service needed a minimal amount of code.</span></span> <span data-ttu-id="ce748-244">Il servizio cronologia di recapito non fa parte del flusso di lavoro principale, quindi la sua esecuzione all'esterno del cluster Kubernetes non influisce sulla latenza end-to-end delle operazioni avviate dall'utente.</span><span class="sxs-lookup"><span data-stu-id="ce748-244">Also, the Delivery History service is not part of the main workflow, so running it outside of the Kubernetes cluster doesn't affect the end-to-end latency of user-initiated operations.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="ce748-245">Considerazioni sui dati</span><span class="sxs-lookup"><span data-stu-id="ce748-245">Data considerations</span></span>](./data-considerations.md)

<!-- links -->

[acs-engine]: https://github.com/Azure/acs-engine
[acs-faq]: /azure/container-service/dcos-swarm/container-service-faq
[event-grid]: /azure/event-grid/
[functions]: /azure/azure-functions/functions-overview
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
