---
title: Strategie di partizionamento dei dati
titleSuffix: Best practices for cloud applications
description: Indicazioni relative alla suddivisione di partizioni dati per la gestione e l'accesso separati.
author: dragon119
ms.date: 11/04/2018
ms.topic: best-practice
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: cfbe877a4e3a4a1d5aa87c4a77ad2c5f23a6d664
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54484483"
---
# <a name="data-partitioning-strategies"></a><span data-ttu-id="59e9b-103">Strategie di partizionamento dei dati</span><span class="sxs-lookup"><span data-stu-id="59e9b-103">Data partitioning strategies</span></span>

<span data-ttu-id="59e9b-104">Questo articolo illustra alcune strategie per il partizionamento dei dati in vari archivi dati di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-104">This article describes some strategies for partitioning data in various Azure data stores.</span></span> <span data-ttu-id="59e9b-105">Per indicazioni generali sui casi in cui è opportuno partizionare i dati e le procedure consigliate, vedere [Partizionamento dei dati](./data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="59e9b-105">For general guidance about when to partition data and best practices, see [Data partitioning](./data-partitioning.md)</span></span>

## <a name="partitioning-azure-sql-database"></a><span data-ttu-id="59e9b-106">Partizionamento del database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-106">Partitioning Azure SQL Database</span></span>

<span data-ttu-id="59e9b-107">Un singolo database SQL ha un limite per il volume di dati che può contenere.</span><span class="sxs-lookup"><span data-stu-id="59e9b-107">A single SQL database has a limit to the volume of data that it can contain.</span></span> <span data-ttu-id="59e9b-108">La velocità effettiva è vincolata da fattori di architettura e dal numero di connessioni simultanee supportate.</span><span class="sxs-lookup"><span data-stu-id="59e9b-108">Throughput is constrained by architectural factors and the number of concurrent connections that it supports.</span></span>

<span data-ttu-id="59e9b-109">I [pool elastici](/azure/sql-database/sql-database-elastic-pool) supportano la scalabilità orizzontale di un database SQL.</span><span class="sxs-lookup"><span data-stu-id="59e9b-109">[Elastic pools](/azure/sql-database/sql-database-elastic-pool) support horizontal scaling for a SQL database.</span></span> <span data-ttu-id="59e9b-110">Usando pool elastici, è possibile partizionare i dati in partizioni distribuite in più database SQL.</span><span class="sxs-lookup"><span data-stu-id="59e9b-110">Using elastic pools, you can partition your data into shards that are spread across multiple SQL databases.</span></span> <span data-ttu-id="59e9b-111">È inoltre possibile aggiungere o rimuovere partizioni in base alla crescita o alla riduzione del volume di dati da gestire.</span><span class="sxs-lookup"><span data-stu-id="59e9b-111">You can also add or remove shards as the volume of data that you need to handle grows and shrinks.</span></span> <span data-ttu-id="59e9b-112">I pool elastici consentono anche di ridurre la contesa distribuendo il carico tra i database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-112">Elastic pools can also help reduce contention by distributing the load across databases.</span></span>

<span data-ttu-id="59e9b-113">Ogni partizione viene implementata come un database SQL.</span><span class="sxs-lookup"><span data-stu-id="59e9b-113">Each shard is implemented as a SQL database.</span></span> <span data-ttu-id="59e9b-114">Una partizione può contenere più set di dati, denominati *shardlet*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-114">A shard can hold more than one dataset (called a *shardlet*).</span></span> <span data-ttu-id="59e9b-115">Ogni database include metadati che descrivono gli shardlet contenuti al suo interno.</span><span class="sxs-lookup"><span data-stu-id="59e9b-115">Each database maintains metadata that describes the shardlets that it contains.</span></span> <span data-ttu-id="59e9b-116">Uno shardlet può essere un singolo elemento di dati oppure un gruppo di elementi che condividono la stessa chiave di shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-116">A shardlet can be a single data item, or a group of items that share the same shardlet key.</span></span> <span data-ttu-id="59e9b-117">In un'applicazione multi-tenant, ad esempio, la chiave di shardlet può essere l'ID tenant e tutti i dati per un tenant possono essere contenuti nello stesso shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-117">For example, in a multitenant application, the shardlet key can be the tenant ID, and all data for a tenant can be held in the same shardlet.</span></span>

<span data-ttu-id="59e9b-118">Le applicazioni client sono responsabili dell'associazione di un set di dati a una chiave di shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-118">Client applications are responsible for associating a dataset with a shardlet key.</span></span> <span data-ttu-id="59e9b-119">Un database SQL separato effettua la gestione del mapping globale delle partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-119">A separate SQL database acts as a global shard map manager.</span></span> <span data-ttu-id="59e9b-120">Questo database ha un elenco di tutte le partizioni e tutti gli shardlet nel sistema.</span><span class="sxs-lookup"><span data-stu-id="59e9b-120">This database has a list of all the shards and shardlets in the system.</span></span> <span data-ttu-id="59e9b-121">L'applicazione si connette al database di gestione delle mappe partizioni per ottenere una copia della mappa partizioni,</span><span class="sxs-lookup"><span data-stu-id="59e9b-121">The application connects to the shard map manager database to obtain a copy of the shard map.</span></span> <span data-ttu-id="59e9b-122">la memorizza nella cache in locale e la usa per indirizzare le richieste di dati alla partizione appropriata.</span><span class="sxs-lookup"><span data-stu-id="59e9b-122">It caches the shard map locally, and uses the map to route data requests to the appropriate shard.</span></span> <span data-ttu-id="59e9b-123">Questa funzionalità è nascosta dietro una serie di API contenute nella [libreria client dei database elastici](/azure/sql-database/sql-database-elastic-database-client-library), disponibile per Java e .NET.</span><span class="sxs-lookup"><span data-stu-id="59e9b-123">This functionality is hidden behind a series of APIs that are contained in the [Elastic Database client library](/azure/sql-database/sql-database-elastic-database-client-library), which is available for Java and .NET.</span></span>

<span data-ttu-id="59e9b-124">Per altre informazioni sui pool elastici, vedere [Aumento del numero di istanze con il database SQL di Azure](/azure/sql-database/sql-database-elastic-scale-introduction).</span><span class="sxs-lookup"><span data-stu-id="59e9b-124">For more information about elastic pools, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction).</span></span>

<span data-ttu-id="59e9b-125">Per ridurre la latenza e migliorare la disponibilità, è possibile replicare il database di gestione globale delle mappe partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-125">To reduce latency and improve availability, you can replicate the global shard map manager database.</span></span> <span data-ttu-id="59e9b-126">Con i piani tariffari Premium, si può configurare la replica geografica attiva per la copia continua dei dati in database di aree diverse.</span><span class="sxs-lookup"><span data-stu-id="59e9b-126">With the Premium pricing tiers, you can configure active geo-replication to continuously copy data to databases in different regions.</span></span>

<span data-ttu-id="59e9b-127">In alternativa, usare la [sincronizzazione dati SQL di Azure](/azure/sql-database/sql-database-sync-data) o [Azure Data Factory](/azure/data-factory/) per replicare il database di gestione delle mappe partizioni tra le aree.</span><span class="sxs-lookup"><span data-stu-id="59e9b-127">Alternatively, use [Azure SQL Data Sync](/azure/sql-database/sql-database-sync-data) or [Azure Data Factory](/azure/data-factory/) to replicate the shard map manager database across regions.</span></span> <span data-ttu-id="59e9b-128">Questa forma di replica, che non richiede un piano Premium, viene eseguita periodicamente e risulta più appropriata se la mappa partizioni viene modificata raramente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-128">This form of replication runs periodically and is more suitable if the shard map changes infrequently, and does not require Premium tier.</span></span>

<span data-ttu-id="59e9b-129">Il database elastico offre due schemi per la mappature di dati per gli shardlet e per archiviarli in partizioni:</span><span class="sxs-lookup"><span data-stu-id="59e9b-129">Elastic Database provides two schemes for mapping data to shardlets and storing them in shards:</span></span>

- <span data-ttu-id="59e9b-130">Una **mappa partizioni di tipo elenco** associa una singola chiave a uno shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-130">A **list shard map** associates a single key to a shardlet.</span></span> <span data-ttu-id="59e9b-131">Ad esempio, in un sistema multi-tenant, i dati per ogni tenant possono essere associati a una chiave univoca e archiviati in un proprio shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-131">For example, in a multitenant system, the data for each tenant can be associated with a unique key and stored in its own shardlet.</span></span> <span data-ttu-id="59e9b-132">Per garantire l'isolamento, ogni shardlet può essere contenuto all'interno di una specifica partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-132">To guarantee isolation, each shardlet can be held within its own shard.</span></span>

    ![Uso di un mapping delle partizioni di tipo elenco per l'archiviazione dei dati dei tenant in partizioni separate](./images/data-partitioning/PointShardlet.png)

- <span data-ttu-id="59e9b-134">Una **mappa partizioni di tipo intervallo** associa un set di valori di chiave contigui a uno shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-134">A **range shard map** associates a set of contiguous key values to a shardlet.</span></span> <span data-ttu-id="59e9b-135">Ad esempio, è possibile raggruppare i dati per un set di tenant (ognuno con una specifica chiave) all'interno dello stesso shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-135">For example, you can group the data for a set of tenants (each with their own key) within the same shardlet.</span></span> <span data-ttu-id="59e9b-136">Questo schema è meno costoso rispetto al primo, perché i tenant condividono l'archivio dati, ma offre minore isolamento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-136">This scheme is less expensive than the first, because tenants share data storage, but has less isolation.</span></span>

    ![Uso di un mapping delle partizioni di tipo intervallo per l'archiviazione dei dati per un intervallo di tenant in una partizione](./images/data-partitioning/RangeShardlet.png)

<span data-ttu-id="59e9b-138">Una singola partizione può contenere i dati di diversi shardlet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-138">A single shard can contain the data for several shardlets.</span></span> <span data-ttu-id="59e9b-139">Ad esempio, è possibile usare gli shardlet dell'elenco per archiviare i dati per i diversi tenant non contigui nella stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-139">For example, you can use list shardlets to store data for different non-contiguous tenants in the same shard.</span></span> <span data-ttu-id="59e9b-140">È anche possibile combinare shardlet di intervallo e di elenco nella stessa partizione, ma verranno gestiti tramite mappe diverse.</span><span class="sxs-lookup"><span data-stu-id="59e9b-140">You can also mix range shardlets and list shardlets in the same shard, although they will be addressed through different maps.</span></span> <span data-ttu-id="59e9b-141">Il diagramma seguente illustra questo approccio:</span><span class="sxs-lookup"><span data-stu-id="59e9b-141">The following diagram shows this approach:</span></span>

![Implementazione di più mapping delle partizioni](./images/data-partitioning/MultipleShardMaps.png)

<span data-ttu-id="59e9b-143">I pool elastici consentono di aggiungere e rimuovere partizioni con la crescita e la riduzione del volume dei dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-143">Elastic pools makes it possible to add and remove shards as the volume of data shrinks and grows.</span></span> <span data-ttu-id="59e9b-144">Le applicazioni client possono creare ed eliminare dinamicamente le partizioni e aggiornare il gestore delle mappe partizioni in modo trasparente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-144">Client applications can create and delete shards dynamically, and transparently update the shard map manager.</span></span> <span data-ttu-id="59e9b-145">Tuttavia, la rimozione di una partizione è un'operazione distruttiva che richiede anche l'eliminazione di tutti i dati della partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-145">However, removing a shard is a destructive operation that also requires deleting all the data in that shard.</span></span>

<span data-ttu-id="59e9b-146">Se un'applicazione deve dividere una partizione in due partizioni separate o combinare partizioni, usare lo [strumento di divisione-unione](/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge).</span><span class="sxs-lookup"><span data-stu-id="59e9b-146">If an application needs to split a shard into two separate shards or combine shards, use the [split-merge tool](/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge).</span></span> <span data-ttu-id="59e9b-147">Tale strumento, eseguito come servizio Web di Azure, effettua la migrazione dei dati tra le partizioni in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="59e9b-147">This tool runs as an Azure web service, and migrates data safely between shards.</span></span>

<span data-ttu-id="59e9b-148">Lo schema di partizionamento può influire significativamente sulle prestazioni del sistema,</span><span class="sxs-lookup"><span data-stu-id="59e9b-148">The partitioning scheme can significantly impact the performance of your system.</span></span> <span data-ttu-id="59e9b-149">nonché sulla frequenza con cui è necessario aggiungere o rimuovere partizioni o ripartizionare i dati tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-149">It can also affect the rate at which shards have to be added or removed, or that data must be repartitioned across shards.</span></span> <span data-ttu-id="59e9b-150">Tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="59e9b-150">Consider the following points:</span></span>

- <span data-ttu-id="59e9b-151">Raggruppare i dati usati insieme nella stessa partizione ed evitare le operazioni con accesso ai dati da più partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-151">Group data that is used together in the same shard, and avoid operations that access data from multiple shards.</span></span> <span data-ttu-id="59e9b-152">Una partizione è di per sé un database SQL e i join tra database devono essere eseguiti sul lato client.</span><span class="sxs-lookup"><span data-stu-id="59e9b-152">A shard is a SQL database in its own right, and cross-database joins must be performed on the client side.</span></span>

    <span data-ttu-id="59e9b-153">Anche se il database SQL non supporta i join tra database, è possibile usare gli strumenti dei database elastici per eseguire [query su più partizioni](/azure/sql-database/sql-database-elastic-scale-multishard-querying).</span><span class="sxs-lookup"><span data-stu-id="59e9b-153">Although SQL Database does not support cross-database joins, you can use the Elastic Database tools to perform [mutli-shard queries](/azure/sql-database/sql-database-elastic-scale-multishard-querying).</span></span> <span data-ttu-id="59e9b-154">Una query su più partizioni invia singole query a ogni database e unisce i risultati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-154">A multi-shard query sends individual queries to each database and merges the results.</span></span>

- <span data-ttu-id="59e9b-155">Non progettare un sistema con dipendenze tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-155">Don't design a system that has dependencies between shards.</span></span> <span data-ttu-id="59e9b-156">I vincoli di integrità referenziale, i trigger e le stored procedure in un database non possono fare riferimento a oggetti in un altro.</span><span class="sxs-lookup"><span data-stu-id="59e9b-156">Referential integrity constraints, triggers, and stored procedures in one database cannot reference objects in another.</span></span>

- <span data-ttu-id="59e9b-157">Se sono presenti dati di riferimento usati frequentemente dalle query, valutare la possibilità di replicare tali dati tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-157">If you have reference data that is frequently used by queries, consider replicating this data across shards.</span></span> <span data-ttu-id="59e9b-158">Questo approccio può eliminare l'esigenza di unire i dati in join tra database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-158">This approach can remove the need to join data across databases.</span></span> <span data-ttu-id="59e9b-159">Idealmente, per ridurre al minimo le attività di replica e limitare le probabilità che i dati diventino non aggiornati, tali dati dovrebbero essere statici o lenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-159">Ideally, such data should be static or slow-moving, to minimize the replication effort and reduce the chances of it becoming stale.</span></span>

- <span data-ttu-id="59e9b-160">Gli shardlet appartenenti alla stessa mappa partizioni dovrebbero avere lo stesso schema.</span><span class="sxs-lookup"><span data-stu-id="59e9b-160">Shardlets that belong to the same shard map should have the same schema.</span></span> <span data-ttu-id="59e9b-161">Questa regola non viene imposta dal database SQL, ma la gestione dei dati e l'esecuzione di query diventano molto complesse se ogni shardlet ha uno schema diverso.</span><span class="sxs-lookup"><span data-stu-id="59e9b-161">This rule is not enforced by SQL Database, but data management and querying becomes very complex if each shardlet has a different schema.</span></span> <span data-ttu-id="59e9b-162">Creare invece mappe partizioni separate per ogni schema.</span><span class="sxs-lookup"><span data-stu-id="59e9b-162">Instead, create separate shard maps for each schema.</span></span> <span data-ttu-id="59e9b-163">Tenere presente che dati appartenenti a diversi shardlet possono essere archiviati nella stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-163">Remember that data belonging to different shardlets can be stored in the same shard.</span></span>

- <span data-ttu-id="59e9b-164">Le operazioni transazionali sono supportate solo per i dati all'interno della stessa partizione, non in partizioni diverse.</span><span class="sxs-lookup"><span data-stu-id="59e9b-164">Transactional operations are only supported for data within a shard, and not across shards.</span></span> <span data-ttu-id="59e9b-165">Le transazioni possono estendere gli shardlet in quanto parti della stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-165">Transactions can span shardlets as long as they are part of the same shard.</span></span> <span data-ttu-id="59e9b-166">Se la logica di business deve eseguire transazioni, pertanto, archiviare i dati nella stessa partizione oppure implementare la coerenza finale.</span><span class="sxs-lookup"><span data-stu-id="59e9b-166">Therefore, if your business logic needs to perform transactions, either store the data in the same shard or implement eventual consistency.</span></span>

- <span data-ttu-id="59e9b-167">Posizionare le partizioni vicino agli utenti che accedono ai dati in esse contenuti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-167">Place shards close to the users that access the data in those shards.</span></span> <span data-ttu-id="59e9b-168">Questa strategia consente di ridurre la latenza.</span><span class="sxs-lookup"><span data-stu-id="59e9b-168">This strategy helps reduce latency.</span></span>

- <span data-ttu-id="59e9b-169">Evitare di usare una combinazione di partizioni molto attive e partizioni relativamente inattive.</span><span class="sxs-lookup"><span data-stu-id="59e9b-169">Avoid having a mixture of highly active and relatively inactive shards.</span></span> <span data-ttu-id="59e9b-170">Provare a distribuire uniformemente il carico tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-170">Try to spread the load evenly across shards.</span></span> <span data-ttu-id="59e9b-171">Questo potrebbe richiedere l'hashing delle chiavi di partizionamento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-171">This might require hashing the sharding keys.</span></span> <span data-ttu-id="59e9b-172">In caso di individuazione geografica delle partizioni, assicurarsi che le chiavi con hashing eseguano il mapping di shardlet contenuti in partizioni archiviate vicino agli utenti che accedono a tali dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-172">If you are geo-locating shards, make sure that the hashed keys map to shardlets held in shards stored close to the users that access that data.</span></span>

### <a name="partitioning-azure-table-storage"></a><span data-ttu-id="59e9b-173">Partizionamento di archiviazione tabelle di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-173">Partitioning Azure table storage</span></span>

<span data-ttu-id="59e9b-174">L'archiviazione tabelle di Azure è un archivio chiave-valore progettato in base al partizionamento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-174">Azure table storage is a key-value store that's designed around partitioning.</span></span> <span data-ttu-id="59e9b-175">Tutte le entità vengono archiviate in una partizione e le partizioni vengono gestite internamente dall'archiviazione tabelle di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-175">All entities are stored in a partition, and partitions are managed internally by Azure table storage.</span></span> <span data-ttu-id="59e9b-176">Ogni entità archiviata in una tabella deve fornire una chiave in due parti che include:</span><span class="sxs-lookup"><span data-stu-id="59e9b-176">Each entity stored in a table must provide a two-part key that includes:</span></span>

- <span data-ttu-id="59e9b-177">**La chiave di partizione**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-177">**The partition key**.</span></span> <span data-ttu-id="59e9b-178">È un valore di stringa che determina la partizione in cui l'archivio tabelle di Azure inserirà l'entità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-178">This is a string value that determines the partition where Azure table storage will place the entity.</span></span> <span data-ttu-id="59e9b-179">Tutte le entità con la stessa chiave di partizione vengono archiviate nella stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-179">All entities with the same partition key are stored in the same partition.</span></span>

- <span data-ttu-id="59e9b-180">**La chiave di riga**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-180">**The row key**.</span></span> <span data-ttu-id="59e9b-181">È un valore di stringa che identifica l'entità all'interno della partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-181">This is a string value that identifies the entity within the partition.</span></span> <span data-ttu-id="59e9b-182">Tutte le entità all'interno di una partizione vengono ordinate in base al livello lessicale, in ordine crescente, per chiave.</span><span class="sxs-lookup"><span data-stu-id="59e9b-182">All entities within a partition are sorted lexically, in ascending order, by this key.</span></span> <span data-ttu-id="59e9b-183">La combinazione chiave di partizione/chiave di riga deve essere univoca per ogni entità e non può superare 1 KB di lunghezza.</span><span class="sxs-lookup"><span data-stu-id="59e9b-183">The partition key/row key combination must be unique for each entity and cannot exceed 1 KB in length.</span></span>

<span data-ttu-id="59e9b-184">Se un'entità viene aggiunta a una tabella con una chiave di partizione precedentemente non usata, l'archiviazione tabelle di Azure crea una nuova partizione per questa entità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-184">If an entity is added to a table with a previously unused partition key, Azure table storage creates a new partition for this entity.</span></span> <span data-ttu-id="59e9b-185">Tutte le altre entità con la stessa chiave di partizione verranno archiviate nella stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-185">Other entities with the same partition key will be stored in the same partition.</span></span>

<span data-ttu-id="59e9b-186">Questo meccanismo implementa in modo efficace una strategia di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="59e9b-186">This mechanism effectively implements an automatic scale-out strategy.</span></span> <span data-ttu-id="59e9b-187">Ogni partizione viene archiviata nello stesso server in un data center di Azure affinché le query che recuperano dati da una singola partizione vengano eseguite rapidamente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-187">Each partition is stored on the same server in an Azure datacenter to help ensure that queries that retrieve data from a single partition run quickly.</span></span>

<span data-ttu-id="59e9b-188">Microsoft ha pubblicato gli [obiettivi di scalabilità] per Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-188">Microsoft has published [scalability targets] for Azure Storage.</span></span> <span data-ttu-id="59e9b-189">Se è probabile che il sistema superi tali limiti, valutare la possibilità di dividere le entità in più tabelle.</span><span class="sxs-lookup"><span data-stu-id="59e9b-189">If your system is likely to exceed these limits, consider splitting entities into multiple tables.</span></span> <span data-ttu-id="59e9b-190">Usare il partizionamento verticale per suddividere i campi in gruppi ai quali con maggior probabilità viene eseguito l'accesso contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-190">Use vertical partitioning to divide the fields into the groups that are most likely to be accessed together.</span></span>

<span data-ttu-id="59e9b-191">Il diagramma seguente illustra la struttura logica di un account di archiviazione di esempio.</span><span class="sxs-lookup"><span data-stu-id="59e9b-191">The following diagram shows the logical structure of an example storage account.</span></span> <span data-ttu-id="59e9b-192">L'account di archiviazione contiene tre tabelle: Informazioni sul cliente, informazioni sul prodotto e Informazioni sull'ordine.</span><span class="sxs-lookup"><span data-stu-id="59e9b-192">The storage account contains three tables: Customer Info, Product Info, and Order Info.</span></span>

![Tabelle e partizioni in un esempio di account di archiviazione](./images/data-partitioning/TableStorage.png)

<span data-ttu-id="59e9b-194">Ogni tabella include più partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-194">Each table has multiple partitions.</span></span>

- <span data-ttu-id="59e9b-195">Nella tabella delle informazioni sui clienti, i dati vengono partizionati in base alla città in cui il cliente si trova.</span><span class="sxs-lookup"><span data-stu-id="59e9b-195">In the Customer Info table, the data is partitioned according to the city where the customer is located.</span></span> <span data-ttu-id="59e9b-196">La chiave di riga contiene l'ID cliente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-196">The row key contains the customer ID.</span></span>
- <span data-ttu-id="59e9b-197">Nella tabella delle informazioni sui prodotti, i prodotti vengono partizionati per categoria e la chiave di riga contiene il numero prodotto.</span><span class="sxs-lookup"><span data-stu-id="59e9b-197">In the Product Info table, products are partitioned by product category, and the row key contains the product number.</span></span>
- <span data-ttu-id="59e9b-198">Nella tabella delle informazioni sugli ordini, gli ordini vengono partizionati in base alla relativa data e la chiave di riga specifica l'ora di ricezione dell'ordine.</span><span class="sxs-lookup"><span data-stu-id="59e9b-198">In the Order Info table, the orders are partitioned by order date, and the row key specifies the time the order was received.</span></span> <span data-ttu-id="59e9b-199">Si noti che tutti i dati sono ordinati per chiave di riga in ogni partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-199">Note that all data is ordered by the row key in each partition.</span></span>

<span data-ttu-id="59e9b-200">Quando si progettano le entità per l'archiviazione tabelle di Azure, tenere presente quanto riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="59e9b-200">Consider the following points when you design your entities for Azure table storage:</span></span>

- <span data-ttu-id="59e9b-201">Selezionare una chiave di partizione e una chiave di riga in base alla modalità di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-201">Select a partition key and row key by how the data is accessed.</span></span> <span data-ttu-id="59e9b-202">Scegliere una combinazione di chiave di partizione/chiave di riga che supporti la maggior parte delle query.</span><span class="sxs-lookup"><span data-stu-id="59e9b-202">Choose a partition key/row key combination that supports the majority of your queries.</span></span> <span data-ttu-id="59e9b-203">Le query più efficienti recuperano i dati specificando la chiave di partizione e la chiave di riga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-203">The most efficient queries retrieve data by specifying the partition key and the row key.</span></span> <span data-ttu-id="59e9b-204">Le query che specificano una chiave di partizione e un intervallo di chiavi di riga possono essere eseguite analizzando una singola partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-204">Queries that specify a partition key and a range of row keys can be completed by scanning a single partition.</span></span> <span data-ttu-id="59e9b-205">L'operazione risulta relativamente veloce perché i dati seguono l'ordine delle chiavi di riga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-205">This is relatively fast because the data is held in row key order.</span></span> <span data-ttu-id="59e9b-206">Se le query non specificano la partizione da analizzare, devono essere analizzate tutte le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-206">If queries don't specify which partition to scan, every partition must be scanned.</span></span>

- <span data-ttu-id="59e9b-207">Se un'entità dispone di una chiave naturale, è consigliabile utilizzarla come chiave di partizione e specificare una stringa vuota come chiave di riga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-207">If an entity has one natural key, then use it as the partition key and specify an empty string as the row key.</span></span> <span data-ttu-id="59e9b-208">Se un'entità ha una chiave composta costituita da due proprietà, selezionare la proprietà che cambia più lentamente come chiave di partizione e l'altra come chiave di riga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-208">If an entity has a composite key consisting of two properties, select the slowest changing property as the partition key and the other as the row key.</span></span> <span data-ttu-id="59e9b-209">Se un'entità dispone di più di due proprietà chiave, utilizzare una concatenazione delle proprietà per fornire le chiavi di partizione e di riga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-209">If an entity has more than two key properties, use a concatenation of properties to provide the partition and row keys.</span></span>

- <span data-ttu-id="59e9b-210">Se si eseguono regolarmente query che cercano i dati usando campi diversi dalle chiavi di partizione e di riga, valutare la possibilità di implementare un [modello di tabella degli indici](../patterns/index-table.md) oppure di usare un diverso archivio dati che supporti l'indicizzazione, come Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-210">If you regularly perform queries that look up data by using fields other than the partition and row keys, consider implementing the [Index Table pattern](../patterns/index-table.md), or consider using a different data store that supports indexing, such as Cosmos DB.</span></span>

- <span data-ttu-id="59e9b-211">Se le chiavi di partizione vengono generate usando una sequenza costante (come "0001", "0002", "0003") e ogni partizione contiene solo una quantità limitata di dati, l'archivio tabelle di Azure può raggruppare fisicamente queste partizioni nello stesso server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-211">If you generate partition keys by using a monotonic sequence (such as "0001", "0002", "0003") and each partition only contains a limited amount of data, Azure table storage can physically group these partitions together on the same server.</span></span> <span data-ttu-id="59e9b-212">Il servizio Archiviazione di Azure presuppone che l'applicazione esegua più probabilmente query su un intervallo contiguo di partizioni (query di intervallo) ed è ottimizzato per questo caso.</span><span class="sxs-lookup"><span data-stu-id="59e9b-212">Azure Storage assumes that the application is most likely to perform queries across a contiguous range of partitions (range queries) and is optimized for this case.</span></span> <span data-ttu-id="59e9b-213">Questo approccio può tuttavia causare aree ad accesso frequente, perché tutti gli inserimenti di nuove entità saranno probabilmente concentrati su un'estremità dell'intervallo contiguo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-213">However, this approach can lead to hotspots, because all insertions of new entities are likely to be concentrated at one end the contiguous range.</span></span> <span data-ttu-id="59e9b-214">Permette inoltre di ridurre la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-214">It can also reduce scalability.</span></span> <span data-ttu-id="59e9b-215">Per distribuire più uniformemente il carico, prendere in considerazione l'hashing della chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-215">To spread the load more evenly, consider hashing the partition key.</span></span>

- <span data-ttu-id="59e9b-216">Archiviazione tabelle di Azure supporta le operazioni transazionali per le entità che appartengono alla stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-216">Azure table storage supports transactional operations for entities that belong to the same partition.</span></span> <span data-ttu-id="59e9b-217">Un'applicazione può eseguire più operazioni di inserimento, aggiornamento, eliminazione, sostituzione o unione come un'unità atomica, a condizione che la transazione non includa più di 100 entità e che il payload della richiesta non superi 4 MB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-217">An application can perform multiple insert, update, delete, replace, or merge operations as an atomic unit, as long as the transaction doesn't include more than 100 entities and the payload of the request doesn't exceed 4 MB.</span></span> <span data-ttu-id="59e9b-218">Le operazioni che interessano più partizioni non sono transazionali e potrebbero richiedere l'implementazione della coerenza finale.</span><span class="sxs-lookup"><span data-stu-id="59e9b-218">Operations that span multiple partitions are not transactional, and might require you to implement eventual consistency.</span></span> <span data-ttu-id="59e9b-219">Per altre informazioni sull'archivio tabelle e le transazioni, vedere [Performing Entity Group Transactions] (Esecuzione di transazioni di gruppi di entità).</span><span class="sxs-lookup"><span data-stu-id="59e9b-219">For more information about table storage and transactions, see [Performing entity group transactions].</span></span>

- <span data-ttu-id="59e9b-220">Considerare la granularità della chiave di partizione:</span><span class="sxs-lookup"><span data-stu-id="59e9b-220">Consider the granularity of the partition key:</span></span>

  - <span data-ttu-id="59e9b-221">Usando la stessa chiave di partizione per ogni entità si ottiene una singola partizione contenuta in un unico server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-221">Using the same partition key for every entity results in a single partition that's held on one server.</span></span> <span data-ttu-id="59e9b-222">Ciò impedisce l'aumento del relativo numero di istanze e concentra il carico su un singolo server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-222">This prevents the partition from scaling out and focuses the load on a single server.</span></span> <span data-ttu-id="59e9b-223">Di conseguenza, questo approccio è adatto solo per l'archiviazione di un numero ridotto di entità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-223">As a result, this approach is only suitable for storing a small number of entities.</span></span> <span data-ttu-id="59e9b-224">Garantisce tuttavia la possibilità per tutte le entità di partecipare a transazioni del gruppo di entità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-224">However, it does ensure that all entities can participate in entity group transactions.</span></span>

  - <span data-ttu-id="59e9b-225">Usando una chiave di partizione univoca per ogni entità, il servizio di archiviazione tabelle crea una partizione separata per ogni entità e questo può causare un numero elevato di partizioni di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-225">Using a unique partition key for every entity causes the table storage service to create a separate partition for each entity, possibly resulting in a large number of small partitions.</span></span> <span data-ttu-id="59e9b-226">Questo approccio è più scalabile rispetto all'uso di una singola chiave di partizione, ma le transazioni dei gruppi di entità non saranno possibili.</span><span class="sxs-lookup"><span data-stu-id="59e9b-226">This approach is more scalable than using a single partition key, but entity group transactions are not possible.</span></span> <span data-ttu-id="59e9b-227">Inoltre, le query che recuperano più di un'entità potrebbero implicare la lettura da più di un server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-227">Also, queries that fetch more than one entity might involve reading from more than one server.</span></span> <span data-ttu-id="59e9b-228">Se l'applicazione esegue query di intervallo, tuttavia, l'uso di una sequenza costante per le chiavi di partizione può consentire l'ottimizzazione di tali query.</span><span class="sxs-lookup"><span data-stu-id="59e9b-228">However, if the application performs range queries, then using a monotonic sequence for the partition keys might help to optimize these queries.</span></span>

  - <span data-ttu-id="59e9b-229">Condividendo la chiave di partizione in un subset di entità è possibile raggruppare le entità correlate nella stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-229">Sharing the partition key across a subset of entities makes it possible to group related entities in the same partition.</span></span> <span data-ttu-id="59e9b-230">È possibile eseguire le operazioni che coinvolgono le entità correlate usando transazioni dei gruppi di entità, mentre le query che recuperano un set di entità correlate possono essere soddisfatte tramite l'accesso a un singolo server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-230">Operations that involve related entities can be performed by using entity group transactions, and queries that fetch a set of related entities can be satisfied by accessing a single server.</span></span>

<span data-ttu-id="59e9b-231">Per altre informazioni, vedere la [Azure Storage Table Design Guide].</span><span class="sxs-lookup"><span data-stu-id="59e9b-231">For more information, see [Azure storage table design guide].</span></span>

## <a name="partitioning-azure-blob-storage"></a><span data-ttu-id="59e9b-232">Partizionamento di archiviazione blob di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-232">Partitioning Azure blob storage</span></span>

<span data-ttu-id="59e9b-233">L'archivio BLOB di Azure può contenere oggetti binari di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-233">Azure blob storage makes it possible to hold large binary objects.</span></span> <span data-ttu-id="59e9b-234">Usare BLOB in blocchi negli scenari in cui è necessario caricare o scaricare rapidamente grandi volumi di dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-234">Use block blobs in scenarios when you need to upload or download large volumes of data quickly.</span></span> <span data-ttu-id="59e9b-235">Utilizzo dei BLOB di pagine per le applicazioni che richiedono accesso casuale anziché seriale a parti dei dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-235">Use page blobs for applications that require random rather than serial access to parts of the data.</span></span>

<span data-ttu-id="59e9b-236">Ogni blob (blocco o pagina) viene conservato in un contenitore in un account di archiviazione Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-236">Each blob (either block or page) is held in a container in an Azure storage account.</span></span> <span data-ttu-id="59e9b-237">È possibile usare i contenitori per raggruppare BLOB correlati con gli stessi requisiti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="59e9b-237">You can use containers to group related blobs that have the same security requirements.</span></span> <span data-ttu-id="59e9b-238">Questo raggruppamento è logico e non fisico.</span><span class="sxs-lookup"><span data-stu-id="59e9b-238">This grouping is logical rather than physical.</span></span> <span data-ttu-id="59e9b-239">All'interno di un contenitore ogni BLOB ha un nome univoco.</span><span class="sxs-lookup"><span data-stu-id="59e9b-239">Inside a container, each blob has a unique name.</span></span>

<span data-ttu-id="59e9b-240">La chiave di partizione per un BLOB è il nome account + il nome del contenitore + il nome del BLOB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-240">The partition key for a blob is account name + container name + blob name.</span></span> <span data-ttu-id="59e9b-241">La chiave di partizione è usata per suddividere i dati in intervalli; tali intervalli vengono bilanciati a livello di carico nell'intero sistema.</span><span class="sxs-lookup"><span data-stu-id="59e9b-241">The partition key is used to partition data into ranges and these ranges are load-balanced across the system.</span></span> <span data-ttu-id="59e9b-242">I BLOB possono essere distribuiti in più server per aumentare il numero di istanze di accesso, ma ogni BLOB può essere gestito da un solo server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-242">Blobs can be distributed across many servers in order to scale out access to them, but a single blob can only be served by a single server.</span></span>

<span data-ttu-id="59e9b-243">Uno schema di denominazione che usa timestamp o identificatori numerici può causare un traffico eccessivo verso una partizione, limitando il bilanciamento efficace del carico nel sistema.</span><span class="sxs-lookup"><span data-stu-id="59e9b-243">If your naming scheme uses timestamps or numerical identifiers, it can lead to excessive traffic going to one partition, limiting the system from effectively load balancing.</span></span> <span data-ttu-id="59e9b-244">Se vengono eseguite operazioni giornaliere che usano un oggetto BLOB con un timestamp come *aaaa-mm-gg*, ad esempio, tutto il traffico dell'operazione verrà indirizzato a un singolo server partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-244">For instance, if you have daily operations that use a blob object with a timestamp such as *yyyy-mm-dd*, all the traffic for that operation would go to a single partition server.</span></span> <span data-ttu-id="59e9b-245">Valutare invece la possibilità di anteporre al nome un hash di 3 cifre.</span><span class="sxs-lookup"><span data-stu-id="59e9b-245">Instead, consider prefixing the name with a 3-digit hash.</span></span> <span data-ttu-id="59e9b-246">Per altre informazioni, vedere [Convenzione di denominazione delle partizioni](/azure/storage/common/storage-performance-checklist#subheading47).</span><span class="sxs-lookup"><span data-stu-id="59e9b-246">For more information, see [Partition Naming Convention](/azure/storage/common/storage-performance-checklist#subheading47)</span></span>

<span data-ttu-id="59e9b-247">Le azioni di scrittura di un singolo blocco o una singola pagina sono atomiche, ma le operazioni che interessano blocchi, pagine o BLOB non lo sono.</span><span class="sxs-lookup"><span data-stu-id="59e9b-247">The actions of writing a single block or page are atomic, but operations that span blocks, pages, or blobs are not.</span></span> <span data-ttu-id="59e9b-248">Se è necessario garantire la coerenza durante l'esecuzione di operazioni di scrittura in blocchi, pagine e BLOB, sarà necessario estrarre un blocco di scrittura usando un lease del BLOB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-248">If you need to ensure consistency when performing write operations across blocks, pages, and blobs, take out a write lock by using a blob lease.</span></span>

## <a name="partitioning-azure-storage-queues"></a><span data-ttu-id="59e9b-249">Partizionamento di code di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-249">Partitioning Azure storage queues</span></span>

<span data-ttu-id="59e9b-250">Le code di archiviazione di Azure consentono di implementare la messaggistica asincrona tra processi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-250">Azure storage queues enable you to implement asynchronous messaging between processes.</span></span> <span data-ttu-id="59e9b-251">Un account di archiviazione di Azure può contenere qualsiasi numero di code e ogni coda può contenere qualsiasi numero di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-251">An Azure storage account can contain any number of queues, and each queue can contain any number of messages.</span></span> <span data-ttu-id="59e9b-252">L'unica limitazione è lo spazio disponibile nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-252">The only limitation is the space that's available in the storage account.</span></span> <span data-ttu-id="59e9b-253">La dimensione massima di un singolo messaggio è di 64 KB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-253">The maximum size of an individual message is 64 KB.</span></span> <span data-ttu-id="59e9b-254">Se sono necessari messaggi di dimensioni superiori, utilizzare Code del bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-254">If you require messages bigger than this, then consider using Azure Service Bus queues instead.</span></span>

<span data-ttu-id="59e9b-255">Ogni coda di archiviazione ha un nome univoco all'interno dell'account di archiviazione in cui è contenuta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-255">Each storage queue has a unique name within the storage account that contains it.</span></span> <span data-ttu-id="59e9b-256">Le code di partizione di Azure sono basate sul nome.</span><span class="sxs-lookup"><span data-stu-id="59e9b-256">Azure partitions queues based on the name.</span></span> <span data-ttu-id="59e9b-257">Tutti i messaggi per la stessa coda vengono archiviati nella stessa partizione, controllata da un singolo server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-257">All messages for the same queue are stored in the same partition, which is controlled by a single server.</span></span> <span data-ttu-id="59e9b-258">Code diverse possono essere gestite da server differenti per bilanciare il carico.</span><span class="sxs-lookup"><span data-stu-id="59e9b-258">Different queues can be managed by different servers to help balance the load.</span></span> <span data-ttu-id="59e9b-259">L'allocazione di code da server è trasparente alle applicazioni e agli utenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-259">The allocation of queues to servers is transparent to applications and users.</span></span>

<span data-ttu-id="59e9b-260">In un'applicazione di grandi dimensioni, non usare la stessa coda di archiviazione per tutte le istanze dell'applicazione, poiché con questo approccio il server che ospita la coda potrebbe diventare un'area sensibile.</span><span class="sxs-lookup"><span data-stu-id="59e9b-260">In a large-scale application, don't use the same storage queue for all instances of the application because this approach might cause the server that's hosting the queue to become a hotspot.</span></span> <span data-ttu-id="59e9b-261">È consigliabile usare code diverse per le diverse aree funzionali dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-261">Instead, use different queues for different functional areas of the application.</span></span> <span data-ttu-id="59e9b-262">Le code di archiviazione di Azure non supportano le transazioni, quindi l’indirizzamento dei messaggi a code diverse dovrebbe avere un impatto minimo sulla coerenza della messaggistica.</span><span class="sxs-lookup"><span data-stu-id="59e9b-262">Azure storage queues do not support transactions, so directing messages to different queues should have little impact on messaging consistency.</span></span>

<span data-ttu-id="59e9b-263">Una coda di archiviazione di Azure è in grado di gestire fino a 2.000 messaggi al secondo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-263">An Azure storage queue can handle up to 2,000 messages per second.</span></span> <span data-ttu-id="59e9b-264">Se è necessario elaborare i messaggi a una velocità più elevata, è consigliabile creare più code.</span><span class="sxs-lookup"><span data-stu-id="59e9b-264">If you need to process messages at a greater rate than this, consider creating multiple queues.</span></span> <span data-ttu-id="59e9b-265">In un'applicazione globale, ad esempio, è consigliabile creare code di archiviazione separate in account di archiviazione separati per gestire le istanze dell'applicazione in esecuzione in ogni area.</span><span class="sxs-lookup"><span data-stu-id="59e9b-265">For example, in a global application, create separate storage queues in separate storage accounts to handle application instances that are running in each region.</span></span>

## <a name="partitioning-azure-service-bus"></a><span data-ttu-id="59e9b-266">Partizionamento del bus di servizio di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-266">Partitioning Azure Service Bus</span></span>

<span data-ttu-id="59e9b-267">Il bus di servizio di Azure usa un broker messaggi per gestire i messaggi inviati a una coda del bus di servizio o a un argomento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-267">Azure Service Bus uses a message broker to handle messages that are sent to a Service Bus queue or topic.</span></span> <span data-ttu-id="59e9b-268">Per impostazione predefinita, tutti i messaggi inviati a una coda o a un argomento vengono gestiti dallo stesso processo di broker messaggi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-268">By default, all messages that are sent to a queue or topic are handled by the same message broker process.</span></span> <span data-ttu-id="59e9b-269">Questa architettura può inserire un limite alla velocità effettiva complessiva della coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-269">This architecture can place a limitation on the overall throughput of the message queue.</span></span> <span data-ttu-id="59e9b-270">Tuttavia, è anche possibile partizionare una coda o argomento quando viene creato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-270">However, you can also partition a queue or topic when it is created.</span></span> <span data-ttu-id="59e9b-271">A tale scopo, impostare la proprietà *EnablePartitioning* della descrizione della coda o dell'argomento su *true*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-271">You do this by setting the *EnablePartitioning* property of the queue or topic description to *true*.</span></span>

<span data-ttu-id="59e9b-272">Una coda o un argomento partizionato viene diviso in più frammenti, ognuno dei quali è supportato da un archivio messaggi e da un broker messaggi separato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-272">A partitioned queue or topic is divided into multiple fragments, each of which is backed by a separate message store and message broker.</span></span> <span data-ttu-id="59e9b-273">Il Bus di servizio si assume la responsabilità per la creazione e la gestione di questi frammenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-273">Service Bus takes responsibility for creating and managing these fragments.</span></span> <span data-ttu-id="59e9b-274">Quando un'applicazione invia un messaggio a una coda o argomento partizionati, il Bus di servizio assegna il messaggio a un frammento per quella coda o quell’argomento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-274">When an application posts a message to a partitioned queue or topic, Service Bus assigns the message to a fragment for that queue or topic.</span></span> <span data-ttu-id="59e9b-275">Quando un'applicazione riceve un messaggio da una coda o da una sottoscrizione, il Bus di servizio controlla ogni frammento per il successivo messaggio disponibile e quindi lo passa all'applicazione per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-275">When an application receives a message from a queue or subscription, Service Bus checks each fragment for the next available message and then passes it to the application for processing.</span></span>

<span data-ttu-id="59e9b-276">Questa struttura consente di distribuire il carico tra broker messaggi e archivi messaggi aumentando la scalabilità e migliorando la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="59e9b-276">This structure helps distribute the load across message brokers and message stores, increasing scalability and improving availability.</span></span> <span data-ttu-id="59e9b-277">Se il broker messaggi o l'archivio messaggi di un frammento è temporaneamente non disponibile, il bus di servizio può recuperare i messaggi da uno dei frammenti disponibili rimanenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-277">If the message broker or message store for one fragment is temporarily unavailable, Service Bus can retrieve messages from one of the remaining available fragments.</span></span>

<span data-ttu-id="59e9b-278">Il Bus di servizio assegna un messaggio a un frammento nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="59e9b-278">Service Bus assigns a message to a fragment as follows:</span></span>

- <span data-ttu-id="59e9b-279">Se il messaggio appartiene a una sessione, tutti i messaggi con lo stesso valore per la proprietà *SessionId* vengono inviati allo stesso frammento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-279">If the message belongs to a session, all messages with the same value for the *SessionId*  property are sent to the same fragment.</span></span>

- <span data-ttu-id="59e9b-280">Se il messaggio non appartiene a una sessione, ma il mittente ha specificato un valore per la proprietà *PartitionKey*, tutti i messaggi con lo stesso valore *PartitionKey* vengono inviati allo stesso frammento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-280">If the message does not belong to a session, but the sender has specified a value for the *PartitionKey* property, then all messages with the same *PartitionKey* value are sent to the same fragment.</span></span>

  > [!NOTE]
  > <span data-ttu-id="59e9b-281">Se entrambe le proprietà *SessionId* e *PartitionKey* sono specificate, è necessario che siano impostate sullo stesso valore altrimenti il messaggio verrà rifiutato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-281">If the *SessionId* and *PartitionKey* properties are both specified, then they must be set to the same value or the message will be rejected.</span></span>

- <span data-ttu-id="59e9b-282">Se le proprietà *SessionId* e *PartitionKey* per un messaggio non sono specificate, ma è abilitato il rilevamento dei duplicati, verrà usata la proprietà *MessageId*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-282">If the *SessionId* and *PartitionKey* properties for a message are not specified, but duplicate detection is enabled, the *MessageId* property will be used.</span></span> <span data-ttu-id="59e9b-283">Tutti i messaggi con lo stesso *MessageId* verranno indirizzati allo stesso frammento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-283">All messages with the same *MessageId* will be directed to the same fragment.</span></span>

- <span data-ttu-id="59e9b-284">Se i messaggi non includono una proprietà *SessionId, PartitionKey,* o *MessageId*, il bus di servizio assegna i messaggi a frammenti in modo sequenziale.</span><span class="sxs-lookup"><span data-stu-id="59e9b-284">If messages do not include a *SessionId, PartitionKey,* or *MessageId* property, then Service Bus assigns messages to fragments sequentially.</span></span> <span data-ttu-id="59e9b-285">Se un frammento non è disponibile, il Bus di servizio passerà al successivo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-285">If a fragment is unavailable, Service Bus will move on to the next.</span></span> <span data-ttu-id="59e9b-286">In questo modo, un errore temporaneo nell'infrastruttura di messaggistica non determina l'esito negativo dell'operazione di invio del messaggio.</span><span class="sxs-lookup"><span data-stu-id="59e9b-286">This means that a temporary fault in the messaging infrastructure does not cause the message-send operation to fail.</span></span>

<span data-ttu-id="59e9b-287">Quando si decide se e come partizionare una coda o un argomento dei messaggi del bus di servizio, tenere presente quanto riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="59e9b-287">Consider the following points when deciding if or how to partition a Service Bus message queue or topic:</span></span>

- <span data-ttu-id="59e9b-288">Gli argomenti e le code del Bus di servizio vengono creati nell'ambito di uno spazio dei nomi del Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="59e9b-288">Service Bus queues and topics are created within the scope of a Service Bus namespace.</span></span> <span data-ttu-id="59e9b-289">Il bus di servizio attualmente consente fino a 100 code o argomenti partizionati per spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-289">Service Bus currently allows up to 100 partitioned queues or topics per namespace.</span></span>

- <span data-ttu-id="59e9b-290">Ogni spazio dei nomi del bus di servizio impone delle quote per le risorse disponibili, ad esempio il numero di sottoscrizioni per argomento, il numero di trasmissioni e ricezioni simultanee di richieste al secondo e il numero massimo di connessioni simultanee che possono essere stabilite.</span><span class="sxs-lookup"><span data-stu-id="59e9b-290">Each Service Bus namespace imposes quotas on the available resources, such as the number of subscriptions per topic, the number of concurrent send and receive requests per second, and the maximum number of concurrent connections that can be established.</span></span> <span data-ttu-id="59e9b-291">Le quote sono documentate in [Quote del bus di servizio].</span><span class="sxs-lookup"><span data-stu-id="59e9b-291">These quotas are documented in [Service Bus quotas].</span></span> <span data-ttu-id="59e9b-292">Se si prevede di superare questi valori, è consigliabile creare ulteriori spazi dei nomi con le proprie code e argomenti e distribuire il lavoro tra questi spazi dei nomi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-292">If you expect to exceed these values, then create additional namespaces with their own queues and topics, and spread the work across these namespaces.</span></span> <span data-ttu-id="59e9b-293">Ad esempio, in un'applicazione globale, è consigliabile creare spazi dei nomi separati in ogni area e configurare le istanze dell'applicazione per utilizzare le code e argomenti dello spazio dei nomi più vicino.</span><span class="sxs-lookup"><span data-stu-id="59e9b-293">For example, in a global application, create separate namespaces in each region and configure application instances to use the queues and topics in the nearest namespace.</span></span>

- <span data-ttu-id="59e9b-294">I messaggi inviati come parte di una transazione devono specificare una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-294">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="59e9b-295">La chiave può essere costituita da una proprietà *SessionId*, *PartitionKey* o *MessageId*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-295">This can be a *SessionId*, *PartitionKey*, or *MessageId* property.</span></span> <span data-ttu-id="59e9b-296">Tutti i messaggi che vengono inviati come parte della stessa transazione devono specificare la stessa chiave di partizione perché essi devono essere gestiti dallo stesso processo del gestore dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-296">All messages that are sent as part of the same transaction must specify the same partition key because they must be handled by the same message broker process.</span></span> <span data-ttu-id="59e9b-297">È possibile inviare messaggi a diverse code o argomenti all'interno della stessa transazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-297">You cannot send messages to different queues or topics within the same transaction.</span></span>

- <span data-ttu-id="59e9b-298">Code e argomenti partizionati non possono essere configurati per essere eliminati automaticamente quando diventano inattivi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-298">Partitioned queues and topics can't be configured to be automatically deleted when they become idle.</span></span>

- <span data-ttu-id="59e9b-299">Se si creano soluzioni multipiattaforma o ibride, non è attualmente possibile usare code e argomenti partizionati con il protocollo AMQP (Advanced Message Queuing Protocol).</span><span class="sxs-lookup"><span data-stu-id="59e9b-299">Partitioned queues and topics can't currently be used with the Advanced Message Queuing Protocol (AMQP) if you are building cross-platform or hybrid solutions.</span></span>

## <a name="partitioning-cosmos-db"></a><span data-ttu-id="59e9b-300">Partizionamento di Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="59e9b-300">Partitioning Cosmos DB</span></span>

<span data-ttu-id="59e9b-301">Azure Cosmos DB è un database NoSQL che può archiviare documenti JSON tramite l'[API SQL di Azure Cosmos DB][cosmosdb-sql-api].</span><span class="sxs-lookup"><span data-stu-id="59e9b-301">Azure Cosmos DB is a NoSQL database that can store JSON documents using the [Azure Cosmos DB SQL API][cosmosdb-sql-api].</span></span> <span data-ttu-id="59e9b-302">Un documento in un database Cosmos DB è una rappresentazione serializzata JSON di un oggetto o di un altra parte di un dato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-302">A document in a Cosmos DB database is a JSON-serialized representation of an object or other piece of data.</span></span> <span data-ttu-id="59e9b-303">Nessuno schema fisso viene applicato ad eccezione del fatto che ogni documento deve contenere un ID univoco.</span><span class="sxs-lookup"><span data-stu-id="59e9b-303">No fixed schemas are enforced except that every document must contain a unique ID.</span></span>

<span data-ttu-id="59e9b-304">I documenti sono organizzati in raccolte.</span><span class="sxs-lookup"><span data-stu-id="59e9b-304">Documents are organized into collections.</span></span> <span data-ttu-id="59e9b-305">È possibile raggruppare i documenti correlati in una raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-305">You can group related documents together in a collection.</span></span> <span data-ttu-id="59e9b-306">Ad esempio, in un sistema che gestisce post di blog, è possibile archiviare il contenuto di ogni post di blog come documento in una raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-306">For example, in a system that maintains blog postings, you can store the contents of each blog post as a document in a collection.</span></span> <span data-ttu-id="59e9b-307">È anche possibile creare raccolte per ogni tipo di argomento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-307">You can also create collections for each subject type.</span></span> <span data-ttu-id="59e9b-308">In alternativa, in un'applicazione multi-tenant, ad esempio un sistema in cui autori diversi controllano e gestiscono i propri post di blog, è possibile partizionare i blog per autore e creare una raccolta separata per ogni autore.</span><span class="sxs-lookup"><span data-stu-id="59e9b-308">Alternatively, in a multitenant application, such as a system where different authors control and manage their own blog posts, you can partition blogs by author and create separate collections for each author.</span></span> <span data-ttu-id="59e9b-309">Lo spazio di archiviazione allocato alle raccolte è flessibile e può essere ridotto o incrementato in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="59e9b-309">The storage space that's allocated to collections is elastic and can shrink or grow as needed.</span></span>

<span data-ttu-id="59e9b-310">Cosmos DB supporta il partizionamento automatico dei dati basato su una chiave di partizione definita dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-310">Cosmos DB supports automatic partitioning of data based on an application-defined partition key.</span></span> <span data-ttu-id="59e9b-311">Un *partizione logica* è una partizione che archivia tutti i dati per un valore di una singola chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-311">A *logical partition* is a partition that stores all the data for a single partition key value.</span></span> <span data-ttu-id="59e9b-312">Tutti i documenti che condividono lo stesso valore per la chiave di partizione vengono posizionati all'interno della stessa partizione logica.</span><span class="sxs-lookup"><span data-stu-id="59e9b-312">All documents that share the same value for the partition key are placed within the same logical partition.</span></span> <span data-ttu-id="59e9b-313">Cosmos DB distribuisce i valori in base all'hash della chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-313">Cosmos DB distributes values according to hash of the partition key.</span></span> <span data-ttu-id="59e9b-314">Una partizione logica può avere una dimensione massima di 10 GB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-314">A logical partition has a maximum size of 10 GB.</span></span> <span data-ttu-id="59e9b-315">La scelta della chiave di partizione è pertanto una decisione importante da prendere in fase di progettazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-315">Therefore, the choice of the partition key is an important decision at design time.</span></span> <span data-ttu-id="59e9b-316">Scegliere una proprietà con un'ampia gamma di valori e modelli di accesso uniformi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-316">Choose a property with a wide range of values and even access patterns.</span></span> <span data-ttu-id="59e9b-317">Per altre informazioni, vedere [Partizionamento e ridimensionamento in Azure Cosmos DB](/azure/cosmos-db/partition-data).</span><span class="sxs-lookup"><span data-stu-id="59e9b-317">For more information, see [Partition and scale in Azure Cosmos DB](/azure/cosmos-db/partition-data).</span></span>

> [!NOTE]
> <span data-ttu-id="59e9b-318">Ogni database Cosmos DB ha un *livello di prestazioni* che determina la quantità di risorse ottenute.</span><span class="sxs-lookup"><span data-stu-id="59e9b-318">Each Cosmos DB database has a *performance level* that determines the amount of resources it gets.</span></span> <span data-ttu-id="59e9b-319">A ogni livello di prestazioni è associato un limite di velocità dell'*unità richiesta*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-319">A performance level is associated with a *request unit* (RU) rate limit.</span></span> <span data-ttu-id="59e9b-320">Il limite di velocità dell'unità richiesta specifica il volume di risorse riservato e disponibile a uso esclusivo della raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-320">The RU rate limit specifies the volume of resources that's reserved and available for exclusive use by that collection.</span></span> <span data-ttu-id="59e9b-321">Il costo di una raccolta dipende dal livello di prestazioni selezionato per la raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-321">The cost of a collection depends on the performance level that's selected for that collection.</span></span> <span data-ttu-id="59e9b-322">Più elevato è il livello di prestazioni e il limite di velocità dell'unità richiesta, maggiore sarà il costo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-322">The higher the performance level (and RU rate limit) the higher the charge.</span></span> <span data-ttu-id="59e9b-323">Il livello di prestazioni di una raccolta può essere regolato usando il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-323">You can adjust the performance level of a collection by using the Azure portal.</span></span> <span data-ttu-id="59e9b-324">Per altre informazioni, vedere [Unità richiesta in Azure Cosmos DB][cosmos-db-ru].</span><span class="sxs-lookup"><span data-stu-id="59e9b-324">For more information, see [Request Units in Azure Cosmos DB][cosmos-db-ru].</span></span>

<span data-ttu-id="59e9b-325">Se il meccanismo di partizionamento offerto da Cosmos DB non è sufficiente, potrebbe essere necessario partizionare i dati a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-325">If the partitioning mechanism that Cosmos DB provides is not sufficient, you may need to shard the data at the application level.</span></span> <span data-ttu-id="59e9b-326">Le raccolte di documenti offrono un meccanismo naturale per partizionare i dati all'interno di un unico database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-326">Document collections provide a natural mechanism for partitioning data within a single database.</span></span> <span data-ttu-id="59e9b-327">Il modo più semplice per implementare il partizionamento orizzontale consiste nel creare una raccolta per ogni partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-327">The simplest way to implement sharding is to create a collection for each shard.</span></span> <span data-ttu-id="59e9b-328">I contenitori sono risorse logiche e possono comprendere uno o più server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-328">Containers are logical resources and can span one or more servers.</span></span> <span data-ttu-id="59e9b-329">I contenitori a dimensione fissa hanno un limite massimo di 10 GB e velocità effettiva di 10.000 UR/s.</span><span class="sxs-lookup"><span data-stu-id="59e9b-329">Fixed-size containers have a maximum limit of 10 GB and 10,000 RU/s throughput.</span></span> <span data-ttu-id="59e9b-330">I contenitori senza limiti non hanno dimensioni di archiviazione massime, ma devono specificare una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-330">Unlimited containers do not have a maximum storage size, but must specify a partition key.</span></span> <span data-ttu-id="59e9b-331">Con il partizionamento orizzontale, l'applicazione client indirizza le richieste alla partizione appropriata, in genere mediante l'implementazione del proprio meccanismo di mapping basato su alcuni attributi dei dati che definiscono la chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-331">With application sharding, the client application must direct requests to the appropriate shard, usually by implementing its own mapping mechanism based on some attributes of the data that define the shard key.</span></span>

<span data-ttu-id="59e9b-332">Tutti i database vengono creati nel contesto di un account del database di Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-332">All databases are created in the context of a Cosmos DB database account.</span></span> <span data-ttu-id="59e9b-333">Un singolo account può contenere più database e specifica in quale area vengono creati i database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-333">A single account can contain several databases, and it specifies in which regions the databases are created.</span></span> <span data-ttu-id="59e9b-334">Ogni account impone anche il proprio controllo di accesso.</span><span class="sxs-lookup"><span data-stu-id="59e9b-334">Each account also enforces its own access control.</span></span> <span data-ttu-id="59e9b-335">È possibile usare gli account Cosmos DB per individuare le partizioni a livello geografico, ovvero raccolte all'interno del database, prossime agli utenti che vi devono accedere e imporre restrizioni in modo che solo tali utenti possano connettersi a esse.</span><span class="sxs-lookup"><span data-stu-id="59e9b-335">You can use Cosmos DB accounts to geo-locate shards (collections within databases) close to the users who need to access them, and enforce restrictions so that only those users can connect to them.</span></span>

<span data-ttu-id="59e9b-336">Quando si decide come partizionare i dati con un API SQL di Cosmos DB, tenere presente quanto riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="59e9b-336">Consider the following points when deciding how to partition data with the Cosmos DB SQL API:</span></span>

- <span data-ttu-id="59e9b-337">**Le risorse disponibili per un database di Cosmos DB sono soggette alle limitazioni di quota dell'account**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-337">**The resources available to a Cosmos DB database are subject to the quota limitations of the account**.</span></span> <span data-ttu-id="59e9b-338">Ogni database può contenere un numero di raccolte e ogni raccolta è associata a un livello di prestazioni che regola il limite di velocità RU (velocità effettiva riservata) per la raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-338">Each database can hold a number of collections, and each collection is associated with a performance level that governs the RU rate limit (reserved throughput) for that collection.</span></span> <span data-ttu-id="59e9b-339">Per altre informazioni, vedere [Sottoscrizione di Azure e limiti, quote e vincoli dei servizi][azure-limits].</span><span class="sxs-lookup"><span data-stu-id="59e9b-339">For more information, see [Azure subscription and service limits, quotas, and constraints][azure-limits].</span></span>

- <span data-ttu-id="59e9b-340">**Ogni documento deve avere un attributo da usare per identificare in modo univoco tale documento all'interno della raccolta in cui è contenuto**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-340">**Each document must have an attribute that can be used to uniquely identify that document within the collection in which it is held**.</span></span> <span data-ttu-id="59e9b-341">Questo attributo è diverso dalla chiave di partizione che definisce la raccolta contenente il documento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-341">This attribute is different from the shard key, which defines which collection holds the document.</span></span> <span data-ttu-id="59e9b-342">Una raccolta può contenere un numero elevato di documenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-342">A collection can contain a large number of documents.</span></span> <span data-ttu-id="59e9b-343">In teoria, l'unico limite è la lunghezza massima dell'ID di documento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-343">In theory, it's limited only by the maximum length of the document ID.</span></span> <span data-ttu-id="59e9b-344">L'ID di documento può contenere fino a 255 caratteri.</span><span class="sxs-lookup"><span data-stu-id="59e9b-344">The document ID can be up to 255 characters.</span></span>

- <span data-ttu-id="59e9b-345">**Tutte le operazioni eseguite su un documento vengono eseguite nel contesto di una transazione. Le transazioni sono limitate alla raccolta in cui è contenuto il documento.**</span><span class="sxs-lookup"><span data-stu-id="59e9b-345">**All operations against a document are performed within the context of a transaction. Transactions are scoped to the collection in which the document is contained.**</span></span> <span data-ttu-id="59e9b-346">Se un'operazione ha esito negativo, viene eseguito il rollback del lavoro che è stato eseguito.</span><span class="sxs-lookup"><span data-stu-id="59e9b-346">If an operation fails, the work that it has performed is rolled back.</span></span> <span data-ttu-id="59e9b-347">Quando viene eseguita un'operazione su un documento, tutte le modifiche apportate sono soggette all'isolamento a livello di snapshot.</span><span class="sxs-lookup"><span data-stu-id="59e9b-347">While a document is subject to an operation, any changes that are made are subject to snapshot-level isolation.</span></span> <span data-ttu-id="59e9b-348">Questo meccanismo garantisce ad esempio che nel caso in cui una richiesta di creazione di un nuovo documento ha esito negativo, un altro utente che contemporaneamente esegue una query nel database non visualizzi un documento parziale che verrà in seguito rimosso.</span><span class="sxs-lookup"><span data-stu-id="59e9b-348">This mechanism guarantees that if, for example, a request to create a new document fails, another user who's querying the database simultaneously will not see a partial document that is then removed.</span></span>

- <span data-ttu-id="59e9b-349">**Amche le query del database sono limitate al livello di raccolta**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-349">**Database queries are also scoped to the collection level**.</span></span> <span data-ttu-id="59e9b-350">Una singola query può recuperare dati solo da una raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-350">A single query can retrieve data from only one collection.</span></span> <span data-ttu-id="59e9b-351">Se è necessario recuperare dati da più raccolte, è necessario eseguire query in ogni raccolta singolarmente e incorporare i risultati nel codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-351">If you need to retrieve data from multiple collections, you must query each collection individually and merge the results in your application code.</span></span>

- <span data-ttu-id="59e9b-352">**Cosmos DB supporta elementi programmabili che possono essere archiviati in una raccolta insieme ai documenti**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-352">**Cosmos DB supports programmable items that can all be stored in a collection alongside documents**.</span></span> <span data-ttu-id="59e9b-353">Questi includono stored procedure, funzioni definite dall'utente e trigger scritti in JavaScript.</span><span class="sxs-lookup"><span data-stu-id="59e9b-353">These include stored procedures, user-defined functions, and triggers (written in JavaScript).</span></span> <span data-ttu-id="59e9b-354">Questi elementi possono accedere a qualsiasi documento all'interno della stessa raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-354">These items can access any document within the same collection.</span></span> <span data-ttu-id="59e9b-355">Inoltre, questi elementi vengono eseguiti nell'ambito della transazione di ambiente (nel caso di un trigger che viene generato in seguito a una creazione, eliminazione o sostituzione eseguita su un documento) o avviando una nuova transazione (nel caso di una stored procedure eseguita in seguito a una richiesta client esplicita).</span><span class="sxs-lookup"><span data-stu-id="59e9b-355">Furthermore, these items run either inside the scope of the ambient transaction (in the case of a trigger that fires as the result of a create, delete, or replace operation performed against a document), or by starting a new transaction (in the case of a stored procedure that is run as the result of an explicit client request).</span></span> <span data-ttu-id="59e9b-356">Se il codice in un elemento programmabile genera un'eccezione, viene eseguito il rollback della transazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-356">If the code in a programmable item throws an exception, the transaction is rolled back.</span></span> <span data-ttu-id="59e9b-357">È possibile utilizzare stored procedure e trigger per mantenere l'integrità e la coerenza tra i documenti, ma  tutti questi documenti devono far parte della stessa raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-357">You can use stored procedures and triggers to maintain integrity and consistency between documents, but these documents must all be part of the same collection.</span></span>

- <span data-ttu-id="59e9b-358">**È improbabile che le raccolte che si prevede di mantenere nei database superino i limiti di velocità effettiva definiti dai livelli di prestazioni delle raccolte**.</span><span class="sxs-lookup"><span data-stu-id="59e9b-358">**The collections that you intend to hold in the databases should be unlikely to exceed the throughput limits defined by the performance levels of the collections**.</span></span> <span data-ttu-id="59e9b-359">Per altre informazioni, vedere [Unità richiesta in Azure Cosmos DB][cosmos-db-ru].</span><span class="sxs-lookup"><span data-stu-id="59e9b-359">For more information, see [Request Units in Azure Cosmos DB][cosmos-db-ru].</span></span> <span data-ttu-id="59e9b-360">Se si prevede di raggiungere questi limiti, considerare la suddivisione di raccolte tra database in account diversi per ridurre il carico per ogni raccolta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-360">If you anticipate reaching these limits, consider splitting collections across databases in different accounts to reduce the load per collection.</span></span>

## <a name="partitioning-azure-search"></a><span data-ttu-id="59e9b-361">Partizionamento di Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-361">Partitioning Azure Search</span></span>

<span data-ttu-id="59e9b-362">La possibilità di ricercare dati è spesso il metodo principale di navigazione ed esplorazione offerto da molte applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="59e9b-362">The ability to search for data is often the primary method of navigation and exploration that's provided by many web applications.</span></span> <span data-ttu-id="59e9b-363">Consente agli utenti di trovare le risorse rapidamente, ad esempio i prodotti in un'applicazione di e-commerce, in base a combinazioni di criteri di ricerca.</span><span class="sxs-lookup"><span data-stu-id="59e9b-363">It helps users find resources quickly (for example, products in an e-commerce application) based on combinations of search criteria.</span></span> <span data-ttu-id="59e9b-364">Il servizio di ricerca di Azure offre funzionalità di ricerca full-text nel contenuto web e include funzionalità quali il suggerimento automatico di query basate su quasi corrispondenze ed esplorazione in base a facet.</span><span class="sxs-lookup"><span data-stu-id="59e9b-364">The Azure Search service provides full-text search capabilities over web content, and includes features such as type-ahead, suggested queries based on near matches, and faceted navigation.</span></span> <span data-ttu-id="59e9b-365">Per altre informazioni, vedere [Che cos'è la Ricerca di Azure?].</span><span class="sxs-lookup"><span data-stu-id="59e9b-365">For more information, see [What is Azure Search?].</span></span>

<span data-ttu-id="59e9b-366">Ricerca di Azure memorizza il contenuto disponibile per la ricerca come documenti JSON all'interno di un database .</span><span class="sxs-lookup"><span data-stu-id="59e9b-366">Azure Search stores searchable content as JSON documents in a database.</span></span> <span data-ttu-id="59e9b-367">Definire gli indici che specificano i campi disponibili per la ricerca nei documenti e inserire tali definizioni in Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-367">You define indexes that specify the searchable fields in these documents and provide these definitions to Azure Search.</span></span> <span data-ttu-id="59e9b-368">Quando un utente invia una richiesta di ricerca, Ricerca di Azure usa gli indici appropriati per trovare gli elementi corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-368">When a user submits a search request, Azure Search uses the appropriate indexes to find matching items.</span></span>

<span data-ttu-id="59e9b-369">Per ridurre i conflitti, lo spazio di archiviazione usato da Ricerca di Azure può essere diviso in 1, 2, 3, 4, 6 o 12 partizioni e ogni partizione può essere replicata fino a 6 volte.</span><span class="sxs-lookup"><span data-stu-id="59e9b-369">To reduce contention, the storage that's used by Azure Search can be divided into 1, 2, 3, 4, 6, or 12 partitions, and each partition can be replicated up to 6 times.</span></span> <span data-ttu-id="59e9b-370">Il prodotto del numero di partizioni moltiplicato per il numero di repliche è denominato *unità di ricerca*.</span><span class="sxs-lookup"><span data-stu-id="59e9b-370">The product of the number of partitions multiplied by the number of replicas is called the *search unit* (SU).</span></span> <span data-ttu-id="59e9b-371">Una singola istanza di Ricerca di Azure può contenere un massimo di 36 unità di ricerca. Un database con 12 partizioni supporta un massimo di 3 repliche.</span><span class="sxs-lookup"><span data-stu-id="59e9b-371">A single instance of Azure Search can contain a maximum of 36 SUs (a database with 12 partitions only supports a maximum of 3 replicas).</span></span>

<span data-ttu-id="59e9b-372">Ogni SU allocata al servizio viene fatturata.</span><span class="sxs-lookup"><span data-stu-id="59e9b-372">You are billed for each SU that is allocated to your service.</span></span> <span data-ttu-id="59e9b-373">Man mano che il volume dei contenuti disponibili per la ricerca o la frequenza delle richieste di ricerca aumenta, è possibile aggiungere unità di ricerca a un'istanza esistente di Ricerca di Azure per gestire il carico aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-373">As the volume of searchable content increases or the rate of search requests grows, you can add SUs to an existing instance of Azure Search to handle the extra load.</span></span> <span data-ttu-id="59e9b-374">Ricerca di Azure distribuisce i documenti in modo uniforme in tutte le partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-374">Azure Search itself distributes the documents evenly across the partitions.</span></span> <span data-ttu-id="59e9b-375">Attualmente non sono supportate strategie di partizionamento manuale.</span><span class="sxs-lookup"><span data-stu-id="59e9b-375">No manual partitioning strategies are currently supported.</span></span>

<span data-ttu-id="59e9b-376">Ogni partizione può contenere un massimo di 15 milioni di documenti o può occupare 300 GB di spazio di archiviazione, in base al valore minore dei due.</span><span class="sxs-lookup"><span data-stu-id="59e9b-376">Each partition can contain a maximum of 15 million documents or occupy 300 GB of storage space (whichever is smaller).</span></span> <span data-ttu-id="59e9b-377">È possibile creare fino a 50 indici.</span><span class="sxs-lookup"><span data-stu-id="59e9b-377">You can create up to 50 indexes.</span></span> <span data-ttu-id="59e9b-378">Le prestazioni del servizio variano a seconda della complessità dei documenti, degli indici disponibili e degli effetti della latenza di rete.</span><span class="sxs-lookup"><span data-stu-id="59e9b-378">The performance of the service varies and depends on the complexity of the documents, the available indexes, and the effects of network latency.</span></span> <span data-ttu-id="59e9b-379">In media, una singola replica (1 unità di ricerca) deve essere in grado di gestire 15 query al secondo (QPS), anche se è consigliabile eseguire il benchmark con i propri dati per ottenere una misura della velocità effettiva più precisa.</span><span class="sxs-lookup"><span data-stu-id="59e9b-379">On average, a single replica (1 SU) should be able to handle 15 queries per second (QPS), although we recommend performing benchmarking with your own data to obtain a more precise measure of throughput.</span></span> <span data-ttu-id="59e9b-380">Per altre informazioni, vedere [Limiti dei servizi in Ricerca di Azure].</span><span class="sxs-lookup"><span data-stu-id="59e9b-380">For more information, see [Service limits in Azure Search].</span></span>

> [!NOTE]
> <span data-ttu-id="59e9b-381">È possibile archiviare un set limitato di tipi di dati nei documenti disponibili per la ricerca, inclusi stringhe, valori booleani, dati numerici, dati di tipo datetime e alcuni dati geografici.</span><span class="sxs-lookup"><span data-stu-id="59e9b-381">You can store a limited set of data types in searchable documents, including strings, Booleans, numeric data, datetime data, and some geographical data.</span></span> <span data-ttu-id="59e9b-382">Per altre informazioni, vedere la pagina [Tipi di dati supportati (Ricerca di Azure)] nel sito Web Microsoft.</span><span class="sxs-lookup"><span data-stu-id="59e9b-382">For more details, see the page [Supported data types (Azure Search)] on the Microsoft website.</span></span>

<span data-ttu-id="59e9b-383">Il controllo sul partizionamento dei dati da parte di Ricerca di Azure per ogni istanza del servizio è limitato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-383">You have limited control over how Azure Search partitions data for each instance of the service.</span></span> <span data-ttu-id="59e9b-384">In un ambiente globale, tuttavia, è possibile migliorare le prestazioni e ridurre la latenza e i conflitti con un ulteriore partizionamento del servizio applicando una delle seguenti strategie:</span><span class="sxs-lookup"><span data-stu-id="59e9b-384">However, in a global environment you might be able to improve performance and reduce latency and contention further by partitioning the service itself using either of the following strategies:</span></span>

- <span data-ttu-id="59e9b-385">Creare un'istanza di Ricerca di Azure in ogni area geografica e assicurarsi che le applicazioni client vengano indirizzate verso l'istanza più vicina disponibile.</span><span class="sxs-lookup"><span data-stu-id="59e9b-385">Create an instance of Azure Search in each geographic region, and ensure that client applications are directed towards the nearest available instance.</span></span> <span data-ttu-id="59e9b-386">Questa strategia richiede che tutti gli aggiornamenti al contenuto di ricerca siano replicati tempestivamente in tutte le istanze del servizio.</span><span class="sxs-lookup"><span data-stu-id="59e9b-386">This strategy requires that any updates to searchable content are replicated in a timely manner across all instances of the service.</span></span>

- <span data-ttu-id="59e9b-387">Creare due livelli di Ricerca di Azure:</span><span class="sxs-lookup"><span data-stu-id="59e9b-387">Create two tiers of Azure Search:</span></span>

  - <span data-ttu-id="59e9b-388">Un servizio locale in ogni area contenente i dati a cui gli utenti dell'area accedono più di frequente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-388">A local service in each region that contains the data that's most frequently accessed by users in that region.</span></span> <span data-ttu-id="59e9b-389">Gli utenti possono indirizzare le richieste al servizio locale per ottenere risultati rapidi ma limitati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-389">Users can direct requests here for fast but limited results.</span></span>
  - <span data-ttu-id="59e9b-390">Un servizio globale che comprende tutti i dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-390">A global service that encompasses all the data.</span></span> <span data-ttu-id="59e9b-391">Gli utenti possono indirizzare le richieste al servizio globale per ottenere risultati più lenti ma completi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-391">Users can direct requests here for slower but more complete results.</span></span>

<span data-ttu-id="59e9b-392">Questo approccio è più adatto quando esiste una variazione regionale significativa nei dati da ricercare.</span><span class="sxs-lookup"><span data-stu-id="59e9b-392">This approach is most suitable when there is a significant regional variation in the data that's being searched.</span></span>

## <a name="partitioning-azure-redis-cache"></a><span data-ttu-id="59e9b-393">Partizionamento di Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-393">Partitioning Azure Redis Cache</span></span>

<span data-ttu-id="59e9b-394">Cache Redis di Azure offre un servizio di memorizzazione nella cache condivisa nel cloud basato sull'archivio dati chiave-valore di Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-394">Azure Redis Cache provides a shared caching service in the cloud that's based on the Redis key-value data store.</span></span> <span data-ttu-id="59e9b-395">Come suggerisce il nome, Cache Redis di Azure è una soluzione di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="59e9b-395">As its name implies, Azure Redis Cache is intended as a caching solution.</span></span> <span data-ttu-id="59e9b-396">Usare questa soluzione solo per contenere dati temporanei e non come archivio dati permanente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-396">Use it only for holding transient data and not as a permanent data store.</span></span> <span data-ttu-id="59e9b-397">Le applicazioni che usano Cache Redis di Azure dovrebbero continuare a funzionare anche se la cache non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="59e9b-397">Applications that utilize Azure Redis Cache should be able to continue functioning if the cache is unavailable.</span></span> <span data-ttu-id="59e9b-398">Cache Redis di Azure supporta la replica primaria o secondaria per garantire una disponibilità elevata, ma attualmente limita la dimensione massima della cache a 53 GB.</span><span class="sxs-lookup"><span data-stu-id="59e9b-398">Azure Redis Cache supports primary/secondary replication to provide high availability, but currently limits the maximum cache size to 53 GB.</span></span> <span data-ttu-id="59e9b-399">Se è necessario più spazio, si devono creare cache aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="59e9b-399">If you need more space than this, you must create additional caches.</span></span> <span data-ttu-id="59e9b-400">Per altre informazioni, vedere [Cache Redis di Azure].</span><span class="sxs-lookup"><span data-stu-id="59e9b-400">For more information, see [Azure Redis Cache].</span></span>

<span data-ttu-id="59e9b-401">Il partizionamento di un archivio dati Redis prevede la suddivisione dei dati tra istanze del servizio Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-401">Partitioning a Redis data store involves splitting the data across instances of the Redis service.</span></span> <span data-ttu-id="59e9b-402">Ogni istanza rappresenta una singola partizione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-402">Each instance constitutes a single partition.</span></span> <span data-ttu-id="59e9b-403">Cache Redis di Azure consente di astrarre i servizi di Redis dietro un’interfaccia e non li espone direttamente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-403">Azure Redis Cache abstracts the Redis services behind a façade and does not expose them directly.</span></span> <span data-ttu-id="59e9b-404">Il modo più semplice per implementare il partizionamento consiste nel creare più istanze della Cache Redis di Azure e distribuire i dati nelle cache.</span><span class="sxs-lookup"><span data-stu-id="59e9b-404">The simplest way to implement partitioning is to create multiple Azure Redis Cache instances and spread the data across them.</span></span>

<span data-ttu-id="59e9b-405">È possibile associare ogni elemento di dati a un identificatore (chiave di partizione) che specifica la cache in cui è memorizzato l'elemento.</span><span class="sxs-lookup"><span data-stu-id="59e9b-405">You can associate each data item with an identifier (a partition key) that specifies which cache stores the data item.</span></span> <span data-ttu-id="59e9b-406">La logica dell'applicazione client potrà usare l'identificatore per indirizzare le richieste alla partizione appropriata.</span><span class="sxs-lookup"><span data-stu-id="59e9b-406">The client application logic can then use this identifier to route requests to the appropriate partition.</span></span> <span data-ttu-id="59e9b-407">Questo schema è molto semplice. Tuttavia, se lo schema di partizionamento viene modificato, ad esempio se vengono create altre istanze della Cache Redis di Azure, è possibile sia necessario riconfigurare le applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="59e9b-407">This scheme is very simple, but if the partitioning scheme changes (for example, if additional Azure Redis Cache instances are created), client applications might need to be reconfigured.</span></span>

<span data-ttu-id="59e9b-408">Redis nativo (non Cache Redis di Azure) supporta il partizionamento sul lato server basato sul clustering di Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-408">Native Redis (not Azure Redis Cache) supports server-side partitioning based on Redis clustering.</span></span> <span data-ttu-id="59e9b-409">Con questo approccio, è possibile dividere i dati in modo uniforme nei server usando un meccanismo hash.</span><span class="sxs-lookup"><span data-stu-id="59e9b-409">In this approach, you can divide the data evenly across servers by using a hashing mechanism.</span></span> <span data-ttu-id="59e9b-410">Ogni server Redis archivia i metadati che descrivono l’intervallo delle chiavi di hash che la partizione contiene e contiene inoltre informazioni su quali chiavi di hash si trovano nelle partizioni su altri server.</span><span class="sxs-lookup"><span data-stu-id="59e9b-410">Each Redis server stores metadata that describes the range of hash keys that the partition holds, and also contains information about which hash keys are located in the partitions on other servers.</span></span>

<span data-ttu-id="59e9b-411">Le applicazioni client si limitano a inviare le richieste a un server Redis partecipante, probabilmente il più vicino.</span><span class="sxs-lookup"><span data-stu-id="59e9b-411">Client applications simply send requests to any of the participating Redis servers (probably the closest one).</span></span> <span data-ttu-id="59e9b-412">Il server Redis esamina la richiesta del client.</span><span class="sxs-lookup"><span data-stu-id="59e9b-412">The Redis server examines the client request.</span></span> <span data-ttu-id="59e9b-413">Se la richiesta può essere risolta in locale, il server eseguirà l'operazione richiesta.</span><span class="sxs-lookup"><span data-stu-id="59e9b-413">If it can be resolved locally, it performs the requested operation.</span></span> <span data-ttu-id="59e9b-414">In caso contrario, la richiesta verrà inoltrata al server appropriato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-414">Otherwise it forwards the request on to the appropriate server.</span></span>

<span data-ttu-id="59e9b-415">Questo modello viene implementato dal clustering Redis e viene descritto più dettagliatamente alla pagina [Esercitazione del cluster Redis] sul sito Web Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-415">This model is implemented by using Redis clustering, and is described in more detail on the [Redis cluster tutorial] page on the Redis website.</span></span> <span data-ttu-id="59e9b-416">Il clustering di Redis è trasparente per le applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="59e9b-416">Redis clustering is transparent to client applications.</span></span> <span data-ttu-id="59e9b-417">È possibile aggiungere altri server Redis al cluster e ripartizionare nuovamente i dati senza dover riconfigurare i client.</span><span class="sxs-lookup"><span data-stu-id="59e9b-417">Additional Redis servers can be added to the cluster (and the data can be re-partitioned) without requiring that you reconfigure the clients.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="59e9b-418">La Cache Redis di Azure non supporta attualmente il clustering.</span><span class="sxs-lookup"><span data-stu-id="59e9b-418">Azure Redis Cache does not currently support Redis clustering.</span></span> <span data-ttu-id="59e9b-419">Se si desidera implementare questo approccio con Azure, è necessario implementare i propri server Redis installando Redis in un set di macchine virtuali di Azure e configurandole manualmente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-419">If you want to implement this approach with Azure, then you must implement your own Redis servers by installing Redis on a set of Azure virtual machines and configuring them manually.</span></span> <span data-ttu-id="59e9b-420">La pagina relativa all'[esecuzione di Redis in una macchina virtuale CentOS Linux in Azure] descrive un esempio che illustra come creare e configurare un nodo Redis eseguito come VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-420">The page [Running Redis on a CentOS Linux VM in Azure] walks through an example that shows you how to build and configure a Redis node running as an Azure VM.</span></span>

<span data-ttu-id="59e9b-421">La pagina relativa al [partizionamento e alla suddivisione dei dati in più istanze di Redis] nel sito Web Redis fornisce ulteriori informazioni sull'implementazione del partizionamento con Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-421">The page [Partitioning: how to split data among multiple Redis instances] on the Redis website provides more information about implementing partitioning with Redis.</span></span> <span data-ttu-id="59e9b-422">Il resto di questa sezione presuppone l'implementazione di partizionamento sul lato client o assistito dal proxy.</span><span class="sxs-lookup"><span data-stu-id="59e9b-422">The remainder of this section assumes that you are implementing client-side or proxy-assisted partitioning.</span></span>

<span data-ttu-id="59e9b-423">Quando si decide come partizionare i dati con Cache Redis di Azure, tenere presente quanto riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="59e9b-423">Consider the following points when deciding how to partition data with Azure Redis Cache:</span></span>

- <span data-ttu-id="59e9b-424">Poiché Cache Redis di Azure non è progettata per svolgere la funzione di archivio dati permanente, indipendentemente dallo schema di partizionamento implementato, è necessario che il codice dell'applicazione sia in grado di recuperare i dati da una posizione diversa dalla cache.</span><span class="sxs-lookup"><span data-stu-id="59e9b-424">Azure Redis Cache is not intended to act as a permanent data store, so whatever partitioning scheme you implement, your application code must be able to retrieve data from a location that's not the cache.</span></span>

- <span data-ttu-id="59e9b-425">È consigliabile mantenere nella stessa partizione i dati cui viene di frequente eseguito l'accesso contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-425">Data that is frequently accessed together should be kept in the same partition.</span></span> <span data-ttu-id="59e9b-426">Redis è un archivio chiave-valore avanzato che offre diversi meccanismi altamente ottimizzati per la definizione della struttura dei dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-426">Redis is a powerful key-value store that provides several highly optimized mechanisms for structuring data.</span></span> <span data-ttu-id="59e9b-427">I meccanismi possono essere i seguenti:</span><span class="sxs-lookup"><span data-stu-id="59e9b-427">These mechanisms can be one of the following:</span></span>
  - <span data-ttu-id="59e9b-428">Stringhe semplici (dati binari di una lunghezza massima di 512 MB)</span><span class="sxs-lookup"><span data-stu-id="59e9b-428">Simple strings (binary data up to 512 MB in length)</span></span>
  - <span data-ttu-id="59e9b-429">Tipi di aggregazione, ad esempio elenchi, che possono svolgere la funzione di code e stack</span><span class="sxs-lookup"><span data-stu-id="59e9b-429">Aggregate types such as lists (which can act as queues and stacks)</span></span>
  - <span data-ttu-id="59e9b-430">Set ordinati e non ordinati</span><span class="sxs-lookup"><span data-stu-id="59e9b-430">Sets (ordered and unordered)</span></span>
  - <span data-ttu-id="59e9b-431">Hash che consentono di raggruppare i campi correlati, ad esempio gli elementi che rappresentano i campi in un oggetto</span><span class="sxs-lookup"><span data-stu-id="59e9b-431">Hashes (which can group related fields together, such as the items that represent the fields in an object)</span></span>

- <span data-ttu-id="59e9b-432">I tipi di aggregazione consentono di associare numerosi valori correlati alla stessa chiave.</span><span class="sxs-lookup"><span data-stu-id="59e9b-432">The aggregate types enable you to associate many related values with the same key.</span></span> <span data-ttu-id="59e9b-433">Una chiave Redis identifica un elenco, un set o un hash anziché gli elementi di dati in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-433">A Redis key identifies a list, set, or hash rather than the data items that it contains.</span></span> <span data-ttu-id="59e9b-434">Questi tipi sono tutti disponibili con Cache Redis di Azure e sono descritti nella pagina relativa ai [tipi di dati] nel sito Web Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-434">These types are all available with Azure Redis Cache and are described by the [Data types] page on the Redis website.</span></span> <span data-ttu-id="59e9b-435">Ad esempio, in una parte di un sistema di e-commerce che tiene traccia degli ordini effettuati dai clienti, i dettagli di ogni cliente possono essere archiviati in un hash Redis associato a una chiave costituita dall'ID cliente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-435">For example, in part of an e-commerce system that tracks the orders that are placed by customers, the details of each customer can be stored in a Redis hash that is keyed by using the customer ID.</span></span> <span data-ttu-id="59e9b-436">Ogni hash può contenere un insieme di ID degli ordini del cliente.</span><span class="sxs-lookup"><span data-stu-id="59e9b-436">Each hash can hold a collection of order IDs for the customer.</span></span> <span data-ttu-id="59e9b-437">Un set di Redis separato può contenere gli ordini, anch'essi strutturati come hash e associati a una chiave costituita dall'ID ordine.</span><span class="sxs-lookup"><span data-stu-id="59e9b-437">A separate Redis set can hold the orders, again structured as hashes, and keyed by using the order ID.</span></span> <span data-ttu-id="59e9b-438">Nella figura 8 viene illustrata questa struttura.</span><span class="sxs-lookup"><span data-stu-id="59e9b-438">Figure 8 shows this structure.</span></span> <span data-ttu-id="59e9b-439">Si noti che Redis non implementa alcuna forma di integrità referenziale, pertanto è responsabilità dello sviluppatore mantenere le relazioni tra clienti e ordini.</span><span class="sxs-lookup"><span data-stu-id="59e9b-439">Note that Redis does not implement any form of referential integrity, so it is the developer's responsibility to maintain the relationships between customers and orders.</span></span>

![Struttura consigliata nell'archivio Redis per la registrazione degli ordini dei clienti e dei relativi dettagli](./images/data-partitioning/RedisCustomersandOrders.png)

<span data-ttu-id="59e9b-441">*Figura 8. Struttura consigliata nell'archivio Redis per la registrazione degli ordini dei clienti e dei relativi dettagli.*</span><span class="sxs-lookup"><span data-stu-id="59e9b-441">*Figure 8. Suggested structure in Redis storage for recording customer orders and their details.*</span></span>

> [!NOTE]
> <span data-ttu-id="59e9b-442">In Redis, tutte le chiavi sono valori di dati binari, come le stringhe Redis, e possono contenere fino a 512 MB di dati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-442">In Redis, all keys are binary data values (like Redis strings) and can contain up to 512 MB of data.</span></span> <span data-ttu-id="59e9b-443">In teoria, una chiave può contenere qualsiasi informazione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-443">In theory, a key can contain almost any information.</span></span> <span data-ttu-id="59e9b-444">Tuttavia, è consigliabile adottare una convenzione di denominazione coerente per le chiavi che descriva il tipo di dati e identifichi l'entità senza essere eccessivamente lunga.</span><span class="sxs-lookup"><span data-stu-id="59e9b-444">However, we recommend adopting a consistent naming convention for keys that is descriptive of the type of data and that identifies the entity, but is not excessively long.</span></span> <span data-ttu-id="59e9b-445">Un approccio comune consiste nell'usare chiavi nel formato "tipo_entità:ID".</span><span class="sxs-lookup"><span data-stu-id="59e9b-445">A common approach is to use keys of the form "entity_type:ID".</span></span> <span data-ttu-id="59e9b-446">Ad esempio, è possibile usare "cliente:99" per indicare la chiave per il cliente con ID 99.</span><span class="sxs-lookup"><span data-stu-id="59e9b-446">For example, you can use "customer:99" to indicate the key for a customer with the ID 99.</span></span>

- <span data-ttu-id="59e9b-447">È possibile implementare il partizionamento verticale archiviando le informazioni correlate in aggregazioni diverse nello stesso database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-447">You can implement vertical partitioning by storing related information in different aggregations in the same database.</span></span> <span data-ttu-id="59e9b-448">Ad esempio, in un'applicazione di e-commerce è possibile archiviare le informazioni sui prodotti cui viene eseguito l'accesso di frequente in un hash di Redis e le informazioni dettagliate usate meno frequentemente in un altro hash.</span><span class="sxs-lookup"><span data-stu-id="59e9b-448">For example, in an e-commerce application, you can store commonly accessed information about products in one Redis hash and less frequently used detailed information in another.</span></span> <span data-ttu-id="59e9b-449">Entrambi gli hash possono usare lo stesso ID prodotto come parte della chiave.</span><span class="sxs-lookup"><span data-stu-id="59e9b-449">Both hashes can use the same product ID as part of the key.</span></span> <span data-ttu-id="59e9b-450">Ad esempio, è possibile usare "prodotto: *nn*" (dove *nn* è l'ID prodotto) per le informazioni sul prodotto e "dettagli_prodotto: *nn*" per i dati dettagliati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-450">For example, you can use "product: *nn*" (where *nn* is the product ID) for the product information and "product_details: *nn*" for the detailed data.</span></span> <span data-ttu-id="59e9b-451">Questa strategia può contribuire a ridurre il volume dei dati recuperati dalla maggior parte delle query.</span><span class="sxs-lookup"><span data-stu-id="59e9b-451">This strategy can help reduce the volume of data that most queries are likely to retrieve.</span></span>

- <span data-ttu-id="59e9b-452">Sebbene sia possibile ripartizionare un archivio dati Redis, tenere presente che si tratta di un'attività lunga e complessa.</span><span class="sxs-lookup"><span data-stu-id="59e9b-452">You can repartition a Redis data store, but keep in mind that it's a complex and time-consuming task.</span></span> <span data-ttu-id="59e9b-453">Il clustering Redis può ripartizionare i dati automaticamente, ma questa funzionalità non è disponibile con Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="59e9b-453">Redis clustering can repartition data automatically, but this capability is not available with Azure Redis Cache.</span></span> <span data-ttu-id="59e9b-454">Di conseguenza, quando si progetta lo schema di partizionamento, cercare di lasciare spazio libero sufficiente in ogni partizione per consentire la crescita dei dati prevista nel tempo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-454">Therefore, when you design your partitioning scheme, try to leave sufficient free space in each partition to allow for expected data growth over time.</span></span> <span data-ttu-id="59e9b-455">Tuttavia, tenere presente che Cache Redis di Azure consente di memorizzare dati temporaneamente e che i dati contenuti nella cache possono avere una durata limitata, specificata come valore time-to-live (TTL).</span><span class="sxs-lookup"><span data-stu-id="59e9b-455">However, remember that Azure Redis Cache is intended to cache data temporarily, and that data held in the cache can have a limited lifetime specified as a time-to-live (TTL) value.</span></span> <span data-ttu-id="59e9b-456">Per i dati relativamente volatili, il TTL può essere più breve, ma per i dati statici il TTL può essere molto più lungo.</span><span class="sxs-lookup"><span data-stu-id="59e9b-456">For relatively volatile data, the TTL can be short, but for static data the TTL can be a lot longer.</span></span> <span data-ttu-id="59e9b-457">Evitare di archiviare grandi quantità di dati di lunga durata nella cache, se il volume dei dati riempe la cache.</span><span class="sxs-lookup"><span data-stu-id="59e9b-457">Avoid storing large amounts of long-lived data in the cache if the volume of this data is likely to fill the cache.</span></span> <span data-ttu-id="59e9b-458">È possibile specificare un criterio di rimozione che spinge la Cache Redis di Azure a rimuovere i dati se lo spazio è prezioso.</span><span class="sxs-lookup"><span data-stu-id="59e9b-458">You can specify an eviction policy that causes Azure Redis Cache to remove data if space is at a premium.</span></span>

  > [!NOTE]
  > <span data-ttu-id="59e9b-459">Con Cache Redis di Azure è possibile specificare le dimensioni massime della cache (da 250 MB a 53 GB) selezionando il piano tariffario appropriato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-459">When you use Azure Redis cache, you specify the maximum size of the cache (from 250 MB to 53 GB) by selecting the appropriate pricing tier.</span></span> <span data-ttu-id="59e9b-460">Tuttavia, dopo aver creato una cache Redis di Azure, non è possibile aumentare o diminuire le dimensioni della cache.</span><span class="sxs-lookup"><span data-stu-id="59e9b-460">However, after an Azure Redis Cache has been created, you cannot increase (or decrease) its size.</span></span>

- <span data-ttu-id="59e9b-461">Poiché i batch e le transazioni di Redis non possono estendersi su più connessioni, è consigliabile mantenere tutti i dati interessati da un batch o da una transazione nello stesso database (partizione).</span><span class="sxs-lookup"><span data-stu-id="59e9b-461">Redis batches and transactions cannot span multiple connections, so all data that is affected by a batch or transaction should be held in the same database (shard).</span></span>

  > [!NOTE]
  > <span data-ttu-id="59e9b-462">Una sequenza di operazioni in una transazione di Redis non è necessariamente atomica.</span><span class="sxs-lookup"><span data-stu-id="59e9b-462">A sequence of operations in a Redis transaction is not necessarily atomic.</span></span> <span data-ttu-id="59e9b-463">I comandi che costituiscono una transazione vengono verificati e messi in coda prima dell'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="59e9b-463">The commands that compose a transaction are verified and queued before they run.</span></span> <span data-ttu-id="59e9b-464">Se si verifica un errore durante questa fase, l'intera coda viene eliminata.</span><span class="sxs-lookup"><span data-stu-id="59e9b-464">If an error occurs during this phase, the entire queue is discarded.</span></span> <span data-ttu-id="59e9b-465">Tuttavia, dopo che la transazione è stata inviata correttamente, i comandi in coda vengono eseguiti in sequenza.</span><span class="sxs-lookup"><span data-stu-id="59e9b-465">However, after the transaction has been successfully submitted, the queued commands run in sequence.</span></span> <span data-ttu-id="59e9b-466">Se un comando non viene eseguito, viene interrotta soltanto l'esecuzione di quel comando.</span><span class="sxs-lookup"><span data-stu-id="59e9b-466">If any command fails, only that command stops running.</span></span> <span data-ttu-id="59e9b-467">Tutti i comandi precedenti e successivi nella coda vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="59e9b-467">All previous and subsequent commands in the queue are performed.</span></span> <span data-ttu-id="59e9b-468">Per altre informazioni, visitare la pagina relativa alle [transazioni] nel sito Web Redis.</span><span class="sxs-lookup"><span data-stu-id="59e9b-468">For more information, go to the [Transactions] page on the Redis website.</span></span>

- <span data-ttu-id="59e9b-469">Redis supporta un numero limitato di operazioni atomiche.</span><span class="sxs-lookup"><span data-stu-id="59e9b-469">Redis supports a limited number of atomic operations.</span></span> <span data-ttu-id="59e9b-470">Le uniche operazioni di questo tipo che supportano più valori e chiavi sono le operazioni MGET e MSET.</span><span class="sxs-lookup"><span data-stu-id="59e9b-470">The only operations of this type that support multiple keys and values are MGET and MSET operations.</span></span> <span data-ttu-id="59e9b-471">Le operazioni MGET restituiscono una raccolta di valori per un elenco di chiavi specificato, mentre le operazioni MSET archiviano una raccolta di valori per un elenco di chiavi specificato.</span><span class="sxs-lookup"><span data-stu-id="59e9b-471">MGET operations return a collection of values for a specified list of keys, and MSET operations store a collection of values for a specified list of keys.</span></span> <span data-ttu-id="59e9b-472">Se è necessario usare queste operazioni, le coppie chiave-valore cui fanno riferimento i comandi MSET e MGET devono essere archiviate nello stesso database.</span><span class="sxs-lookup"><span data-stu-id="59e9b-472">If you need to use these operations, the key-value pairs that are referenced by the MSET and MGET commands must be stored within the same database.</span></span>

## <a name="partitioning-azure-service-fabric"></a><span data-ttu-id="59e9b-473">Partizionamento di Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="59e9b-473">Partitioning Azure Service Fabric</span></span>

<span data-ttu-id="59e9b-474">Azure Service Fabric è una piattaforma di microservizi che offre un runtime per le applicazioni distribuite nel cloud.</span><span class="sxs-lookup"><span data-stu-id="59e9b-474">Azure Service Fabric is a microservices platform that provides a runtime for distributed applications in the cloud.</span></span> <span data-ttu-id="59e9b-475">Service Fabric supporta i file eseguibili guest .Net, i servizi con stato e senza stato e i contenitori.</span><span class="sxs-lookup"><span data-stu-id="59e9b-475">Service Fabric supports .Net guest executables, stateful and stateless services, and containers.</span></span> <span data-ttu-id="59e9b-476">I servizi con stato offrono una [raccolta Reliable][service-fabric-reliable-collections] per archiviare in modo permanente i dati in una raccolta chiave-valore all'interno del cluster di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="59e9b-476">Stateful services provide a [reliable collection][service-fabric-reliable-collections] to persistently store data in a key-value collection within the Service Fabric cluster.</span></span> <span data-ttu-id="59e9b-477">Per altre informazioni sulle strategie per le chiavi di partizionamento in una raccolta affidabile, vedere [Linee guida e consigli per Reliable Collections in Azure Service Fabric].</span><span class="sxs-lookup"><span data-stu-id="59e9b-477">For more information about strategies for partitioning keys in a reliable collection, see [guidelines and recommendations for reliable collections in Azure Service Fabric].</span></span>

### <a name="more-information"></a><span data-ttu-id="59e9b-478">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="59e9b-478">More information</span></span>

- <span data-ttu-id="59e9b-479">[Panoramica di Azure Service Fabric] è un'introduzione ad Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="59e9b-479">[Overview of Azure Service Fabric] is an introduction to Azure Service Fabric.</span></span>

- <span data-ttu-id="59e9b-480">[Partizionare Reliable Services di Service Fabric] offre altre informazioni su Reliable Services in Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="59e9b-480">[Partition Service Fabric reliable services] provides more information about reliable services in Azure Service Fabric.</span></span>

## <a name="partitioning-azure-event-hubs"></a><span data-ttu-id="59e9b-481">Partizionamento di Hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="59e9b-481">Partitioning Azure Event Hubs</span></span>

<span data-ttu-id="59e9b-482">[Hub eventi di Azure][event-hubs] è progettato per consentire il flusso dei dati su larga scala e il partizionamento è incorporato nel servizio per abilitare la scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="59e9b-482">[Azure Event Hubs][event-hubs] is designed for data streaming at massive scale, and partitioning is built into the service to enable horizontal scaling.</span></span> <span data-ttu-id="59e9b-483">Ogni consumer legge solo una partizione specifica del flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59e9b-483">Each consumer only reads a specific partition of the message stream.</span></span>

<span data-ttu-id="59e9b-484">L'autore di eventi è a conoscenza solo della chiave di partizione, non la partizione in cui gli eventi vengono pubblicati.</span><span class="sxs-lookup"><span data-stu-id="59e9b-484">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="59e9b-485">Questa separazione tra chiave e partizione evita che il mittente debba conoscere troppe informazioni sull'elaborazione downstream.</span><span class="sxs-lookup"><span data-stu-id="59e9b-485">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="59e9b-486">È anche possibile inviare eventi direttamente a una determinata partizione, ma in genere non è consigliabile.</span><span class="sxs-lookup"><span data-stu-id="59e9b-486">(It's also possible send events directly to a given partition, but generally that's not recommended.)</span></span>  

<span data-ttu-id="59e9b-487">Quando si seleziona il conteggio delle partizioni, prendere in considerazione la scalabilità a lungo termine.</span><span class="sxs-lookup"><span data-stu-id="59e9b-487">Consider long-term scale when you select the partition count.</span></span> <span data-ttu-id="59e9b-488">Dopo la creazione di un hub eventi, non è possibile modificare il numero di partizioni.</span><span class="sxs-lookup"><span data-stu-id="59e9b-488">After an event hub is created, you can't change the number of partitions.</span></span>

<span data-ttu-id="59e9b-489">Per altre informazioni sull'uso delle partizioni in Hub eventi, vedere [Che cos'è Hub eventi?].</span><span class="sxs-lookup"><span data-stu-id="59e9b-489">For more information about using partitions in Event Hubs, see [What is Event Hubs?].</span></span>

<span data-ttu-id="59e9b-490">Per considerazioni sui compromessi tra disponibilità e coerenza, vedere [Disponibilità e coerenza nell'Hub eventi].</span><span class="sxs-lookup"><span data-stu-id="59e9b-490">For considerations about trade-offs between availability and consistency, see [Availability and consistency in Event Hubs].</span></span>

[Disponibilità e coerenza nell'Hub eventi]: /azure/event-hubs/event-hubs-availability-and-consistency
[Availability and consistency in Event Hubs]: /azure/event-hubs/event-hubs-availability-and-consistency
[azure-limits]: /azure/azure-subscription-service-limits
[Azure Content Delivery Network]: /azure/cdn/cdn-overview
[Cache Redis di Azure]: https://azure.microsoft.com/services/cache/
[Azure Redis Cache]: https://azure.microsoft.com/services/cache/
[Azure Storage Scalability and Performance Targets]: /azure/storage/storage-scalability-targets
[Azure Storage Table Design Guide]: /azure/storage/storage-table-design-guide
[Building a Polyglot Solution]: https://msdn.microsoft.com/library/dn313279.aspx
[cosmos-db-ru]: /azure/cosmos-db/request-units
[Data Access for Highly-Scalable Solutions: Using SQL, NoSQL, and Polyglot Persistence]: https://msdn.microsoft.com/library/dn271399.aspx
[Data consistency primer]: https://aka.ms/Data-Consistency-Primer
[Data Partitioning Guidance]: https://msdn.microsoft.com/library/dn589795.aspx
[Tipi di dati]: https://redis.io/topics/data-types
[Data Types]: https://redis.io/topics/data-types
[cosmosdb-sql-api]: /azure/cosmos-db/sql-api-introduction
[Elastic Database features overview]: /azure/sql-database/sql-database-elastic-scale-introduction
[event-hubs]: /azure/event-hubs
[Federations Migration Utility]: https://code.msdn.microsoft.com/vstudio/Federations-Migration-ce61e9c1
[Linee guida e consigli per Reliable Collections in Azure Service Fabric]: /azure/service-fabric/service-fabric-reliable-services-reliable-collections-guidelines
[guidelines and recommendations for reliable collections in Azure Service Fabric]: /azure/service-fabric/service-fabric-reliable-services-reliable-collections-guidelines
[Multi-shard querying]: /azure/sql-database/sql-database-elastic-scale-multishard-querying
[Panoramica di Azure Service Fabric]: /azure/service-fabric/service-fabric-overview
[Overview of Azure Service Fabric]: /azure/service-fabric/service-fabric-overview
[Partizionare Reliable Services di Service Fabric]: /azure/service-fabric/service-fabric-concepts-partitioning
[Partition Service Fabric reliable services]: /azure/service-fabric/service-fabric-concepts-partitioning
[partizionamento e alla suddivisione dei dati in più istanze di Redis]: https://redis.io/topics/partitioning
[Partitioning: how to split data among multiple Redis instances]: https://redis.io/topics/partitioning
[Performing Entity Group Transactions]: /rest/api/storageservices/Performing-Entity-Group-Transactions
[Esercitazione del cluster Redis]: https://redis.io/topics/cluster-tutorial
[Redis cluster tutorial]: https://redis.io/topics/cluster-tutorial
[esecuzione di Redis in una macchina virtuale CentOS Linux in Azure]: https://blogs.msdn.microsoft.com/tconte/2012/06/08/running-redis-on-a-centos-linux-vm-in-windows-azure/
[Running Redis on a CentOS Linux VM in Azure]: https://blogs.msdn.microsoft.com/tconte/2012/06/08/running-redis-on-a-centos-linux-vm-in-windows-azure/
[Scaling using the Elastic Database split-merge tool]: /azure/sql-database/sql-database-elastic-scale-overview-split-and-merge
[Using Azure Content Delivery Network]: /azure/cdn/cdn-create-new-endpoint
[Quote del bus di servizio]: /azure/service-bus-messaging/service-bus-quotas
[Service Bus quotas]: /azure/service-bus-messaging/service-bus-quotas
[service-fabric-reliable-collections]: /azure/service-fabric/service-fabric-reliable-services-reliable-collections
[Limiti dei servizi in Ricerca di Azure]:  /azure/search/search-limits-quotas-capacity
[Service limits in Azure Search]:  /azure/search/search-limits-quotas-capacity
[Sharding pattern]: ../patterns/sharding.md
[Tipi di dati supportati (Ricerca di Azure)]:  https://msdn.microsoft.com/library/azure/dn798938.aspx
[Supported Data Types (Azure Search)]:  https://msdn.microsoft.com/library/azure/dn798938.aspx
[Transazioni]: https://redis.io/topics/transactions
[Transactions]: https://redis.io/topics/transactions
[Che cos'è Hub eventi?]: /azure/event-hubs/event-hubs-what-is-event-hubs
[What is Event Hubs?]: /azure/event-hubs/event-hubs-what-is-event-hubs
[Che cos'è la Ricerca di Azure?]: /azure/search/search-what-is-azure-search
[What is Azure Search?]: /azure/search/search-what-is-azure-search
[What is Azure SQL Database?]: /azure/sql-database/sql-database-technical-overview
[Obiettivi di scalabilità]: /azure/storage/common/storage-scalability-targets
[scalability targets]: /azure/storage/common/storage-scalability-targets
