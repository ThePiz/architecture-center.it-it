---
title: Modello di identità federativa
titleSuffix: Cloud Design Patterns
description: È possibile delegare l'autenticazione a un provider di identità esterno.
keywords: schema progettuale
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: f4e8d2dff1c653cf2b8ef0109f1cc3027e5428b9
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54483021"
---
# <a name="federated-identity-pattern"></a><span data-ttu-id="a1afc-104">Modello di identità federativa</span><span class="sxs-lookup"><span data-stu-id="a1afc-104">Federated Identity pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="a1afc-105">È possibile delegare l'autenticazione a un provider di identità esterno.</span><span class="sxs-lookup"><span data-stu-id="a1afc-105">Delegate authentication to an external identity provider.</span></span> <span data-ttu-id="a1afc-106">Questo può semplificare lo sviluppo, ridurre al minimo i requisiti per l'amministrazione utenti e migliorare l'esperienza utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-106">This can simplify development, minimize the requirement for user administration, and improve the user experience of the application.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="a1afc-107">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="a1afc-107">Context and problem</span></span>

<span data-ttu-id="a1afc-108">Gli utenti di solito usano più applicazioni messe a disposizione e ospitate da diverse organizzazioni con cui hanno relazioni commerciali.</span><span class="sxs-lookup"><span data-stu-id="a1afc-108">Users typically need to work with multiple applications provided and hosted by different organizations they have a business relationship with.</span></span> <span data-ttu-id="a1afc-109">Ogni organizzazione potrebbe richiedere l'uso di credenziali specifiche (e diverse).</span><span class="sxs-lookup"><span data-stu-id="a1afc-109">These users might be required to use specific (and different) credentials for each one.</span></span> <span data-ttu-id="a1afc-110">Ciò potrebbe causare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="a1afc-110">This can:</span></span>

- <span data-ttu-id="a1afc-111">**Un'esperienza utente frammentaria**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-111">**Cause a disjointed user experience**.</span></span> <span data-ttu-id="a1afc-112">Gli utenti dimenticano spesso le credenziali di accesso quando ne usano molte.</span><span class="sxs-lookup"><span data-stu-id="a1afc-112">Users often forget sign-in credentials when they have many different ones.</span></span>

- <span data-ttu-id="a1afc-113">**Esposizione di vulnerabilità della sicurezza**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-113">**Expose security vulnerabilities**.</span></span> <span data-ttu-id="a1afc-114">Quando un utente lascia l'azienda, il suo account deve essere immediatamente sottoposto a deprovisioning.</span><span class="sxs-lookup"><span data-stu-id="a1afc-114">When a user leaves the company the account must immediately be deprovisioned.</span></span> <span data-ttu-id="a1afc-115">È facile trascurare questa esigenza nelle aziende di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a1afc-115">It's easy to overlook this in large organizations.</span></span>

- <span data-ttu-id="a1afc-116">**Gestione complicata degli utenti**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-116">**Complicate user management**.</span></span> <span data-ttu-id="a1afc-117">Gli amministratori devono gestire le credenziali per tutti gli utenti ed eseguire attività aggiuntive, ad esempio inviare promemoria per le password.</span><span class="sxs-lookup"><span data-stu-id="a1afc-117">Administrators must manage credentials for all of the users, and perform additional tasks such as providing password reminders.</span></span>

<span data-ttu-id="a1afc-118">Gli utenti in genere preferiscono usare le stesse credenziali per tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="a1afc-118">Users typically prefer to use the same credentials for all these applications.</span></span>

## <a name="solution"></a><span data-ttu-id="a1afc-119">Soluzione</span><span class="sxs-lookup"><span data-stu-id="a1afc-119">Solution</span></span>

<span data-ttu-id="a1afc-120">Implementare un meccanismo di autenticazione in grado di usare l'identità federativa.</span><span class="sxs-lookup"><span data-stu-id="a1afc-120">Implement an authentication mechanism that can use federated identity.</span></span> <span data-ttu-id="a1afc-121">Separare l'autenticazione utente dal codice dell'applicazione e delegare l'autenticazione a un provider di identità attendibile.</span><span class="sxs-lookup"><span data-stu-id="a1afc-121">Separate user authentication from the application code, and delegate authentication to a trusted identity provider.</span></span> <span data-ttu-id="a1afc-122">In questo modo si semplifica lo sviluppo e si consente agli utenti di eseguire l'autenticazione usando un'ampia gamma di provider di identità (IdP), riducendo al minimo il carico amministrativo.</span><span class="sxs-lookup"><span data-stu-id="a1afc-122">This can simplify development and allow users to authenticate using a wider range of identity providers (IdP) while minimizing the administrative overhead.</span></span> <span data-ttu-id="a1afc-123">Si consente inoltre di separare chiaramente l'autenticazione dall'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-123">It also allows you to clearly decouple authentication from authorization.</span></span>

<span data-ttu-id="a1afc-124">I provider di identità attendibili includono le directory aziendali, i servizi di federazione locali, altri servizi token di sicurezza (STS) di partner commerciali e i provider di identità social in grado di autenticare gli utenti che hanno, ad esempio, un account Microsoft, Google, Yahoo! o Facebook.</span><span class="sxs-lookup"><span data-stu-id="a1afc-124">The trusted identity providers include corporate directories, on-premises federation services, other security token services (STS) provided by business partners, or social identity providers that can authenticate users who have, for example, a Microsoft, Google, Yahoo!, or Facebook account.</span></span>

<span data-ttu-id="a1afc-125">Nella figura viene illustrato il modello di identità federativa quando un'applicazione client deve accedere a un servizio che richiede l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-125">The figure illustrates the Federated Identity pattern when a client application needs to access a service that requires authentication.</span></span> <span data-ttu-id="a1afc-126">L'autenticazione viene eseguita da un IdP che interagisce con un servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="a1afc-126">The authentication is performed by an IdP that works in concert with an STS.</span></span> <span data-ttu-id="a1afc-127">L'IdP rilascia token di sicurezza con informazioni relative all'utente autenticato.</span><span class="sxs-lookup"><span data-stu-id="a1afc-127">The IdP issues security tokens that provide information about the authenticated user.</span></span> <span data-ttu-id="a1afc-128">Tali informazioni, denominate attestazioni, includono l'identità dell'utente e possono includere anche altre informazioni, ad esempio l'appartenenza ai ruoli e diritti di accesso più granulari.</span><span class="sxs-lookup"><span data-stu-id="a1afc-128">This information, referred to as claims, includes the user’s identity, and might also include other information such as role membership and more granular access rights.</span></span>

![Panoramica dell'autenticazione federata](./_images/federated-identity-overview.png)

<span data-ttu-id="a1afc-130">Questo modello viene spesso definito controllo di accesso basato sulle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="a1afc-130">This model is often called claims-based access control.</span></span> <span data-ttu-id="a1afc-131">Le applicazioni e i servizi autorizzano l'accesso alle funzionalità basate sulle attestazioni contenute nel token.</span><span class="sxs-lookup"><span data-stu-id="a1afc-131">Applications and services authorize access to features and functionality based on the claims contained in the token.</span></span> <span data-ttu-id="a1afc-132">Il servizio che richiede l'autenticazione deve considerare attendibile il provider di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-132">The service that requires authentication must trust the IdP.</span></span> <span data-ttu-id="a1afc-133">L'applicazione client contatta il provider di identità che esegue l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-133">The client application contacts the IdP that performs the authentication.</span></span> <span data-ttu-id="a1afc-134">Se l'autenticazione ha esito positivo, il provider di identità restituisce un token contenente le attestazioni che identificano l'utente per il servizio STS. Si noti che il provider di identità e il servizio token di sicurezza possono essere lo stesso servizio.</span><span class="sxs-lookup"><span data-stu-id="a1afc-134">If the authentication is successful, the IdP returns a token containing the claims that identify the user to the STS (note that the IdP and STS can be the same service).</span></span> <span data-ttu-id="a1afc-135">Il servizio STS può trasformare e ottimizzare le attestazioni nel token in base a regole predefinite, prima di restituirlo al client.</span><span class="sxs-lookup"><span data-stu-id="a1afc-135">The STS can transform and augment the claims in the token based on predefined rules, before returning it to the client.</span></span> <span data-ttu-id="a1afc-136">L'applicazione client può quindi passare questo token al servizio come prova dell'identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-136">The client application can then pass this token to the service as proof of its identity.</span></span>

> <span data-ttu-id="a1afc-137">Possono essere presenti altri servizi token di sicurezza nella catena di trust.</span><span class="sxs-lookup"><span data-stu-id="a1afc-137">There might be additional STSs in the chain of trust.</span></span> <span data-ttu-id="a1afc-138">Ad esempio, nello scenario descritto in seguito, un servizio token di sicurezza locale ritiene attendibile un altro servizio token di sicurezza che è responsabile dell'accesso a un provider di identità per autenticare l'utente.</span><span class="sxs-lookup"><span data-stu-id="a1afc-138">For example, in the scenario described later, an on-premises STS trusts another STS that is responsible for accessing an identity provider to authenticate the user.</span></span> <span data-ttu-id="a1afc-139">Questo approccio è comune in scenari aziendali in cui sono presenti un servizio token di sicurezza e una directory locali.</span><span class="sxs-lookup"><span data-stu-id="a1afc-139">This approach is common in enterprise scenarios where there's an on-premises STS and directory.</span></span>

<span data-ttu-id="a1afc-140">L'autenticazione federata offre una soluzione basata su standard per il problema dell'attendibilità delle identità tra domini diversi ed è in grado di supportare l'accesso Single Sign-On.</span><span class="sxs-lookup"><span data-stu-id="a1afc-140">Federated authentication provides a standards-based solution to the issue of trusting identities across diverse domains, and can support single sign-on.</span></span> <span data-ttu-id="a1afc-141">Viene usata sempre più di frequente in tutti i tipi di applicazioni, soprattutto in quelle ospitate nel cloud, poiché supporta il Single Sign-On senza richiedere una connessione di rete diretta ai provider di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-141">It's becoming more common across all types of applications, especially cloud-hosted applications, because it supports single sign-on without requiring a direct network connection to identity providers.</span></span> <span data-ttu-id="a1afc-142">L'utente non deve immettere le credenziali per ogni applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-142">The user doesn't have to enter credentials for every application.</span></span> <span data-ttu-id="a1afc-143">Ciò aumenta la protezione poiché viene impedita la creazione delle credenziali necessarie per accedere a molte applicazioni diverse e le credenziali dell'utente sono nascoste per tutti tranne il provider di identità originale.</span><span class="sxs-lookup"><span data-stu-id="a1afc-143">This increases security because it prevents the creation of credentials required to access many different applications, and it also hides the user’s credentials from all but the original identity provider.</span></span> <span data-ttu-id="a1afc-144">Le applicazioni vedono solo le informazioni dell'identità autenticata contenute all'interno del token.</span><span class="sxs-lookup"><span data-stu-id="a1afc-144">Applications see just the authenticated identity information contained within the token.</span></span>

<span data-ttu-id="a1afc-145">Il vantaggio principale offerto dall'identità federativa è il fatto che la gestione delle identità e delle credenziali è responsabilità del provider di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-145">Federated identity also has the major advantage that management of the identity and credentials is the responsibility of the identity provider.</span></span> <span data-ttu-id="a1afc-146">L'applicazione o il servizio non richiede l'uso di funzionalità di gestione di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-146">The application or service doesn't need to provide identity management features.</span></span> <span data-ttu-id="a1afc-147">Inoltre, negli scenari aziendali, la directory aziendale non richiede informazioni sull'utente se considera attendibile il provider di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-147">In addition, in corporate scenarios, the corporate directory doesn't need to know about the user if it trusts the identity provider.</span></span> <span data-ttu-id="a1afc-148">In questo modo si elimina tutto il carico amministrativo dovuto alla gestione delle identità degli utenti nella directory.</span><span class="sxs-lookup"><span data-stu-id="a1afc-148">This removes all the administrative overhead of managing the user identity within the directory.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="a1afc-149">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="a1afc-149">Issues and considerations</span></span>

<span data-ttu-id="a1afc-150">Quando si progettano applicazioni che implementano l'autenticazione federata, tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="a1afc-150">Consider the following when designing applications that implement federated authentication:</span></span>

- <span data-ttu-id="a1afc-151">L'autenticazione può essere un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="a1afc-151">Authentication can be a single point of failure.</span></span> <span data-ttu-id="a1afc-152">Se si distribuisce l'applicazione a più data center, considerare la possibilità di distribuire il meccanismo di gestione delle identità agli stessi data center per mantenere l'affidabilità e la disponibilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-152">If you deploy your application to multiple datacenters, consider deploying your identity management mechanism to the same datacenters to maintain application reliability and availability.</span></span>

- <span data-ttu-id="a1afc-153">Gli strumenti di autenticazione consentono di configurare il controllo di accesso in base alle attestazioni di ruolo contenute nel token di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-153">Authentication tools make it possible to configure access control based on role claims contained in the authentication token.</span></span> <span data-ttu-id="a1afc-154">Ciò è noto anche come controllo di accesso basato sui ruoli (RBAC) e può consentire un livello più granulare di controllo sull'accesso a funzionalità e risorse.</span><span class="sxs-lookup"><span data-stu-id="a1afc-154">This is often referred to as role-based access control (RBAC), and it can allow a more granular level of control over access to features and resources.</span></span>

- <span data-ttu-id="a1afc-155">A differenza di una directory aziendale, l'autenticazione basata sulle attestazioni che usa i provider di identità social generalmente non offre informazioni sull'utente autenticato a parte un indirizzo di posta elettronica e forse un nome.</span><span class="sxs-lookup"><span data-stu-id="a1afc-155">Unlike a corporate directory, claims-based authentication using social identity providers doesn't usually provide information about the authenticated user other than an email address, and perhaps a name.</span></span> <span data-ttu-id="a1afc-156">Alcuni provider di identità social, ad esempio un account Microsoft, usano solo un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="a1afc-156">Some social identity providers, such as a Microsoft account, provide only a unique identifier.</span></span> <span data-ttu-id="a1afc-157">In genere, l'applicazione deve gestire alcune informazioni sugli utenti registrati ed essere in grado di associare queste informazioni all'identificatore contenuto nelle attestazioni nel token.</span><span class="sxs-lookup"><span data-stu-id="a1afc-157">The application usually needs to maintain some information on registered users, and be able to match this information to the identifier contained in the claims in the token.</span></span> <span data-ttu-id="a1afc-158">Ciò avviene di solito durante la registrazione quando l'utente accede per la prima volta all'applicazione e in seguito le informazioni vengono inserite nel token come attestazioni aggiuntive dopo ogni autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-158">Typically this is done through registration when the user first accesses the application, and information is then injected into the token as additional claims after each authentication.</span></span>

- <span data-ttu-id="a1afc-159">Se è presente più di un provider di identità configurato per il servizio token di sicurezza, è necessario rilevare a quale provider di identità deve essere reindirizzato l'utente per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-159">If there's more than one identity provider configured for the STS, it must detect which identity provider the user should be redirected to for authentication.</span></span> <span data-ttu-id="a1afc-160">Questo processo è detto individuazione dell'area di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-160">This process is called home realm discovery.</span></span> <span data-ttu-id="a1afc-161">Il servizio token di sicurezza potrebbe essere in grado di eseguire questa operazione automaticamente in base a un indirizzo di posta elettronica o un nome utente specificato dall'utente, un sottodominio dell'applicazione a cui accede l'utente, l'ambito dell'indirizzo IP dell'utente o il contenuto di un cookie memorizzato nel browser dell'utente.</span><span class="sxs-lookup"><span data-stu-id="a1afc-161">The STS might be able to do this automatically based on an email address or user name that the user provides, a subdomain of the application that the user is accessing, the user’s IP address scope, or on the contents of a cookie stored in the user’s browser.</span></span> <span data-ttu-id="a1afc-162">Ad esempio, se l'utente ha immesso un indirizzo di posta elettronica nel dominio Microsoft, ad esempio user@live.com, il servizio token di sicurezza reindirizzerà l'utente alla pagina di accesso dell'account Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a1afc-162">For example, if the user entered an email address in the Microsoft domain, such as user@live.com, the STS will redirect the user to the Microsoft account sign-in page.</span></span> <span data-ttu-id="a1afc-163">Nelle visite successive, il servizio token di sicurezza può usare un cookie per indicare che l'ultimo accesso è stato effettuato con un account Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a1afc-163">On later visits, the STS could use a cookie to indicate that the last sign in was with a Microsoft account.</span></span> <span data-ttu-id="a1afc-164">Se l'individuazione automatica non è in grado di determinare l'area di autenticazione principale, il servizio token di sicurezza visualizza una pagina di individuazione dell'area di autenticazione in cui sono elencati i provider di identità attendibili e l'utente deve selezionare quello che vuole utilizzare.</span><span class="sxs-lookup"><span data-stu-id="a1afc-164">If automatic discovery can't determine the home realm, the STS will display a home realm discovery page that lists the trusted identity providers, and the user must select the one they want to use.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="a1afc-165">Quando usare questo modello</span><span class="sxs-lookup"><span data-stu-id="a1afc-165">When to use this pattern</span></span>

<span data-ttu-id="a1afc-166">Questo modello è utile per scenari come:</span><span class="sxs-lookup"><span data-stu-id="a1afc-166">This pattern is useful for scenarios such as:</span></span>

- <span data-ttu-id="a1afc-167">**Single Sign-On nell'azienda**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-167">**Single sign-on in the enterprise**.</span></span> <span data-ttu-id="a1afc-168">In questo scenario i dipendenti vengono autenticati per le applicazioni aziendali ospitate nel cloud all'esterno dei limiti di protezione aziendale, in modo che non siano obbligati a effettuare l'accesso ogni volta che visitano un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-168">In this scenario you need to authenticate employees for corporate applications that are hosted in the cloud outside the corporate security boundary, without requiring them to sign in every time they visit an application.</span></span> <span data-ttu-id="a1afc-169">L'esperienza utente è identica a quella in cui si usano le applicazioni locali per cui si è autenticati quando si accede a una rete aziendale e da questo momento i dipendenti hanno accesso a tutte le applicazioni pertinenti senza dover eseguire nuovamente l'accesso.</span><span class="sxs-lookup"><span data-stu-id="a1afc-169">The user experience is the same as when using on-premises applications where they're authenticated when signing in to a corporate network, and from then on have access to all relevant applications without needing to sign in again.</span></span>

- <span data-ttu-id="a1afc-170">**Identità federativa con più partner**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-170">**Federated identity with multiple partners**.</span></span> <span data-ttu-id="a1afc-171">In questo scenario è necessario autenticare sia i dipendenti aziendali che i partner aziendali che non hanno un account nella directory aziendale.</span><span class="sxs-lookup"><span data-stu-id="a1afc-171">In this scenario you need to authenticate both corporate employees and business partners who don't have accounts in the corporate directory.</span></span> <span data-ttu-id="a1afc-172">Ciò è comune nelle applicazioni business-to-business, applicazioni integrate con servizi di terze parti in cui le aziende con sistemi IT diversi hanno risorse unite o condivise.</span><span class="sxs-lookup"><span data-stu-id="a1afc-172">This is common in business-to-business applications, applications that integrate with third-party services, and where companies with different IT systems have merged or shared resources.</span></span>

- <span data-ttu-id="a1afc-173">**Identità federativa nelle applicazioni SaaS**.</span><span class="sxs-lookup"><span data-stu-id="a1afc-173">**Federated identity in SaaS applications**.</span></span> <span data-ttu-id="a1afc-174">In questo scenario i fornitori di software indipendenti offrono un servizio pronto per l'uso per più client o tenant.</span><span class="sxs-lookup"><span data-stu-id="a1afc-174">In this scenario independent software vendors provide a ready-to-use service for multiple clients or tenants.</span></span> <span data-ttu-id="a1afc-175">Ogni tenant viene autenticato usando un provider di identità appropriato.</span><span class="sxs-lookup"><span data-stu-id="a1afc-175">Each tenant authenticates using a suitable identity provider.</span></span> <span data-ttu-id="a1afc-176">Ad esempio, gli utenti aziendali useranno le proprie credenziali aziendali, mentre i consumer e i client del tenant useranno le credenziali di identità social.</span><span class="sxs-lookup"><span data-stu-id="a1afc-176">For example, business users will use their corporate credentials, while consumers and clients of the tenant will use their social identity credentials.</span></span>

<span data-ttu-id="a1afc-177">Questo modello potrebbe non essere utile nelle situazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a1afc-177">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="a1afc-178">Tutti gli utenti dell'applicazione possono essere autenticati da un solo provider di identità e non è obbligatorio eseguire l'autenticazione usando altri provider di identità.</span><span class="sxs-lookup"><span data-stu-id="a1afc-178">All users of the application can be authenticated by one identity provider, and there's no requirement to authenticate using any other identity provider.</span></span> <span data-ttu-id="a1afc-179">Questo è tipico nelle applicazioni aziendali che usano una directory aziendale (accessibile nell'applicazione) per l'autenticazione, usando una VPN o, in uno scenario ospitato nel cloud, una connessione di rete virtuale tra la directory locale e l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-179">This is typical in business applications that use a corporate directory (accessible within the application) for authentication, by using a VPN, or (in a cloud-hosted scenario) through a virtual network connection between the on-premises directory and the application.</span></span>

- <span data-ttu-id="a1afc-180">L'applicazione originariamente è stata creata usando un diverso meccanismo di autenticazione, probabilmente con archivi utente personalizzati, oppure non è in grado di gestire gli standard di negoziazione usati dalle tecnologie basate su attestazioni.</span><span class="sxs-lookup"><span data-stu-id="a1afc-180">The application was originally built using a different authentication mechanism, perhaps with custom user stores, or doesn't have the capability to handle the negotiation standards used by claims-based technologies.</span></span> <span data-ttu-id="a1afc-181">L'adeguamento del controllo di accesso e dell'autenticazione basata su attestazioni nelle applicazioni esistenti può essere complesso ed economicamente non conveniente.</span><span class="sxs-lookup"><span data-stu-id="a1afc-181">Retrofitting claims-based authentication and access control into existing applications can be complex, and probably not cost effective.</span></span>

## <a name="example"></a><span data-ttu-id="a1afc-182">Esempio</span><span class="sxs-lookup"><span data-stu-id="a1afc-182">Example</span></span>

<span data-ttu-id="a1afc-183">Un'organizzazione ospita un'applicazione SaaS in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a1afc-183">An organization hosts a multi-tenant software as a service (SaaS) application in Microsoft Azure.</span></span> <span data-ttu-id="a1afc-184">L'applicazione include un sito Web che i tenant possono usare per gestire l'applicazione per i propri utenti.</span><span class="sxs-lookup"><span data-stu-id="a1afc-184">The application includes a website that tenants can use to manage the application for their own users.</span></span> <span data-ttu-id="a1afc-185">L'applicazione consente ai tenant di accedere al sito Web usando un'identità federativa generata da Active Directory Federation Services (ADFS) quando un utente è autenticato da tale organizzazione con Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a1afc-185">The application allows tenants to access the website by using a federated identity that is generated by Active Directory Federation Services (ADFS) when a user is authenticated by that organization’s own Active Directory.</span></span>

![Come accedono all'applicazione gli utenti di un sottoscrittore aziendale di grandi dimensioni](./_images/federated-identity-multitenat.png)

<span data-ttu-id="a1afc-187">Nella figura viene illustrato come i tenant eseguono l'autenticazione con il proprio provider di identità (passaggio 1), in questo caso ADFS.</span><span class="sxs-lookup"><span data-stu-id="a1afc-187">The figure shows how tenants authenticate with their own identity provider (step 1), in this case ADFS.</span></span> <span data-ttu-id="a1afc-188">Dopo aver autenticato un tenant, ADFS rilascia un token.</span><span class="sxs-lookup"><span data-stu-id="a1afc-188">After successfully authenticating a tenant, ADFS issues a token.</span></span> <span data-ttu-id="a1afc-189">Il browser client inoltra il token al provider federativo dell'applicazione SaaS, che considera attendibili i token emessi da ADFS del tenant, per ottenere un token valido per il provider federativo SaaS (passaggio 2).</span><span class="sxs-lookup"><span data-stu-id="a1afc-189">The client browser forwards this token to the SaaS application’s federation provider, which trusts tokens issued by the tenant’s ADFS, in order to get back a token that is valid for the SaaS federation provider (step 2).</span></span> <span data-ttu-id="a1afc-190">Se necessario, il provider federativo SaaS esegue una trasformazione delle attestazioni contenute nel token in attestazioni che l'applicazione è in grado di riconoscere (passaggio 3) prima di restituire il nuovo token al browser client.</span><span class="sxs-lookup"><span data-stu-id="a1afc-190">If necessary, the SaaS federation provider performs a transformation on the claims in the token into claims that the application recognizes (step 3) before returning the new token to the client browser.</span></span> <span data-ttu-id="a1afc-191">L'applicazione considera attendibili i token rilasciati dal provider federativo SaaS e usa le attestazioni nel token per applicare le regole di autorizzazione (passaggio 4).</span><span class="sxs-lookup"><span data-stu-id="a1afc-191">The application trusts tokens issued by the SaaS federation provider and uses the claims in the token to apply authorization rules (step 4).</span></span>

<span data-ttu-id="a1afc-192">I tenant non dovranno ricordare credenziali separate per accedere all'applicazione e un amministratore della società del tenant può configurare nel proprio servizio ADFS l'elenco di utenti che possono accedere all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a1afc-192">Tenants won't need to remember separate credentials to access the application, and an administrator at the tenant’s company can configure in its own ADFS the list of users that can access the application.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="a1afc-193">Informazioni correlate</span><span class="sxs-lookup"><span data-stu-id="a1afc-193">Related guidance</span></span>

- [<span data-ttu-id="a1afc-194">Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a1afc-194">Microsoft Azure Active Directory</span></span>](https://azure.microsoft.com/services/active-directory/)
- [<span data-ttu-id="a1afc-195">Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="a1afc-195">Active Directory Domain Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="a1afc-196">Active Directory Federation Services</span><span class="sxs-lookup"><span data-stu-id="a1afc-196">Active Directory Federation Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="a1afc-197">Gestione delle identità per le applicazioni multi-tenant in Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a1afc-197">Identity management for multitenant applications in Microsoft Azure</span></span>](/azure/architecture/multitenant-identity)
- [<span data-ttu-id="a1afc-198">Applicazioni multi-tenant in Azure</span><span class="sxs-lookup"><span data-stu-id="a1afc-198">Multitenant Applications in Azure</span></span>](/azure/dotnet-develop-multitenant-applications)
