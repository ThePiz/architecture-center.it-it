---
title: Modello di livello anti-danneggiamento
titleSuffix: Cloud Design Patterns
description: Implementare un'interfaccia o un livello adapter tra un'applicazione moderna e un sistema legacy.
keywords: schema progettuale
author: dragon119
ms.date: 06/23/2017
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: bec9fb1a2bd2ad8eab68d6fbf07bfa197e57cbf5
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54483956"
---
# <a name="anti-corruption-layer-pattern"></a><span data-ttu-id="f3ab5-104">Modello di livello anti-danneggiamento</span><span class="sxs-lookup"><span data-stu-id="f3ab5-104">Anti-Corruption Layer pattern</span></span>

<span data-ttu-id="f3ab5-105">Implementare un'interfaccia o un livello adapter tra sottosistemi diversi che non condividono la stessa semantica.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-105">Implement a façade or adapter layer between different subsystems that don't share the same semantics.</span></span> <span data-ttu-id="f3ab5-106">Questo livello traduce le richieste inviate da un sottosistema all'altro.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-106">This layer translates requests that one subsystem makes to the other subsystem.</span></span> <span data-ttu-id="f3ab5-107">Usare questo modello per assicurarsi che la progettazione di un'applicazione non sia limitata a causa di dipendenze da sottosistemi esterni.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-107">Use this pattern to ensure that an application's design is not limited by dependencies on outside subsystems.</span></span> <span data-ttu-id="f3ab5-108">Questo modello è stato descritto per la prima volta da Eric Evans in *Domain-Driven Design*.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-108">This pattern was first described by Eric Evans in *Domain-Driven Design*.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="f3ab5-109">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="f3ab5-109">Context and problem</span></span>

<span data-ttu-id="f3ab5-110">La maggior parte delle applicazioni si basa su altri sistemi per alcuni dati o funzionalità.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-110">Most applications rely on other systems for some data or functionality.</span></span> <span data-ttu-id="f3ab5-111">Quando, ad esempio, si esegue la migrazione di un'applicazione legacy a un sistema moderno, potrebbero ancora essere necessarie risorse legacy esistenti.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-111">For example, when a legacy application is migrated to a modern system, it may still need existing legacy resources.</span></span> <span data-ttu-id="f3ab5-112">Le nuove funzionalità devono quindi poter chiamare il sistema legacy.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-112">New features must be able to call the legacy system.</span></span> <span data-ttu-id="f3ab5-113">Ciò vale soprattutto per le migrazioni graduali, in cui le diverse funzionalità di un'applicazione di grandi dimensioni vengono spostate in un sistema moderno nel corso del tempo.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-113">This is especially true of gradual migrations, where different features of a larger application are moved to a modern system over time.</span></span>

<span data-ttu-id="f3ab5-114">Spesso questi sistemi legacy sono soggetti a problemi di qualità causati, ad esempio, da schemi di dati complessa o da API obsolete.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-114">Often these legacy systems suffer from quality issues such as convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="f3ab5-115">Le funzionalità e le tecnologie usate nei sistemi legacy possono essere molto diverse rispetto ai sistemi più moderni.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-115">The features and technologies used in legacy systems can vary widely from more modern systems.</span></span> <span data-ttu-id="f3ab5-116">Per interagire con il sistema legacy, è possibile che la nuova applicazione debba supportare infrastruttura, protocolli, modelli di dati e API obsolete o altre funzionalità che diversamente non sarebbero incluse in un'applicazione moderna.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-116">To interoperate with the legacy system, the new application may need to support outdated infrastructure, protocols, data models, APIs, or other features that you wouldn't otherwise put into a modern application.</span></span>

<span data-ttu-id="f3ab5-117">Per garantire l'accesso tra il nuovo sistema e quello legacy, è possibile che il nuovo sistema debba adeguarsi ad almeno alcune API o ad altra semantica del sistema legacy.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-117">Maintaining access between new and legacy systems can force the new system to adhere to at least some of the legacy system's APIs or other semantics.</span></span> <span data-ttu-id="f3ab5-118">Quando queste funzionalità legacy presentano problemi di qualità, supportarle significa danneggiare quella che, diversamente, sarebbe un'applicazione moderna dal design pulito.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-118">When these legacy features have quality issues, supporting them "corrupts" what might otherwise be a cleanly designed modern application.</span></span>

<span data-ttu-id="f3ab5-119">Problemi analoghi possono sorgere con qualsiasi sistema esterno non gestito dal team di sviluppo, non solo con sistemi legacy.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-119">Similar issues can arise with any external system that your development team doesn't control, not just legacy systems.</span></span>

## <a name="solution"></a><span data-ttu-id="f3ab5-120">Soluzione</span><span class="sxs-lookup"><span data-stu-id="f3ab5-120">Solution</span></span>

<span data-ttu-id="f3ab5-121">Isolare i diversi sottosistemi inserendo tra loro un livello anti-danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-121">Isolate the different subsystems by placing an anti-corruption layer between them.</span></span> <span data-ttu-id="f3ab5-122">Questo livello converte le comunicazioni tra i due sistemi, consentendo a un sistema di rimanere invariato ed evitando di compromettere il design e l'approccio tecnologico dell'altro.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-122">This layer translates communications between the two systems, allowing one system to remain unchanged while the other can avoid compromising its design and technological approach.</span></span>

![Diagramma del modello di livello anti-danneggiamento](./_images/anti-corruption-layer.png)

<span data-ttu-id="f3ab5-124">Il diagramma precedente mostra un'applicazione con due livelli intermedi.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-124">The diagram above shows an application with two subsystems.</span></span> <span data-ttu-id="f3ab5-125">Il sottosistema A chiama il sottosistema B tramite un livello antidanneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-125">Subsystem A calls to subsystem B through an anti-corruption layer.</span></span> <span data-ttu-id="f3ab5-126">Per le comunicazioni tra il sottosistema A e il livello antidanneggiamento vengono sempre usati l'architettura e il modello di dati del sottosistema A. Le chiamate dal livello antidanneggiamento al sottosistema B sono conformi al modello di dati o ai metodi di tale sottosistema.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-126">Communication between subsystem A and the anti-corruption layer always uses the data model and architecture of subsystem A. Calls from the anti-corruption layer to subsystem B conform to that subsystem's data model or methods.</span></span> <span data-ttu-id="f3ab5-127">Il livello anti-danneggiamento contiene tutta la logica necessaria per la conversione tra i due sistemi.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-127">The anti-corruption layer contains all of the logic necessary to translate between the two systems.</span></span> <span data-ttu-id="f3ab5-128">È possibile implementare il livello come componente all'interno dell'applicazione o come servizio indipendente.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-128">The layer can be implemented as a component within the application or as an independent service.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="f3ab5-129">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="f3ab5-129">Issues and considerations</span></span>

- <span data-ttu-id="f3ab5-130">Il livello anti-danneggiamento potrebbe aggiungere latenza alle chiamate effettuate tra i due sistemi.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-130">The anti-corruption layer may add latency to calls made between the two systems.</span></span>
- <span data-ttu-id="f3ab5-131">Il livello anti-danneggiamento aggiunge un altro servizio che deve essere gestito e mantenuto.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-131">The anti-corruption layer adds an additional service that must be managed and maintained.</span></span>
- <span data-ttu-id="f3ab5-132">Valutare la scalabilità del livello anti-danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-132">Consider how your anti-corruption layer will scale.</span></span>
- <span data-ttu-id="f3ab5-133">Valutare se sono necessari più livelli anti-danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-133">Consider whether you need more than one anti-corruption layer.</span></span> <span data-ttu-id="f3ab5-134">Potrebbe essere necessario scomporre la funzionalità in più servizi usando linguaggi o tecnologie diverse oppure potrebbero esserci altri motivi per partizionare il livello di anti-danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-134">You may want to decompose functionality into multiple services using different technologies or languages, or there may be other reasons to partition the anti-corruption layer.</span></span>
- <span data-ttu-id="f3ab5-135">Valutare il modo in cui il livello anti-danneggiamento verrà gestito in relazione ad altre applicazioni o altri servizi usati.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-135">Consider how the anti-corruption layer will be managed in relation with your other applications or services.</span></span> <span data-ttu-id="f3ab5-136">Chiedersi in che modo verrà integrato nei processi esistenti di monitoraggio, rilascio e configurazione.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-136">How will it be integrated into your monitoring, release, and configuration processes?</span></span>
- <span data-ttu-id="f3ab5-137">Assicurarsi che la coerenza dei dati e delle transazioni venga mantenuta e possa essere monitorata.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-137">Make sure transaction and data consistency are maintained and can be monitored.</span></span>
- <span data-ttu-id="f3ab5-138">Valutare se il livello antidanneggiamento debba gestire tutte le comunicazioni tra sottosistemi diversi o solo un subset di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-138">Consider whether the anti-corruption layer needs to handle all communication between different subsystems, or just a subset of features.</span></span>
- <span data-ttu-id="f3ab5-139">Valutare se il livello antidanneggiamento debba far parte di una strategia di migrazione delle applicazioni, se sarà permanente o se verrà ritirato una volta conclusa la migrazione di tutte le funzionalità legacy.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-139">If the anti-corruption layer is part of an application migration strategy, consider whether it will be permanent, or will be retired after all legacy functionality has been migrated.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="f3ab5-140">Quando usare questo modello</span><span class="sxs-lookup"><span data-stu-id="f3ab5-140">When to use this pattern</span></span>

<span data-ttu-id="f3ab5-141">Usare questo modello quando:</span><span class="sxs-lookup"><span data-stu-id="f3ab5-141">Use this pattern when:</span></span>

- <span data-ttu-id="f3ab5-142">È stata pianificata una migrazione in più fasi, ma è necessario mantenere l'integrazione tra il sistema legacy e quello nuovo.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-142">A migration is planned to happen over multiple stages, but integration between new and legacy systems needs to be maintained.</span></span>
- <span data-ttu-id="f3ab5-143">Due o più sottosistemi hanno semantiche diverse, ma devono comunque comunicare.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-143">Two or more subsystems have different semantics, but still need to communicate.</span></span>

<span data-ttu-id="f3ab5-144">Questo modello potrebbe non essere appropriato se le differenze di semantica tra il sistema legacy e quello nuovo sono significative.</span><span class="sxs-lookup"><span data-stu-id="f3ab5-144">This pattern may not be suitable if there are no significant semantic differences between new and legacy systems.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="f3ab5-145">Informazioni correlate</span><span class="sxs-lookup"><span data-stu-id="f3ab5-145">Related guidance</span></span>

- [<span data-ttu-id="f3ab5-146">Modello di sostituzione</span><span class="sxs-lookup"><span data-stu-id="f3ab5-146">Strangler pattern</span></span>](./strangler.md)
