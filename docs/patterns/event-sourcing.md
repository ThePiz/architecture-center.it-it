---
title: Origine eventi
description: Usare un archivio di solo accodamento per registrare la serie completa di eventi che descrivono le azioni eseguite sui dati di un dominio.
keywords: schema progettuale
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- data-management
- performance-scalability
ms.openlocfilehash: 1cb63b61f5eb97726e266f797dfe13011907c95f
ms.sourcegitcommit: 94d50043db63416c4d00cebe927a0c88f78c3219
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 09/28/2018
ms.locfileid: "47429333"
---
# <a name="event-sourcing-pattern"></a><span data-ttu-id="5065a-104">Modello di origine eventi</span><span class="sxs-lookup"><span data-stu-id="5065a-104">Event Sourcing pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="5065a-105">Anziché archiviare solo lo stato corrente dei dati in un dominio, usare un archivio di solo accodamento per registrare la serie completa di azioni eseguite sui dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-105">Instead of storing just the current state of the data in a domain, use an append-only store to record the full series of actions taken on that data.</span></span>
<span data-ttu-id="5065a-106">L'archivio svolge la funzione di sistema di registrazione e consente di materializzare gli oggetti del dominio.</span><span class="sxs-lookup"><span data-stu-id="5065a-106">The store acts as the system of record and can be used to materialize the domain objects.</span></span> <span data-ttu-id="5065a-107">Contribuisce quindi a semplificare le attività in domini complessi, evitando la necessità di sincronizzare il modello dati e il dominio aziendale e migliorando le prestazioni, la scalabilità e la velocità di risposta.</span><span class="sxs-lookup"><span data-stu-id="5065a-107">This can simplify tasks in complex domains, by avoiding the need to synchronize the data model and the business domain, while improving performance, scalability, and responsiveness.</span></span> <span data-ttu-id="5065a-108">Può inoltre garantire coerenza ai dati transazionali e mantenere dati di cronologia e audit trail completi che consentono di eseguire azioni di compensazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-108">It can also provide consistency for transactional data, and maintain full audit trails and history that can enable compensating actions.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="5065a-109">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="5065a-109">Context and problem</span></span>

<span data-ttu-id="5065a-110">La maggior parte delle applicazioni interagisce con i dati e, in genere, le applicazioni mantengono lo stato corrente dei dati lasciando agli utenti la facoltà di aggiornarli.</span><span class="sxs-lookup"><span data-stu-id="5065a-110">Most applications work with data, and the typical approach is for the application to maintain the current state of the data by updating it as users work with it.</span></span> <span data-ttu-id="5065a-111">Ad esempio, nel modello di creazione, lettura, aggiornamento ed eliminazione (CRUD, Create, Read, Update, Delete) tradizionale un processo dati tipico consiste nel leggere i dati dall'archivio, apportarvi alcune modifiche e aggiornare lo stato corrente dei dati con i nuovi valori&mdash;spesso tramite transazioni che bloccano i dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-111">For example, in the traditional create, read, update, and delete (CRUD) model a typical data process is to read data from the store, make some modifications to it, and update the current state of the data with the new values&mdash;often by using transactions that lock the data.</span></span>

<span data-ttu-id="5065a-112">L'approccio CRUD presenta tuttavia alcune limitazioni:</span><span class="sxs-lookup"><span data-stu-id="5065a-112">The CRUD approach has some limitations:</span></span>

- <span data-ttu-id="5065a-113">Eseguendo le operazioni di aggiornamento direttamente nell'archivio dati, i sistemi CRUD generano un sovraccarico di elaborazione che può rallentare le prestazioni e la velocità di risposta e limitare la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="5065a-113">CRUD systems perform update operations directly against a data store, which can slow down performance and responsiveness, and limit scalability, due to the processing overhead it requires.</span></span>

- <span data-ttu-id="5065a-114">In un dominio in collaborazione con molti utenti simultanei, i conflitti di aggiornamento sono più frequenti poiché le operazioni di aggiornamento vengono eseguite su un unico elemento di dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-114">In a collaborative domain with many concurrent users, data update conflicts are more likely because the update operations take place on a single item of data.</span></span>

- <span data-ttu-id="5065a-115">A meno che non sia presente un meccanismo di controllo aggiuntivo che registra i dettagli di ogni operazione in un log separato, quindi, la cronologia viene persa.</span><span class="sxs-lookup"><span data-stu-id="5065a-115">Unless there's an additional auditing mechanism that records the details of each operation in a separate log, history is lost.</span></span>

> <span data-ttu-id="5065a-116">Per informazioni più dettagliate sui limiti dell'approccio CRUD, vedere [CRUD, Only When You Can Afford It](https://blogs.msdn.microsoft.com/maarten_mullender/2004/07/23/crud-only-when-you-can-afford-it-revisited/) (CRUD, solo quando è accessibile).</span><span class="sxs-lookup"><span data-stu-id="5065a-116">For a deeper understanding of the limits of the CRUD approach see [CRUD, Only When You Can Afford It](https://blogs.msdn.microsoft.com/maarten_mullender/2004/07/23/crud-only-when-you-can-afford-it-revisited/).</span></span>

## <a name="solution"></a><span data-ttu-id="5065a-117">Soluzione</span><span class="sxs-lookup"><span data-stu-id="5065a-117">Solution</span></span>

<span data-ttu-id="5065a-118">Il modello di origine eventi definisce un approccio alla gestione delle operazioni sui dati determinato da una sequenza di eventi, ognuno dei quali registrato in un archivio di solo accodamento.</span><span class="sxs-lookup"><span data-stu-id="5065a-118">The Event Sourcing pattern defines an approach to handling operations on data that's driven by a sequence of events, each of which is recorded in an append-only store.</span></span> <span data-ttu-id="5065a-119">Il codice dell'applicazione invia una serie di eventi che descrivono in modo imperativo ogni azione eseguita sui dati nell'archivio eventi, in cui sono salvati in modo permanente.</span><span class="sxs-lookup"><span data-stu-id="5065a-119">Application code sends a series of events that imperatively describe each action that has occurred on the data to the event store, where they're persisted.</span></span> <span data-ttu-id="5065a-120">Ogni evento rappresenta un set di modifiche ai dati (ad esempio `AddedItemToOrder`).</span><span class="sxs-lookup"><span data-stu-id="5065a-120">Each event represents a set of changes to the data (such as `AddedItemToOrder`).</span></span>

<span data-ttu-id="5065a-121">Gli eventi vengono salvati in modo permanente in un archivio eventi che svolge la funzione di sistema di registrazione (origine dati autorevole) dello stato corrente dei dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-121">The events are persisted in an event store that acts as the system of record (the authoritative data source) about the current state of the data.</span></span> <span data-ttu-id="5065a-122">L'archivio eventi pubblica in genere questi eventi in modo che i consumer vengano informati e, se necessario, possano gestirli.</span><span class="sxs-lookup"><span data-stu-id="5065a-122">The event store typically publishes these events so that consumers can be notified and can handle them if needed.</span></span> <span data-ttu-id="5065a-123">I consumer, ad esempio, possono iniziare le attività che si applicano alle operazioni sugli eventi di altri sistemi oppure eseguire qualsiasi altra azione associata necessaria per completare l'operazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-123">Consumers could, for example, initiate tasks that apply the operations in the events to other systems, or perform any other associated action that's required to complete the operation.</span></span> <span data-ttu-id="5065a-124">Tenere presente che il codice dell'applicazione che genera gli eventi è separato dai sistemi che sottoscrivono gli eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-124">Notice that the application code that generates the events is decoupled from the systems that subscribe to the events.</span></span>

<span data-ttu-id="5065a-125">Gli usi tipici degli eventi pubblicati dall'archivio eventi prevedono la gestione di viste materializzate di entità come azioni nell'applicazione e per l'integrazione con sistemi esterni.</span><span class="sxs-lookup"><span data-stu-id="5065a-125">Typical uses of the events published by the event store are to maintain materialized views of entities as actions in the application change them, and for integration with external systems.</span></span> <span data-ttu-id="5065a-126">Un sistema, ad esempio, può gestire una vista materializzata di tutti gli ordini clienti usata per popolare parti dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="5065a-126">For example, a system can maintain a materialized view of all customer orders that's used to populate parts of the UI.</span></span> <span data-ttu-id="5065a-127">Quando l'applicazione aggiunge nuovi ordini, aggiunge o rimuove elementi nell'ordine o aggiunge le informazioni di spedizione, gli eventi che descrivono queste modifiche possono essere gestiti e usati per aggiornare la [vista materializzata](materialized-view.md).</span><span class="sxs-lookup"><span data-stu-id="5065a-127">As the application adds new orders, adds or removes items on the order, and adds shipping information, the events that describe these changes can be handled and used to update the [materialized view](materialized-view.md).</span></span>

<span data-ttu-id="5065a-128">In qualsiasi momento, inoltre, le applicazioni possono leggere la cronologia degli eventi e usarla per materializzare lo stato corrente di un'entità riproducendo e consumando tutti gli eventi correlati all'entità.</span><span class="sxs-lookup"><span data-stu-id="5065a-128">In addition, at any point it's possible for applications to read the history of events, and use it to materialize the current state of an entity by playing back and consuming all the events related to that entity.</span></span> <span data-ttu-id="5065a-129">Questa operazione può verificarsi su richiesta per materializzare un oggetto di dominio quando si gestisce una richiesta o tramite un'attività pianificata in modo che lo stato dell'entità possa essere archiviato come una vista materializzata per supportare il livello di presentazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-129">This can occur on demand to materialize a domain object when handling a request, or through a scheduled task so that the state of the entity can be stored as a materialized view to support the presentation layer.</span></span>

<span data-ttu-id="5065a-130">La figura illustra una panoramica del modello, incluse alcune delle opzioni relative all'uso del flusso eventi, tra cui la creazione di una vista materializzata, l'integrazione di eventi con applicazioni e sistemi esterni e la riproduzione di eventi per poter creare proiezioni dello stato corrente di specifiche entità.</span><span class="sxs-lookup"><span data-stu-id="5065a-130">The figure shows an overview of the pattern, including some of the options for using the event stream such as creating a materialized view, integrating events with external applications and systems, and replaying events to create projections of the current state of specific entities.</span></span>

![Panoramica ed esempio del modello di origine eventi](./_images/event-sourcing-overview.png)


<span data-ttu-id="5065a-132">Il modello di origine eventi offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="5065a-132">The Event Sourcing pattern provides the following advantages:</span></span>

- <span data-ttu-id="5065a-133">Gli eventi non sono modificabili e possono essere memorizzati con un'operazione di solo accodamento.</span><span class="sxs-lookup"><span data-stu-id="5065a-133">Events are immutable and can be stored using an append-only operation.</span></span> <span data-ttu-id="5065a-134">L'interfaccia utente, il flusso di lavoro o il processo che ha avviato un evento può continuare e le attività che gestiscono gli eventi possono essere eseguite in background.</span><span class="sxs-lookup"><span data-stu-id="5065a-134">The user interface, workflow, or process that initiated an event can continue, and tasks that handle the events can run in the background.</span></span> <span data-ttu-id="5065a-135">Questo vantaggio, combinato con l'assenza di conflitti durante l'elaborazione delle transazioni, può migliorare notevolmente le prestazioni e la scalabilità delle applicazioni, soprattutto in termini di interfaccia utente o livello di presentazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-135">This, combined with the fact that there's no contention during the processing of transactions, can vastly improve performance and scalability for applications, especially for the presentation level or user interface.</span></span>

- <span data-ttu-id="5065a-136">Gli eventi sono oggetti semplici che descrivono un'azione che si è verificata, insieme a eventuali dati associati necessari per descrivere l'azione rappresentata dall'evento.</span><span class="sxs-lookup"><span data-stu-id="5065a-136">Events are simple objects that describe some action that occurred, together with any associated data required to describe the action represented by the event.</span></span> <span data-ttu-id="5065a-137">Gli eventi non aggiornano direttamente un archivio dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-137">Events don't directly update a data store.</span></span> <span data-ttu-id="5065a-138">Vengono semplicemente registrati per essere gestiti al momento opportuno.</span><span class="sxs-lookup"><span data-stu-id="5065a-138">They're simply recorded for handling at the appropriate time.</span></span> <span data-ttu-id="5065a-139">Questi fattori possono semplificare l'implementazione e la gestione.</span><span class="sxs-lookup"><span data-stu-id="5065a-139">This can simplify implementation and management.</span></span>

- <span data-ttu-id="5065a-140">Gli eventi, in genere, sono facilmente comprensibili per gli esperti del settore, mentre la [mancata corrispondenza di impedenza object-relational](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) può rendere difficile la comprensione delle tabelle di database complesse.</span><span class="sxs-lookup"><span data-stu-id="5065a-140">Events typically have meaning for a domain expert, whereas [object-relational impedance mismatch](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) can make complex database tables hard to understand.</span></span> <span data-ttu-id="5065a-141">Le tabelle sono costrutti artificiali che rappresentano lo stato corrente del sistema, non gli eventi che si sono verificati.</span><span class="sxs-lookup"><span data-stu-id="5065a-141">Tables are artificial constructs that represent the current state of the system, not the events that occurred.</span></span>

- <span data-ttu-id="5065a-142">La funzione di origine eventi contribuisce a impedire conflitti generati da aggiornamenti simultanei in quanto evita la necessità di aggiornare direttamente gli oggetti nell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-142">Event sourcing can help prevent concurrent updates from causing conflicts because it avoids the requirement to directly update objects in the data store.</span></span> <span data-ttu-id="5065a-143">La progettazione del modello di dominio, tuttavia, non prevede ancora la protezione da richieste che possono determinare uno stato incoerente.</span><span class="sxs-lookup"><span data-stu-id="5065a-143">However, the domain model must still be designed to protect itself from requests that might result in an inconsistent state.</span></span>

- <span data-ttu-id="5065a-144">L'archiviazione di solo accodamento degli eventi offre un audit trail che consente di monitorare le azioni intraprese in un archivio dati, di rigenerare lo stato corrente come proiezioni o viste materializzate riproducendo gli eventi in qualsiasi momento e di semplificare le operazioni di test e debug del sistema.</span><span class="sxs-lookup"><span data-stu-id="5065a-144">The append-only storage of events provides an audit trail that can be used to monitor actions taken against a data store, regenerate the current state as materialized views or projections by replaying the events at any time, and assist in testing and debugging the system.</span></span> <span data-ttu-id="5065a-145">La necessità di usare eventi di compensazione per annullare le modifiche fornisce inoltre una cronologia delle modifiche annullate, possibilità che non sarebbe consentita se il modello archiviasse semplicemente lo stato corrente.</span><span class="sxs-lookup"><span data-stu-id="5065a-145">In addition, the requirement to use compensating events to cancel changes provides a history of changes that were reversed, which wouldn't be the case if the model simply stored the current state.</span></span> <span data-ttu-id="5065a-146">L'elenco degli eventi può essere usato anche per analizzare le prestazioni delle applicazioni e individuare tendenze di comportamento degli utenti, nonché per ottenere altre informazioni aziendali utili.</span><span class="sxs-lookup"><span data-stu-id="5065a-146">The list of events can also be used to analyze application performance and detect user behavior trends, or to obtain other useful business information.</span></span>

- <span data-ttu-id="5065a-147">L'archivio eventi genera eventi e le attività eseguono operazioni in risposta agli eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-147">The event store raises events, and tasks perform operations in response to those events.</span></span> <span data-ttu-id="5065a-148">È questa separazione tra le attività e gli eventi a garantire flessibilità ed estensibilità.</span><span class="sxs-lookup"><span data-stu-id="5065a-148">This decoupling of the tasks from the events provides flexibility and extensibility.</span></span> <span data-ttu-id="5065a-149">Le attività sono a conoscenza del tipo di evento e dei dati relativi all'evento, ma non dell'operazione che l'evento ha generato.</span><span class="sxs-lookup"><span data-stu-id="5065a-149">Tasks know about the type of event and the event data, but not about the operation that triggered the event.</span></span> <span data-ttu-id="5065a-150">Ogni evento, inoltre, può essere gestito da più attività.</span><span class="sxs-lookup"><span data-stu-id="5065a-150">In addition, multiple tasks can handle each event.</span></span> <span data-ttu-id="5065a-151">Questo aspetto semplifica l'integrazione con altri servizi e sistemi che restano in ascolto solo di nuovi eventi generati dall'archivio eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-151">This enables easy integration with other services and systems that only listen for new events raised by the event store.</span></span> <span data-ttu-id="5065a-152">Gli eventi che danno origine a nuovi eventi, tuttavia, tendono a essere di livello molto basso e può essere necessario generare eventi di integrazione specifici.</span><span class="sxs-lookup"><span data-stu-id="5065a-152">However, the event sourcing events tend to be very low level, and it might be necessary to generate specific integration events instead.</span></span>

> <span data-ttu-id="5065a-153">Il modello di origine eventi viene spesso combinato con il modello CQRS per l'esecuzione di attività di gestione dati in risposta agli eventi e per la materializzazione delle viste a partire da eventi archiviati.</span><span class="sxs-lookup"><span data-stu-id="5065a-153">Event sourcing is commonly combined with the CQRS pattern by performing the data management tasks in response to the events, and by materializing views from the stored events.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="5065a-154">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="5065a-154">Issues and considerations</span></span>

<span data-ttu-id="5065a-155">Prima di decidere come implementare questo modello, considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="5065a-155">Consider the following points when deciding how to implement this pattern:</span></span>

<span data-ttu-id="5065a-156">Il sistema acquisirà la coerenza finale solo durante la creazione di viste materializzate o la generazione di proiezioni di dati tramite la riproduzione di eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-156">The system will only be eventually consistent when creating materialized views or generating projections of data by replaying events.</span></span> <span data-ttu-id="5065a-157">Si verifica un minimo ritardo tra il momento in cui un'applicazione aggiunge un evento all'archivio eventi in seguito alla gestione di una richiesta, il momento in cui l'evento viene pubblicato e quello in cui viene gestito dai consumer.</span><span class="sxs-lookup"><span data-stu-id="5065a-157">There's some delay between an application adding events to the event store as the result of handling a request, the events being published, and consumers of the events handling them.</span></span> <span data-ttu-id="5065a-158">Durante questo intervallo di tempo è possibile che siano giunti nell'archivio nuovi eventi che descrivono ulteriori modifiche alle entità.</span><span class="sxs-lookup"><span data-stu-id="5065a-158">During this period, new events that describe further changes to entities might have arrived at the event store.</span></span>

> [!NOTE]
> <span data-ttu-id="5065a-159">Per altre informazioni sulla coerenza finale, vedere [Nozioni di base sulla coerenza dei dati](https://msdn.microsoft.com/library/dn589800.aspx).</span><span class="sxs-lookup"><span data-stu-id="5065a-159">See the [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx) for information about eventual consistency.</span></span>

<span data-ttu-id="5065a-160">L'archivio eventi è un'origine permanente di informazioni e i dati dell'evento, quindi, non dovrebbero essere mai aggiornati.</span><span class="sxs-lookup"><span data-stu-id="5065a-160">The event store is the permanent source of information, and so the event data should never be updated.</span></span> <span data-ttu-id="5065a-161">L'unico modo per aggiornare un'entità in modo da annullare una modifica è quello di aggiungere un evento di compensazione all'archivio eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-161">The only way to update an entity to undo a change is to add a compensating event to the event store.</span></span> <span data-ttu-id="5065a-162">Se deve essere modificato il formato, anziché i dati, degli eventi persistenti, ad esempio durante una migrazione, potrebbe essere difficile combinare eventi esistenti nell'archivio con la nuova versione.</span><span class="sxs-lookup"><span data-stu-id="5065a-162">If the format (rather than the data) of the persisted events needs to change, perhaps during a migration, it can be difficult to combine existing events in the store with the new version.</span></span> <span data-ttu-id="5065a-163">È possibile che sia necessario scorrere tutti gli eventi per modificarli in modo da uniformarli al nuovo formato oppure aggiungere nuovi eventi che usano il nuovo formato.</span><span class="sxs-lookup"><span data-stu-id="5065a-163">It might be necessary to iterate through all the events making changes so they're compliant with the new format, or add new events that use the new format.</span></span> <span data-ttu-id="5065a-164">Valutare l'opportunità di usare uno stamp di versione in ogni versione dello schema eventi per mantenere sia il nuovo che il vecchio formato.</span><span class="sxs-lookup"><span data-stu-id="5065a-164">Consider using a version stamp on each version of the event schema to maintain both the old and the new event formats.</span></span>

<span data-ttu-id="5065a-165">È possibile che nell'archivio eventi vengano archiviati eventi anche da parte di applicazioni multithread e da più istanze delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-165">Multi-threaded applications and multiple instances of applications might be storing events in the event store.</span></span> <span data-ttu-id="5065a-166">La coerenza degli eventi nell'archivio eventi è di fondamentale importanza, così come l'ordine degli eventi che interessano un'entità specifica (l'ordine in cui vengono apportate le modifiche influisce sullo stato corrente dell'entità).</span><span class="sxs-lookup"><span data-stu-id="5065a-166">The consistency of events in the event store is vital, as is the order of events that affect a specific entity (the order that changes occur to an entity affects its current state).</span></span> <span data-ttu-id="5065a-167">L'aggiunta di un timestamp a ogni evento contribuisce a evitare problemi.</span><span class="sxs-lookup"><span data-stu-id="5065a-167">Adding a timestamp to every event can help to avoid issues.</span></span> <span data-ttu-id="5065a-168">Un'altra procedura comune è quella di annotare ogni evento generato da una richiesta con un identificatore incrementale.</span><span class="sxs-lookup"><span data-stu-id="5065a-168">Another common practice is to annotate each event resulting from a request with an incremental identifier.</span></span> <span data-ttu-id="5065a-169">Se due azioni tentano contemporaneamente di aggiungere eventi per una stessa entità, l'archivio eventi può rifiutare un evento che corrisponde a un identificatore di entità e a un identificatore di evento esistenti.</span><span class="sxs-lookup"><span data-stu-id="5065a-169">If two actions attempt to add events for the same entity at the same time, the event store can reject an event that matches an existing entity identifier and event identifier.</span></span>

<span data-ttu-id="5065a-170">Non esiste un approccio standard o un meccanismo esistente, ad esempio query SQL, per leggere gli eventi in modo da ottenere informazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-170">There's no standard approach, or existing mechanisms such as SQL queries, for reading the events to obtain information.</span></span> <span data-ttu-id="5065a-171">Un flusso di eventi è l'unico tipo di dati che è possibile estrarre usando un identificatore di eventi come criterio.</span><span class="sxs-lookup"><span data-stu-id="5065a-171">The only data that can be extracted is a stream of events using an event identifier as the criteria.</span></span> <span data-ttu-id="5065a-172">L'ID evento è generalmente associato a entità individuali.</span><span class="sxs-lookup"><span data-stu-id="5065a-172">The event ID typically maps to individual entities.</span></span> <span data-ttu-id="5065a-173">Lo stato corrente di un'entità può essere determinato solo riproducendo tutti gli eventi associati all'entità sullo stato originale dell'entità.</span><span class="sxs-lookup"><span data-stu-id="5065a-173">The current state of an entity can be determined only by replaying all of the events that relate to it against the original state of that entity.</span></span>

<span data-ttu-id="5065a-174">La lunghezza di ogni flusso di eventi influisce sulle modalità di gestione e di aggiornamento del sistema.</span><span class="sxs-lookup"><span data-stu-id="5065a-174">The length of each event stream affects managing and updating the system.</span></span> <span data-ttu-id="5065a-175">Se i flussi sono di grandi dimensioni, valutare l'opportunità di creare snapshot a intervalli specifici, ad esempio dopo un determinato numero di eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-175">If the streams are large, consider creating snapshots at specific intervals such as a specified number of events.</span></span> <span data-ttu-id="5065a-176">È possibile ottenere lo stato corrente dell'entità mediante lo snapshot e la riproduzione di tutti gli eventi che si sono verificati a partire da quel punto nel tempo.</span><span class="sxs-lookup"><span data-stu-id="5065a-176">The current state of the entity can be obtained from the snapshot and by replaying any events that occurred after that point in time.</span></span> <span data-ttu-id="5065a-177">Per altre informazioni sulla creazione di snapshot di dati, vedere la sezione [Snapshot del sito Web di Martin Fowler sull'architettura delle applicazioni aziendali](https://martinfowler.com/eaaDev/Snapshot.html) e l'articolo sulla [replica snapshot master-subordinato](https://msdn.microsoft.com/library/ff650012.aspx).</span><span class="sxs-lookup"><span data-stu-id="5065a-177">For more information about creating snapshots of data, see [Snapshot on Martin Fowler’s Enterprise Application Architecture website](https://martinfowler.com/eaaDev/Snapshot.html) and [Master-Subordinate Snapshot Replication](https://msdn.microsoft.com/library/ff650012.aspx).</span></span>

<span data-ttu-id="5065a-178">Anche se l'origine eventi riduce al minimo il rischio di conflitti tra gli aggiornamenti ai dati, l'applicazione deve comunque essere in grado di gestire eventuali incoerenze derivanti dalla coerenza finale e dalla mancanza di transazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-178">Even though event sourcing minimizes the chance of conflicting updates to the data, the application must still be able to deal with inconsistencies that result from eventual consistency and the lack of transactions.</span></span> <span data-ttu-id="5065a-179">Un evento che indica una riduzione delle scorte, ad esempio, può giungere nell'archivio dati mentre viene emesso un ordine per l'elemento mancante, determinando quindi la necessità di riconciliare le due operazioni, ovvero informando il cliente o creando un ordine arretrato.</span><span class="sxs-lookup"><span data-stu-id="5065a-179">For example, an event that indicates a reduction in stock inventory might arrive in the data store while an order for that item is being placed, resulting in a requirement to reconcile the two operations either by advising the customer or creating a back order.</span></span>

<span data-ttu-id="5065a-180">La pubblicazione degli eventi può essere di tipo "almeno una volta", in modo che i consumer degli eventi siano idempotenti.</span><span class="sxs-lookup"><span data-stu-id="5065a-180">Event publication might be “at least once,” and so consumers of the events must be idempotent.</span></span> <span data-ttu-id="5065a-181">In questo modo, non è necessario riapplicare l'aggiornamento descritto in un evento se l'evento viene gestito più volte.</span><span class="sxs-lookup"><span data-stu-id="5065a-181">They must not reapply the update described in an event if the event is handled more than once.</span></span> <span data-ttu-id="5065a-182">Se, ad esempio, più istanze di un consumer mantengono un dato aggregato per la proprietà di un'entità, ad esempio il numero totale di ordini, quando si verifica un evento relativo a un nuovo ordine effettuato, è necessario incrementare il dato aggregato in una sola istanza.</span><span class="sxs-lookup"><span data-stu-id="5065a-182">For example, if multiple instances of a consumer maintain an aggregate an entity's property, such as the total number of orders placed, only one must succeed in incrementing the aggregate when an order placed event occurs.</span></span> <span data-ttu-id="5065a-183">Sebbene non si tratti di una caratteristica chiave della funzione di origine eventi, costituisce comunque la decisione di implementazione consueta.</span><span class="sxs-lookup"><span data-stu-id="5065a-183">While this isn't a key characteristic of event sourcing, it's the usual implementation decision.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="5065a-184">Quando usare questo modello</span><span class="sxs-lookup"><span data-stu-id="5065a-184">When to use this pattern</span></span>

<span data-ttu-id="5065a-185">Usare questo modello negli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="5065a-185">Use this pattern in the following scenarios:</span></span>

- <span data-ttu-id="5065a-186">Quando si vuole acquisire l'intento, lo scopo o il motivo insito nei dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-186">When you want to capture intent, purpose, or reason in the data.</span></span> <span data-ttu-id="5065a-187">Le modifiche a un'entità cliente, ad esempio, possono essere acquisite come una serie di tipi di eventi specifici, come _Trasferito_, _Account chiuso_ o _Deceduto_.</span><span class="sxs-lookup"><span data-stu-id="5065a-187">For example, changes to a customer entity can be captured as a series of specific event types such as _Moved home_, _Closed account_, or _Deceased_.</span></span>

- <span data-ttu-id="5065a-188">Quando è essenziale ridurre al minimo o evitare completamente la presenza di conflitti tra gli aggiornamenti ai dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-188">When it's vital to minimize or completely avoid the occurrence of conflicting updates to data.</span></span>

- <span data-ttu-id="5065a-189">Quando si vuole registrare gli eventi che si verificano ed essere in grado di riprodurli in modo da ripristinare lo stato di un sistema, annullare le modifiche o mantenere una cronologia e audit log.</span><span class="sxs-lookup"><span data-stu-id="5065a-189">When you want to record events that occur, and be able to replay them to restore the state of a system, roll back changes, or keep a history and audit log.</span></span> <span data-ttu-id="5065a-190">Se un'attività si articola in più passaggi, ad esempio, può essere necessario eseguire determinate azioni per annullare alcuni aggiornamenti e quindi riprodurre una serie di passaggi per ripristinare i dati a uno stato coerente.</span><span class="sxs-lookup"><span data-stu-id="5065a-190">For example, when a task involves multiple steps you might need to execute actions to revert updates and then replay some steps to bring the data back into a consistent state.</span></span>

- <span data-ttu-id="5065a-191">Quando l'uso di eventi costituisce un elemento naturale dell'operatività di un'applicazione e richiede un impegno aggiuntivo minimo in termini di sviluppo o implementazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-191">When using events is a natural feature of the operation of the application, and requires little additional development or implementation effort.</span></span>

- <span data-ttu-id="5065a-192">Quando si deve separare il processo di inserimento o aggiornamento dei dati dalle attività necessarie per applicare queste azioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-192">When you need to decouple the process of inputting or updating data from the tasks required to apply these actions.</span></span> <span data-ttu-id="5065a-193">Questa necessità può derivare dalla volontà di migliorare le prestazioni dell'interfaccia utente o di distribuire gli eventi ad altri listener che eseguono determinate operazioni quando si verifica un evento.</span><span class="sxs-lookup"><span data-stu-id="5065a-193">This might be to improve UI performance, or to distribute events to other listeners that take action when the events occur.</span></span> <span data-ttu-id="5065a-194">Uno scenario di questo tipo può essere costituito, ad esempio, dall'integrazione di un sistema di gestione delle paghe con un sito Web di invio di note spese, in modo che degli eventi generati dall'archivio eventi in risposta ad aggiornamenti ai dati eseguiti sul sito Web possano avvalersi sia il sito Web sia il sistema di gestione delle paghe.</span><span class="sxs-lookup"><span data-stu-id="5065a-194">For example, integrating a payroll system with an expense submission website so that events raised by the event store in response to data updates made in the website are consumed by both the website and the payroll system.</span></span>

- <span data-ttu-id="5065a-195">Se si vuole avere la possibilità di modificare il formato dei modelli materializzati e i dati dell'entità in caso di variazione dei requisiti oppure &mdash;se, in combinazione con un modello CQRS&mdash;, si deve adattare un modello di lettura o le viste che espongono i dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-195">When you want flexibility to be able to change the format of materialized models and entity data if requirements change, or&mdash;when used in conjunction with CQRS&mdash;you need to adapt a read model or the views that expose the data.</span></span>

- <span data-ttu-id="5065a-196">Quando il modello di origine eventi viene usato con un modello CQRS e la coerenza finale è accettabile durante l'aggiornamento di un modello di lettura o l'impatto sulle prestazioni generato dalla riattivazione di entità e dati da un flusso di eventi è accettabile.</span><span class="sxs-lookup"><span data-stu-id="5065a-196">When used in conjunction with CQRS, and eventual consistency is acceptable while a read model is updated, or the performance impact of rehydrating entities and data from an event stream is acceptable.</span></span>

<span data-ttu-id="5065a-197">Questo modello può non essere utile nelle situazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5065a-197">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="5065a-198">Domini semplici o di piccole dimensioni, con poca o alcuna logica di business o sistemi non di dominio che per natura interagiscono bene con i tradizionali meccanismi di gestione dati CRUD.</span><span class="sxs-lookup"><span data-stu-id="5065a-198">Small or simple domains, systems that have little or no business logic, or nondomain systems that naturally work well with traditional CRUD data management mechanisms.</span></span>

- <span data-ttu-id="5065a-199">Sistemi in cui sono necessari coerenza e aggiornamenti in tempo reale alle visualizzazioni dei dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-199">Systems where consistency and real-time updates to the views of the data are required.</span></span>

- <span data-ttu-id="5065a-200">Sistemi in cui non sono necessarie funzioni di audit trail, cronologia e annullamento e riproduzione delle azioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-200">Systems where audit trails, history, and capabilities to roll back and replay actions are not required.</span></span>

- <span data-ttu-id="5065a-201">Sistemi in cui la frequenza di conflitti tra gli aggiornamenti ai dati sottostanti è molto bassa.</span><span class="sxs-lookup"><span data-stu-id="5065a-201">Systems where there's only a very low occurrence of conflicting updates to the underlying data.</span></span> <span data-ttu-id="5065a-202">Ad esempio, sistemi che in prevalenza aggiungono dati anziché aggiornarli.</span><span class="sxs-lookup"><span data-stu-id="5065a-202">For example, systems that predominantly add data rather than updating it.</span></span>

## <a name="example"></a><span data-ttu-id="5065a-203">Esempio</span><span class="sxs-lookup"><span data-stu-id="5065a-203">Example</span></span>

<span data-ttu-id="5065a-204">Un sistema di gestione delle conferenze deve tenere traccia del numero di prenotazioni completate per una conferenza in modo da poter verificare la disponibilità di posti nel momento in cui un aspirante partecipante prova a effettuare una prenotazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-204">A conference management system needs to track the number of completed bookings for a conference so that it can check whether there are seats still available when a potential attendee tries to make a booking.</span></span> <span data-ttu-id="5065a-205">Il sistema può archiviare il numero totale di prenotazioni per una conferenza in almeno due modi:</span><span class="sxs-lookup"><span data-stu-id="5065a-205">The system could store the total number of bookings for a conference in at least two ways:</span></span>

- <span data-ttu-id="5065a-206">Il sistema può memorizzare le informazioni sul numero totale di prenotazioni come entità separata in un database in cui sono contenute le informazioni di prenotazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-206">The system could store the information about the total number of bookings as a separate entity in a database that holds booking information.</span></span> <span data-ttu-id="5065a-207">Per ogni nuova prenotazione effettuata o annullata, il sistema può incrementare o diminuire il numero di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="5065a-207">As bookings are made or canceled, the system could increment or decrement this number as appropriate.</span></span> <span data-ttu-id="5065a-208">Questo approccio è molto semplice in teoria, ma può generare problemi di scalabilità nel caso in cui un numero elevato di partecipanti tenti di effettuare una prenotazione in un breve intervallo di tempo,</span><span class="sxs-lookup"><span data-stu-id="5065a-208">This approach is simple in theory, but can cause scalability issues if a large number of attendees are attempting to book seats during a short period of time.</span></span> <span data-ttu-id="5065a-209">ad esempio nell'ultimo giorno prima della chiusura delle prenotazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-209">For example, in the last day or so prior to the booking period closing.</span></span>

- <span data-ttu-id="5065a-210">Il sistema può memorizzare le informazioni su ogni nuova prenotazione aggiunta o annullata come eventi contenuti in un archivio eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-210">The system could store information about bookings and cancellations as events held in an event store.</span></span> <span data-ttu-id="5065a-211">Può quindi calcolare il numero di posti disponibili riproducendo questi eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-211">It could then calculate the number of seats available by replaying these events.</span></span> <span data-ttu-id="5065a-212">Questo approccio può essere più scalabile grazie alla non modificabilità degli eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-212">This approach can be more scalable due to the immutability of events.</span></span> <span data-ttu-id="5065a-213">Il sistema deve solo riuscire a leggere dati dall'archivio eventi e, se necessario, aggiungere nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-213">The system only needs to be able to read data from the event store, or append data to the event store.</span></span> <span data-ttu-id="5065a-214">Le informazioni sugli eventi rappresentati da ogni nuova prenotazione aggiunta o annullata non vengono mai modificate.</span><span class="sxs-lookup"><span data-stu-id="5065a-214">Event information about bookings and cancellations is never modified.</span></span>

<span data-ttu-id="5065a-215">Il grafico seguente illustra come il sottosistema di prenotazione dei posti del sistema di gestione delle conferenze possa essere implementato usando il modello di origine eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-215">The following diagram illustrates how the seat reservation subsystem of the conference management system might be implemented using event sourcing.</span></span>

![Uso del modello di origine eventi per acquisire informazioni sulle prenotazioni in un sistema di gestione delle conferenze](./_images/event-sourcing-bounded-context.png)


<span data-ttu-id="5065a-217">Di seguito è illustrata la sequenza di azioni per la prenotazione di due posti:</span><span class="sxs-lookup"><span data-stu-id="5065a-217">The sequence of actions for reserving two seats is as follows:</span></span>

1. <span data-ttu-id="5065a-218">L'interfaccia utente esegue un comando per prenotare i posti per due partecipanti.</span><span class="sxs-lookup"><span data-stu-id="5065a-218">The user interface issues a command to reserve seats for two attendees.</span></span> <span data-ttu-id="5065a-219">Il comando viene gestito da un gestore di comando separato.</span><span class="sxs-lookup"><span data-stu-id="5065a-219">The command is handled by a separate command handler.</span></span> <span data-ttu-id="5065a-220">Una parte della logica che viene separata dall'interfaccia utente diventa responsabile della gestione delle richieste inviate sotto forma di comandi.</span><span class="sxs-lookup"><span data-stu-id="5065a-220">A piece of logic that is decoupled from the user interface and is responsible for handling requests posted as commands.</span></span>

2. <span data-ttu-id="5065a-221">Viene creata un'aggregazione contenente informazioni su tutte le prenotazioni per la conferenza tramite l'esecuzione di query sugli eventi che descrivono le nuove prenotazioni e gli annullamenti.</span><span class="sxs-lookup"><span data-stu-id="5065a-221">An aggregate containing information about all reservations for the conference is constructed by querying the events that describe bookings and cancellations.</span></span> <span data-ttu-id="5065a-222">L'aggregazione prende il nome di `SeatAvailability` ed è contenuta in un modello di dominio che espone i metodi per l'esecuzione di query e la modifica dei dati inclusi nell'aggregazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-222">This aggregate is called `SeatAvailability`, and is contained within a domain model that exposes methods for querying and modifying the data in the aggregate.</span></span>

    > <span data-ttu-id="5065a-223">Alcune ottimizzazioni da valutare comprendono l'uso di snapshot (in modo che non sia necessario eseguire query e riprodurre l'elenco completo degli eventi per ottenere lo stato corrente dell'aggregazione) e la conservazione di una copia memorizzata nella cache dell'aggregazione in memoria.</span><span class="sxs-lookup"><span data-stu-id="5065a-223">Some optimizations to consider are using snapshots (so that you don’t need to query and replay the full list of events to obtain the current state of the aggregate), and maintaining a cached copy of the aggregate in memory.</span></span>

3. <span data-ttu-id="5065a-224">Il gestore di comando richiama un metodo esposto dal modello di dominio per effettuare le prenotazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-224">The command handler invokes a method exposed by the domain model to make the reservations.</span></span>

4. <span data-ttu-id="5065a-225">L'aggregazione `SeatAvailability` registra un evento contenente il numero di posti prenotati.</span><span class="sxs-lookup"><span data-stu-id="5065a-225">The `SeatAvailability` aggregate records an event containing the number of seats that were reserved.</span></span> <span data-ttu-id="5065a-226">La volta successiva in cui l'aggregazione applica un evento verranno usate tutte le prenotazioni per calcolare il numero di posti rimanenti.</span><span class="sxs-lookup"><span data-stu-id="5065a-226">The next time the aggregate applies events, all the reservations will be used to compute how many seats remain.</span></span>

5. <span data-ttu-id="5065a-227">Il sistema aggiunge il nuovo evento all'elenco degli eventi presenti nell'archivio eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-227">The system appends the new event to the list of events in the event store.</span></span>

<span data-ttu-id="5065a-228">Se un utente annulla una prenotazione, il sistema segue un processo simile, ma in questo caso il gestore di comando esegue un comando che genera un evento di annullamento della prenotazione e lo aggiunge all'archivio eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-228">If a user cancels a seat, the system follows a similar process except the command handler issues a command that generates a seat cancellation event and appends it to the event store.</span></span>

<span data-ttu-id="5065a-229">Oltre a garantire una maggiore scalabilità, l'uso di un archivio eventi offre anche una cronologia completa o un audit trail delle prenotazioni aggiunte o annullate per una conferenza.</span><span class="sxs-lookup"><span data-stu-id="5065a-229">As well as providing more scope for scalability, using an event store also provides a complete history, or audit trail, of the bookings and cancellations for a conference.</span></span> <span data-ttu-id="5065a-230">Gli eventi nell'archivio di eventi costituiscono il record esatto.</span><span class="sxs-lookup"><span data-stu-id="5065a-230">The events in the event store are the accurate record.</span></span> <span data-ttu-id="5065a-231">Non è necessario rendere l'aggregazione permanente in altri modi poiché il sistema può facilmente riprodurre gli eventi e ripristinare lo stato a un qualsiasi punto nel tempo.</span><span class="sxs-lookup"><span data-stu-id="5065a-231">There is no need to persist aggregates in any other way because the system can easily replay the events and restore the state to any point in time.</span></span>

> <span data-ttu-id="5065a-232">Altre informazioni su questo esempio sono disponibili in [Introducing Event Sourcing](https://msdn.microsoft.com/library/jj591559.aspx) (Introduzione all'origine eventi).</span><span class="sxs-lookup"><span data-stu-id="5065a-232">You can find more information about this example in [Introducing Event Sourcing](https://msdn.microsoft.com/library/jj591559.aspx).</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="5065a-233">Modelli correlati e informazioni aggiuntive</span><span class="sxs-lookup"><span data-stu-id="5065a-233">Related patterns and guidance</span></span>

<span data-ttu-id="5065a-234">Per l'implementazione di questo modello possono risultare utili i modelli e le informazioni aggiuntive seguenti:</span><span class="sxs-lookup"><span data-stu-id="5065a-234">The following patterns and guidance might also be relevant when implementing this pattern:</span></span>

- <span data-ttu-id="5065a-235">[Modello di separazione di responsabilità per query e comandi (CQRS, Command and Query Responsibility Segregation)](cqrs.md).</span><span class="sxs-lookup"><span data-stu-id="5065a-235">[Command and Query Responsibility Segregation (CQRS) Pattern](cqrs.md).</span></span> <span data-ttu-id="5065a-236">L'archivio di scrittura che costituisce un'origine permanente di informazioni per l'implementazione di un modello CQRS è spesso basato su un'implementazione del modello di origine eventi.</span><span class="sxs-lookup"><span data-stu-id="5065a-236">The write store that provides the permanent source of information for a CQRS implementation is often based on an implementation of the Event Sourcing pattern.</span></span> <span data-ttu-id="5065a-237">Questo modello descrive come isolare in un'applicazione le operazioni di lettura dei dati dalle operazioni di aggiornamento dei dati tramite l'uso di interfacce separate.</span><span class="sxs-lookup"><span data-stu-id="5065a-237">Describes how to segregate the operations that read data in an application from the operations that update data by using separate interfaces.</span></span>

- <span data-ttu-id="5065a-238">[Modello di viste materializzate](materialized-view.md).</span><span class="sxs-lookup"><span data-stu-id="5065a-238">[Materialized View Pattern](materialized-view.md).</span></span> <span data-ttu-id="5065a-239">L'archivio dati usato in un sistema basato sull'origine di eventi non è in genere adatto per l'esecuzione di query efficienti.</span><span class="sxs-lookup"><span data-stu-id="5065a-239">The data store used in a system based on event sourcing is typically not well suited to efficient querying.</span></span> <span data-ttu-id="5065a-240">In questo caso, l'approccio comune è quello di generare viste dati prepopolate a intervalli regolari o in caso di variazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="5065a-240">Instead, a common approach is to generate prepopulated views of the data at regular intervals, or when the data changes.</span></span> <span data-ttu-id="5065a-241">Questo modello illustra come viene eseguita questa operazione.</span><span class="sxs-lookup"><span data-stu-id="5065a-241">Shows how this can be done.</span></span>

- <span data-ttu-id="5065a-242">[Modello di transazioni di compensazione](compensating-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="5065a-242">[Compensating Transaction Pattern](compensating-transaction.md).</span></span> <span data-ttu-id="5065a-243">I dati esistenti in un archivio di origine eventi non vengono aggiornati, ma vengono aggiunte nuove voci che determinano la transizione dello stato delle entità su nuovi valori.</span><span class="sxs-lookup"><span data-stu-id="5065a-243">The existing data in an event sourcing store is not updated, instead new entries are added that transition the state of entities to the new values.</span></span> <span data-ttu-id="5065a-244">Per annullare una modifica, vengono usati voci di compensazione poiché non è possibile annullare semplicemente la modifica precedente.</span><span class="sxs-lookup"><span data-stu-id="5065a-244">To reverse a change, compensating entries are used because it isn't possible to simply reverse the previous change.</span></span> <span data-ttu-id="5065a-245">In questo modello viene descritto come annullare le conseguenze prodotte da un'operazione precedente.</span><span class="sxs-lookup"><span data-stu-id="5065a-245">Describes how to undo the work that was performed by a previous operation.</span></span>

- <span data-ttu-id="5065a-246">[Nozioni di base sulla coerenza dei dati](https://msdn.microsoft.com/library/dn589800.aspx).</span><span class="sxs-lookup"><span data-stu-id="5065a-246">[Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx).</span></span> <span data-ttu-id="5065a-247">Quando si usa il modello di origine eventi con un archivio di letture o viste materializzate diverse, i dati letti non saranno subito coerenti ma avranno una coerenza finale.</span><span class="sxs-lookup"><span data-stu-id="5065a-247">When using event sourcing with a separate read store or materialized views, the read data won't be immediately consistent, instead it'll be only eventually consistent.</span></span> <span data-ttu-id="5065a-248">Questo modello riepiloga i problemi da affrontare per mantenere la coerenza dei dati distribuiti.</span><span class="sxs-lookup"><span data-stu-id="5065a-248">Summarizes the issues surrounding maintaining consistency over distributed data.</span></span>

- <span data-ttu-id="5065a-249">[Linee guida di partizionamento di dati](https://msdn.microsoft.com/library/dn589795.aspx).</span><span class="sxs-lookup"><span data-stu-id="5065a-249">[Data Partitioning Guidance](https://msdn.microsoft.com/library/dn589795.aspx).</span></span> <span data-ttu-id="5065a-250">Quando si usa il modello di origine eventi, si ricorre spesso al partizionamento dei dati per migliorare la scalabilità, ridurre i conflitti e ottimizzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5065a-250">Data is often partitioned when using event sourcing to improve scalability, reduce contention, and optimize performance.</span></span> <span data-ttu-id="5065a-251">Questo modello descrive come suddividere i dati in partizioni distinte e illustra i problemi che possono derivarne.</span><span class="sxs-lookup"><span data-stu-id="5065a-251">Describes how to divide data into discrete partitions, and the issues that can arise.</span></span>
