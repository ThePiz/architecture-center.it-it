---
title: Gatekeeper
description: Proteggere le applicazioni e i servizi usando un'istanza host dedicata che funga da broker tra i client e l'applicazione o il servizio, convalidi e purifichi le richieste e passi le richieste e i dati tra di essi.
keywords: schema progettuale
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- security
ms.openlocfilehash: 39f8548bbccb5e19d433f65b2e7e09147d676996
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/14/2017
---
# <a name="gatekeeper-pattern"></a><span data-ttu-id="9dff5-104">Modello Gatekeeper</span><span class="sxs-lookup"><span data-stu-id="9dff5-104">Gatekeeper pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="9dff5-105">Proteggere le applicazioni e i servizi usando un'istanza host dedicata che funga da broker tra i client e l'applicazione o il servizio, convalidi e purifichi le richieste e passi le richieste e i dati tra di essi.</span><span class="sxs-lookup"><span data-stu-id="9dff5-105">Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.</span></span> <span data-ttu-id="9dff5-106">Può fornire un altro livello di protezione e limitare la superficie di attacco del sistema.</span><span class="sxs-lookup"><span data-stu-id="9dff5-106">This can provide an additional layer of security, and limit the attack surface of the system.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="9dff5-107">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="9dff5-107">Context and problem</span></span>

<span data-ttu-id="9dff5-108">Le applicazioni espongono le proprie funzionalità ai client accettando ed elaborando le richieste.</span><span class="sxs-lookup"><span data-stu-id="9dff5-108">Applications expose their functionality to clients by accepting and processing requests.</span></span> <span data-ttu-id="9dff5-109">Negli scenari ospitati su cloud, le applicazioni espongono gli endpoint a cui si connettono i client, includendo in genere il codice per gestire le richieste che da questi provengono.</span><span class="sxs-lookup"><span data-stu-id="9dff5-109">In cloud-hosted scenarios, applications expose endpoints clients connect to, and typically include the code to handle the requests from clients.</span></span> <span data-ttu-id="9dff5-110">Questo codice esegue autenticazione e convalida, elabora alcune o tutte le richieste e, probabilmente, accede alla risorsa di archiviazione e ad altri servizi per conto del client.</span><span class="sxs-lookup"><span data-stu-id="9dff5-110">This code performs authentication and validation, some or all request processing, and is likely to accesses storage and other services on behalf of the client.</span></span>

<span data-ttu-id="9dff5-111">Se un utente malintenzionato riesce a compromettere il sistema e ad accedere all'ambiente che ospita l'applicazione, i meccanismi di sicurezza usati, ad esempio le credenziali e le chiavi di archiviazione, risulteranno esposti, insieme ai servizi e ai dati a cui l'utente ha avuto accesso.</span><span class="sxs-lookup"><span data-stu-id="9dff5-111">If a malicious user is able to compromise the system and gain access to the application’s hosting environment, the security mechanisms it uses such as credentials and storage keys, and the services and data it accesses, are exposed.</span></span> <span data-ttu-id="9dff5-112">Di conseguenza, l'utente malintenzionato può accedere a informazioni riservate e altri servizi.</span><span class="sxs-lookup"><span data-stu-id="9dff5-112">As a result, the malicious user can gain unrestrained access to sensitive information and other services.</span></span>

## <a name="solution"></a><span data-ttu-id="9dff5-113">Soluzione</span><span class="sxs-lookup"><span data-stu-id="9dff5-113">Solution</span></span>

<span data-ttu-id="9dff5-114">Per ridurre al minimo il rischio che i client possano accedere a informazioni e servizi riservati, è consigliabile separare gli host o le attività che espongono gli endpoint pubblici dal codice che elabora le richieste e accede all'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-114">To minimize the risk of clients gaining access to sensitive information and services, decouple hosts or tasks that expose public endpoints from the code that processes requests and accesses storage.</span></span> <span data-ttu-id="9dff5-115">A tal fine, usare un'interfaccia o un'attività dedicata che interagisce con i client e che quindi passa la richiesta, magari attraverso un'interfaccia distinta, agli host o all'attività che la gestiranno.</span><span class="sxs-lookup"><span data-stu-id="9dff5-115">You can achieve this by using a façade or a dedicated task that interacts with clients and then hands off the request&mdash;perhaps through a decoupled interface&mdash;to the hosts or tasks that'll handle the request.</span></span> <span data-ttu-id="9dff5-116">La figura illustra una panoramica generale di questo modello.</span><span class="sxs-lookup"><span data-stu-id="9dff5-116">The figure provides a high-level overview of this pattern.</span></span>

![Panoramica generale del modello](./_images/gatekeeper-diagram.png)


<span data-ttu-id="9dff5-118">Il modello Gatekeeper può essere usato semplicemente per proteggere le risorse di archiviazione oppure come interfaccia più completa per proteggere tutte le funzioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-118">The gatekeeper pattern can be used to simply protect storage, or it can be used as a more comprehensive façade to protect all of the functions of the application.</span></span> <span data-ttu-id="9dff5-119">Di seguito i fattori importanti:</span><span class="sxs-lookup"><span data-stu-id="9dff5-119">The important factors are:</span></span>

- <span data-ttu-id="9dff5-120">**Convalida controllata.**</span><span class="sxs-lookup"><span data-stu-id="9dff5-120">**Controlled validation.**</span></span> <span data-ttu-id="9dff5-121">Gatekeeper convalida tutte le richieste e rifiuta quelle che non soddisfano i requisiti della convalida.</span><span class="sxs-lookup"><span data-stu-id="9dff5-121">The gatekeeper validates all requests, and rejects those that don't meet validation requirements.</span></span>
- <span data-ttu-id="9dff5-122">**Rischio ed esposizione limitati.**</span><span class="sxs-lookup"><span data-stu-id="9dff5-122">**Limited risk and exposure.**</span></span> <span data-ttu-id="9dff5-123">Gatekeeper non ha accesso alle credenziali o alle chiavi usate dall'host attendibile per accedere ai servizi e all'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-123">The gatekeeper doesn't have access to the credentials or keys used by the trusted host to access storage and services.</span></span> <span data-ttu-id="9dff5-124">Se il gatekeeper è compromesso, l'autore dell'attacco non potrà accedere a tali credenziali o chiavi.</span><span class="sxs-lookup"><span data-stu-id="9dff5-124">If the gatekeeper is compromised, the attacker doesn't get access to these credentials or keys.</span></span>
- <span data-ttu-id="9dff5-125">**Adeguata protezione.**</span><span class="sxs-lookup"><span data-stu-id="9dff5-125">**Appropriate security.**</span></span> <span data-ttu-id="9dff5-126">Gatekeeper viene eseguito in una modalità con privilegi limitati, mentre il resto dell'applicazione viene eseguito nella modalità di totale attendibilità richiesta per accedere alle risorse di archiviazione e ai servizi.</span><span class="sxs-lookup"><span data-stu-id="9dff5-126">The gatekeeper runs in a limited privilege mode, while the rest of the application runs in the full trust mode required to access storage and services.</span></span> <span data-ttu-id="9dff5-127">Se il gatekeeper risulta compromesso, non può accedere direttamente ai servizi o ai dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-127">If the gatekeeper is compromised, it can't directly access the application services or data.</span></span>

<span data-ttu-id="9dff5-128">Questo modello agisce come un firewall in una tipica topografia di rete.</span><span class="sxs-lookup"><span data-stu-id="9dff5-128">This pattern acts like a firewall in a typical network topography.</span></span> <span data-ttu-id="9dff5-129">Consente al gatekeeper di esaminare le richieste e di prendere una decisione sull'opportunità di passare la richiesta all'host attendibile, anche noto come master chiavi, che esegue le attività richieste.</span><span class="sxs-lookup"><span data-stu-id="9dff5-129">It allows the gatekeeper to examine requests and make a decision about whether to pass the request on to the trusted host (sometimes called the keymaster) that performs the required tasks.</span></span> <span data-ttu-id="9dff5-130">In genere la decisione richiede al gatekeeper di convalidare e purificare il contenuto della richiesta prima di passarlo all'host.</span><span class="sxs-lookup"><span data-stu-id="9dff5-130">This decision typically requires the gatekeeper to validate and sanitize the request content before passing it on to the trusted host.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="9dff5-131">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="9dff5-131">Issues and considerations</span></span>

<span data-ttu-id="9dff5-132">Prima di decidere come implementare questo modello, considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="9dff5-132">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="9dff5-133">Verificare che gli host attendibili, a cui il gatekeeper passa le richieste, espongano solo endpoint interni o protetti e si connettano solo al gatekeeper.</span><span class="sxs-lookup"><span data-stu-id="9dff5-133">Ensure that the trusted hosts the gatekeeper passes requests to expose only internal or protected endpoints, and connect only to the gatekeeper.</span></span> <span data-ttu-id="9dff5-134">Gli host attendibili non devono esporre interfacce o endpoint esterni.</span><span class="sxs-lookup"><span data-stu-id="9dff5-134">The trusted hosts shouldn't expose any external endpoints or interfaces.</span></span>
- <span data-ttu-id="9dff5-135">Il gatekeeper deve essere eseguito in una modalità con privilegi limitati.</span><span class="sxs-lookup"><span data-stu-id="9dff5-135">The gatekeeper must run in a limited privilege mode.</span></span> <span data-ttu-id="9dff5-136">In genere, ciò implica che il gatekeeper e l'host attendibile vengono eseguiti in macchine virtuali o servizi ospitati separati.</span><span class="sxs-lookup"><span data-stu-id="9dff5-136">Typically this means running the gatekeeper and the trusted host in separate hosted services or virtual machines.</span></span>
- <span data-ttu-id="9dff5-137">Il gatekeeper non deve eseguire elaborazioni relative all'applicazione o ai servizi, o accedere ai dati.</span><span class="sxs-lookup"><span data-stu-id="9dff5-137">The gatekeeper shouldn't perform any processing related to the application or services, or access any data.</span></span> <span data-ttu-id="9dff5-138">La sua funzione è esclusivamente quella di convalidare e purificare le richieste.</span><span class="sxs-lookup"><span data-stu-id="9dff5-138">Its function is purely to validate and sanitize requests.</span></span> <span data-ttu-id="9dff5-139">Gli host attendibili potrebbero dover eseguire una convalida aggiuntiva delle richieste, ma la convalida principale deve essere eseguita dal gatekeeper.</span><span class="sxs-lookup"><span data-stu-id="9dff5-139">The trusted hosts might need to perform additional validation of requests, but the core validation should be performed by the gatekeeper.</span></span>
- <span data-ttu-id="9dff5-140">Quando possibile, usare un canale di comunicazione sicura (HTTPS, SSL o TLS) tra il gatekeeper e gli host attendibili.</span><span class="sxs-lookup"><span data-stu-id="9dff5-140">Use a secure communication channel (HTTPS, SSL, or TLS) between the gatekeeper and the trusted hosts or tasks where this is possible.</span></span> <span data-ttu-id="9dff5-141">Alcuni ambienti di hosting non supportano il protocollo HTTPS o gli endpoint interni.</span><span class="sxs-lookup"><span data-stu-id="9dff5-141">However, some hosting environments don't support HTTPS on internal endpoints.</span></span>
- <span data-ttu-id="9dff5-142">L'aggiunta di questo livello all'applicazione per implementare il modello Gatekeeper può influire sulle prestazioni a causa dell'elaborazione e della comunicazione di rete aggiuntiva che richiede.</span><span class="sxs-lookup"><span data-stu-id="9dff5-142">Adding the extra layer to the application to implement the gatekeeper pattern is likely to have some impact on performance due to the additional processing and network communication it requires.</span></span>
- <span data-ttu-id="9dff5-143">L'istanza del gatekeeper potrebbe rappresentare un singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="9dff5-143">The gatekeeper instance could be a single point of failure.</span></span> <span data-ttu-id="9dff5-144">Per ridurre al minimo l'impatto di un guasto, valutare la distribuzione di istanze aggiuntive e l'utilizzo di un meccanismo di scalabilità automatica che garantisca di disporre sempre della capacità necessaria a conservare la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="9dff5-144">To minimize the impact of a failure, consider deploying additional instances and using an autoscaling mechanism to ensure capacity to maintain availability.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="9dff5-145">Quando usare questo modello</span><span class="sxs-lookup"><span data-stu-id="9dff5-145">When to use this pattern</span></span>

<span data-ttu-id="9dff5-146">Questo modello è utile per:</span><span class="sxs-lookup"><span data-stu-id="9dff5-146">This pattern is useful for:</span></span>

- <span data-ttu-id="9dff5-147">Applicazioni che gestiscono informazioni riservate, espongono servizi che richiedono un elevato livello di protezione dagli attacchi o eseguono operazioni critiche che non possono essere interrotte.</span><span class="sxs-lookup"><span data-stu-id="9dff5-147">Applications that handle sensitive information, expose services that must have a high degree of protection from malicious attacks, or perform mission-critical operations that shouldn't be disrupted.</span></span>
- <span data-ttu-id="9dff5-148">Applicazioni distribuite in cui è necessario separare l'esecuzione della convalida delle richieste dalle attività principali, o centralizzare la convalida per semplificare la gestione e la manutenzione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-148">Distributed applications where it's necessary to perform request validation separately from the main tasks, or to centralize this validation to simplify maintenance and administration.</span></span>

## <a name="example"></a><span data-ttu-id="9dff5-149">Esempio</span><span class="sxs-lookup"><span data-stu-id="9dff5-149">Example</span></span>

<span data-ttu-id="9dff5-150">In uno scenario ospitato su cloud, è possibile implementare questo modello separando il ruolo di gatekeeper o di macchina virtuale dai ruoli e dai servizi attendibili di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9dff5-150">In a cloud-hosted scenario, this pattern can be implemented by decoupling the gatekeeper role or virtual machine from the trusted roles and services in an application.</span></span> <span data-ttu-id="9dff5-151">A tal fine, usare un endpoint interno, una coda o una risorsa di archiviazione come meccanismo di comunicazione intermedio.</span><span class="sxs-lookup"><span data-stu-id="9dff5-151">Do this by using an internal endpoint, a queue, or storage as an intermediate communication mechanism.</span></span> <span data-ttu-id="9dff5-152">La figura illustra l'utilizzo di un endpoint interno.</span><span class="sxs-lookup"><span data-stu-id="9dff5-152">The figure illustrates using an internal endpoint.</span></span>

![Un esempio del modello che usa ruoli di lavoro e Web di Servizi cloud](./_images/gatekeeper-endpoint.png)


## <a name="related-patterns"></a><span data-ttu-id="9dff5-154">Modelli correlati</span><span class="sxs-lookup"><span data-stu-id="9dff5-154">Related patterns</span></span>

<span data-ttu-id="9dff5-155">Il [Modello Passepartout](valet-key.md) può essere importante durante l'implementazione del modello Gatekeeper.</span><span class="sxs-lookup"><span data-stu-id="9dff5-155">The [Valet Key pattern](valet-key.md) might also be relevant when implementing the Gatekeeper pattern.</span></span> <span data-ttu-id="9dff5-156">Durante la comunicazione tra i ruoli attendibili e il Gatekeeper è consigliabile incrementare la sicurezza tramite chiavi o token che limitano le autorizzazioni di accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="9dff5-156">When communicating between the Gatekeeper and trusted roles it's good practice to enhance security by using keys or tokens that limit permissions for accessing resources.</span></span> <span data-ttu-id="9dff5-157">Descrive come usare un token o una chiave che fornisce ai client l'accesso diretto limitato a una risorsa o a un servizio specifico.</span><span class="sxs-lookup"><span data-stu-id="9dff5-157">Describes how to use a token or key that provides clients with restricted direct access to a specific resource or service.</span></span>
