---
title: Limitazione
description: Controllare il consumo delle risorse usate da un'istanza di un'applicazione, un singolo tenant o un intero servizio.
keywords: schema progettuale
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- availability
- performance-scalability
ms.openlocfilehash: 29156fc72f40a952dd53adcb20ffa7c3d0af79b4
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/14/2017
---
# <a name="throttling-pattern"></a><span data-ttu-id="bd22c-104">Modello Limitazione</span><span class="sxs-lookup"><span data-stu-id="bd22c-104">Throttling pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="bd22c-105">Controllare il consumo delle risorse usate da un'istanza di un'applicazione, un singolo tenant o un intero servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-105">Control the consumption of resources used by an instance of an application, an individual tenant, or an entire service.</span></span> <span data-ttu-id="bd22c-106">Questa scelta può consentire al sistema di continuare a funzionare e soddisfare i contratti di servizio, anche quando un aumento della domanda genera un carico particolarmente intenso sulle risorse.</span><span class="sxs-lookup"><span data-stu-id="bd22c-106">This can allow the system to continue to function and meet service level agreements, even when an increase in demand places an extreme load on resources.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="bd22c-107">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="bd22c-107">Context and problem</span></span>

<span data-ttu-id="bd22c-108">Il carico su un'applicazione cloud varia in genere nel tempo in base al numero di utenti attivi o ai tipi di attività in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-108">The load on a cloud application typically varies over time based on the number of active users or the types of activities they are performing.</span></span> <span data-ttu-id="bd22c-109">Ad esempio, è probabile che più utenti siano attivi durante l'orario di lavoro oppure al sistema potrebbe essere richiesto di eseguire un'analisi impegnativa a livello di calcolo alla fine di ogni mese.</span><span class="sxs-lookup"><span data-stu-id="bd22c-109">For example, more users are likely to be active during business hours, or the system might be required to perform computationally expensive analytics at the end of each month.</span></span> <span data-ttu-id="bd22c-110">È possibile anche che si verifichino picchi improvvisi e imprevisti nell'attività.</span><span class="sxs-lookup"><span data-stu-id="bd22c-110">There might also be sudden and unanticipated bursts in activity.</span></span> <span data-ttu-id="bd22c-111">Se i requisiti di elaborazione del sistema superano la capacità delle risorse disponibili, è possibile che le prestazioni non siano soddisfacenti e persino che si verifichi un errore del sistema.</span><span class="sxs-lookup"><span data-stu-id="bd22c-111">If the processing requirements of the system exceed the capacity of the resources that are available, it'll suffer from poor performance and can even fail.</span></span> <span data-ttu-id="bd22c-112">Se il sistema deve soddisfare un livello di servizio concordato, questo errore potrebbe non essere accettabile.</span><span class="sxs-lookup"><span data-stu-id="bd22c-112">If the system has to meet an agreed level of service, such failure could be unacceptable.</span></span>

<span data-ttu-id="bd22c-113">Sono disponibili numerose strategie per gestire carichi variabili nel cloud, a seconda degli obiettivi aziendali per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-113">There're many strategies available for handling varying load in the cloud, depending on the business goals for the application.</span></span> <span data-ttu-id="bd22c-114">Una strategia consiste nell'usare la scalabilità automatica in modo che corrisponda alle risorse di cui è stato eseguito il provisioning all'utente in un momento specifico.</span><span class="sxs-lookup"><span data-stu-id="bd22c-114">One strategy is to use autoscaling to match the provisioned resources to the user needs at any given time.</span></span> <span data-ttu-id="bd22c-115">Questa strategia è in grado di soddisfare in modo coerente la richiesta dell'utente, ottimizzando al contempo i costi in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-115">This has the potential to consistently meet user demand, while optimizing running costs.</span></span> <span data-ttu-id="bd22c-116">Tuttavia, mentre la scalabilità automatica può attivare il provisioning di risorse aggiuntive, questo provisioning non è immediato.</span><span class="sxs-lookup"><span data-stu-id="bd22c-116">However, while autoscaling can trigger the provisioning of additional resources, this provisioning isn't immediate.</span></span> <span data-ttu-id="bd22c-117">Se la domanda cresce rapidamente, è possibile che le risorse in un intervallo di tempo non siano sufficienti.</span><span class="sxs-lookup"><span data-stu-id="bd22c-117">If demand grows quickly, there can be a window of time where there's a resource deficit.</span></span>

## <a name="solution"></a><span data-ttu-id="bd22c-118">Soluzione</span><span class="sxs-lookup"><span data-stu-id="bd22c-118">Solution</span></span>

<span data-ttu-id="bd22c-119">Una strategia alternativa alla scalabilità automatica consiste nel consentire alle applicazioni di usare le risorse solo fino a un limite e di limitarle al raggiungimento di questo limite.</span><span class="sxs-lookup"><span data-stu-id="bd22c-119">An alternative strategy to autoscaling is to allow applications to use resources only up to a limit, and then throttle them when this limit is reached.</span></span> <span data-ttu-id="bd22c-120">Il sistema deve monitorare la modalità di utilizzo delle risorse in modo che, quando l'utilizzo supera la soglia, sia possibile limitare le richieste provenienti da uno o più utenti.</span><span class="sxs-lookup"><span data-stu-id="bd22c-120">The system should monitor how it's using resources so that, when usage exceeds the threshold, it can throttle requests from one or more users.</span></span> <span data-ttu-id="bd22c-121">In questo modo il sistema continuerà a funzionare e soddisferà gli eventuali contratti di servizio applicabili.</span><span class="sxs-lookup"><span data-stu-id="bd22c-121">This will enable the system to continue functioning and meet any service level agreements (SLAs) that are in place.</span></span> <span data-ttu-id="bd22c-122">Per altre informazioni sul monitoraggio dell'utilizzo delle risorse, vedere [Indicazioni sulla strumentazione e la telemetria](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd22c-122">For more information on monitoring resource usage, see the [Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span>

<span data-ttu-id="bd22c-123">Il sistema potrebbe implementare diverse strategie di limitazione, tra cui:</span><span class="sxs-lookup"><span data-stu-id="bd22c-123">The system could implement several throttling strategies, including:</span></span>

- <span data-ttu-id="bd22c-124">Rifiutare le richieste da un singolo utente che ha già effettuato l'accesso alle API di sistema più di n volte al secondo in un determinato periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="bd22c-124">Rejecting requests from an individual user who's already accessed system APIs more than n times per second over a given period of time.</span></span> <span data-ttu-id="bd22c-125">Per tale scopo è necessario che il sistema calcoli l'utilizzo delle risorse per ogni tenant o utente che esegue un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-125">This requires the system to meter the use of resources for each tenant or user running an application.</span></span> <span data-ttu-id="bd22c-126">Per altre informazioni, vedere le [indicazioni sulla misurazione del servizio](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd22c-126">For more information, see the [Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span>

- <span data-ttu-id="bd22c-127">Disabilitare o degradare la funzionalità di servizi non essenziali selezionati in modo che i servizi essenziali possano essere eseguiti senza problemi con risorse sufficienti.</span><span class="sxs-lookup"><span data-stu-id="bd22c-127">Disabling or degrading the functionality of selected nonessential services so that essential services can run unimpeded with sufficient resources.</span></span> <span data-ttu-id="bd22c-128">Ad esempio, se l'applicazione sta trasmettendo l'output video, potrebbe passare a una risoluzione inferiore.</span><span class="sxs-lookup"><span data-stu-id="bd22c-128">For example, if the application is streaming video output, it could switch to a lower resolution.</span></span>

- <span data-ttu-id="bd22c-129">Usare il livellamento del carico per regolare il volume di attività; questo approccio è descritto in maggior dettaglio nello [schema di livellamento del carico basato sulle code](queue-based-load-leveling.md).</span><span class="sxs-lookup"><span data-stu-id="bd22c-129">Using load leveling to smooth the volume of activity (this approach is covered in more detail by the [Queue-based Load Leveling pattern](queue-based-load-leveling.md)).</span></span> <span data-ttu-id="bd22c-130">In un ambiente multi-tenant questo approccio ridurrà le prestazioni per ogni tenant.</span><span class="sxs-lookup"><span data-stu-id="bd22c-130">In a multi-tenant environment, this approach will reduce the performance for every tenant.</span></span> <span data-ttu-id="bd22c-131">Se il sistema deve supportare un insieme di tenant con contratti di servizio diversi, le operazioni i tenant di alto valore possono essere eseguite immediatamente.</span><span class="sxs-lookup"><span data-stu-id="bd22c-131">If the system must support a mix of tenants with different SLAs, the work for high-value tenants might be performed immediately.</span></span> <span data-ttu-id="bd22c-132">Le richieste di altri tenant possono essere tratenute e gestite quando il backlog è diminuito.</span><span class="sxs-lookup"><span data-stu-id="bd22c-132">Requests for other tenants can be held back, and handled when the backlog has eased.</span></span> <span data-ttu-id="bd22c-133">Lo [schema della coda di priorità][] può essere usato per facilitare l'implementazione di questo approccio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-133">The [Priority Queue pattern][] could be used to help implement this approach.</span></span>

- <span data-ttu-id="bd22c-134">Rinviare operazioni eseguite per conto di tenant o di applicazioni con priorità più bassa.</span><span class="sxs-lookup"><span data-stu-id="bd22c-134">Deferring operations being performed on behalf of lower priority applications or tenants.</span></span> <span data-ttu-id="bd22c-135">Queste operazioni possono essere sospese o limitate, con un'eccezione generata per informare il tenant che il sistema è occupato e che l'operazione dovrebbe essere ritentata successivamente.</span><span class="sxs-lookup"><span data-stu-id="bd22c-135">These operations can be suspended or limited, with an exception generated to inform the tenant that the system is busy and that the operation should be retried later.</span></span>

<span data-ttu-id="bd22c-136">La figura mostra un grafo ad area per l'utilizzo delle risorse (una combinazione di memoria, CPU, larghezza di banda e di altri fattori) rispetto al tempo per cui le applicazioni usano le tre funzioni.</span><span class="sxs-lookup"><span data-stu-id="bd22c-136">The figure shows an area graph for resource use (a combination of memory, CPU, bandwidth, and other factors) against time for applications that are making use of three features.</span></span> <span data-ttu-id="bd22c-137">Una funzione è un'area di funzionalità, ad esempio un componente che esegue una serie specifica di attività, una parte del codice che esegue un calcolo complesso o un elemento che fornisce un servizio, ad esempio una cache in memoria.</span><span class="sxs-lookup"><span data-stu-id="bd22c-137">A feature is an area of functionality, such as a component that performs a specific set of tasks, a piece of code that performs a complex calculation, or an element that provides a service such as an in-memory cache.</span></span> <span data-ttu-id="bd22c-138">Queste funzioni sono etichettate come A, B e C.</span><span class="sxs-lookup"><span data-stu-id="bd22c-138">These features are labeled A, B, and C.</span></span>

![Figura 1: grafo che mostra l'utilizzo delle risorse rispetto al tempo di esecuzione delle applicazioni per conto di tre utenti](./_images/throttling-resource-utilization.png)


> <span data-ttu-id="bd22c-140">L'area immediatamente sotto la linea per una funzione indica le risorse usate dalle applicazioni quando richiamano questa funzione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-140">The area immediately below the line for a feature indicates the resources that are used by applications when they invoke this feature.</span></span> <span data-ttu-id="bd22c-141">Ad esempio, l'area sotto la riga per la Funzione A mostra le risorse usate dalle applicazioni che usano la Funzione A e l'area tra le righe per la Funzione A e la Funzione B indica le risorse usate dalle applicazioni che richiamano la Funzione B. L'aggregazione delle aree per ogni funzione mostra l'utilizzo totale delle risorse del sistema.</span><span class="sxs-lookup"><span data-stu-id="bd22c-141">For example, the area below the line for Feature A shows the resources used by applications that are making use of Feature A, and the area between the lines for Feature A and Feature B indicates the resources used by applications invoking Feature B. Aggregating the areas for each feature shows the total resource use of the system.</span></span>

<span data-ttu-id="bd22c-142">La figura precedente illustra gli effetti delle operazioni di rinvio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-142">The previous figure illustrates the effects of deferring operations.</span></span> <span data-ttu-id="bd22c-143">Appena prima del tempo T1, le risorse totali assegnate a tutte le applicazioni che usano queste funzioni raggiungono una soglia, il limite di utilizzo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bd22c-143">Just prior to time T1, the total resources allocated to all applications using these features reach a threshold (the limit of resource use).</span></span> <span data-ttu-id="bd22c-144">A questo punto, le applicazioni rischiano di esaurire le risorse disponibili.</span><span class="sxs-lookup"><span data-stu-id="bd22c-144">At this point, the applications are in danger of exhausting the resources available.</span></span> <span data-ttu-id="bd22c-145">In questo sistema, la Funzione B è meno critica della Funzione A o della Funzione C e quindi è stata temporaneamente disattivata rilasciando le risorse che stava usando.</span><span class="sxs-lookup"><span data-stu-id="bd22c-145">In this system, Feature B is less critical than Feature A or Feature C, so it's temporarily disabled and the resources that it was using are released.</span></span> <span data-ttu-id="bd22c-146">Tra i tempi T1 e T2, le applicazioni che usano la Funzione A e la Funzione C continuano a funzionare normalmente.</span><span class="sxs-lookup"><span data-stu-id="bd22c-146">Between times T1 and T2, the applications using Feature A and Feature C continue running as normal.</span></span> <span data-ttu-id="bd22c-147">Alla fine, l'utilizzo delle risorse di queste due funzioni diminuisce al punto in cui, al tempo T2, è disponibile una capacità sufficiente per abilitare nuovamente la Funzione B.</span><span class="sxs-lookup"><span data-stu-id="bd22c-147">Eventually, the resource use of these two features diminishes to the point when, at time T2, there is sufficient capacity to enable Feature B again.</span></span>

<span data-ttu-id="bd22c-148">Gli approcci di scalabilità automatica e limitazione possono anche essere combinati per mantenere reattive le applicazioni e in linea con i contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-148">The autoscaling and throttling approaches can also be combined to help keep the applications responsive and within SLAs.</span></span> <span data-ttu-id="bd22c-149">Se si prevede che la domanda rimarrà elevata, la limitazione fornisce una soluzione temporanea mentre il sistema esegue la scalabilità orizzontale. A questo punto è possibile ripristinare la funzionalità completa del sistema.</span><span class="sxs-lookup"><span data-stu-id="bd22c-149">If the demand is expected to remain high, throttling provides a temporary solution while the system scales out. At this point, the full functionality of the system can be restored.</span></span>

<span data-ttu-id="bd22c-150">La figura seguente mostra un grafo ad area sull'utilizzo generale delle risorse da parte di tutte le applicazioni eseguite in un sistema rispetto al tempo e illustra come è possibile combinare la limitazione delle richieste con la scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="bd22c-150">The next figure shows an area graph of the overall resource use by all applications running in a system against time, and illustrates how throttling can be combined with autoscaling.</span></span>

![Figura 2: grafo che mostra gli effetti ottenuti combinando la limitazione delle richieste con la scalabilità automatica](./_images/throttling-autoscaling.png)


<span data-ttu-id="bd22c-152">All'ora T1 viene raggiunta la soglia che specifica il limite flessibile di utilizzo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bd22c-152">At time T1, the threshold specifying the soft limit of resource use is reached.</span></span> <span data-ttu-id="bd22c-153">A questo punto il sistema può iniziare a scalare orizzontalmente. Tuttavia, se le nuove risorse non diventano disponibili abbastanza rapidamente, le risorse esistenti potrebbero esaurirsi e si potrebbe verificare un errore del sistema.</span><span class="sxs-lookup"><span data-stu-id="bd22c-153">At this point, the system can start to scale out. However, if the new resources don't become available quickly enough, then the existing resources might be exhausted and the system could fail.</span></span> <span data-ttu-id="bd22c-154">Per evitare questo problema, il sistema viene limitato temporaneamente, come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="bd22c-154">To prevent this from occurring, the system is temporarily throttled, as described earlier.</span></span> <span data-ttu-id="bd22c-155">Dopo che la scalabilità automatica è stata completata e che risorse aggiuntive sono diventate disponibili, è possibile ridurre la limitazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-155">When autoscaling has completed and the additional resources are available, throttling can be relaxed.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="bd22c-156">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="bd22c-156">Issues and considerations</span></span>

<span data-ttu-id="bd22c-157">Prima di decidere come implementare questo schema, è opportuno considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="bd22c-157">You should consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="bd22c-158">Limitare le richieste di un'applicazione e scegliere la strategia sono decisioni che influiscono sull'intera progettazione di un sistema.</span><span class="sxs-lookup"><span data-stu-id="bd22c-158">Throttling an application, and the strategy to use, is an architectural decision that impacts the entire design of a system.</span></span> <span data-ttu-id="bd22c-159">Non è facile aggiungere la limitazione delle richieste dopo l'implementazione di un sistema ed è quindi opportuno valutare questa scelta all'inizio del processo di progettazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-159">Throttling should be considered early in the application design process because it isn't easy to add once a system has been implemented.</span></span>

- <span data-ttu-id="bd22c-160">La limitazione delle richieste deve essere eseguita rapidamente.</span><span class="sxs-lookup"><span data-stu-id="bd22c-160">Throttling must be performed quickly.</span></span> <span data-ttu-id="bd22c-161">Il sistema deve essere in grado di rilevare un aumento di attività e reagire di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="bd22c-161">The system must be capable of detecting an increase in activity and react accordingly.</span></span> <span data-ttu-id="bd22c-162">Il sistema deve anche essere in grado di ripristinare lo stato originale rapidamente dopo che il carico è diminuito.</span><span class="sxs-lookup"><span data-stu-id="bd22c-162">The system must also be able to revert to its original state quickly after the load has eased.</span></span> <span data-ttu-id="bd22c-163">A tale scopo è necessario che vengano costantemente acquisiti e monitorati i dati sulle prestazioni appropriati.</span><span class="sxs-lookup"><span data-stu-id="bd22c-163">This requires that the appropriate performance data is continually captured and monitored.</span></span>

- <span data-ttu-id="bd22c-164">Se un servizio deve negare temporaneamente una richiesta dell'utente, deve restituire un codice di errore specifico in modo che l'applicazione client sia consapevole che il motivo del rifiuto ad eseguire un'operazione è dovuto alla limitazione delle richieste.</span><span class="sxs-lookup"><span data-stu-id="bd22c-164">If a service needs to temporarily deny a user request, it should return a specific error code so the client application understands that the reason for the refusal to perform an operation is due to throttling.</span></span> <span data-ttu-id="bd22c-165">L'applicazione client può attendere prima di ritentare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="bd22c-165">The client application can wait for a period before retrying the request.</span></span>

- <span data-ttu-id="bd22c-166">La limitazione delle richieste può essere usata come misura temporanea mentre il sistema scala automaticamente.</span><span class="sxs-lookup"><span data-stu-id="bd22c-166">Throttling can be used as a temporary measure while a system autoscales.</span></span> <span data-ttu-id="bd22c-167">In alcuni casi è preferibile limitare semplicemente le richieste, anziché eseguire la scalabilità, se un picco di attività è improvviso e non si prevede una lunga durata perché la scalabilità aumenta notevolmente i costi di gestione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-167">In some cases it's better to simply throttle, rather than to scale, if a burst in activity is sudden and isn't expected to be long lived because scaling can add considerably to running costs.</span></span>

- <span data-ttu-id="bd22c-168">Se la limitazione delle richieste viene usata come misura temporanea mentre il sistema scala automaticamente e se le richieste di risorse aumentano molto rapidamente, il sistema potrebbe non essere in grado di continuare a funzionare normalmente, anche se funziona in modalità limitata.</span><span class="sxs-lookup"><span data-stu-id="bd22c-168">If throttling is being used as a temporary measure while a system autoscales, and if resource demands grow very quickly, the system might not be able to continue functioning&mdash;even when operating in a throttled mode.</span></span> <span data-ttu-id="bd22c-169">Se questa condizione non è accettabile, è consigliabile, prendere in considerazione la possibilità di mantenere maggiori riserve di capacità e di configurare una scalabilità automatica più aggressiva.</span><span class="sxs-lookup"><span data-stu-id="bd22c-169">If this isn't acceptable, consider maintaining larger capacity reserves and configuring more aggressive autoscaling.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="bd22c-170">Quando usare questo modello</span><span class="sxs-lookup"><span data-stu-id="bd22c-170">When to use this pattern</span></span>

<span data-ttu-id="bd22c-171">Usare questo schema:</span><span class="sxs-lookup"><span data-stu-id="bd22c-171">Use this pattern:</span></span>

- <span data-ttu-id="bd22c-172">Per garantire che un sistema continui a soddisfare i contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-172">To ensure that a system continues to meet service level agreements.</span></span>

- <span data-ttu-id="bd22c-173">Per evitare a un singolo tenant di monopolizzare le risorse fornite da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-173">To prevent a single tenant from monopolizing the resources provided by an application.</span></span>

- <span data-ttu-id="bd22c-174">Per gestire i picchi di attività.</span><span class="sxs-lookup"><span data-stu-id="bd22c-174">To handle bursts in activity.</span></span>

- <span data-ttu-id="bd22c-175">Per ottimizzare i costi di un sistema limitando i livelli massimi di risorse necessari per mantenerlo funzionante.</span><span class="sxs-lookup"><span data-stu-id="bd22c-175">To help cost-optimize a system by limiting the maximum resource levels needed to keep it functioning.</span></span>

## <a name="example"></a><span data-ttu-id="bd22c-176">Esempio</span><span class="sxs-lookup"><span data-stu-id="bd22c-176">Example</span></span>

<span data-ttu-id="bd22c-177">La figura finale illustra come la limitazione delle richieste può essere implementata in un sistema multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="bd22c-177">The final figure illustrates how throttling can be implemented in a multi-tenant system.</span></span> <span data-ttu-id="bd22c-178">Gli utenti di ciascuna organizzazione tenant accedono a un'applicazione ospitata nel cloud dove compilano e inviano sondaggi.</span><span class="sxs-lookup"><span data-stu-id="bd22c-178">Users from each of the tenant organizations access a cloud-hosted application where they fill out and submit surveys.</span></span> <span data-ttu-id="bd22c-179">L'applicazione contiene la strumentazione che monitora la velocità con cui questi utenti inviano richieste all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-179">The application contains instrumentation that monitors the rate at which these users are submitting requests to the application.</span></span>

<span data-ttu-id="bd22c-180">Per impedire agli utenti di un tenant di compromettere i tempi di risposta e la disponibilità dell'applicazione per tutti gli altri utenti, il numero di richieste al secondo che gli utenti di qualsiasi tenant possono inviare viene limitato.</span><span class="sxs-lookup"><span data-stu-id="bd22c-180">In order to prevent the users from one tenant affecting the responsiveness and availability of the application for all other users, a limit is applied to the number of requests per second the users from any one tenant can submit.</span></span> <span data-ttu-id="bd22c-181">L'applicazione blocca le richieste che superano questo limite.</span><span class="sxs-lookup"><span data-stu-id="bd22c-181">The application blocks requests that exceed this limit.</span></span>

![Figura 3: implementazione della limitazione delle richieste in un'applicazione multi-tenant](./_images/throttling-multi-tenant.png)


## <a name="related-patterns-and-guidance"></a><span data-ttu-id="bd22c-183">Modelli correlati e informazioni aggiuntive</span><span class="sxs-lookup"><span data-stu-id="bd22c-183">Related patterns and guidance</span></span>

<span data-ttu-id="bd22c-184">Per l'implementazione di questo modello possono risultare utili i modelli e le informazioni aggiuntive seguenti:</span><span class="sxs-lookup"><span data-stu-id="bd22c-184">The following patterns and guidance may also be relevant when implementing this pattern:</span></span>
- <span data-ttu-id="bd22c-185">[Indicazioni sulla strumentazione e la telemetria](https://msdn.microsoft.com/library/dn589775.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd22c-185">[Instrumentation and Telemetry Guidance](https://msdn.microsoft.com/library/dn589775.aspx).</span></span> <span data-ttu-id="bd22c-186">La limitazione dipende dalla raccolta di informazioni sulla frequenza di utilizzo di un servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-186">Throttling depends on gathering information about how heavily a service is being used.</span></span> <span data-ttu-id="bd22c-187">Descrive come generare e acquisire informazioni di monitoraggio personalizzate.</span><span class="sxs-lookup"><span data-stu-id="bd22c-187">Describes how to generate and capture custom monitoring information.</span></span>
- <span data-ttu-id="bd22c-188">[Indicazioni sulla misurazione del servizio](https://msdn.microsoft.com/library/dn589796.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd22c-188">[Service Metering Guidance](https://msdn.microsoft.com/library/dn589796.aspx).</span></span> <span data-ttu-id="bd22c-189">Descrive come controllare l'utilizzo dei servizi per comprenderne le modalità di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="bd22c-189">Describes how to meter the use of services in order to gain an understanding of how they are used.</span></span> <span data-ttu-id="bd22c-190">Queste informazioni possono essere utili per determinare come limitare un servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-190">This information can be useful in determining how to throttle a service.</span></span>
- <span data-ttu-id="bd22c-191">[Indicazioni sulla scalabilità automatica](https://msdn.microsoft.com/library/dn589774.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd22c-191">[Autoscaling Guidance](https://msdn.microsoft.com/library/dn589774.aspx).</span></span> <span data-ttu-id="bd22c-192">La limitazione delle richieste può essere usata come misura provvisoria mentre un sistema esegue la scalabilità automatica o per non rendere necessaria questa operazione.</span><span class="sxs-lookup"><span data-stu-id="bd22c-192">Throttling can be used as an interim measure while a system autoscales, or to remove the need for a system to autoscale.</span></span> <span data-ttu-id="bd22c-193">Contiene informazioni sulle strategie di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="bd22c-193">Contains information on autoscaling strategies.</span></span>
- <span data-ttu-id="bd22c-194">[Schema di livellamento del carico basato sulle code](queue-based-load-leveling.md).</span><span class="sxs-lookup"><span data-stu-id="bd22c-194">[Queue-based Load Leveling pattern](queue-based-load-leveling.md).</span></span> <span data-ttu-id="bd22c-195">Il livellamento del carico basato sulle code è un meccanismo di utilizzo comune per implementare la limitazione delle richieste.</span><span class="sxs-lookup"><span data-stu-id="bd22c-195">Queue-based load leveling is a commonly used mechanism for implementing throttling.</span></span> <span data-ttu-id="bd22c-196">Una coda può fungere da buffer che aiuta a bilanciare la velocità con cui le richieste inviate da un'applicazione vengono recapitate a un servizio.</span><span class="sxs-lookup"><span data-stu-id="bd22c-196">A queue can act as a buffer that helps to even out the rate at which requests sent by an application are delivered to a service.</span></span>
- <span data-ttu-id="bd22c-197">[schema della coda di priorità][].</span><span class="sxs-lookup"><span data-stu-id="bd22c-197">[Priority Queue pattern][].</span></span> <span data-ttu-id="bd22c-198">Un sistema può usare l'accodamento prioritario nell'ambito della strategia di limitazione per garantire le prestazioni per le applicazioni strategiche o di livello superiore, riducendo al contempo le prestazioni delle applicazioni meno importanti.</span><span class="sxs-lookup"><span data-stu-id="bd22c-198">A system can use priority queuing as part of its throttling strategy to maintain performance for critical or higher value applications, while reducing the performance of less important applications.</span></span>

[schema della coda di priorità]: priority-queue.md