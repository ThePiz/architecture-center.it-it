---
title: 'Guida alla progettazione della governance: nuovo sviluppo in Azure per più team'
description: Guida alla configurazione dei controlli della governance di Azure per più team, più carichi di lavoro e più ambienti
author: petertay
ms.openlocfilehash: 05f1f9bb24af4f4da55b15c1aca2c71bc0b65411
ms.sourcegitcommit: b3d74d8a89b2224fc796ce0e89cea447af43a0d4
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 06/11/2018
ms.locfileid: "35291158"
---
# <a name="governance-design-guide-new-development-in-azure-for-multiple-teams"></a><span data-ttu-id="eac34-103">Guida alla progettazione della governance: nuovo sviluppo in Azure per più team</span><span class="sxs-lookup"><span data-stu-id="eac34-103">Governance design guide: new development in Azure for multiple teams</span></span>

<span data-ttu-id="eac34-104">Questa guida illustra come progettare un modello di governance delle risorse in Azure.</span><span class="sxs-lookup"><span data-stu-id="eac34-104">The goal of this guidance is to help you learn the process for designing a resource governance model in Azure.</span></span>  <span data-ttu-id="eac34-105">Verranno esaminati alcuni ipotetici requisiti di governance, quindi verranno illustrate diverse implementazioni di esempio che soddisfano tali requisiti.</span><span class="sxs-lookup"><span data-stu-id="eac34-105">We'll look at a set of hypothetical governance requirements, then go through several example implementations that satisfy those requirements.</span></span> 

<span data-ttu-id="eac34-106">I requisiti sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="eac34-106">Our requirements are:</span></span>
* <span data-ttu-id="eac34-107">Gestione delle identità per più team con diversi requisiti di accesso alle risorse in Azure.</span><span class="sxs-lookup"><span data-stu-id="eac34-107">Identity management for multiple teams with different resource access requirements in Azure.</span></span> <span data-ttu-id="eac34-108">Il sistema di gestione delle identità memorizza l'identità degli utenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="eac34-108">The identity management system stores the identity of the following users:</span></span>
  1. <span data-ttu-id="eac34-109">L'utente dell'organizzazione responsabile della proprietà delle **sottoscrizioni**.</span><span class="sxs-lookup"><span data-stu-id="eac34-109">The individual in our organization responsible for ownership of **subscriptions**.</span></span>
  2. <span data-ttu-id="eac34-110">L'utente dell'organizzazione responsabile delle **risorse dell'infrastruttura condivisa** usate per connettere la rete locale a una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="eac34-110">The individual in our organization responsible for the **shared infrastructure resources** used to connect our on-premises network to an Azure virtual network.</span></span> 
  3. <span data-ttu-id="eac34-111">Due utenti dell'organizzazione responsabili della gestione di un **carico di lavoro**.</span><span class="sxs-lookup"><span data-stu-id="eac34-111">Two individuals in our organization responsible for managing a **workload**.</span></span> 
* <span data-ttu-id="eac34-112">Supporto di più **ambienti**.</span><span class="sxs-lookup"><span data-stu-id="eac34-112">Support for multiple **environments**.</span></span> <span data-ttu-id="eac34-113">Come illustrato precedenza, un ambiente è un raggruppamento logico di risorse con requisiti di gestione e sicurezza simili.</span><span class="sxs-lookup"><span data-stu-id="eac34-113">As you learned earlier, an environment is a logical grouping of resources with similar management and security requirements.</span></span> <span data-ttu-id="eac34-114">Sono necessari tre ambienti:</span><span class="sxs-lookup"><span data-stu-id="eac34-114">We require three environments:</span></span>
  1. <span data-ttu-id="eac34-115">Un **ambiente di infrastruttura condivisa** che include risorse condivise dai carichi di lavoro in altri ambienti.</span><span class="sxs-lookup"><span data-stu-id="eac34-115">A **shared infrastructure environment** that includes resources shared by workloads in other environments.</span></span> <span data-ttu-id="eac34-116">Ad esempio, una rete virtuale con una subnet gateway che fornisce connettività all'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="eac34-116">For example, a virtual network with a gateway subnet that provides connectivity to on-premises.</span></span>
  2. <span data-ttu-id="eac34-117">Un **ambiente di produzione** con i criteri di sicurezza più restrittivi.</span><span class="sxs-lookup"><span data-stu-id="eac34-117">A **production environment** with the most restrictive security policies.</span></span> <span data-ttu-id="eac34-118">Può includere carichi di lavoro interni o rivolti all'esterno.</span><span class="sxs-lookup"><span data-stu-id="eac34-118">May include internal or external facing workloads.</span></span>
  3. <span data-ttu-id="eac34-119">Un **ambiente di sviluppo** per la verifica e i test.</span><span class="sxs-lookup"><span data-stu-id="eac34-119">A **development environment** for proof-of-concept and testing work.</span></span> <span data-ttu-id="eac34-120">Questo ambiente ha criteri di sicurezza, conformità e costi diversi da quelli dell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="eac34-120">This environment has security, compliance, and cost policies that differ from those in the production environment.</span></span>
* <span data-ttu-id="eac34-121">Un **modello di autorizzazione con privilegi minimi** in cui gli utenti non hanno autorizzazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="eac34-121">A **permissions model of least privilege** in which users have no permissions by default.</span></span> <span data-ttu-id="eac34-122">Il modello deve supportare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="eac34-122">The model must support the following:</span></span>
  * <span data-ttu-id="eac34-123">Un singolo utente attendibile nell'ambito della sottoscrizione con l'autorizzazione ad assegnare i diritti di accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-123">A single trusted user at the subscription scope with permission to assign resource access rights.</span></span>
  * <span data-ttu-id="eac34-124">Per impostazione predefinita, a ogni proprietario del carico di lavoro viene negato l'accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-124">Each workload owner is denied access to resources by default.</span></span> <span data-ttu-id="eac34-125">I diritti di accesso alle risorse vengono concessi esplicitamente dal singolo utente attendibile nell'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-125">Resource access rights are granted explicitly by the single trusted user at the subscription scope.</span></span>
  * <span data-ttu-id="eac34-126">Accesso di gestione per le risorse dell'infrastruttura condivisa limitato al proprietario dell'infrastruttura condivisa.</span><span class="sxs-lookup"><span data-stu-id="eac34-126">Management access for the shared infrastructure resources limited to the shared infrastructure owner.</span></span>  
  * <span data-ttu-id="eac34-127">Accesso di gestione per ogni carico di lavoro limitato al proprietario del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-127">Management access for each workload restricted to the workload owner.</span></span>
  * <span data-ttu-id="eac34-128">Uso di soli [ruoli di Controllo degli accessi in base al ruolo predefiniti][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="eac34-128">Use of [built-in RBAC roles][rbac-built-in-roles] only.</span></span> <span data-ttu-id="eac34-129">Nessun ruolo di Controllo degli accessi in base al ruolo personalizzato.</span><span class="sxs-lookup"><span data-stu-id="eac34-129">No custom RBAC roles.</span></span>
* <span data-ttu-id="eac34-130">Monitoraggio dei costi in base al nome del proprietario del carico di lavoro, all'ambiente o a entrambi.</span><span class="sxs-lookup"><span data-stu-id="eac34-130">Cost tracking by workload owner name, environment, or both.</span></span> 

## <a name="identity-management"></a><span data-ttu-id="eac34-131">Gestione delle identità</span><span class="sxs-lookup"><span data-stu-id="eac34-131">Identity management</span></span>

<span data-ttu-id="eac34-132">Prima di poter progettare la gestione delle identità per il modello di governance, è importante comprendere le quattro aree principali che lo compongono:</span><span class="sxs-lookup"><span data-stu-id="eac34-132">Before we can design identity management for our governance model, it's important to understand the four major areas it encompasses:</span></span>

* <span data-ttu-id="eac34-133">Amministrazione: i processi e gli strumenti per la creazione, la modifica e l'eliminazione dell'identità utente.</span><span class="sxs-lookup"><span data-stu-id="eac34-133">Administration: the processes and tools for creating, editing, and deleting user identity.</span></span>
* <span data-ttu-id="eac34-134">Autenticazione: verifica dell'identità utente tramite la convalida di credenziali quali nome utente e password.</span><span class="sxs-lookup"><span data-stu-id="eac34-134">Authentication: verifying user identity by validating credentials, such as a user name and password.</span></span>
* <span data-ttu-id="eac34-135">Autorizzazione: determinare a quali risorse un utente autenticato può accedere o quali operazioni è autorizzato a eseguire.</span><span class="sxs-lookup"><span data-stu-id="eac34-135">Authorization: determining which resources an authenticated user is allowed to access or what operations they have permission to perform.</span></span>
* <span data-ttu-id="eac34-136">Controllo: analisi periodica di log e altre informazioni per rilevare problemi di sicurezza correlati all'identità utente.</span><span class="sxs-lookup"><span data-stu-id="eac34-136">Auditing: periodically reviewing logs and other information to discover security issues related to user identity.</span></span> <span data-ttu-id="eac34-137">Include l'analisi di modelli di utilizzo sospetti, l'esame periodico delle autorizzazioni dell'utente per verificare che siano corrette e altre funzioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-137">This includes reviewing suspicious usage patterns, periodically reviewing user permissions to verify they are accurate, and other functions.</span></span>

<span data-ttu-id="eac34-138">Azure ritiene attendibile un solo servizio per l'identità, ovvero Azure Active Directory (AD).</span><span class="sxs-lookup"><span data-stu-id="eac34-138">There is only one service trusted by Azure for identity, and that is Azure Active Directory (AD).</span></span> <span data-ttu-id="eac34-139">Verranno aggiunti utenti ad Azure AD e questo servizio verrà usato per tutte le funzioni elencate in precedenza.</span><span class="sxs-lookup"><span data-stu-id="eac34-139">We'll be adding users to Azure AD and using it for all of the functions listed above.</span></span> <span data-ttu-id="eac34-140">Prima di esaminare come verrà configurato Azure AD, è importante comprendere gli account con privilegi che vengono usati per gestire l'accesso a questi servizi.</span><span class="sxs-lookup"><span data-stu-id="eac34-140">But before we look at how we'll configure Azure AD, it's important to understand the privileged accounts that are used to manage access to these services.</span></span>

<span data-ttu-id="eac34-141">Quando l'organizzazione ha effettuato l'iscrizione per un account di Azure, è stato assegnato almeno un **proprietario dell'account Azure** ed è stato creato un **tenant** di Azure AD, se non era già presente uno associato all'uso di altri servizi Microsoft da parte dell'organizzazione, ad esempio Office 365.</span><span class="sxs-lookup"><span data-stu-id="eac34-141">When your organization signed up for an Azure account, at least one Azure **account owner** was assigned and an Azure AD **tenant** was created if there was not already an Azure AD tenant associated with your organization's use of other Microsoft services such as Office 365.</span></span> <span data-ttu-id="eac34-142">Un **amministratore globale**  con autorizzazioni complete per il tenant di Azure AD è stato associato al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="eac34-142">A **global administrator** with full permissions on the Azure AD tenant was associated when it was created.</span></span> 

<span data-ttu-id="eac34-143">Sia il proprietario dell'account Azure che l'amministratore globale di Azure AD sono archiviati in un sistema di identità altamente sicuro gestito da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="eac34-143">Both of the Azure Account Owner and Azure AD global administrator user identities are stored in a highly secure identity system that is managed by Microsoft.</span></span> <span data-ttu-id="eac34-144">Il proprietario dell'account Azure è autorizzato a creare, aggiornare ed eliminare sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-144">The Azure Account Owner is authorized to create, update, and delete subscriptions.</span></span> <span data-ttu-id="eac34-145">L'amministratore globale di Azure AD è autorizzato a eseguire molte azioni in Azure AD, ma questa guida alla progettazione si concentrerà sulla creazione e sull'eliminazione dell'identità utente.</span><span class="sxs-lookup"><span data-stu-id="eac34-145">The Azure AD global administrator is authorized to perform many actions in Azure AD, but for this design guide we'll focus on the creation and deletion of user identity.</span></span> 

> [!NOTE]
> <span data-ttu-id="eac34-146">L'organizzazione potrebbe già avere un tenant di Azure AD se all'account è associata una licenza Office 365 o Intune esistente.</span><span class="sxs-lookup"><span data-stu-id="eac34-146">Your organization may already have an existing Azure AD tenant if there's an existing Office 365 or Intune license associated with your account.</span></span>

<span data-ttu-id="eac34-147">Il proprietario dell'account Azure è autorizzato a creare, aggiornare ed eliminare sottoscrizioni:</span><span class="sxs-lookup"><span data-stu-id="eac34-147">The Azure Account Owner has permission to create, update, and delete subscriptions:</span></span> 

<span data-ttu-id="eac34-148">![Account Azure con proprietario dell'account Azure e amministratore globale di Azure AD](../_images/governance-3-0.png)
*Figura 1. Un account Azure con un proprietario dell'account e un amministratore globale di Azure AD.*</span><span class="sxs-lookup"><span data-stu-id="eac34-148">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0.png)
*Figure 1. An Azure account with an Account Manager and Azure AD Global Administrator.*</span></span>

<span data-ttu-id="eac34-149">L'amministratore globale di **Azure AD** è autorizzato a creare account utente:</span><span class="sxs-lookup"><span data-stu-id="eac34-149">The Azure AD **global administrator** has permission to create user accounts:</span></span>  

<span data-ttu-id="eac34-150">![Account Azure con proprietario dell'account Azure e amministratore globale di Azure AD](../_images/governance-3-0a.png)
*Figura 2. L'amministratore globale di Azure AD crea gli account utente necessari nel tenant.*</span><span class="sxs-lookup"><span data-stu-id="eac34-150">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0a.png)
*Figure 2. The Azure AD Global Administrator creates the required user accounts in the tenant.*</span></span>

<span data-ttu-id="eac34-151">I primi due account, **App1 Workload Owner** e **App2 Workload Owner**, sono associati a un utente dell'organizzazione responsabile della gestione di un carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-151">The first two accounts, **App1 Workload Owner** and **App2 Workload Owner** are each associated with an individual in our organization responsible for managing a workload.</span></span> <span data-ttu-id="eac34-152">L'account **Network Operations** è di proprietà dell'utente responsabile delle risorse dell'infrastruttura condivisa.</span><span class="sxs-lookup"><span data-stu-id="eac34-152">The **network operations** account is owned by the individual that is responsible for the shared infrastructure resources.</span></span> <span data-ttu-id="eac34-153">Infine, l'account **Subscription Owner** è associato al responsabile della proprietà delle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-153">Finally, the **subscription owner** account is associated with the individual responsible for ownership of subscriptions.</span></span>

## <a name="resource-access-permissions-model-of-least-privilege"></a><span data-ttu-id="eac34-154">Modello di autorizzazioni di accesso alle risorse con privilegi minimi</span><span class="sxs-lookup"><span data-stu-id="eac34-154">Resource access permissions model of least privilege</span></span>

<span data-ttu-id="eac34-155">Ora che sono disponibili il sistema di gestione delle identità e gli account utente, è necessario decidere come applicare i ruoli di Controllo degli accessi in base al ruolo a ogni account per supportare un modello di autorizzazioni con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="eac34-155">Now that we have our identity management system and user accounts created, we have to decide how we'll apply role-based access control (RBAC) roles to each account to support a permissions model of least privilege.</span></span>

<span data-ttu-id="eac34-156">L'altro requisito prevede che le risorse associate a ogni carico di lavoro siano isolate l'una dall'altra in modo che nessun proprietario di un carico di lavoro abbia accesso di gestione ad altri carichi di lavoro di cui non è proprietario.</span><span class="sxs-lookup"><span data-stu-id="eac34-156">Our other requirement is for the resources associated with each workload be isolated from one another such that no one workload owner has management access to any other workload they do not own.</span></span> <span data-ttu-id="eac34-157">Questo modello deve essere implementato usando solo [ruoli predefiniti di Controllo degli accessi in base al ruolo di Azure][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="eac34-157">We have a requirement to implement this model using only [built-in roles for Azure RBAC][rbac-built-in-roles].</span></span>

<span data-ttu-id="eac34-158">Ogni ruolo di Controllo degli accessi in base al ruolo viene applicato a uno di tre ambiti in Azure: **sottoscrizione**, **gruppo di risorse** e singola **risorsa**.</span><span class="sxs-lookup"><span data-stu-id="eac34-158">Each RBAC role is applied at one of three scopes in Azure: **subscription**, **resource group**, then an individual **resource**.</span></span> <span data-ttu-id="eac34-159">I ruoli vengono ereditati negli ambiti inferiori.</span><span class="sxs-lookup"><span data-stu-id="eac34-159">Roles are inherited at lower scopes.</span></span> <span data-ttu-id="eac34-160">Ad esempio, se a un utente viene assegnato il [ruolo di proprietario predefinito][rbac-built-in-owner] a livello di sottoscrizione, tale ruolo verrà assegnato a quell'utente anche a livello di gruppo di risorse e di singola risorsa, a meno che non venga sostituito da un altro ruolo.</span><span class="sxs-lookup"><span data-stu-id="eac34-160">For example, if a user is assigned the [built-in owner role][rbac-built-in-owner] at the subscription level, that role is also assigned to that user at the resource group and individual resource level unless it's overridden.</span></span>

<span data-ttu-id="eac34-161">Per creare un modello di accesso con privilegi minimi è necessario decidere le azioni che un particolare tipo di utente può eseguire in ognuno di questi tre ambiti.</span><span class="sxs-lookup"><span data-stu-id="eac34-161">Therefore, to create a model of least privilege access we have to decide the actions a particular type of user is allowed to take at each of these three scopes.</span></span> <span data-ttu-id="eac34-162">Ad esempio, il requisito prevede che il proprietario di un carico di lavoro sia autorizzato a gestire l'accesso solo alle risorse associate al proprio carico di lavoro e non ad altre.</span><span class="sxs-lookup"><span data-stu-id="eac34-162">For example, our requirement is for a workload owner to have permission to manage access to only the resources associated with their workload and no others.</span></span> <span data-ttu-id="eac34-163">Se si dovesse assegnare il [ruolo di proprietario predefinito][rbac-built-in-owner] a livello di sottoscrizione, ogni proprietario del carico di lavoro avrebbe accesso di gestione a tutti i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-163">If we were to assign the [built-in owner role][rbac-built-in-owner] at the subscription scope, each workload owner would have management access to all workloads.</span></span>

<span data-ttu-id="eac34-164">Di seguito sono riportati due modelli di autorizzazioni di esempio per comprendere meglio questo concetto.</span><span class="sxs-lookup"><span data-stu-id="eac34-164">Let's take a look at two example permission models to understand this concept a little better.</span></span> <span data-ttu-id="eac34-165">Nel primo esempio, il modello consente solo all'amministratore del servizio di creare gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-165">In the first example, our model trusts only the service administrator to create resource groups.</span></span> <span data-ttu-id="eac34-166">Nel secondo esempio, il modello assegna il ruolo di proprietario predefinito a ogni proprietario del carico di lavoro nell'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-166">In the second example, our model assigns the built-in owner role to each workload owner at the subscription scope.</span></span> 

<span data-ttu-id="eac34-167">In entrambi gli esempi, a un amministratore del servizio della sottoscrizione è assegnato il [ruolo di proprietario predefinito][rbac-built-in-owner] nell'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-167">In both examples, we have a subscription service administrator that is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope.</span></span> <span data-ttu-id="eac34-168">Il [ruolo di proprietario predefinito][rbac-built-in-owner] concede tutte le autorizzazioni, inclusa la gestione dell'accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-168">Recall that the [built-in owner role][rbac-built-in-owner] grants all permissions including the management of access to resources.</span></span>
<span data-ttu-id="eac34-169">![amministratore del servizio della sottoscrizione con ruolo di proprietario](../_images/governance-2-1.png)
*Figura 3. Una sottoscrizione con un amministratore del servizio al quale è assegnato il ruolo di proprietario predefinito.*</span><span class="sxs-lookup"><span data-stu-id="eac34-169">![subscription service administrator with owner role](../_images/governance-2-1.png)
*Figure 3. A subscription with a service administrator assigned the built-in owner role.*</span></span> 

1. <span data-ttu-id="eac34-170">Nel primo esempio è presente il **proprietario del carico di lavoro A** senza autorizzazioni a livello della sottoscrizione, per impostazione predefinita senza diritti di gestione dell'accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-170">In our first example, we have **workload owner A** with no permissions at the subscription scope - they have no resource access management rights by default.</span></span> <span data-ttu-id="eac34-171">Questo utente vuole distribuire e gestire le risorse per il proprio carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-171">This user wants to deploy and manage the resources for their workload.</span></span> <span data-ttu-id="eac34-172">Deve contattare l'**amministratore del servizio** per richiedere la creazione di un gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-172">They must contact the **service administrator** to request creation of a resource group.</span></span>
<span data-ttu-id="eac34-173">![il proprietario del carico di lavoro richiede la creazione del gruppo di risorse A](../_images/governance-2-2.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-173">![workload owner requests creation of resource group A](../_images/governance-2-2.png)</span></span>  

2. <span data-ttu-id="eac34-174">L'**amministratore del servizio** esamina la richiesta e crea il **gruppo di risorse A**. In questo momento, il **proprietario del carico di lavoro A**  non è ancora autorizzato ad eseguire alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="eac34-174">The **service administrator** reviews their request and creates **resource group A**. At this point, **workload owner A** still doesn't have permission to do anything.</span></span>
<span data-ttu-id="eac34-175">![l'amministratore del servizio crea il gruppo di risorse A](../_images/governance-2-3.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-175">![service administrator creates resource group A](../_images/governance-2-3.png)</span></span>

3. <span data-ttu-id="eac34-176">L'**amministratore del servizio** aggiunge il **proprietario del carico di lavoro A** al **gruppo di risorse A** e assegna il [ruolo di collaboratore predefinito](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="eac34-176">The **service administrator** adds **workload owner A** to **resource group A** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> <span data-ttu-id="eac34-177">Il ruolo di collaboratore concede tutte le autorizzazioni per il **gruppo di risorse A**, tranne la gestione delle autorizzazioni di accesso.</span><span class="sxs-lookup"><span data-stu-id="eac34-177">The contributor role grants all permissions on **resource group A** except managing access permission.</span></span>
<span data-ttu-id="eac34-178">![l'amministratore del servizio aggiunge il proprietario del carico di lavoro al gruppo di risorse A](../_images/governance-2-4.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-178">![service administrator adds workload owner a to resource group a](../_images/governance-2-4.png)</span></span>

4. <span data-ttu-id="eac34-179">Si supponga che il **proprietario del carico di lavoro A** debba consentire a un paio di componenti del team di visualizzare i dati di monitoraggio della CPU e del traffico di rete nell'ambito della pianificazione delle capacità del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-179">Let's assume that **Workload owner A** has a requirement for a pair of team members to view the CPU and network traffic monitoring data as part of capacity planning for the workload.</span></span> <span data-ttu-id="eac34-180">Dato che al **proprietario del carico di lavoro A** è assegnato il ruolo di collaboratore, non è autorizzato ad aggiungere utenti al **gruppo di risorse A**. Deve inviare questa richiesta all'**amministratore del servizio**.</span><span class="sxs-lookup"><span data-stu-id="eac34-180">Because **workload owner A** is assigned the contributor role, they do not have permission to add a user to **resource group A**. They must send this request to the **service administrator**.</span></span>
<span data-ttu-id="eac34-181">![il proprietario del carico di lavoro richiede l'aggiunta dei collaboratori del carico di lavoro al gruppo di risorse](../_images/governance-2-5.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-181">![workload owner requests workload contributors be added to resource group](../_images/governance-2-5.png)</span></span>

5. <span data-ttu-id="eac34-182">L'**amministratore del servizio** esamina la richiesta e aggiunge due utenti **collaboratori del carico di lavoro** al **gruppo di risorse A**. Nessuno di questi due utenti richiede l'autorizzazione a gestire le risorse, quindi viene assegnato il ruolo di [lettore predefinito](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="eac34-182">The **service administrator** reviews the request, and adds the two **workload contributor** users to **resource group A**. Neither of these two users require permission to manage resources, so they are assigned the [built-in reader role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="eac34-183">![l'amministratore del servizio aggiunge i collaboratori del carico di lavoro al gruppo di risorse A](../_images/governance-2-6.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-183">![service administrator adds workload contributors to resource group A](../_images/governance-2-6.png)</span></span>

6. <span data-ttu-id="eac34-184">Successivamente, anche il **proprietario del carico di lavoro B** richiede che un gruppo di risorse contenga le risorse per il proprio carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-184">Next, **workload owner B** also requires a resource group to contain the resources for their workload.</span></span> <span data-ttu-id="eac34-185">Come il **proprietario del carico di lavoro A**, il **proprietario del carico di lavoro B** non è inizialmente autorizzato a eseguire azioni a livello di sottoscrizione, quindi deve inviare una richiesta all'**amministratore del servizio**.</span><span class="sxs-lookup"><span data-stu-id="eac34-185">As with **workload owner A**, **workload owner B** initially does not have permission to take any action at the subscription scope so they must send a request to the **service administrator**.</span></span> 
<span data-ttu-id="eac34-186">![il proprietario del carico di lavoro B richiede la creazione del gruppo di risorse B](../_images/governance-2-7.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-186">![workload owner B requests creation of resource group B](../_images/governance-2-7.png)</span></span>

7. <span data-ttu-id="eac34-187">L'**amministratore del servizio** esamina la richiesta e crea il **gruppo di risorse B**. ![l'amministratore del servizio crea il gruppo di risorse B](../_images/governance-2-8.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-187">The **service administrator** reviews the request and creates **resource group B**. ![Service Administrator creates resource group B](../_images/governance-2-8.png)</span></span>

8. <span data-ttu-id="eac34-188">L'**amministratore del servizio** aggiunge quindi il **proprietario del carico di lavoro B** al **gruppo di risorse B** e assegna il [ruolo di collaboratore predefinito](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="eac34-188">The **service administrator** then adds **workload owner B** to **resource group B** and assigns the [built-in contributor role](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="eac34-189">![l'amministratore del servizio aggiunge il proprietario del carico di lavoro B al gruppo di risorse B](../_images/governance-2-9.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-189">![Service Administrator adds Workload Owner B to resource group B](../_images/governance-2-9.png)</span></span>

<span data-ttu-id="eac34-190">A questo punto, ogni proprietario del carico di lavoro è isolato nel proprio gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-190">At this point, each of the workload owners is isolated in their own resource group.</span></span> <span data-ttu-id="eac34-191">I proprietari del carico di lavoro o i componenti dei loro team non hanno accesso alle risorse di altri gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-191">None of the workload owners or their team members have management access to the resources in any other resource group.</span></span> 

<span data-ttu-id="eac34-192">![sottoscrizione con i gruppi di risorse A e B](../_images/governance-2-10.png)
*Figura 4. Una sottoscrizione con due proprietari di carichi di lavoro isolati con il proprio gruppo di risorse.*</span><span class="sxs-lookup"><span data-stu-id="eac34-192">![subscription with resource groups A and B](../_images/governance-2-10.png)
*Figure 4. A subscription with two workload owners isolated with their own resource group.*</span></span>

<span data-ttu-id="eac34-193">Questo modello è un modello con privilegi minimi: a ogni utente sono assegnate le autorizzazioni corrette nell'ambito della corretta gestione delle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-193">This model is a least privilege model - each user is assigned the correct permission at the correct resource management scope.</span></span>

<span data-ttu-id="eac34-194">Si consideri tuttavia che ogni attività in questo esempio è stata eseguita dall'**amministratore del servizio**.</span><span class="sxs-lookup"><span data-stu-id="eac34-194">However, consider that every task in this example was performed by the **service administrator**.</span></span> <span data-ttu-id="eac34-195">Anche se in un esempio semplice come questo può non sembrare un problema perché ci sono solo due proprietari del carico di lavoro, è facile immaginare i problemi che ne deriverebbero per una grande organizzazione.</span><span class="sxs-lookup"><span data-stu-id="eac34-195">While this is a simple example and may not appear to be an issue because there were only two workload owners, it's easy to imagine the types of issues that would result for a large organization.</span></span> <span data-ttu-id="eac34-196">Ad esempio, l'**amministratore del servizio** può andare incontro a un collo di bottiglia con un gran numero di richieste arretrate che causano ritardi.</span><span class="sxs-lookup"><span data-stu-id="eac34-196">For example, the **service administrator** can become a bottleneck with a large backlog of requests that result in delays.</span></span>  

<span data-ttu-id="eac34-197">Di seguito è riportato un secondo esempio che riduce il numero di attività eseguite dall'**amministratore del servizio**.</span><span class="sxs-lookup"><span data-stu-id="eac34-197">Let's take a look at second example that reduces the number of tasks performed by the **service administrator**.</span></span> 

1. <span data-ttu-id="eac34-198">In questo modello, al **proprietario del carico di lavoro A** è assegnato il [ruolo di proprietario predefinito][rbac-built-in-owner] a livello della sottoscrizione, che consente di creare il proprio gruppo di risorse (**gruppo di risorse A**). ![L'amministratore del servizio aggiunge il proprietario del carico di lavoro A alla sottoscrizione](../_images/governance-2-11.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-198">In this model, **workload owner A** is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope, enabling them to create their own resource group: **resource group A**. ![Service Administrator adds Workload Owner A to subscription](../_images/governance-2-11.png)</span></span>

2. <span data-ttu-id="eac34-199">Quando viene creato il **gruppo di risorse A**, il **proprietario del carico di lavoro A** viene aggiunto per impostazione predefinita ed eredita il ruolo di [proprietario predefinito][rbac-built-in-owner] dall'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-199">When **resource group A** is created, **workload owner A** is added by default and inherits the [built-in owner][rbac-built-in-owner] role from the subscription scope.</span></span>
<span data-ttu-id="eac34-200">![Il proprietario del carico di lavoro A crea il gruppo di risorse A](../_images/governance-2-12.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-200">![Workload Owner A creates resource group A](../_images/governance-2-12.png)</span></span>

3. <span data-ttu-id="eac34-201">Il [ruolo di proprietario predefinito][rbac-built-in-owner] concede al **proprietario del carico di lavoro A**  l'autorizzazione a gestire l'accesso al gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-201">The [built-in owner role][rbac-built-in-owner] grants **workload owner A** permission to manage access to the resource group.</span></span> <span data-ttu-id="eac34-202">Il **proprietario del carico di lavoro A** aggiunge due **collaboratori del carico di lavoro**  e assegna il ruolo di [lettore predefinito ][rbac-built-in-owner] a ognuno di essi.</span><span class="sxs-lookup"><span data-stu-id="eac34-202">**Workload owner A** adds two **workload contributors** and assigns the [built-in reader role][rbac-built-in-owner] to each of them.</span></span> 
<span data-ttu-id="eac34-203">![Il proprietario del carico di lavoro A aggiunge i collaboratori del carico di lavoro](../_images/governance-2-13.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-203">![Workload Owner A adds Workload Contributors](../_images/governance-2-13.png)</span></span>

4. <span data-ttu-id="eac34-204">**L'amministratore del servizio** aggiunge ora il **proprietario del carico di lavoro B** alla sottoscrizione con il ruolo di proprietario predefinito.</span><span class="sxs-lookup"><span data-stu-id="eac34-204">**Service administrator** now adds **workload owner B** to the subscription with the built-in owner role.</span></span> 
<span data-ttu-id="eac34-205">![L'amministratore del servizio aggiunge i proprietari dei carichi di lavoro A e B alla sottoscrizione](../_images/governance-2-14.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-205">![Service Administrator adds Workload Owners B to subscription](../_images/governance-2-14.png)</span></span>

5. <span data-ttu-id="eac34-206">**Il proprietario del carico di lavoro B** crea il  **gruppo di risorse B** e viene aggiunto per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="eac34-206">**Workload owner B** creates **resource group B** and is added by default.</span></span> <span data-ttu-id="eac34-207">Anche in questo caso, il **proprietario del carico di lavoro B** eredita il ruolo di proprietario predefinito dall'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-207">Again, **workload owner B** inherits the built-in owner role from the subscription scope.</span></span>
<span data-ttu-id="eac34-208">![Il proprietario del carico di lavoro B crea il gruppo di risorse B](../_images/governance-2-15.png)</span><span class="sxs-lookup"><span data-stu-id="eac34-208">![Workload Owner B creates resource group B](../_images/governance-2-15.png)</span></span>

<span data-ttu-id="eac34-209">Si noti che in questo modello l'**amministratore del servizio** ha eseguito meno azioni rispetto al primo esempio, avendo delegato l'accesso di gestione a ognuno dei proprietari dei carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-209">Note that in this model, the **service administrator** performed fewer actions than they did in the first example due to the delegation of management access to each of the individual workload owners.</span></span>

<span data-ttu-id="eac34-210">![sottoscrizione con i gruppi di risorse A e B](../_images/governance-2-16.png)
*Figura 5. Una sottoscrizione con un amministratore del servizio e due proprietari dei carichi di lavoro, ai quali è assegnato il ruolo di proprietario predefinito.*</span><span class="sxs-lookup"><span data-stu-id="eac34-210">![subscription with resource groups A and B](../_images/governance-2-16.png)
*Figure 5. A subscription with a service administrator and two workload owners, all assigned the built-in owner role.*</span></span>

<span data-ttu-id="eac34-211">Dato che tuttavia sia il **proprietario del carico di lavoro A** che il  **proprietario del carico di lavoro B** hanno il ruolo di proprietario predefinito nell'ambito della sottoscrizione, ognuno di essi ha ereditato il ruolo di proprietario predefinito per il gruppo di risorse dell'altro.</span><span class="sxs-lookup"><span data-stu-id="eac34-211">However, because both **workload owner A** and **workload owner B** are assigned the built-in owner role at the subscription scope, they have each inherited the built-in owner role for each other's resource group.</span></span> <span data-ttu-id="eac34-212">Ciò significa che non solo hanno pieno accesso alle risorse dell'altro, ma possono anche delegare l'accesso di gestione al gruppo di risorse dell'altro.</span><span class="sxs-lookup"><span data-stu-id="eac34-212">This means that not only do they have full access to one another's resources, they are also able to delegate management access to each other's resource groups.</span></span> <span data-ttu-id="eac34-213">Ad esempio, il **proprietario del carico di lavoro B** è autorizzato ad aggiungere qualsiasi altro utente al **gruppo di risorse A** e può assegnare agli utenti qualsiasi ruolo, incluso il ruolo di proprietario predefinito.</span><span class="sxs-lookup"><span data-stu-id="eac34-213">For example, **workload owner B** has rights to add any other user to **resource group A** and can assign any role to them, including the built-in owner role.</span></span>

<span data-ttu-id="eac34-214">Se si confronta ogni esempio con i requisiti definiti, entrambi gli esempi supportano un singolo utente attendibile nell'ambito della sottoscrizione, autorizzato a concedere diritti di accesso alle risorse ai due proprietari dei carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-214">If we compare each example to our requirements, we see that both examples support a single trusted user at the subscription scope with permission to grant resource access rights to our two workload owners.</span></span> <span data-ttu-id="eac34-215">Nessuno dei due proprietari dei carichi di lavoro aveva accesso alla gestione delle risorse per impostazione predefinita e doveva richiedere all'**amministratore del servizio** di assegnare esplicitamente le autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-215">Each of the two workload owners did not have access to resource management by default and required the **service administrator** to explicitly assign permissions to them.</span></span> <span data-ttu-id="eac34-216">Solo il primo esempio supporta tuttavia il requisito secondo il quale le risorse associate a ciascun carico di lavoro debbano essere isolate l'una dall'altra, in modo tale che nessun proprietario del carico di lavoro abbia accesso alle risorse degli altri carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-216">However, only the first example supports the requirement that the resources associated with each workload are isolated from one another such that no workload owner has access to the resources of any other workload.</span></span>

## <a name="resource-management-model"></a><span data-ttu-id="eac34-217">Modello di gestione delle risorse</span><span class="sxs-lookup"><span data-stu-id="eac34-217">Resource management model</span></span>

<span data-ttu-id="eac34-218">Ora che è stato progettato un modello di autorizzazioni con privilegi minimi, verranno esaminate alcune applicazioni pratiche di questi modelli di governance.</span><span class="sxs-lookup"><span data-stu-id="eac34-218">Now that we've designed a permissions model of least privilege, let's move on to take a look at some practical applications of these governance models.</span></span> <span data-ttu-id="eac34-219">Secondo i requisiti definiti, è necessario supportare i tre ambienti seguenti:</span><span class="sxs-lookup"><span data-stu-id="eac34-219">Recall from our requirements that we must support the following three environments:</span></span>
1. <span data-ttu-id="eac34-220">**Infrastruttura condivisa:** un singolo gruppo di risorse condivise da tutti i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-220">**Shared infrastructure:** a single group of resources shared by all workloads.</span></span> <span data-ttu-id="eac34-221">Si tratta di risorse quali gateway di rete, firewall e servizi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="eac34-221">These are resources such as network gateways, firewalls, and security services.</span></span>  
2. <span data-ttu-id="eac34-222">**Sviluppo:** più gruppi di risorse che rappresentano più carichi di lavoro non di produzione.</span><span class="sxs-lookup"><span data-stu-id="eac34-222">**Development:** multiple groups of resources representing multiple non-production ready workloads.</span></span> <span data-ttu-id="eac34-223">Queste risorse vengono usate per verifiche, test e altre attività di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="eac34-223">These resources are used for proof-of-concept, testing, and other developer activities.</span></span> <span data-ttu-id="eac34-224">Possono avere un modello di governance meno rigido per aumentare la flessibilità degli sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="eac34-224">These resources may have a more relaxed governance model because to allow for increased developer agility.</span></span>
3. <span data-ttu-id="eac34-225">**Produzione:** più gruppi di risorse che rappresentano più carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="eac34-225">**Production:** multiple groups of resources representing multiple production workloads.</span></span> <span data-ttu-id="eac34-226">Queste risorse vengono usate per ospitare elementi privati e pubblici delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-226">These resources are used to host the private and public facing application artifacts.</span></span> <span data-ttu-id="eac34-227">Queste risorse hanno in genere i modelli di governance e sicurezza più rigorosi per proteggere le risorse, il codice delle applicazioni e i dati da accessi non autorizzati.</span><span class="sxs-lookup"><span data-stu-id="eac34-227">These resources typically have the tightest governance and security models to protect the resources, application code, and data from unauthorized access.</span></span>

<span data-ttu-id="eac34-228">Per ognuno di questi tre ambienti è necessario tenere traccia dei dati sui costi per **proprietario del carico di lavoro**, **ambiente** o entrambi.</span><span class="sxs-lookup"><span data-stu-id="eac34-228">For each of these three environments, we have a requirement to track cost data by **workload owner**, **environment**, or both.</span></span> <span data-ttu-id="eac34-229">In altre parole, è necessario conoscere il costo corrente dell'**infrastruttura condivisa**, i costi sostenuti dai singoli utenti negli ambienti di **sviluppo** e **produzione** e infine il costo complessivo dello **sviluppo** e della **produzione**.</span><span class="sxs-lookup"><span data-stu-id="eac34-229">That is, we want to know the ongoing cost of our **shared infrastructure**, the costs incurred by individuals in both the **development** and **production** environments, and finally the overall cost of **development** and **production**.</span></span> 

<span data-ttu-id="eac34-230">Si è già appreso che le risorse sono suddivise in due livelli: **sottoscrizione** e **gruppo di risorse**.</span><span class="sxs-lookup"><span data-stu-id="eac34-230">You have already learned that resources are scoped to two levels: **subscription** and **resource group**.</span></span> <span data-ttu-id="eac34-231">La prima decisione da prendere è quindi come organizzare gli ambienti per **sottoscrizione**.</span><span class="sxs-lookup"><span data-stu-id="eac34-231">Therefore, our first decision is how to organize our environments by **subscription**.</span></span> <span data-ttu-id="eac34-232">Sono disponibili solo due opzioni: una singola sottoscrizione o più sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-232">There are only two possibilities: a single subscription, or, multiple subscriptions.</span></span> 

<span data-ttu-id="eac34-233">Prima di esaminare gli esempi di ognuno di questi modelli, verrà esaminata la struttura di gestione per le sottoscrizioni in Azure.</span><span class="sxs-lookup"><span data-stu-id="eac34-233">Before we look at examples of each of these models, let's review the management structure for subscriptions in Azure.</span></span> 

<span data-ttu-id="eac34-234">Secondo i requisiti definiti, un utente dell'organizzazione è responsabile delle sottoscrizioni e ha l'account **proprietario della sottoscrizione** nel tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eac34-234">Recall from our requirements that we have an individual in our organization that is responsible for subscriptions, and this user owns the **subscription owner** account in our Azure AD tenant.</span></span> <span data-ttu-id="eac34-235">Questo account non è tuttavia autorizzato a creare sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-235">However, this account does not have permission to create subscriptions.</span></span> <span data-ttu-id="eac34-236">Solo il **proprietario dell'account Azure** ha tale autorizzazione: ![](../_images/governance-3-0b.png)
*Figura 6. Il proprietario di un account Azure crea una sottoscrizione.*</span><span class="sxs-lookup"><span data-stu-id="eac34-236">Only the **Azure Account Owner** has permission to do this: ![](../_images/governance-3-0b.png)
*Figure 6. An Azure Account Owner creates a subscription.*</span></span>

<span data-ttu-id="eac34-237">Una volta creata la sottoscrizione, il **proprietario dell'account Azure** può aggiungere l'account **proprietario della sottoscrizione** alla sottoscrizione con il ruolo **proprietario**:</span><span class="sxs-lookup"><span data-stu-id="eac34-237">Once the subscription has been created, the **Azure Account Owner** can add the **subscription owner** account to the subscription with the **owner** role:</span></span>

<span data-ttu-id="eac34-238">![](../_images/governance-3-0c.png)
*Figura 7. Il proprietario dell'account Azure aggiunge l'account utente **proprietario della sottoscrizione** alla sottoscrizione con il ruolo **proprietario**.*</span><span class="sxs-lookup"><span data-stu-id="eac34-238">![](../_images/governance-3-0c.png)
*Figure 7. The Azure Account Owner adds the **subscription owner** user account to the subscription with the **owner** role.*</span></span>

<span data-ttu-id="eac34-239">Il **proprietario della sottoscrizione** può ora creare **gruppi di risorse** e delegare la gestione dell'accesso alle risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-239">The **subscription owner** can now create **resource groups** and delegate resource access management.</span></span>

<span data-ttu-id="eac34-240">Verrà ora esaminato un esempio di modello di gestione delle risorse che usa una sottoscrizione singola.</span><span class="sxs-lookup"><span data-stu-id="eac34-240">First let's look at an example resource management model using a single subscription.</span></span> <span data-ttu-id="eac34-241">La prima decisione da prendere è come allineare i gruppi di risorse ai tre ambienti.</span><span class="sxs-lookup"><span data-stu-id="eac34-241">Our first decision is how to align resource groups to the three environments.</span></span> <span data-ttu-id="eac34-242">Sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="eac34-242">We have two options:</span></span>
1. <span data-ttu-id="eac34-243">Allineare ogni ambiente a un singolo gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-243">Align each environment to a single resource group.</span></span> <span data-ttu-id="eac34-244">Tutte le risorse dell'infrastruttura condivisa vengono distribuite in un singolo gruppo di risorse dell'**infrastruttura condivisa**.</span><span class="sxs-lookup"><span data-stu-id="eac34-244">All shared infrastructure resources are deployed to a single **shared infrastructure** resource group.</span></span> <span data-ttu-id="eac34-245">Tutte le risorse associate ai carichi di lavoro di sviluppo vengono distribuite in un singolo gruppo di risorse di **sviluppo**.</span><span class="sxs-lookup"><span data-stu-id="eac34-245">All resources associated with development workloads are deployed to a single **development** resource group.</span></span> <span data-ttu-id="eac34-246">Tutte le risorse associate ai carichi di lavoro di produzione vengono distribuite in un singolo gruppo di risorse di **produzione**  per l'ambiente di **produzione**.</span><span class="sxs-lookup"><span data-stu-id="eac34-246">All resources associated with production workloads are deployed into a single **production** resource group for the **production** environment.</span></span> 
2. <span data-ttu-id="eac34-247">Allineare i carichi di lavoro a un gruppo di risorse separato, usando una convenzione di denominazione e tag per allineare i gruppi di risorse a ognuno dei tre ambienti.</span><span class="sxs-lookup"><span data-stu-id="eac34-247">Align workloads with a separate resource group, using a naming convention and tags to align resource groups with each of the three environments.</span></span>  

<span data-ttu-id="eac34-248">Verrà ora valutata la prima opzione.</span><span class="sxs-lookup"><span data-stu-id="eac34-248">Let's begin by evaluating the first option.</span></span> <span data-ttu-id="eac34-249">Si userà il modello di autorizzazioni illustrato nella sezione precedente, con un solo amministratore del servizio della sottoscrizione che crea i gruppi di risorse e aggiunge gli utenti ai gruppi con il ruolo di **collaboratore** o **lettore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-249">We'll be using the permissions model that we discussed in the previous section, with a single subscription service administrator that creates resource groups and adds users to them with either the built-in **contributor** or **reader** role.</span></span> 

1. <span data-ttu-id="eac34-250">Il primo gruppo di risorse distribuito rappresenta l'ambiente dell'**infrastruttura condivisa**.</span><span class="sxs-lookup"><span data-stu-id="eac34-250">The first resource group deployed represents the **shared infrastructure** environment.</span></span> <span data-ttu-id="eac34-251">Il **proprietario della sottoscrizione** crea un gruppo di risorse per le risorse dell'infrastruttura condivisa denominato **netops-shared-rg**.</span><span class="sxs-lookup"><span data-stu-id="eac34-251">The **subscription owner** creates a resource group for the shared infrastructure resources named **netops-shared-rg**.</span></span> 
![](../_images/governance-3-0d.png)
2. <span data-ttu-id="eac34-252">Il **proprietario della sottoscrizione** aggiunge l'account **utente delle operazioni di rete** al gruppo risorse e assegna il ruolo di **collaboratore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-252">The **subscription owner** adds the **network operations user** account to the resource group and assigns the **contributor** role.</span></span> 
![](../_images/governance-3-0e.png)
3. <span data-ttu-id="eac34-253">L'**utente delle operazioni di rete** crea un [gateway VPN](/azure/vpn-gateway/vpn-gateway-about-vpngateways) e lo configura per la connessione all'appliance VPN locale.</span><span class="sxs-lookup"><span data-stu-id="eac34-253">The **network operations user** creates a [VPN gateway](/azure/vpn-gateway/vpn-gateway-about-vpngateways) and configures it to connect to the on-premises VPN appliance.</span></span> <span data-ttu-id="eac34-254">L'**utente delle operazioni di rete** applica anche una coppia di [tag](/azure/azure-resource-manager/resource-group-using-tags) a ognuna delle risorse: *environment:shared* e *managedBy:netOps*.</span><span class="sxs-lookup"><span data-stu-id="eac34-254">The **network operations** user also applies a pair of [tags](/azure/azure-resource-manager/resource-group-using-tags) to each of the resources: *environment:shared* and *managedBy:netOps*.</span></span> <span data-ttu-id="eac34-255">Quando l'**amministratore del servizio della sottoscrizione** esporta un report sui costi, i costi verranno allineati a ognuno di questi tag.</span><span class="sxs-lookup"><span data-stu-id="eac34-255">When the **subscription service administrator** exports a cost report, costs will be aligned with each of these tags.</span></span> <span data-ttu-id="eac34-256">L'**amministratore del servizio della sottoscrizione** può così organizzare i costi usando i tag *environment* e *managedBy*.</span><span class="sxs-lookup"><span data-stu-id="eac34-256">This allows the **subscription service administrator** to pivot costs using the *environment* tag and the *managedBy* tag.</span></span> <span data-ttu-id="eac34-257">Si noti il contatore dei **limiti delle risorse** in alto a destra nella figura.</span><span class="sxs-lookup"><span data-stu-id="eac34-257">Notice the **resource limits** counter at the top right-hand side of the figure.</span></span> <span data-ttu-id="eac34-258">Ogni sottoscrizione di Azure ha [limiti del servizio](/azure/azure-subscription-service-limits). Per comprendere l'effetto di questi limiti si seguirà il limite della rete virtuale per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-258">Each Azure subscription has [service limits](/azure/azure-subscription-service-limits), and to help you understand the effect of these limits we'll follow the virtual network limit for each subscription.</span></span> <span data-ttu-id="eac34-259">Esiste un limite predefinito di 50 reti virtuali per ogni sottoscrizione e dopo la distribuzione della prima rete virtuale restano disponibili 49 reti.</span><span class="sxs-lookup"><span data-stu-id="eac34-259">There is a default limit of 50 virtual networks per subscription, and after the first virtual network is deployed there are now 49 available.</span></span>
![](../_images/governance-3-1.png)
4. <span data-ttu-id="eac34-260">Vengono distribuiti altri due gruppi di risorse, il primo dei quali è denominato *prod-rg*.</span><span class="sxs-lookup"><span data-stu-id="eac34-260">Two more resource groups are deployed, the first is named *prod-rg*.</span></span> <span data-ttu-id="eac34-261">Questo gruppo di risorse è allineato all'ambiente di **produzione**.</span><span class="sxs-lookup"><span data-stu-id="eac34-261">This resource group is aligned with the **production** environment.</span></span> <span data-ttu-id="eac34-262">Il secondo è denominato *dev-rg* ed è allineato all'ambiente di **sviluppo**.</span><span class="sxs-lookup"><span data-stu-id="eac34-262">The second is named *dev-rg* and is aligned with the **development** environment.</span></span> <span data-ttu-id="eac34-263">Tutte le risorse associate ai carichi di lavoro di produzione sono distribuite nell'ambiente di **produzione** e tutte le risorse associate ai carichi di lavoro di sviluppo sono distribuite nell'ambiente di **sviluppo**.</span><span class="sxs-lookup"><span data-stu-id="eac34-263">All resources associated with production workloads are deployed to the **production** environment and all resources associated with development workloads are deployed to the **development** environment.</span></span> <span data-ttu-id="eac34-264">In questo esempio verranno distribuiti solo due carichi di lavoro in ognuno di questi due ambienti, quindi non si incontrerà alcun limite di servizio della sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="eac34-264">In this example we'll only deploy two workloads to each of these two environments so we won't encounter any Azure subscription service limits.</span></span> <span data-ttu-id="eac34-265">È tuttavia importante considerare che ogni gruppo di risorse ha un limite di 800 risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-265">However, it's important to consider that each resource group has a limit of 800 resources per resource group.</span></span> <span data-ttu-id="eac34-266">Se quindi si continua ad aggiungere carichi di lavoro a ogni gruppo di risorse, è possibile che questo limite venga raggiunto.</span><span class="sxs-lookup"><span data-stu-id="eac34-266">Therefore, if we keep adding workloads to each resource group it is possible that this limit will be reached.</span></span> 
![](../_images/governance-3-2.png)
5. <span data-ttu-id="eac34-267">Il primo **proprietario del carico di lavoro** invia una richiesta all'**amministratore del servizio della sottoscrizione** e viene aggiunto a ognuno dei gruppo di risorse di **sviluppo** e **produzione** con il ruolo di **collaboratore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-267">The first **workload owner** sends a request to the **subscription service administrator** and is added to each of the **development** and **production** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="eac34-268">Come si è appreso in precedenza, il ruolo di **collaboratore** consente all'utente di eseguire qualsiasi operazione, tranne l'assegnazione di un ruolo a un altro utente.</span><span class="sxs-lookup"><span data-stu-id="eac34-268">As you learned earlier, the **contributor** role allows the user to perform any operation other than assigning a role to another user.</span></span> <span data-ttu-id="eac34-269">Il primo **proprietario del carico di lavoro** può ora creare le risorse associate al proprio carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-269">The first **workload owner** can now create the resources associated with their workload.</span></span>
![](../_images/governance-3-3.png)
6. <span data-ttu-id="eac34-270">Il primo **proprietario del carico di lavoro** crea una rete virtuale in ognuno dei due gruppi di risorse con una coppia di macchine virtuali in ciascuno.</span><span class="sxs-lookup"><span data-stu-id="eac34-270">The first **workload owner** creates a virtual network in each of the two resource groups with a pair of virtual machines in each.</span></span> <span data-ttu-id="eac34-271">Il primo **proprietario del carico di lavoro** applica i tag *environment* e *managedBy* a tutte le risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-271">The first **workload owner** applies the *environment* and *managedBy* tags to all resources.</span></span> <span data-ttu-id="eac34-272">Si noti che il contatore dei limiti del servizio di Azure indica ora 47 reti virtuali rimanenti.</span><span class="sxs-lookup"><span data-stu-id="eac34-272">Note that the Azure service limit counter is now at 47 virtual networks remaining.</span></span>
![](../_images/governance-3-4.png)
7. <span data-ttu-id="eac34-273">Nessuna delle reti virtuali ha connettività con l'ambiente locale al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="eac34-273">Each of the virtual networks does not have connectivity to on-premises when they are created.</span></span> <span data-ttu-id="eac34-274">In questo tipo di architettura, è necessario eseguire il peering di ogni rete virtuale con *hub-vnet* nell'ambiente dell'**infrastruttura condivisa**.</span><span class="sxs-lookup"><span data-stu-id="eac34-274">In this type of architecture, each virtual network must be peered to the *hub-vnet* in the **shared infrastructure** environment.</span></span> <span data-ttu-id="eac34-275">Il peering di rete virtuale crea una connessione tra due reti virtuali separate e consente al traffico di rete di passare da una rete all'altra.</span><span class="sxs-lookup"><span data-stu-id="eac34-275">Virtual network peering creates a connection between two separate virtual networks and allows network traffic to travel between them.</span></span> <span data-ttu-id="eac34-276">Si noti che il peering di rete virtuale non è intrinsecamente transitivo.</span><span class="sxs-lookup"><span data-stu-id="eac34-276">Note that virtual network peering is not inherently transitive.</span></span> <span data-ttu-id="eac34-277">È necessario specificare un peering in ognuna delle due reti virtuali connesse. Se solo una delle reti virtuali specifica un peering, la connessione è incompleta.</span><span class="sxs-lookup"><span data-stu-id="eac34-277">A peering must be specified in each of the two virtual networks that are connected, and if only one of the virtual networks specifies a peering the connection is incomplete.</span></span> <span data-ttu-id="eac34-278">Per illustrare l'effetto, il primo **proprietario del carico di lavoro** specifica un peering tra **prod-vnet** e **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="eac34-278">To illustrate the effect of this, the first **workload owner** specifies a peering between **prod-vnet** and **hub-vnet**.</span></span> <span data-ttu-id="eac34-279">Il primo peering è stato creato, ma il traffico non viene trasmesso perché il peering complementare da **hub-vnet**  a **prod-vnet** non è stato ancora specificato.</span><span class="sxs-lookup"><span data-stu-id="eac34-279">The first peering is created, but no traffic flows because the complementary peering from **hub-vnet** to **prod-vnet** has not yet been specified.</span></span> <span data-ttu-id="eac34-280">Il primo **proprietario del carico di lavoro** contatta l'utente delle **operazioni di rete** e richiede questa connessione di peering complementare.</span><span class="sxs-lookup"><span data-stu-id="eac34-280">The first **workload owner** contacts the **network operations** user and requests this complementary peering connection.</span></span>
![](../_images/governance-3-5.png)
8. <span data-ttu-id="eac34-281">L'utente delle **operazioni di rete** esamina la richiesta, la approva e quindi specifica il peering nelle impostazioni di **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="eac34-281">The **network operations** user reviews the request, approves it, then specifies the peering in the settings for the **hub-vnet**.</span></span> <span data-ttu-id="eac34-282">La connessione peering è ora completa e il traffico di rete viene trasmesso tra le due reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="eac34-282">The peering connection is now complete and network traffic flows between the two virtual networks.</span></span>
![](../_images/governance-3-6.png)
9. <span data-ttu-id="eac34-283">Un secondo **proprietario del carico di lavoro**  invia ora una richiesta all'**all'amministratore del servizio della sottoscrizione** e viene aggiunto ai gruppi di risorse degli ambienti di **produzione** e **sviluppo** esistenti con il ruolo di **collaboratore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-283">Now, a second **workload owner** sends a request to the **subscription service administrator** and is added to the existing **production** and **development** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="eac34-284">Il secondo **proprietario del carico di lavoro** ha per tutte le risorse le stesse autorizzazioni del primo **proprietario del carico di lavoro** in ogni gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-284">The second **workload owner** has the same permissions on all resources as the first **workload owner** in each resource group.</span></span> 
![](../_images/governance-3-7.png)
10. <span data-ttu-id="eac34-285">Il secondo **proprietario del carico di lavoro** crea una subnet nella rete virtuale **prod-vnet**, quindi aggiunge due macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="eac34-285">The second **workload owner** creates a subnet in the **prod-vnet** virtual network, then adds two virtual machines.</span></span> <span data-ttu-id="eac34-286">Il secondo **proprietario del carico di lavoro** applica i tag *environment* e *managedBy* a ogni risorsa.</span><span class="sxs-lookup"><span data-stu-id="eac34-286">The second **workload owner** applies the *environment* and *managedBy* tags to each resource.</span></span>
![](../_images/governance-3-8.png) 

<span data-ttu-id="eac34-287">Questo modello di esempio per la gestione delle risorse consente di gestire le risorse nei tre ambienti richiesti.</span><span class="sxs-lookup"><span data-stu-id="eac34-287">This example resource management model enables us to manage our resources in the three required environments.</span></span> <span data-ttu-id="eac34-288">Le risorse dell'infrastruttura condivisa sono protette perché nella sottoscrizione è presente un solo utente autorizzato ad accedere a tali risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-288">Our shared infrastructure resources are protected because there's only a single user in the subscription with permission to access those resources.</span></span> <span data-ttu-id="eac34-289">Ognuno dei proprietari del carico di lavoro può usare le risorse dell'infrastruttura condivisa senza avere autorizzazioni sulle risorse condivise in sé.</span><span class="sxs-lookup"><span data-stu-id="eac34-289">Each of our workload owners is able to utilize the share infrastructure resources without having any permissions on the actual shared resources themselves.</span></span> <span data-ttu-id="eac34-290">Questo modello di gestione non soddisfa il requisito di isolamento del carico di lavoro: ognuno dei due **proprietari del carico di lavoro** può accedere alle risorse del carico di lavoro dell'altro.</span><span class="sxs-lookup"><span data-stu-id="eac34-290">This management model fails our requirement for workload isolation - each of the two **workload owners** are able to access the resources of the other's workload.</span></span> 

<span data-ttu-id="eac34-291">Un'altra considerazione importante per questo modello potrebbe non essere così ovvia.</span><span class="sxs-lookup"><span data-stu-id="eac34-291">There's another important consideration with this model that may not be immediately obvious.</span></span> <span data-ttu-id="eac34-292">Nell'esempio è stato **app1 workload owner** a richiedere la connessione di peering di rete con **hub-vnet** per ottenere la connettività con l'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="eac34-292">In our example, it was **app1 workload owner** that requested the network peering connection with the **hub-vnet** to provide connectivity to on-premises.</span></span> <span data-ttu-id="eac34-293">L'utente delle **operazioni di rete** ha valutato la richiesta in base alle risorse distribuite con tale carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-293">The **network operations** user evaluated that request based on the resources deployed with that workload.</span></span> <span data-ttu-id="eac34-294">Quando il **proprietario della sottoscrizione** ha aggiunto **app2 workload owner** con il ruolo di **collaboratore**, quell'utente aveva i diritti di accesso di gestione per tutte le risorse nel gruppo di risorse **prod-rg**.</span><span class="sxs-lookup"><span data-stu-id="eac34-294">When the **subscription owner** added **app2 workload owner** with the **contributor** role, that user had management access rights to all resources in the **prod-rg** resource group.</span></span> 

![](../_images/governance-3-10.png)

<span data-ttu-id="eac34-295">Ciò significa che **app2 workload owner** è autorizzato a distribuire la propria subnet con macchine virtuali nella rete virtuale **prod-vnet**.</span><span class="sxs-lookup"><span data-stu-id="eac34-295">This means **app2 workload owner** had permission to deploy their own subnet with virtual machines in the **prod-vnet** virtual network.</span></span> <span data-ttu-id="eac34-296">Per impostazione predefinita, tali macchine virtuali hanno ora accesso alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="eac34-296">By default, those virtual machines now have access to the on-premises network.</span></span> <span data-ttu-id="eac34-297">L'utente delle **operazioni di rete** non è a conoscenza di tali macchine e non ne ha approvato la connettività con l'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="eac34-297">The **network operations** user is not aware of those machines and did not approve their connectivity to on-premises.</span></span>

<span data-ttu-id="eac34-298">Si esaminerà ora una sottoscrizione singola con più gruppi di risorse per ambienti e carichi di lavoro diversi.</span><span class="sxs-lookup"><span data-stu-id="eac34-298">Next, let's look at a single subscription with multiple resources groups for different environments and workloads.</span></span> <span data-ttu-id="eac34-299">Si noti che nell'esempio precedente le risorse per ogni ambiente erano facilmente identificabili perché facevano parte dello stesso gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-299">Note that in the previous example, the resources for each environment were easily identifiable because they were in the same resource group.</span></span> <span data-ttu-id="eac34-300">Ora che quel raggruppamento non è più disponibile, sarà necessario fare affidamento su una convenzione di denominazione dei gruppi di risorse per ottenere tale funzionalità.</span><span class="sxs-lookup"><span data-stu-id="eac34-300">Now that we no longer have that grouping, we will have to rely on a resource group naming convention to provide that functionality.</span></span> 

1. <span data-ttu-id="eac34-301">Le risorse dell'**infrastruttura condivisa** avranno ancora un gruppo di risorse separato in questo modello.</span><span class="sxs-lookup"><span data-stu-id="eac34-301">Our **shared infrastructure** resources will still have a separate resource group in this model, so that remains the same.</span></span> <span data-ttu-id="eac34-302">Ogni carico di lavoro richiede due gruppi di risorse, uno per ognuno degli ambienti di **sviluppo** e **produzione**.</span><span class="sxs-lookup"><span data-stu-id="eac34-302">Each workload requires two resource groups - one for each of the **development** and **production** environments.</span></span> <span data-ttu-id="eac34-303">Per il primo carico di lavoro, il **proprietario della sottoscrizione** crea due gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-303">For the first workload, the **subscription owner** creates two resource groups.</span></span> <span data-ttu-id="eac34-304">Il primo è denominato **app1-prod-rg** e il secondo **app1-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="eac34-304">The first is named **app1-prod-rg** and the second one is named **app1-dev-rg**.</span></span> <span data-ttu-id="eac34-305">Come illustrato in precedenza, questa convenzione di denominazione identifica le risorse come associate al primo carico di lavoro, **app1**, e all'ambiente **dev** o **prod**.</span><span class="sxs-lookup"><span data-stu-id="eac34-305">As discussed earlier, this naming convention identifies the resources as being associated with the first workload, **app1**, and either the **dev** or **prod** environment.</span></span> <span data-ttu-id="eac34-306">Anche in questo caso, il proprietario della *sottoscrizione* aggiunge **app1 workload owner** al gruppo di risorse con il ruolo **collaboratore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-306">Again, the *subscription* owner adds **app1 workload owner** to the resource group with the **contributor** role.</span></span>
![](../_images/governance-3-12.png)
2. <span data-ttu-id="eac34-307">In modo simile al primo esempio, **app1 workload owner** distribuisce una rete virtuale denominata **app1-prod-vnet** nell'ambiente di **produzione** e un'altra denominata **app1-dev-vnet**  nell'ambiente di **sviluppo**.</span><span class="sxs-lookup"><span data-stu-id="eac34-307">Similar to the first example, **app1 workload owner** deploys a virtual network named **app1-prod-vnet** to the **production** environment, and another named **app1-dev-vnet** to the **development** environment.</span></span> <span data-ttu-id="eac34-308">Anche in questo caso, **app1 workload owner** invia una richiesta all'utente delle **operazioni di rete** per la creazione di una connessione di peering.</span><span class="sxs-lookup"><span data-stu-id="eac34-308">Again, **app1 workload owner** sends a request to the **network operations** user to create a peering connection.</span></span> <span data-ttu-id="eac34-309">Si noti che **app1 workload owner** aggiunge gli stessi tag del primo esempio e il contatore dei limite indica 47 reti virtuali rimanenti nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="eac34-309">Note that **app1 workload owner** adds the same tags as in the first example, and the limit counter has been decremented to 47 virtual networks remaining in the subscription.</span></span>
![](../_images/governance-3-13.png)
3. <span data-ttu-id="eac34-310">Il proprietario della **sottoscrizione** crea ora due gruppi di risorse per **app2 workload owner**.</span><span class="sxs-lookup"><span data-stu-id="eac34-310">The **subscription owner** now creates two resource groups for **app2 workload owner**.</span></span> <span data-ttu-id="eac34-311">Seguendo le stesse convenzioni valide per **app1 workload owner**, i gruppi di risorse vengono denominati **app2-prod-rg** e **app2-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="eac34-311">Following the same conventions as for **app1 workload owner**, the resource groups are named **app2-prod-rg** and **app2-dev-rg**.</span></span> <span data-ttu-id="eac34-312">Il **proprietario della sottoscrizione** aggiunge **app2 workload owner** a ognuno dei gruppi di risorse con il ruolo **collaboratore**.</span><span class="sxs-lookup"><span data-stu-id="eac34-312">The **subscription owner** adds **app2 workload owner** to each of the resource groups with the **contributor** role.</span></span>
![](../_images/governance-3-14.png)
4. <span data-ttu-id="eac34-313">*App2 workload owner* distribuisce le reti e le macchine virtuali nei gruppi di risorse con le stesse convenzioni di denominazione.</span><span class="sxs-lookup"><span data-stu-id="eac34-313">*App2 workload owner* deploys virtual networks and virtual machines to the resource groups with the same naming conventions.</span></span> <span data-ttu-id="eac34-314">Vengono aggiunti i tag e il contatore dei limiti scende a 45 reti virtuali rimanenti nella *sottoscrizione*.</span><span class="sxs-lookup"><span data-stu-id="eac34-314">Tags are added and the limit counter has been decremented to 45 virtual networks remaining in the *subscription*.</span></span>
![](../_images/governance-3-15.png)
5. <span data-ttu-id="eac34-315">*App2 workload owner* invia una richiesta all'utente delle *operazioni di rete* per eseguire il peering di *app2-prod-vnet* con *hub-vnet*.</span><span class="sxs-lookup"><span data-stu-id="eac34-315">*App2 workload owner* sends a request to the *network operations* user to peer the *app2-prod-vnet* with the *hub-vnet*.</span></span> <span data-ttu-id="eac34-316">L'utente delle *operazioni di rete*  crea la connessione di peering.</span><span class="sxs-lookup"><span data-stu-id="eac34-316">The *network operations* user creates the peering connection.</span></span>
![](../_images/governance-3-16.png)

<span data-ttu-id="eac34-317">Il modello di gestione ottenuto è simile al primo esempio, con numerose differenze fondamentali:</span><span class="sxs-lookup"><span data-stu-id="eac34-317">The resulting management model is similar to the first example, with several key differences:</span></span>
* <span data-ttu-id="eac34-318">Ognuno dei due carichi di lavoro è isolato per carico di lavoro e ambiente.</span><span class="sxs-lookup"><span data-stu-id="eac34-318">Each of the two workloads is isolated by workload and by environment.</span></span>
* <span data-ttu-id="eac34-319">Questo modello richiedeva due reti virtuali in più rispetto al primo modello di esempio.</span><span class="sxs-lookup"><span data-stu-id="eac34-319">This model required two more virtual networks than the first example model.</span></span> <span data-ttu-id="eac34-320">Pur non trattandosi di una distinzione importante con due soli carichi di lavoro, il limite teorico del numero di carichi di lavoro per questo modello è 24.</span><span class="sxs-lookup"><span data-stu-id="eac34-320">While this is not an important distinction with only two workloads, the theoretical limit on the number of workloads for this model is 24.</span></span> 
* <span data-ttu-id="eac34-321">Le risorse non sono più raggruppate in un unico gruppo di risorse per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="eac34-321">Resources are no longer grouped in a single resource group for each environment.</span></span> <span data-ttu-id="eac34-322">Il raggruppamento delle risorse richiede la comprensione delle convenzioni di denominazione usate per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="eac34-322">Grouping resources requires an understanding of the naming conventions used for each environment.</span></span> 
* <span data-ttu-id="eac34-323">Ognuna delle connessioni di rete virtuali con peering è stata esaminata e approvata dall'utente delle *operazioni di rete*.</span><span class="sxs-lookup"><span data-stu-id="eac34-323">Each of the peered virtual network connections was reviewed and approved by the *network operations* user.</span></span>

<span data-ttu-id="eac34-324">Si esaminerà ora un modello di gestione delle risorse con più sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="eac34-324">Now let's look at a resource management model using multiple subscriptions.</span></span> <span data-ttu-id="eac34-325">In questo modello, ognuno dei tre ambienti verrà allineato a una sottoscrizione distinta, ovvero alle sottoscrizioni **servizi condivisi**, **produzione** e infine **sviluppo**.</span><span class="sxs-lookup"><span data-stu-id="eac34-325">In this model, we'll align each of the three environments to a separate subscription: a **shared services** subscription, **production** subscription, and finally a **development** subscription.</span></span> <span data-ttu-id="eac34-326">Le considerazioni per questo modello sono simili a quelle di un modello che usa una sottoscrizione singola, perché è necessario decidere come allineare i gruppi di risorse ai carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="eac34-326">The considerations for this model are similar to a model using a single subscription in that we have to decide how to align resource groups to workloads.</span></span> <span data-ttu-id="eac34-327">È già stato stabilito che la creazione di un gruppo di risorse per ogni carico di lavoro soddisfa i requisiti di isolamento del carico di lavoro, quindi si seguirà questo modello in questo esempio.</span><span class="sxs-lookup"><span data-stu-id="eac34-327">We've already determined that creating a resource group for each workload satisfies our workload isolation requirement, so we'll stick with that model in this example.</span></span>

1. <span data-ttu-id="eac34-328">In questo modello sono disponibili tre *sottoscrizioni*: *infrastruttura condivisa*, *produzione* e *sviluppo*.</span><span class="sxs-lookup"><span data-stu-id="eac34-328">In this model, there are three *subscriptions*: *shared infrastructure*, *production*, and *development*.</span></span> <span data-ttu-id="eac34-329">Ognuna di queste tre sottoscrizioni richiede un *proprietario della sottoscrizione* e in questo esempio semplice si userà lo stesso account utente per tutte e tre.</span><span class="sxs-lookup"><span data-stu-id="eac34-329">Each of these three subscriptions requires a *subscription owner*, and in our simple example we'll use the same user account for all three.</span></span> <span data-ttu-id="eac34-330">Le risorse dell'*infrastruttura condivisa* sono gestite in modo simile ai primi due esempi precedenti e il primo carico di lavoro è associato ad *app1-rg* nell'ambiente di *produzione* e al gruppo di risorse con lo stesso nome nell'ambiente di *sviluppo*.</span><span class="sxs-lookup"><span data-stu-id="eac34-330">The *shared infrastructure* resources are managed similarly to the first two examples above, and the first workload is associated with the *app1-rg* in the *production* environment and the same-named resource group in the *development* environment.</span></span> <span data-ttu-id="eac34-331">*App1 workload owner* viene aggiunto a ogni gruppo di risorse con il ruolo di *collaboratore*.</span><span class="sxs-lookup"><span data-stu-id="eac34-331">The *app1 workload owner* is added to each of the resource group with the *contributor* role.</span></span> 
![](../_images/governance-3-17.png)
2. <span data-ttu-id="eac34-332">Come per gli esempi precedenti, *app1 workload owner* crea le risorse e richiede la connessione di peering con la rete virtuale dell'*infrastruttura condivisa*.</span><span class="sxs-lookup"><span data-stu-id="eac34-332">As with the earlier examples, *app1 workload owner* creates the resources and requests the peering connection with the *shared infrastructure* virtual network.</span></span> <span data-ttu-id="eac34-333">*App1 workload owner* aggiunge solo il tag *managedBy* perché il tag *environment* non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="eac34-333">*App1 workload owner* adds only the *managedBy* tag because there is no longer a need for the *environment* tag.</span></span> <span data-ttu-id="eac34-334">In altre parole, le risorse per ogni ambiente sono ora raggruppate nella stessa *sottoscrizione* e il tag *environment* è ridondante.</span><span class="sxs-lookup"><span data-stu-id="eac34-334">That is, resources are for each environment are now grouped in the same *subscription* and the *environment* tag is redundant.</span></span> <span data-ttu-id="eac34-335">Il contatore dei limiti scende a 49 reti virtuali rimanenti.</span><span class="sxs-lookup"><span data-stu-id="eac34-335">The limit counter is decremented to 49 virtual networks remaining.</span></span>
![](../_images/governance-3-18.png)
3. <span data-ttu-id="eac34-336">Il *proprietario della sottoscrizione* ripete infine il processo per il secondo carico di lavoro, aggiungendo i gruppi di risorse con *app2 workload owner* nel ruolo di \*collaboratore.</span><span class="sxs-lookup"><span data-stu-id="eac34-336">Finally, the *subscription owner* repeats the process for the second workload, adding the resource groups with the *app2 workload owner* in the \*contributor role.</span></span> <span data-ttu-id="eac34-337">Il contatore dei limiti per ogni sottoscrizione dell'ambiente scende a 48 reti virtuali rimanenti.</span><span class="sxs-lookup"><span data-stu-id="eac34-337">The limit counter for each of the environment subscriptions is decremented to 48 virtual networks remaining.</span></span> 

<span data-ttu-id="eac34-338">Questo modello di gestione ha i vantaggi del secondo esempio illustrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="eac34-338">This management model has the benefits of the second example above.</span></span> <span data-ttu-id="eac34-339">La differenza principale è tuttavia che i limiti non rappresentano un problema reale perché sono distribuiti in due *sottoscrizioni*.</span><span class="sxs-lookup"><span data-stu-id="eac34-339">However, the key difference is that limits are less of an issue due to the fact that they are spread over two *subscriptions*.</span></span> <span data-ttu-id="eac34-340">Lo svantaggio è che i dati sui costi rilevati dai tag devono essere aggregati per tutte e tre le *sottoscrizioni*.</span><span class="sxs-lookup"><span data-stu-id="eac34-340">The drawback is that the cost data tracked by tags must be aggregated across all three *subscriptions*.</span></span> 

<span data-ttu-id="eac34-341">È quindi possibile selezionare uno di questi due esempi di modelli di gestione delle risorse a seconda della priorità dei propri requisiti.</span><span class="sxs-lookup"><span data-stu-id="eac34-341">Therefore, you can select any of these two examples resource management models depending on the priority of your requirements.</span></span> <span data-ttu-id="eac34-342">Se si prevede che l'organizzazione non raggiungerà i limiti del servizio per una sottoscrizione singola, è possibile usare una sottoscrizione singola con più gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="eac34-342">If you anticipate that your organization will not reach the service limits for a single subscription, you can use a single subscription with multiple resource groups.</span></span> <span data-ttu-id="eac34-343">Se invece l'organizzazione prevede molti carichi di lavoro, può essere meglio usare più sottoscrizioni per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="eac34-343">Conversely, if your organization anticipates many workloads, multiple subscriptions for each environment may be better.</span></span>

<!-- ## Summary



## Next steps -->


<!-- links -->

[rbac-built-in-owner]: /azure/role-based-access-control/built-in-roles#owner
[rbac-built-in-roles]: /azure/role-based-access-control/built-in-roles
