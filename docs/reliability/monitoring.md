---
title: Monitoraggio dell'integrità dell'applicazione per l'affidabilità in Azure
description: Come usare il monitoraggio per migliorare l'affidabilità dell'applicazione in Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: 46f9f3fb623a2facf4b9f9c6ec57376ae59e41dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646671"
---
# <a name="monitoring-application-health-for-reliability-in-azure"></a><span data-ttu-id="64b70-103">Monitoraggio dell'integrità dell'applicazione per l'affidabilità in Azure</span><span class="sxs-lookup"><span data-stu-id="64b70-103">Monitoring application health for reliability in Azure</span></span>

<span data-ttu-id="64b70-104">Il monitoraggio e la diagnostica sono fondamentali per la resilienza,</span><span class="sxs-lookup"><span data-stu-id="64b70-104">Monitoring and diagnostics are crucial for resiliency.</span></span> <span data-ttu-id="64b70-105">Se qualcosa non funziona, è necessario conoscere *che* non è riuscita, *quando* non è riuscita &mdash; e *perché*.</span><span class="sxs-lookup"><span data-stu-id="64b70-105">If something fails, you need to know *that* it failed, *when* it failed &mdash; and *why*.</span></span>

<span data-ttu-id="64b70-106">*Monitoring* non è identico *rilevamento degli errori*.</span><span class="sxs-lookup"><span data-stu-id="64b70-106">*Monitoring* is not the same as *failure detection*.</span></span> <span data-ttu-id="64b70-107">Ad esempio, l'applicazione potrebbe rilevare un temporaneo errori e ripetizione dei tentativi, evitando tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="64b70-107">For example, your application might detect a transient error and retry, avoiding downtime.</span></span> <span data-ttu-id="64b70-108">Ma deve anche registrare l'operazione di ripetizione dei tentativi in modo che è possibile monitorare il tasso di errore per ottenere un quadro complessivo dell'integrità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-108">But it should also log the retry operation so that you can monitor the error rate to get an overall picture of application health.</span></span>

<span data-ttu-id="64b70-109">Il processo di monitoraggio e diagnostica può essere paragonato a una pipeline con quattro fasi distinte: Strumentazione, raccolta e archiviazione, analisi e diagnosi e visualizzazione e avvisi.</span><span class="sxs-lookup"><span data-stu-id="64b70-109">Think of the monitoring and diagnostics process as a pipeline with four distinct stages: Instrumentation, collection and storage, analysis and diagnosis, and visualization and alerts.</span></span>

## <a name="instrumentation"></a><span data-ttu-id="64b70-110">Strumentazione</span><span class="sxs-lookup"><span data-stu-id="64b70-110">Instrumentation</span></span>

<span data-ttu-id="64b70-111">Non è pratico monitorare l'applicazione direttamente, quindi la strumentazione è fondamentale.</span><span class="sxs-lookup"><span data-stu-id="64b70-111">It's not practical to monitor your application directly, so instrumentation is key.</span></span> <span data-ttu-id="64b70-112">Un sistema distribuito su larga scala può essere eseguita su decine di macchine virtuali (VM), che vengono aggiunti e rimossi nel corso del tempo.</span><span class="sxs-lookup"><span data-stu-id="64b70-112">A large-scale distributed system might run on dozens of virtual machines (VMs), which are added and removed over time.</span></span> <span data-ttu-id="64b70-113">Analogamente, un'applicazione cloud potrebbe usare un numero di archivi dati e un'azione utente singola può estendersi a più sottosistemi.</span><span class="sxs-lookup"><span data-stu-id="64b70-113">Likewise, a cloud application might use a number of data stores and a single user action might span multiple subsystems.</span></span>

<span data-ttu-id="64b70-114">Fornire strumenti avanzati:</span><span class="sxs-lookup"><span data-stu-id="64b70-114">Provide rich instrumentation:</span></span>

- <span data-ttu-id="64b70-115">Per gli errori che sono probabili ma non sono ancora stati si sono verificati, fornire dati sufficienti per determinare la causa, ridurre la situazione e garantire che il sistema rimanga disponibile.</span><span class="sxs-lookup"><span data-stu-id="64b70-115">For failures that are likely but have not yet occurred, provide enough data to determine the cause, mitigate the situation, and ensure that the system remains available.</span></span>
- <span data-ttu-id="64b70-116">Per gli errori che sono già verificati, l'applicazione deve restituire un messaggio di errore appropriato per l'utente, ma deve tentare di continuare l'esecuzione, sebbene con funzionalità ridotte.</span><span class="sxs-lookup"><span data-stu-id="64b70-116">For failures that have already occurred, the application should return an appropriate error message to the user but should attempt to continue running, albeit with reduced functionality.</span></span>

<span data-ttu-id="64b70-117">Sistemi di monitoraggio devono acquisire i dettagli completi in modo che le applicazioni possono essere ripristinate in modo efficiente e, se necessario, progettisti e sviluppatori possono modificare il sistema per impedire la situazione in futuro.</span><span class="sxs-lookup"><span data-stu-id="64b70-117">Monitoring systems should capture comprehensive details so that applications can be restored efficiently and, if necessary, designers and developers can modify the system to prevent the situation from recurring.</span></span>

<span data-ttu-id="64b70-118">I dati non elaborati per il monitoraggio possono provenire da svariate origini, tra cui:</span><span class="sxs-lookup"><span data-stu-id="64b70-118">The raw data for monitoring can come from a variety of sources, including:</span></span>

- <span data-ttu-id="64b70-119">Log applicazioni, ad esempio quelli prodotti dal [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) servizio.</span><span class="sxs-lookup"><span data-stu-id="64b70-119">Application logs, such as those produced by the [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) service.</span></span>
- <span data-ttu-id="64b70-120">Le metriche delle prestazioni del sistema operativo raccolti dal [agenti di monitoraggio Azure](/azure/azure-monitor/platform/agents-overview).</span><span class="sxs-lookup"><span data-stu-id="64b70-120">Operating system performance metrics collected by [Azure monitoring agents](/azure/azure-monitor/platform/agents-overview).</span></span>
- <span data-ttu-id="64b70-121">[Le risorse di Azure](/azure/azure-monitor/platform/metrics-supported), incluse le metriche raccolte da monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="64b70-121">[Azure resources](/azure/azure-monitor/platform/metrics-supported), including metrics collected by Azure Monitor.</span></span>
- <span data-ttu-id="64b70-122">[Azure Service Health](/azure/service-health/service-health-overview), che offre un dashboard che consentono di rilevare gli eventi attivi.</span><span class="sxs-lookup"><span data-stu-id="64b70-122">[Azure Service Health](/azure/service-health/service-health-overview), which offers a dashboard to help you track active events.</span></span>
- <span data-ttu-id="64b70-123">[Log di Azure AD](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) integrate nella piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="64b70-123">[Azure AD logs](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) built into the Azure platform.</span></span>

<span data-ttu-id="64b70-124">Servizi di Azure più sono le metriche e diagnostica che è possibile configurare per analizzare e determinare la causa dei problemi.</span><span class="sxs-lookup"><span data-stu-id="64b70-124">Most Azure services have metrics and diagnostics that you can configure to analyze and determine the cause of problems.</span></span> <span data-ttu-id="64b70-125">Per altre informazioni, vedere [i dati di monitoraggio raccolti da monitoraggio di Azure](/azure/azure-monitor/platform/data-collection).</span><span class="sxs-lookup"><span data-stu-id="64b70-125">To learn more, see [Monitoring data collected by Azure Monitor](/azure/azure-monitor/platform/data-collection).</span></span>

## <a name="collection-and-storage"></a><span data-ttu-id="64b70-126">Raccolta e l'archiviazione</span><span class="sxs-lookup"><span data-stu-id="64b70-126">Collection and storage</span></span>

<span data-ttu-id="64b70-127">Dati di strumentazione non elaborati possono essere contenuti in diverse posizioni e i formati, tra cui:</span><span class="sxs-lookup"><span data-stu-id="64b70-127">Raw instrumentation data can be held in various locations and formats, including:</span></span>

- <span data-ttu-id="64b70-128">Log di traccia delle applicazioni</span><span class="sxs-lookup"><span data-stu-id="64b70-128">Application trace logs</span></span>
- <span data-ttu-id="64b70-129">Log di IIS</span><span class="sxs-lookup"><span data-stu-id="64b70-129">IIS logs</span></span>
- <span data-ttu-id="64b70-130">Contatori delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="64b70-130">Performance counters</span></span>

<span data-ttu-id="64b70-131">Queste origini diverse sono raccolte, consolidate e inserite in archivi dati affidabile in Azure, ad esempio Application Insights, monitoraggio di Azure le metriche, integrità dei servizi, gli account di archiviazione e Analitica di Log di Azure.</span><span class="sxs-lookup"><span data-stu-id="64b70-131">These disparate sources are collected, consolidated, and placed in reliable data stores in Azure, such as Application Insights, Azure Monitor metrics, Service Health, storage accounts, and Azure Log Analytics.</span></span>

## <a name="analysis-and-diagnosis"></a><span data-ttu-id="64b70-132">Analisi e diagnosi</span><span class="sxs-lookup"><span data-stu-id="64b70-132">Analysis and diagnosis</span></span>

<span data-ttu-id="64b70-133">Analizzare i dati consolidati in questi archivi dati a risolvere i problemi e ottenere una visualizzazione complessiva dello stato delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="64b70-133">Analyze data consolidated in these data stores to troubleshoot issues and gain an overall view of application health.</span></span> <span data-ttu-id="64b70-134">In generale, è possibile [cercare e analizzare](/azure/azure-monitor/log-query/log-query-overview) i dati in Application Insights e Log Analitica usando query Kusto o grafici visualizzazione preconfigurata tramite [soluzioni di gestione](/azure/azure-monitor/insights/solutions-inventory).</span><span class="sxs-lookup"><span data-stu-id="64b70-134">Generally, you can [search for and analyze](/azure/azure-monitor/log-query/log-query-overview) the data in Application Insights and Log Analytics using Kusto queries or view preconfigured graphs using [management solutions](/azure/azure-monitor/insights/solutions-inventory).</span></span> <span data-ttu-id="64b70-135">Oppure usare Azure Advisor per visualizzare le raccomandazioni con particolare attenzione nel [resilienza](/azure/advisor/advisor-high-availability-recommendations) e [prestazioni](/azure/advisor/advisor-performance-recommendations).</span><span class="sxs-lookup"><span data-stu-id="64b70-135">Or use Azure Advisor to view recommendations with a focus on [resiliency](/azure/advisor/advisor-high-availability-recommendations) and [performance](/azure/advisor/advisor-performance-recommendations).</span></span>

## <a name="visualization-and-alerts"></a><span data-ttu-id="64b70-136">Visualizzazione e avvisi</span><span class="sxs-lookup"><span data-stu-id="64b70-136">Visualization and alerts</span></span>

<span data-ttu-id="64b70-137">Presentare i dati di telemetria in un formato che rende più semplice per un operatore rilevare tendenze o problemi rapidamente, ad esempio un avviso di dashboard o un messaggio di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="64b70-137">Present telemetry data in a format that makes it easy for an operator to notice problems or trends quickly, such as a dashboard or email alert.</span></span>

<span data-ttu-id="64b70-138">Ottenere una visualizzazione dello stack completo dello stato dell'applicazione usando [i dashboard di Azure](/azure/azure-portal/azure-portal-dashboards) per creare una visualizzazione consolidata dei grafici di Application Insights, Log Analitica, le metriche di monitoraggio di Azure e integrità dei servizi di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="64b70-138">Get a full-stack view of application state by using [Azure dashboards](/azure/azure-portal/azure-portal-dashboards) to create a consolidated view of monitoring graphs from Application Insights, Log Analytics, Azure Monitor metrics, and Service Health.</span></span> <span data-ttu-id="64b70-139">Allo stesso modo [gli avvisi di monitoraggio di Azure](/azure/azure-monitor/platform/alerts-overview) per creare le notifiche sul servizio integrità, integrità risorse, le metriche di monitoraggio di Azure, i log in Log Analitica e Application Insights.</span><span class="sxs-lookup"><span data-stu-id="64b70-139">And use [Azure Monitor alerts](/azure/azure-monitor/platform/alerts-overview) to create notifications on Service Health, resource health, Azure Monitor metrics, logs in Log Analytics, and Application Insights.</span></span>

<span data-ttu-id="64b70-140">Per altre informazioni sul monitoraggio e diagnostica, vedere [monitoraggio e diagnostica](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="64b70-140">For more information about monitoring and diagnostics, see [Monitoring and diagnostics](../best-practices/monitoring.md).</span></span>

## <a name="health-probes-and-check-functions"></a><span data-ttu-id="64b70-141">I probe di integrità e le funzioni di controllo</span><span class="sxs-lookup"><span data-stu-id="64b70-141">Health probes and check functions</span></span>

<span data-ttu-id="64b70-142">L'integrità e prestazioni di un'applicazione possono peggiorare nel tempo e riduzione delle prestazioni potrebbe non essere evidenti fino a quando l'applicazione non riesce.</span><span class="sxs-lookup"><span data-stu-id="64b70-142">The health and performance of an application can degrade over time, and degradation might not be noticeable until the application fails.</span></span>

<span data-ttu-id="64b70-143">Implementare i probe o controllare le funzioni ed eseguirli regolarmente dall'esterno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-143">Implement probes or check functions, and run them regularly from outside the application.</span></span> <span data-ttu-id="64b70-144">Questi controlli possono essere semplici come la misurazione del tempo di risposta per l'applicazione nel suo complesso, per le singole parti dell'applicazione, per servizi specifici utilizzati dall'applicazione o per i singoli componenti.</span><span class="sxs-lookup"><span data-stu-id="64b70-144">These checks can be as simple as measuring response time for the application as a whole, for individual parts of the application, for specific services that the application uses, or for separate components.</span></span>

<span data-ttu-id="64b70-145">Controllare le funzioni è possono eseguire processi per garantire che essi producono risultati validi, misurare la latenza e controllare la disponibilità ed estrarre informazioni dal sistema.</span><span class="sxs-lookup"><span data-stu-id="64b70-145">Check functions can run processes to ensure that they produce valid results, measure latency and check availability, and extract information from the system.</span></span>

## <a name="long-running-workflow-failures"></a><span data-ttu-id="64b70-146">Errori del flusso di lavoro a esecuzione prolungata</span><span class="sxs-lookup"><span data-stu-id="64b70-146">Long-running workflow failures</span></span>

<span data-ttu-id="64b70-147">I flussi di lavoro a esecuzione prolungata includono spesso più passaggi, ognuno dei quali devono essere indipendente.</span><span class="sxs-lookup"><span data-stu-id="64b70-147">Long-running workflows often include multiple steps, each of which should be independent.</span></span>

<span data-ttu-id="64b70-148">Tenere traccia dell'avanzamento dei processi a esecuzione prolungata per ridurre al minimo la probabilità che l'intero flusso di lavoro dovrà essere eseguito il rollback o che le transazioni di compensazione più dovrà essere eseguita.</span><span class="sxs-lookup"><span data-stu-id="64b70-148">Track the progress of long-running processes to minimize the likelihood that the entire workflow will need to be rolled back or that multiple compensating transactions will need to be executed.</span></span>

>[!TIP]
> <span data-ttu-id="64b70-149">Monitorare e gestire lo stato di avanzamento dei flussi di lavoro a esecuzione prolungata implementando un modello, ad esempio [Scheduler Agent Supervisor](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="64b70-149">Monitor and manage the progress of long-running workflows by implementing a pattern such as [Scheduler Agent Supervisor](../patterns/scheduler-agent-supervisor.md).</span></span>

## <a name="application-logs"></a><span data-ttu-id="64b70-150">Log applicazioni</span><span class="sxs-lookup"><span data-stu-id="64b70-150">Application logs</span></span>

<span data-ttu-id="64b70-151">Per questo motivo i log applicazioni sono una fonte importante di dati di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="64b70-151">Application logs are an important source of diagnostics data.</span></span> <span data-ttu-id="64b70-152">Per ottenere informazioni quando ti serve la maggior parte, seguire le procedure consigliate per la registrazione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="64b70-152">To gain insight when you need it most, follow best practices for application logging.</span></span>

### <a name="log-data-in-the-production-environment"></a><span data-ttu-id="64b70-153">Dati di log nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="64b70-153">Log data in the production environment</span></span>

<span data-ttu-id="64b70-154">Acquisire i dati di telemetria affidabili mentre l'applicazione è in esecuzione nell'ambiente di produzione, in modo che si avranno informazioni sufficienti per diagnosticare la causa dei problemi nello stato di produzione.</span><span class="sxs-lookup"><span data-stu-id="64b70-154">Capture robust telemetry data while the application is running in the production environment, so you have sufficient information to diagnose the cause of issues in the production state.</span></span>

### <a name="log-events-at-service-boundaries"></a><span data-ttu-id="64b70-155">Eventi del log in corrispondenza dei limiti di servizio</span><span class="sxs-lookup"><span data-stu-id="64b70-155">Log events at service boundaries</span></span>

<span data-ttu-id="64b70-156">Includere un ID di correlazione che passi attraverso i limiti di servizio:</span><span class="sxs-lookup"><span data-stu-id="64b70-156">Include a correlation ID that flows across service boundaries.</span></span> <span data-ttu-id="64b70-157">Se una transazione passa attraverso più servizi e uno di essi non riesce, la correlazione ID consente di tenere traccia delle richieste tra l'applicazione e pinpoints perché la transazione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="64b70-157">If a transaction flows through multiple services and one of them fails, the correlation ID helps you track requests across your application and pinpoints why the transaction failed.</span></span>

### <a name="use-semantic-structured-logging"></a><span data-ttu-id="64b70-158">Usare la registrazione semantica (strutturata)</span><span class="sxs-lookup"><span data-stu-id="64b70-158">Use semantic (structured) logging</span></span>

<span data-ttu-id="64b70-159">Con i log strutturati, risulta più semplice automatizzare il consumo e l'analisi dei dati di log, sono particolarmente importanti su scala cloud.</span><span class="sxs-lookup"><span data-stu-id="64b70-159">With structured logs, it's easier to automate the consumption and analysis of the log data, which is especially important at cloud scale.</span></span> <span data-ttu-id="64b70-160">In genere, si consiglia di archiviare i dati di diagnostica e metriche delle risorse di Azure in un'area di lavoro di Log Analitica invece che in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-160">Generally, we recommend storing Azure resources metrics and diagnostics data in a Log Analytics workspace rather than in a storage account.</span></span> <span data-ttu-id="64b70-161">In questo modo, è possibile usare le query Kusto per ottenere i dati desiderati in un formato strutturato e rapidamente.</span><span class="sxs-lookup"><span data-stu-id="64b70-161">This way, you can use Kusto queries to obtain the data you want quickly and in a structured format.</span></span> <span data-ttu-id="64b70-162">È anche possibile usare le API di monitoraggio di Azure e le API di Azure Log Analitica.</span><span class="sxs-lookup"><span data-stu-id="64b70-162">You can also use Azure Monitor APIs and Azure Log Analytics APIs.</span></span>

### <a name="use-asynchronous-logging"></a><span data-ttu-id="64b70-163">Usare la registrazione asincrona</span><span class="sxs-lookup"><span data-stu-id="64b70-163">Use asynchronous logging</span></span>

<span data-ttu-id="64b70-164">Operazioni di registrazione sincrone a volte bloccano il codice dell'applicazione, causando il backup come vengono scritti i log delle richieste.</span><span class="sxs-lookup"><span data-stu-id="64b70-164">Synchronous logging operations sometimes block your application code, causing requests to back up as logs are written.</span></span> <span data-ttu-id="64b70-165">Usare la registrazione asincrona per preservare la disponibilità durante la registrazione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="64b70-165">Use asynchronous logging to preserve availability during application logging.</span></span>

### <a name="separate-application-logging-from-auditing"></a><span data-ttu-id="64b70-166">Registrazione di applicazione separata dal controllo</span><span class="sxs-lookup"><span data-stu-id="64b70-166">Separate application logging from auditing</span></span>

<span data-ttu-id="64b70-167">I record di controllo vengono mantenuti comunemente per i requisiti normativi o di conformità e devono essere completati.</span><span class="sxs-lookup"><span data-stu-id="64b70-167">Audit records are commonly maintained for compliance or regulatory requirements and must be complete.</span></span> <span data-ttu-id="64b70-168">Per evitare transazioni eliminate, gestire i log di controllo separatamente dal log di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="64b70-168">To avoid dropped transactions, maintain audit logs separately from diagnostic logs.</span></span>

## <a name="remote-call-statistics"></a><span data-ttu-id="64b70-169">Statistiche delle chiamate remote</span><span class="sxs-lookup"><span data-stu-id="64b70-169">Remote call statistics</span></span>

<span data-ttu-id="64b70-170">Traccia e report remoto chiamare le statistiche in tempo reale e forniscono un modo semplice per esaminare queste informazioni, in modo che il team operativo disponga di una vista istantanea dello stato di integrità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-170">Track and report remote call statistics in real time and provide an easy way to review this information, so the operations team has an instantaneous view into the health of your application.</span></span> <span data-ttu-id="64b70-171">Riepilogare le metriche di chiamata remota, ad esempio la latenza, velocità effettiva e gli errori nei percentili 95 e 99.</span><span class="sxs-lookup"><span data-stu-id="64b70-171">Summarize remote call metrics, such as latency, throughput, and errors in the 99 and 95 percentiles.</span></span>

## <a name="transient-exceptions-and-retries"></a><span data-ttu-id="64b70-172">I tentativi e le eccezioni temporanee</span><span class="sxs-lookup"><span data-stu-id="64b70-172">Transient exceptions and retries</span></span>

<span data-ttu-id="64b70-173">Tenere traccia del numero di eccezioni temporanee e di ripetizione dei tentativi nel corso del tempo per individuare problemi o errori nella logica di ripetizione dei tentativi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-173">Track the number of transient exceptions and retries over time to uncover issues or failures in your application's retry logic.</span></span> <span data-ttu-id="64b70-174">Una tendenza crescente di eccezioni nel tempo può indicare che il servizio ha un problema e potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="64b70-174">A trend of increasing exceptions over time may indicate that the service is having an issue and may fail.</span></span> <span data-ttu-id="64b70-175">Per ulteriori informazioni, vedere [Linee guida specifiche del servizio di ripetizione dei tentativi](../best-practices/retry-service-specific.md).</span><span class="sxs-lookup"><span data-stu-id="64b70-175">For more information, see [Retry service specific guidance](../best-practices/retry-service-specific.md).</span></span>

## <a name="early-warning-system"></a><span data-ttu-id="64b70-176">Sistema di avviso precoce</span><span class="sxs-lookup"><span data-stu-id="64b70-176">Early warning system</span></span>

<span data-ttu-id="64b70-177">Monitorare l'applicazione per i segni di avviso che potrebbero richiedere un intervento proattivo.</span><span class="sxs-lookup"><span data-stu-id="64b70-177">Monitor your application for warning signs that might require proactive intervention.</span></span> <span data-ttu-id="64b70-178">Strumenti di cui valutare l'integrità complessiva dell'applicazione e le relative dipendenze consentono di riconoscere rapidamente quando un sistema o i relativi componenti diventano improvvisamente non disponibili.</span><span class="sxs-lookup"><span data-stu-id="64b70-178">Tools that assess the overall health of the application and its dependencies help you to recognize quickly when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="64b70-179">Usarle per implementare un sistema di avviso precoce.</span><span class="sxs-lookup"><span data-stu-id="64b70-179">Use them to implement an early warning system.</span></span>

1. <span data-ttu-id="64b70-180">Identificare gli indicatori di prestazioni chiave dell'integrità dell'applicazione, ad esempio le eccezioni temporanee e la latenza di chiamata remota.</span><span class="sxs-lookup"><span data-stu-id="64b70-180">Identify the key performance indicators of your application's health, such as transient exceptions and remote call latency.</span></span>
1. <span data-ttu-id="64b70-181">Impostare le soglie a livelli che identifichino i problemi prima che diventino critici e richiedono una risposta di ripristino.</span><span class="sxs-lookup"><span data-stu-id="64b70-181">Set thresholds at levels that identify issues before they become critical and require a recovery response.</span></span>
1. <span data-ttu-id="64b70-182">Inviare un avviso all'operatore quando viene raggiunto il valore di soglia.</span><span class="sxs-lookup"><span data-stu-id="64b70-182">Send an alert to operations when the threshold value is reached.</span></span>

<span data-ttu-id="64b70-183">Prendere in considerazione [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) o strumenti di terze parti per offrire funzionalità di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="64b70-183">Consider [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) or third-party tools to provide monitoring capabilities.</span></span> <span data-ttu-id="64b70-184">La maggior parte delle soluzioni di monitoraggio controlla i contatori delle prestazioni chiave e la disponibilità dei servizi.</span><span class="sxs-lookup"><span data-stu-id="64b70-184">Most monitoring solutions track key performance counters and service availability.</span></span> <span data-ttu-id="64b70-185">[Integrità risorse di Azure](/azure/service-health/resource-health-checks-resource-types) fornisce alcuni integrità integrati i controlli di stato, che consentono di diagnosticare la limitazione delle richieste di servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="64b70-185">[Azure resource health](/azure/service-health/resource-health-checks-resource-types) provides some built-in health status checks, which can help diagnose throttling of Azure services.</span></span>

## <a name="subscription-and-service-limitations"></a><span data-ttu-id="64b70-186">Limitazioni del servizio e sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="64b70-186">Subscription and service limitations</span></span>

<span data-ttu-id="64b70-187">Le sottoscrizioni di Azure hanno limiti su determinati tipi di risorse, ad esempio il numero di gruppi di risorse, i core e gli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-187">Azure subscriptions have limits on certain resource types, such as number of resource groups, cores, and storage accounts.</span></span> <span data-ttu-id="64b70-188">Per assicurarsi che l'applicazione non viene eseguito vantaggi limiti della sottoscrizione di Azure, creare avvisi che eseguono il polling per i servizi per raggiungere i limiti e quote.</span><span class="sxs-lookup"><span data-stu-id="64b70-188">To ensure that your application doesn't run up against Azure subscription limits, create alerts that poll for services nearing their limits and quotas.</span></span>

<span data-ttu-id="64b70-189">Risolvere i seguenti limiti della sottoscrizione agli avvisi.</span><span class="sxs-lookup"><span data-stu-id="64b70-189">Address the following subscription limits with alerts.</span></span>

### <a name="individual-services"></a><span data-ttu-id="64b70-190">I singoli servizi</span><span class="sxs-lookup"><span data-stu-id="64b70-190">Individual services</span></span>

<span data-ttu-id="64b70-191">Singoli servizi di Azure hanno limiti di consumo per archiviazione, la velocità effettiva, numero di connessioni, richieste al secondo e altre metriche.</span><span class="sxs-lookup"><span data-stu-id="64b70-191">Individual Azure services have consumption limits on storage, throughput, number of connections, requests per second, and other metrics.</span></span> <span data-ttu-id="64b70-192">L'applicazione avrà esito negativo se tenta di usare le risorse oltre questi limiti, con conseguente limitazione delle richieste e possibili i tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="64b70-192">Your application will fail if it attempts to use resources beyond these limits, resulting in service throttling and possible downtime.</span></span>

<span data-ttu-id="64b70-193">A seconda del servizio specifico e ai requisiti dell'applicazione, è spesso possibile restare sotto questi limiti dalla scalabilità verticale (scelta di un altro piano tariffario, ad esempio) o la scalabilità orizzontale (aggiunta di nuove istanze).</span><span class="sxs-lookup"><span data-stu-id="64b70-193">Depending on the specific service and your application requirements, you can often stay under these limits by scaling up (choosing another pricing tier, for example) or scaling out (adding new instances).</span></span>

### <a name="azure-storage-scalability-and-performance-targets"></a><span data-ttu-id="64b70-194">Obiettivi di scalabilità e prestazioni di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="64b70-194">Azure storage scalability and performance targets</span></span>

<span data-ttu-id="64b70-195">Azure consente un numero massimo di account di archiviazione per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="64b70-195">Azure allows a maximum number of storage accounts per subscription.</span></span> <span data-ttu-id="64b70-196">Se l'applicazione richiede più account di archiviazione rispetto a quelli attualmente disponibili nella sottoscrizione, creare una nuova sottoscrizione con altri account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-196">If your application requires more storage accounts than are currently available in your subscription, create a new subscription with additional storage accounts.</span></span> <span data-ttu-id="64b70-197">Per altre informazioni, vedere [Sottoscrizione di Azure e limiti, quote e vincoli dei servizi](/azure/azure-subscription-service-limits/#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="64b70-197">For more information, see [Azure subscription and service limits, quotas, and constraints](/azure/azure-subscription-service-limits/#storage-limits).</span></span>

<span data-ttu-id="64b70-198">Se si superano obiettivi di scalabilità e prestazioni di archiviazione di Azure, l'applicazione sarà soggetta la limitazione delle richieste di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-198">If you exceed Azure storage scalability and performance targets, your application will experience storage throttling.</span></span> <span data-ttu-id="64b70-199">Per altre informazioni, vedere [Obiettivi di scalabilità e prestazioni per Archiviazione di Azure](/azure/storage/storage-scalability-targets/).</span><span class="sxs-lookup"><span data-stu-id="64b70-199">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/).</span></span>

### <a name="scalability-targets-for-virtual-machine-disks"></a><span data-ttu-id="64b70-200">Obiettivi di scalabilità per i dischi della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="64b70-200">Scalability targets for virtual machine disks</span></span>

<span data-ttu-id="64b70-201">Un'infrastruttura come servizio (IaaS) della macchina virtuale di Azure supporta il collegamento di un numero di dischi dati, in base a diversi fattori, tra cui le dimensioni VM e il tipo di account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-201">An Azure infrastructure as a service (IaaS) VM supports attaching a number of data disks, depending on several factors, including the VM size and the type of storage account.</span></span> <span data-ttu-id="64b70-202">Se l'applicazione supera gli obiettivi di scalabilità per i dischi di macchina virtuale, eseguire il provisioning di account di archiviazione aggiuntivi e creare in essi i dischi di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="64b70-202">If your application exceeds the scalability targets for virtual machine disks, provision additional storage accounts and create the virtual machine disks there.</span></span> <span data-ttu-id="64b70-203">Per altre informazioni, vedere [Obiettivi di scalabilità e prestazioni per Archiviazione di Azure](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span><span class="sxs-lookup"><span data-stu-id="64b70-203">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span></span>

### <a name="vm-size"></a><span data-ttu-id="64b70-204">Dimensioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="64b70-204">VM size</span></span>

<span data-ttu-id="64b70-205">Se la CPU, memoria, disco e i/o delle macchine virtuali effettivo si avvicinano al limite delle dimensioni della macchina virtuale, l'applicazione potrebbe verificarsi problemi di capacità.</span><span class="sxs-lookup"><span data-stu-id="64b70-205">If the actual CPU, memory, disk, and I/O of your VMs approach the limits of the VM size, your application may experience capacity issues.</span></span> <span data-ttu-id="64b70-206">Per risolvere i problemi, aumentare le dimensioni VM.</span><span class="sxs-lookup"><span data-stu-id="64b70-206">To correct the issues, increase the VM size.</span></span> <span data-ttu-id="64b70-207">Dimensioni delle macchine Virtuali sono descritte nel [dimensioni delle macchine virtuali in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="64b70-207">VM sizes are described in [Sizes for virtual machines in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="64b70-208">Se il carico di lavoro varia nel corso del tempo, prendere in considerazione l'utilizzo scalabilità di macchine virtuali di set per ridimensionare automaticamente il numero di istanze di VM.</span><span class="sxs-lookup"><span data-stu-id="64b70-208">If your workload fluctuates over time, consider using virtual machine scale sets to automatically scale the number of VM instances.</span></span> <span data-ttu-id="64b70-209">In caso contrario, è necessario aumentare o diminuire il numero di macchine virtuali manualmente.</span><span class="sxs-lookup"><span data-stu-id="64b70-209">Otherwise, you need to manually increase or decrease the number of VMs.</span></span> <span data-ttu-id="64b70-210">Per altre informazioni, vedere la [panoramica dei set di scalabilità di macchine virtuali](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="64b70-210">For more information, see the [virtual machine scale sets overview](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

### <a name="azure-sql-database"></a><span data-ttu-id="64b70-211">Database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="64b70-211">Azure SQL Database</span></span>

<span data-ttu-id="64b70-212">Se il livello di Database SQL di Azure non è sufficiente per gestire i requisiti dell'applicazione Database Transaction Unit (DTU), verrà limitato l'utilizzo dei dati.</span><span class="sxs-lookup"><span data-stu-id="64b70-212">If your Azure SQL Database tier isn't adequate to handle your application's Database Transaction Unit (DTU) requirements, your data use will be throttled.</span></span> <span data-ttu-id="64b70-213">Per altre informazioni sulla selezione del piano di servizio corretto, vedere [Database SQL di Azure i modelli di acquisto](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="64b70-213">For more information on selecting the correct service plan, see [Azure SQL Database purchasing models](/azure/sql-database/sql-database-service-tiers/).</span></span>

## <a name="third-party-services"></a><span data-ttu-id="64b70-214">Servizi di terze parti</span><span class="sxs-lookup"><span data-stu-id="64b70-214">Third-party services</span></span>

<span data-ttu-id="64b70-215">Se l'applicazione ha dipendenze in servizi di terze parti, identificare la modalità con cui possono avere esito negativo di questi servizi e ciò che gli errori di effetto avrà sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-215">If your application has dependencies on third-party services, identify how these services can fail and what effect failures will have on your application.</span></span>

<span data-ttu-id="64b70-216">Un servizio di terze parti potrebbe non includere il monitoraggio e diagnostica.</span><span class="sxs-lookup"><span data-stu-id="64b70-216">A third-party service might not include monitoring and diagnostics.</span></span> <span data-ttu-id="64b70-217">Registrare le chiamate a questi servizi e metterle in correlazione con l'integrità e la registrazione diagnostica mediante un identificatore univoco dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64b70-217">Log calls to these services and correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="64b70-218">Per altre informazioni sulle pratiche comprovate di monitoraggio e diagnostica, vedere [indicazioni di monitoraggio e diagnostica](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="64b70-218">For more information on proven practices for monitoring and diagnostics, see [Monitoring and diagnostics guidance](../best-practices/monitoring.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="64b70-219">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="64b70-219">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="64b70-220">Piano di ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="64b70-220">Plan for disaster recovery</span></span>](./disaster-recovery.md)
