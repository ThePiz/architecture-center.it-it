---
title: Verifica della disponibilità e resilienza delle applicazioni Azure
description: Approcci per testare l'affidabilità delle applicazioni in Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: cf33a859540810279b1cb85be5a6fb2ebe4500dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646642"
---
# <a name="testing-azure-applications-for-resiliency-and-availability"></a><span data-ttu-id="ff14c-103">Verifica della disponibilità e resilienza delle applicazioni Azure</span><span class="sxs-lookup"><span data-stu-id="ff14c-103">Testing Azure applications for resiliency and availability</span></span>

<span data-ttu-id="ff14c-104">Per testare la resilienza, è necessario verificare come viene eseguita il carico di lavoro end-to-end con le condizioni di errore intermittente.</span><span class="sxs-lookup"><span data-stu-id="ff14c-104">To test resiliency, you should verify how the end-to-end workload performs under intermittent failure conditions.</span></span>

<span data-ttu-id="ff14c-105">Eseguire i test nell'ambiente di produzione usando sia i dati utente reali e sintetici.</span><span class="sxs-lookup"><span data-stu-id="ff14c-105">Run tests in production using both synthetic and real user data.</span></span> <span data-ttu-id="ff14c-106">Test e produzione raramente sono identici. pertanto è importante convalidare l'applicazione in produzione usando un [blu-verde](https://martinfowler.com/bliki/BlueGreenDeployment.html) oppure [distribuzione canary](https://martinfowler.com/bliki/CanaryRelease.html).</span><span class="sxs-lookup"><span data-stu-id="ff14c-106">Test and production are rarely identical, so it's important to validate your application in production using a [blue-green](https://martinfowler.com/bliki/BlueGreenDeployment.html) or [canary deployment](https://martinfowler.com/bliki/CanaryRelease.html).</span></span> <span data-ttu-id="ff14c-107">In questo modo, si sta testando l'applicazione in condizioni reali, in modo da avere la certezza che funzionerà come previsto al termine della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-107">This way, you're testing the application under real conditions, so you can be sure that it will function as expected when fully deployed.</span></span>

<span data-ttu-id="ff14c-108">Come parte del piano di test, includere:</span><span class="sxs-lookup"><span data-stu-id="ff14c-108">As part of your test plan, include:</span></span>

- <span data-ttu-id="ff14c-109">Esecuzione di test pre-distribuzione automatizzati</span><span class="sxs-lookup"><span data-stu-id="ff14c-109">Automated predeployment testing</span></span>
- <span data-ttu-id="ff14c-110">Il test fault injection</span><span class="sxs-lookup"><span data-stu-id="ff14c-110">Fault injection testing</span></span>
- <span data-ttu-id="ff14c-111">Il test di carico di picco</span><span class="sxs-lookup"><span data-stu-id="ff14c-111">Peak load testing</span></span>
- <span data-ttu-id="ff14c-112">Test di ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ff14c-112">Disaster recovery testing</span></span>
- <span data-ttu-id="ff14c-113">La verifica del servizio di terze parti</span><span class="sxs-lookup"><span data-stu-id="ff14c-113">Third-party service testing</span></span>

<span data-ttu-id="ff14c-114">Il test è un processo iterativo:</span><span class="sxs-lookup"><span data-stu-id="ff14c-114">Testing is an iterative process.</span></span> <span data-ttu-id="ff14c-115">testare l'applicazione, misurare il risultato, analizzare e indirizzare gli eventuali errori che si verificano e ripetere il processo.</span><span class="sxs-lookup"><span data-stu-id="ff14c-115">Test the application, measure the outcome, analyze and address any failures that result, and repeat the process.</span></span>

## <a name="perform-fault-injection-testing"></a><span data-ttu-id="ff14c-116">Eseguire il test fault injection</span><span class="sxs-lookup"><span data-stu-id="ff14c-116">Perform fault injection testing</span></span>

<span data-ttu-id="ff14c-117">Per il test fault injection, verificare la resilienza del sistema durante gli errori, attivando errori reali sia simulandoli.</span><span class="sxs-lookup"><span data-stu-id="ff14c-117">For fault injection testing, check the resiliency of the system during failures, either by triggering actual failures or by simulating them.</span></span> <span data-ttu-id="ff14c-118">Ecco alcune strategie per indurre errori:</span><span class="sxs-lookup"><span data-stu-id="ff14c-118">Here are some strategies to induce failures:</span></span>

- <span data-ttu-id="ff14c-119">Arrestare le istanze di macchina virtuale (VM).</span><span class="sxs-lookup"><span data-stu-id="ff14c-119">Shut down virtual machine (VM) instances.</span></span>
- <span data-ttu-id="ff14c-120">Arrestare in modo anomalo i processi.</span><span class="sxs-lookup"><span data-stu-id="ff14c-120">Crash processes.</span></span>
- <span data-ttu-id="ff14c-121">Far scadere i certificati.</span><span class="sxs-lookup"><span data-stu-id="ff14c-121">Expire certificates.</span></span>
- <span data-ttu-id="ff14c-122">Cambiare le chiavi di accesso.</span><span class="sxs-lookup"><span data-stu-id="ff14c-122">Change access keys.</span></span>
- <span data-ttu-id="ff14c-123">Arrestare il servizio DNS nei controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="ff14c-123">Shut down the DNS service on domain controllers.</span></span>
- <span data-ttu-id="ff14c-124">Limitare le risorse di sistema disponibili, come la RAM o il numero di thread.</span><span class="sxs-lookup"><span data-stu-id="ff14c-124">Limit available system resources, such as RAM or number of threads.</span></span>
- <span data-ttu-id="ff14c-125">Smontare i dischi.</span><span class="sxs-lookup"><span data-stu-id="ff14c-125">Unmount disks.</span></span>
- <span data-ttu-id="ff14c-126">Ridistribuire una VM.</span><span class="sxs-lookup"><span data-stu-id="ff14c-126">Redeploy a VM.</span></span>

<span data-ttu-id="ff14c-127">Il piano di test dovrebbe incorporare possibili punti di errore identificati durante la fase di progettazione, oltre a scenari di errore comuni:</span><span class="sxs-lookup"><span data-stu-id="ff14c-127">Your test plan should incorporate possible failure points identified during the design phase, in addition to common failure scenarios:</span></span>

- <span data-ttu-id="ff14c-128">Testare l'applicazione in un ambiente più vicino possibile produzione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-128">Test your application in an environment as close to production as possible.</span></span>
- <span data-ttu-id="ff14c-129">Errori di test nella combinazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-129">Test failures in combination.</span></span>
- <span data-ttu-id="ff14c-130">Misurare i tempi di ripristino e assicurarsi che siano soddisfatti i requisiti aziendali.</span><span class="sxs-lookup"><span data-stu-id="ff14c-130">Measure the recovery times, and be sure that your business requirements are met.</span></span>
- <span data-ttu-id="ff14c-131">Verificare che gli errori non supporta la propagazione e vengono gestiti in modo isolato.</span><span class="sxs-lookup"><span data-stu-id="ff14c-131">Verify that failures don't cascade and are handled in an isolated way.</span></span>

<span data-ttu-id="ff14c-132">Per altre informazioni sugli scenari di errore, vedere [errori e ripristino di emergenza per le applicazioni Azure](./disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="ff14c-132">For more information about failure scenarios, see [Failure and disaster recovery for Azure applications](./disaster-recovery.md).</span></span>

## <a name="test-under-peak-loads"></a><span data-ttu-id="ff14c-133">Test con carichi di picco</span><span class="sxs-lookup"><span data-stu-id="ff14c-133">Test under peak loads</span></span>

<span data-ttu-id="ff14c-134">Il test di carico è fondamentale per l'identificazione di errori che si verificano solo in condizioni di carico, ad esempio il database back-end sovraccarico o la limitazione delle richieste di servizio.</span><span class="sxs-lookup"><span data-stu-id="ff14c-134">Load testing is crucial for identifying failures that only happen under load, such as the back-end database being overwhelmed or service throttling.</span></span> <span data-ttu-id="ff14c-135">Test per carico di picco e aumento previsto nel carico di picco, usando dati di produzione oppure dati sintetici che siano il più vicino possibile i dati di produzione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-135">Test for peak load and anticipated increase in peak load, using production data or synthetic data that is as close to production data as possible.</span></span> <span data-ttu-id="ff14c-136">L'obiettivo consiste nel verificare il comportamento dell'applicazione in condizioni reali.</span><span class="sxs-lookup"><span data-stu-id="ff14c-136">Your goal is to see how the application behaves under real-world conditions.</span></span>

## <a name="conduct-disaster-recovery-drills"></a><span data-ttu-id="ff14c-137">Condurre esercitazioni sul ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ff14c-137">Conduct disaster recovery drills</span></span>

<span data-ttu-id="ff14c-138">Iniziare con un piano di ripristino di emergenza valida e testarlo periodicamente per verificarne il che corretto funzionamento.</span><span class="sxs-lookup"><span data-stu-id="ff14c-138">Start with a good disaster recovery plan, and test it periodically to make sure it works.</span></span>

<span data-ttu-id="ff14c-139">Macchine virtuali di Azure, è possibile usare [Azure Site Recovery](/azure/site-recovery/azure-to-azure-quickstart/) replicare ed eseguire [esercitazioni sul ripristino di emergenza](/azure/site-recovery/azure-to-azure-tutorial-dr-drill/) senza conseguenze per le applicazioni di produzione o sulla replica continua.</span><span class="sxs-lookup"><span data-stu-id="ff14c-139">For Azure Virtual Machines, you can use [Azure Site Recovery](/azure/site-recovery/azure-to-azure-quickstart/) to replicate and perform [disaster recovery drills](/azure/site-recovery/azure-to-azure-tutorial-dr-drill/) without impacting production applications or ongoing replication.</span></span>

### <a name="failover-and-failback-testing"></a><span data-ttu-id="ff14c-140">Failover e failback di test</span><span class="sxs-lookup"><span data-stu-id="ff14c-140">Failover and failback testing</span></span>

<span data-ttu-id="ff14c-141">Testare il failover e failback per verificare che i servizi dipendenti dell'applicazione tornare attivo in modo sincronizzato durante il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ff14c-141">Test failover and failback to verify that your application's dependent services come back up in a synchronized manner during disaster recovery.</span></span> <span data-ttu-id="ff14c-142">I sistemi e alle operazioni potrebbero influire sul failover e il failback funzioni, ma l'impatto potrebbe non essere rilevato fino a quando il sistema principale ha esito negativo o è in overload.</span><span class="sxs-lookup"><span data-stu-id="ff14c-142">Changes to systems and operations may affect failover and failback functions, but the impact may not be detected until the main system fails or becomes overloaded.</span></span> <span data-ttu-id="ff14c-143">Le funzionalità di failover di test *prima di* sono tenuti a compensare un problema in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="ff14c-143">Test failover capabilities *before* they are required to compensate for a live problem.</span></span> <span data-ttu-id="ff14c-144">Assicurarsi anche che i servizi dipendenti failover e nuovamente nell'ordine corretto.</span><span class="sxs-lookup"><span data-stu-id="ff14c-144">Also be sure that dependent services fail over and fail back in the correct order.</span></span>

<span data-ttu-id="ff14c-145">Se si usa [Azure Site Recovery](/azure/site-recovery/) per replicare le macchine virtuali, eseguire emergenza esercitazioni sul ripristino periodicamente in questo modo i failover di test per convalidare la strategia di replica.</span><span class="sxs-lookup"><span data-stu-id="ff14c-145">If you are using [Azure Site Recovery](/azure/site-recovery/) to replicate VMs, run disaster recovery drills periodically by doing test failovers to validate your replication strategy.</span></span> <span data-ttu-id="ff14c-146">Un failover di test non influisce sulla replica di VM in corso o sull'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-146">A test failover does not affect the ongoing VM replication or your production environment.</span></span> <span data-ttu-id="ff14c-147">Per altre informazioni, vedere [eseguire un'esercitazione sul ripristino di emergenza in Azure](/azure/site-recovery/site-recovery-test-failover-to-azure).</span><span class="sxs-lookup"><span data-stu-id="ff14c-147">For more information, see [Run a disaster recovery drill to Azure](/azure/site-recovery/site-recovery-test-failover-to-azure).</span></span>

### <a name="simulation-testing"></a><span data-ttu-id="ff14c-148">I test di simulazione</span><span class="sxs-lookup"><span data-stu-id="ff14c-148">Simulation testing</span></span>

<span data-ttu-id="ff14c-149">Test di simulazione prevedono la creazione di situazioni di piccole dimensioni, reale.</span><span class="sxs-lookup"><span data-stu-id="ff14c-149">Simulation testing involves creating small, real-life situations.</span></span> <span data-ttu-id="ff14c-150">Le simulazioni di illustrano l'efficacia delle soluzioni nel piano di ripristino ed evidenziano eventuali problemi che non sono stati risolti in modo adeguato.</span><span class="sxs-lookup"><span data-stu-id="ff14c-150">Simulations demonstrate the effectiveness of the solutions in the recovery plan and highlight any issues that weren't adequately addressed.</span></span>

<span data-ttu-id="ff14c-151">Quando si eseguono i test di simulazione, seguire le procedure consigliate:</span><span class="sxs-lookup"><span data-stu-id="ff14c-151">As you perform simulation testing, follow best practices:</span></span>

- <span data-ttu-id="ff14c-152">Eseguire simulazioni in modo che non interrompano le attività aziendali effettive ma l'aspetto di una situazione reale.</span><span class="sxs-lookup"><span data-stu-id="ff14c-152">Conduct simulations in a manner that doesn't disrupt actual business but feels like a real situation.</span></span>
- <span data-ttu-id="ff14c-153">Assicurarsi che gli scenari simulati sono completamente controllabili.</span><span class="sxs-lookup"><span data-stu-id="ff14c-153">Make sure that simulated scenarios are completely controllable.</span></span> <span data-ttu-id="ff14c-154">Se il piano di ripristino ha esito negativo, è possibile ripristinare la situazione al normale senza causare danni.</span><span class="sxs-lookup"><span data-stu-id="ff14c-154">If the recovery plan seems to be failing, you can restore the situation back to normal without causing damage.</span></span>
- <span data-ttu-id="ff14c-155">Informare i dirigenti sulla come e quando verranno eseguiti gli esercizi di simulazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-155">Inform management about when and how the simulation exercises will be conducted.</span></span> <span data-ttu-id="ff14c-156">Il piano deve descrivere in dettaglio l'intervallo di tempo e le risorse coinvolte durante la simulazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-156">Your plan should detail the time frame and the resources affected during the simulation.</span></span>

## <a name="test-health-probes-for-load-balancers-and-traffic-managers"></a><span data-ttu-id="ff14c-157">Testare i probe di integrità per i bilanciamenti del carico e strumenti di gestione traffico</span><span class="sxs-lookup"><span data-stu-id="ff14c-157">Test health probes for load balancers and traffic managers</span></span>

<span data-ttu-id="ff14c-158">Configurare e testare i probe di integrità per i servizi di bilanciamento del carico e strumenti di gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="ff14c-158">Configure and test health probes for your load balancers and traffic managers.</span></span> <span data-ttu-id="ff14c-159">Assicurarsi che l'endpoint di integrità controlli le parti critiche del sistema e risponda in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ff14c-159">Ensure that your health endpoint checks the critical parts of the system and responds appropriately.</span></span>

- <span data-ttu-id="ff14c-160">Per la [gestione traffico di Azure](/azure/traffic-manager/traffic-manager-overview/), il probe di integrità determina se eseguire il failover in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="ff14c-160">For [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview/), the health probe determines whether to fail over to another region.</span></span> <span data-ttu-id="ff14c-161">L'endpoint di integrità deve verificare eventuali dipendenze critiche che vengono distribuiti nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="ff14c-161">Your health endpoint should check any critical dependencies that are deployed within the same region.</span></span>
- <span data-ttu-id="ff14c-162">Per la [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/), il probe di integrità determina se si desidera rimuovere una macchina virtuale dalla rotazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-162">For [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/), the health probe determines whether to remove a VM from rotation.</span></span> <span data-ttu-id="ff14c-163">L'endpoint di integrità deve segnalare l'integrità della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ff14c-163">The health endpoint should report the health of the VM.</span></span> <span data-ttu-id="ff14c-164">Non includere altri livelli o servizi esterni.</span><span class="sxs-lookup"><span data-stu-id="ff14c-164">Don't include other tiers or external services.</span></span> <span data-ttu-id="ff14c-165">In caso contrario, se si verifica un errore all'esterno della macchina virtuale, il servizio di bilanciamento del carico rimuove la macchina virtuale dalla rotazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-165">Otherwise, a failure that occurs outside the VM will cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="ff14c-166">Per informazioni sull'implementazione del monitoraggio dell'integrità nell'applicazione, vedere [Modello di monitoraggio dell’integrità dell’endpoint](../patterns/health-endpoint-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="ff14c-166">For guidance on implementing health monitoring in your application, see [Health Endpoint Monitoring pattern](../patterns/health-endpoint-monitoring.md).</span></span>

## <a name="test-monitoring-systems"></a><span data-ttu-id="ff14c-167">Testare sistemi di monitoraggio</span><span class="sxs-lookup"><span data-stu-id="ff14c-167">Test monitoring systems</span></span>

<span data-ttu-id="ff14c-168">Includono sistemi di monitoraggio nel piano di test.</span><span class="sxs-lookup"><span data-stu-id="ff14c-168">Include monitoring systems in your test plan.</span></span> <span data-ttu-id="ff14c-169">I sistemi automatizzati di failover e failback dipendono dal corretto funzionamento del monitoraggio e della strumentazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-169">Automated failover and failback systems depend on the correct functioning of monitoring and instrumentation.</span></span> <span data-ttu-id="ff14c-170">Dashboard per visualizzare gli avvisi di integrità e l'operatore di sistema dipendono anche disponendo accurata di monitoraggio e strumentazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-170">Dashboards to visualize system health and operator alerts also depend on having accurate monitoring and instrumentation.</span></span> <span data-ttu-id="ff14c-171">In caso di errore di questi elementi, in assenza di informazioni importanti o in caso di segnalazione di dati non precisi, un operatore potrebbe non rendersi conto che il sistema è danneggiato o guasto.</span><span class="sxs-lookup"><span data-stu-id="ff14c-171">If these elements fail, miss critical information, or report inaccurate data, an operator might not realize that the system is unhealthy or failing.</span></span>

## <a name="include-third-party-services-in-test-scenarios"></a><span data-ttu-id="ff14c-172">Includere servizi di terze parti in scenari di test</span><span class="sxs-lookup"><span data-stu-id="ff14c-172">Include third-party services in test scenarios</span></span>

<span data-ttu-id="ff14c-173">Se l'applicazione ha dipendenze in servizi di terze parti, identificare dove e come questi servizi possono avere esito negativo e sugli effetti di tali errori avrà sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-173">If your application has dependencies on third-party services, identify where and how these services can fail and what effect those failures will have on your application.</span></span> <span data-ttu-id="ff14c-174">Tenere presente il contratto di servizio (SLA) per il servizio di terze parti e l'effetto che potrebbe avere del piano di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ff14c-174">Keep in mind the service-level agreement (SLA) for the third-party service and the effect it might have on your disaster recovery plan.</span></span>

<span data-ttu-id="ff14c-175">Un servizio di terze parti potrebbe non fornire le funzionalità di monitoraggio e diagnostica, pertanto è importante per le chiamate di log e metterle in correlazione con l'integrità dell'applicazione e di diagnostica utilizzando un identificatore univoco di registrazione.</span><span class="sxs-lookup"><span data-stu-id="ff14c-175">A third-party service might not provide monitoring and diagnostics capabilities, so it's important to log your invocations of them and to correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="ff14c-176">Per altre informazioni sulle pratiche comprovate di monitoraggio e diagnostica, vedere [indicazioni di monitoraggio e diagnostica](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="ff14c-176">For more information on proven practices for monitoring and diagnostics, see [Monitoring and diagnostics guidance](../best-practices/monitoring.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ff14c-177">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ff14c-177">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="ff14c-178">Distribuire per la resilienza e disponibilità</span><span class="sxs-lookup"><span data-stu-id="ff14c-178">Deploy for resiliency and availability</span></span>](./deploy.md)
