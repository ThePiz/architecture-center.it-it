---
title: Distribuzione delle applicazioni di Azure per la resilienza e disponibilità
description: Una panoramica delle tecniche per creare distribuzioni affidabili in Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: d8df3fe1c3353c60462959a625ba13ae47b96cf8
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646643"
---
# <a name="deploying-azure-applications-for-resiliency-and-availability"></a><span data-ttu-id="c4d9f-103">Distribuzione delle applicazioni di Azure per la resilienza e disponibilità</span><span class="sxs-lookup"><span data-stu-id="c4d9f-103">Deploying Azure applications for resiliency and availability</span></span>

<span data-ttu-id="c4d9f-104">Durante il provisioning e aggiornare le risorse di Azure, il codice dell'applicazione e le impostazioni di configurazione, un processo ripetibile e prevedibile consente di evitare errori e tempo di inattività.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-104">As you provision and update Azure resources, application code, and configuration settings, a repeatable and predictable process will help you avoid errors and downtime.</span></span> <span data-ttu-id="c4d9f-105">Si consiglia di processi automatizzati per la distribuzione che è possibile eseguire su richiesta ed eseguire di nuovo se qualcosa non funziona.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-105">We recommend automated processes for deployment that you can run on demand and rerun if something fails.</span></span> <span data-ttu-id="c4d9f-106">Dopo che i processi di distribuzione sono in esecuzione senza problemi, la documentazione di processo possibile mantenerli in questo modo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-106">After your deployment processes are running smoothly, process documentation can keep them that way.</span></span>

## <a name="automate-processes"></a><span data-ttu-id="c4d9f-107">Automatizzare i processi</span><span class="sxs-lookup"><span data-stu-id="c4d9f-107">Automate processes</span></span>

<span data-ttu-id="c4d9f-108">Per attivare le risorse su richiesta, distribuire rapidamente le soluzioni, ridurre al minimo gli errori umani e produrre risultati coerenti e ripetibili, assicurarsi di automatizzare le distribuzioni e aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-108">To activate resources on demand, deploy solutions rapidly, minimize human error, and produce consistent and repeatable results, be sure to automate deployments and updates.</span></span>

### <a name="automate-as-many-processes-as-possible"></a><span data-ttu-id="c4d9f-109">Automatizzare i processi tanti possibili</span><span class="sxs-lookup"><span data-stu-id="c4d9f-109">Automate as many processes as possible</span></span>

<span data-ttu-id="c4d9f-110">I processi di distribuzione più affidabili sono automatizzati e *idempotente* &mdash; , ovvero ripetibili per produrre gli stessi risultati.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-110">The most reliable deployment processes are automated and *idempotent* &mdash; that is, repeatable to produce the same results.</span></span>

- <span data-ttu-id="c4d9f-111">Per automatizzare il provisioning delle risorse di Azure, è possibile usare [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform), [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet), [Azure PowerShell](/powershell/azure/overview), [interfaccia della riga di comando di Azure (CLI)](/cli/azure), o [modelli Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-111">To automate provisioning of Azure resources, you can use [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform),   [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet),   [Azure PowerShell](/powershell/azure/overview), [Azure command-line interface (CLI)](/cli/azure), or [Azure Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span></span>
- <span data-ttu-id="c4d9f-112">Per configurare le macchine virtuali, è possibile usare [cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (per VM Linux) o [configurazione dello stato di automazione di Azure](/azure/automation/automation-dsc-overview) (DSC).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-112">To configure VMs, you can use [cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (for Linux VMs) or [Azure Automation State Configuration](/azure/automation/automation-dsc-overview) (DSC).</span></span>
- <span data-ttu-id="c4d9f-113">Per automatizzare la distribuzione di applicazioni, è possibile usare [servizi di Azure DevOps](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), o altre soluzioni di integrazione continua/recapito Continuo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-113">To automate application deployment, you can use [Azure DevOps Services](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), or other CI/CD solutions.</span></span>

<span data-ttu-id="c4d9f-114">Come procedura consigliata, creare un repository di script di automazione per categoria per l'accesso rapido, documentato con spiegazioni dei parametri ed esempi di uso di uno script.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-114">As a best practice, create a repository of categorized automation scripts for quick access, documented with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="c4d9f-115">Sincronizzare questa documentazione con le distribuzioni di Azure e designare una persona principale che gestisca il repository.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-115">Keep this documentation in sync with your Azure deployments, and designate a primary person to manage the repository.</span></span>

<span data-ttu-id="c4d9f-116">Gli script di automazione possono anche attivare le risorse su richiesta per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-116">Automation scripts can also activate resources on demand for disaster recovery.</span></span>

### <a name="use-code-to-provision-and-configure-infrastructure"></a><span data-ttu-id="c4d9f-117">Usare il codice per eseguire il provisioning e configurare l'infrastruttura</span><span class="sxs-lookup"><span data-stu-id="c4d9f-117">Use code to provision and configure infrastructure</span></span>

<span data-ttu-id="c4d9f-118">Questa procedura, denominata *infrastruttura come codice,* potrebbe usare un approccio dichiarativo o un approccio imperativo (o una combinazione di entrambi).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-118">This practice, called *infrastructure as code,* may use a declarative approach or an imperative approach (or a combination of both).</span></span>

- <span data-ttu-id="c4d9f-119">[Modelli di Resource Manager](/azure/azure-resource-manager/resource-group-overview#template-deployment) sono un esempio di un approccio dichiarativo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-119">[Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment) are an example of a declarative approach.</span></span>
- <span data-ttu-id="c4d9f-120">[PowerShell](/powershell/azure/overview) gli script sono un esempio di approccio imperativo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-120">[PowerShell](/powershell/azure/overview) scripts are an example of an imperative approach.</span></span>

### <a name="practice-immutable-infrastructure"></a><span data-ttu-id="c4d9f-121">Infrastruttura non modificabile di procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="c4d9f-121">Practice immutable infrastructure</span></span>

<span data-ttu-id="c4d9f-122">In altre parole, non modificare l'infrastruttura dopo la distribuzione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-122">In other words, don't modify infrastructure after it's deployed to production.</span></span> <span data-ttu-id="c4d9f-123">Dopo che sono state applicate modifiche ad hoc, si potrebbe non sapere esattamente cosa è cambiato, pertanto può essere difficile da risolvere i problemi del sistema.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-123">After ad hoc changes have been applied, you might not know exactly what has changed, so it can be difficult to troubleshoot the system.</span></span>

### <a name="automate-and-test-deployment-and-maintenance-tasks"></a><span data-ttu-id="c4d9f-124">Automatizzare e testare le attività di distribuzione e manutenzione</span><span class="sxs-lookup"><span data-stu-id="c4d9f-124">Automate and test deployment and maintenance tasks</span></span>

<span data-ttu-id="c4d9f-125"> Le applicazioni distribuite sono costituite da più parti che devono interagire tra loro.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-125">Distributed applications consist of multiple parts that must work together.</span></span> <span data-ttu-id="c4d9f-126">Distribuzione consigliabile sfruttare i meccanismi comprovati, ad esempio script, che è possibile aggiornare e convalidare la configurazione e automatizzare il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-126">Deployment should take advantage of proven mechanisms, such as scripts, that can update and validate configuration and automate the deployment process.</span></span> <span data-ttu-id="c4d9f-127">Testare tutti i processi completamente per garantire che gli errori non causino tempo di inattività aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-127">Test all processes fully to ensure that errors don't cause additional downtime.</span></span>

### <a name="implement-deployment-security-measures"></a><span data-ttu-id="c4d9f-128">Implementare misure di sicurezza di distribuzione</span><span class="sxs-lookup"><span data-stu-id="c4d9f-128">Implement deployment security measures</span></span>

<span data-ttu-id="c4d9f-129">Tutti gli strumenti di distribuzione devono includere le restrizioni di sicurezza per proteggere l'applicazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-129">All deployment tools must incorporate security restrictions to protect the deployed application.</span></span> <span data-ttu-id="c4d9f-130">Definire e applicare i criteri di distribuzione con attenzione e ridurre al minimo la necessità di intervento umano.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-130">Define and enforce deployment policies carefully, and minimize the need for human intervention.</span></span>

## <a name="deploy-to-multiple-regions-and-instances"></a><span data-ttu-id="c4d9f-131">Distribuire in più aree e le istanze</span><span class="sxs-lookup"><span data-stu-id="c4d9f-131">Deploy to multiple regions and instances</span></span>

<span data-ttu-id="c4d9f-132">Un'applicazione che dipende da una singola istanza di un servizio crea un singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-132">An application that depends on a single instance of a service creates a single point of failure.</span></span> <span data-ttu-id="c4d9f-133">Per migliorare la resilienza e scalabilità, eseguire il provisioning di più istanze.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-133">To improve resiliency and scalability, provision multiple instances.</span></span>

- <span data-ttu-id="c4d9f-134">Per [Servizio app di Azure](/azure/app-service/app-service-value-prop-what-is/) selezionare un [piano di servizio app](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) che offra più istanze.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-134">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span>
- <span data-ttu-id="c4d9f-135">Per la [servizi Cloud di Azure](/azure/cloud-services/cloud-services-choose-me), configurare ognuno dei ruoli usare [più istanze](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-135">For [Azure Cloud Services](/azure/cloud-services/cloud-services-choose-me), configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span>
- <span data-ttu-id="c4d9f-136">Per la [macchine virtuali di Azure](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), assicurarsi che l'architettura include più di una macchina virtuale e che ogni macchina virtuale sia inclusa un [set di disponibilità](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-136">For [Azure Virtual Machines](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your architecture includes more than one VM and that each VM is included in an [availability set](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span></span>

### <a name="consider-deploying-across-multiple-regions"></a><span data-ttu-id="c4d9f-137">È consigliabile distribuire in più aree</span><span class="sxs-lookup"><span data-stu-id="c4d9f-137">Consider deploying across multiple regions</span></span>

<span data-ttu-id="c4d9f-138">È consigliabile distribuire tutti, ma le applicazioni meno critiche e i servizi delle applicazioni in più aree.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-138">We recommend deploying all but the least critical applications and application services across multiple regions.</span></span> <span data-ttu-id="c4d9f-139">Se l'applicazione viene distribuita in una singola area, nel raro caso che l'intera area diventi non disponibile, l'applicazione anche sarà disponibile.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-139">If your application is deployed to a single region, in the rare event that the entire region becomes unavailable, the application will also be unavailable.</span></span>

<span data-ttu-id="c4d9f-140">Se si sceglie di distribuire in una singola area, prendere in considerazione la preparazione per la ridistribuzione in un'area secondaria in risposta a un errore imprevisto.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-140">If you choose to deploy to a single region, consider preparing to redeploy to a secondary region as a response to an unexpected failure.</span></span>

### <a name="redeploy-to-a-secondary-region"></a><span data-ttu-id="c4d9f-141">Ridistribuzione in un'area secondaria</span><span class="sxs-lookup"><span data-stu-id="c4d9f-141">Redeploy to a secondary region</span></span>

<span data-ttu-id="c4d9f-142">Se si eseguono applicazioni e database in un'area primaria singola senza replica, potrebbe essere la strategia di ripristino per la ridistribuzione in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-142">If you run applications and databases in a single, primary region with no replication, your recovery strategy might be to redeploy to another region.</span></span> <span data-ttu-id="c4d9f-143">Questa soluzione è economica ma più appropriato per applicazioni non critiche che tollerano tempi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-143">This solution is affordable but most appropriate for non-critical applications that can tolerate longer recovery times.</span></span>

<span data-ttu-id="c4d9f-144">Se si sceglie questa strategia, automatizzare il processo di ridistribuzione quanto più possibile e includono gli scenari di ridistribuzione in test sulla risposta di emergenza.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-144">If you choose this strategy, automate the redeployment process as much as possible and include redeployment scenarios in your disaster response testing.</span></span>

<span data-ttu-id="c4d9f-145">Per automatizzare il processo di ridistribuzione, è consigliabile usare [Azure Site Recovery](/azure/site-recovery/).</span><span class="sxs-lookup"><span data-stu-id="c4d9f-145">To automate your redeployment process, consider using [Azure Site Recovery](/azure/site-recovery/).</span></span>

## <a name="use-staging-and-production-environments"></a><span data-ttu-id="c4d9f-146">Usare gli ambienti di staging e produzione</span><span class="sxs-lookup"><span data-stu-id="c4d9f-146">Use staging and production environments</span></span>

<span data-ttu-id="c4d9f-147">Con buon uso di ambienti di staging e produzione, è possibile eseguire il push degli aggiornamenti nell'ambiente di produzione in modo molto controllato e ridurre al minimo l'interruzione da problemi di distribuzione non prevedibili.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-147">With good use of staging and production environments, you can push updates to the production environment in a highly controlled way and minimize disruption from unanticipated deployment issues.</span></span>

- <span data-ttu-id="c4d9f-148">[*Distribuzione di tipo blu-verde*](https://martinfowler.com/bliki/BlueGreenDeployment.html) prevede la distribuzione di un aggiornamento in un ambiente di produzione separato dall'applicazione live.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-148">[*Blue-green deployment*](https://martinfowler.com/bliki/BlueGreenDeployment.html) involves deploying an update into a production environment that's separate from the live application.</span></span> <span data-ttu-id="c4d9f-149">Dopo la convalida della distribuzione, commutare il routing del traffico alla versione aggiornata.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-149">After you validate the deployment, switch the traffic routing to the updated version.</span></span> <span data-ttu-id="c4d9f-150">A tal fine consiste nell'usare la [slot di staging](/azure/app-service/web-sites-staged-publishing) disponibili nel servizio App di Azure per inserire temporaneamente una distribuzione prima di spostarla nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-150">One way to do this is to use the [staging slots](/azure/app-service/web-sites-staged-publishing) available in Azure App Service to stage a deployment before moving it to production.</span></span>
- <span data-ttu-id="c4d9f-151">[*Versioni canary*](https://martinfowler.com/bliki/CanaryRelease.html) sono simili alle distribuzioni di tipo blu-verde.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-151">[*Canary releases*](https://martinfowler.com/bliki/CanaryRelease.html) are similar to blue-green deployments.</span></span> <span data-ttu-id="c4d9f-152">Anziché commutare tutto il traffico per l'applicazione aggiornata, indirizzare solo una piccola parte del traffico verso la nuova distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-152">Instead of switching all traffic to the updated application, you route only a small portion of the traffic to the new deployment.</span></span> <span data-ttu-id="c4d9f-153">Se si è verificato un problema, ripristinare la distribuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-153">If there's a problem, revert to the old deployment.</span></span> <span data-ttu-id="c4d9f-154">In caso contrario gradualmente indirizzare più traffico alla nuova versione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-154">If not, gradually route more traffic to the new version.</span></span> <span data-ttu-id="c4d9f-155">Se si usa servizio App di Azure, è possibile usare il test nella funzionalità di produzione per gestire una versione canary.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-155">If you're using Azure App Service, you can use the Testing in production feature to manage a canary release.</span></span>

## <a name="create-a-rollback-plan-for-deployment-and-updates"></a><span data-ttu-id="c4d9f-156">Creare un piano di ripristino per la distribuzione e aggiornamenti</span><span class="sxs-lookup"><span data-stu-id="c4d9f-156">Create a rollback plan for deployment and updates</span></span>

<span data-ttu-id="c4d9f-157">Se una distribuzione non riesce, l'applicazione potrebbe diventare non disponibile.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-157">If a deployment fails, your application could become unavailable.</span></span> <span data-ttu-id="c4d9f-158">Per ridurre al minimo i tempi di inattività, progettare un processo di ripristino dello stato precedente per tornare a una versione valida ultimo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-158">To minimize downtime, design a rollback process to go back to a last-known good version.</span></span> <span data-ttu-id="c4d9f-159">Prevedere una strategia per eseguire il rollback delle modifiche ai database e tutti gli altri servizi che dipende l'app.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-159">Include a strategy to roll back changes to databases and any other services your app depends on.</span></span>

<span data-ttu-id="c4d9f-160">Se si usa servizio App di Azure, è possibile configurare uno slot di sito valido ultimo e usarlo per eseguire il rollback di una distribuzione di app di API o web.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-160">If you're using Azure App Service, you can set up a last-known good site slot and use it to roll back from a web or API app deployment.</span></span>

## <a name="log-and-audit-deployments"></a><span data-ttu-id="c4d9f-161">Distribuzioni di log e controllo</span><span class="sxs-lookup"><span data-stu-id="c4d9f-161">Log and audit deployments</span></span>

<span data-ttu-id="c4d9f-162">Per acquisire come informazioni molto specifiche della versione possibili, implementare una strategia di registrazione affidabile.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-162">To capture as much version-specific information as possible, implement a robust logging strategy.</span></span> <span data-ttu-id="c4d9f-163">Se si usano tecniche di pre-distribuzione, verrà eseguito più di una versione dell'applicazione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-163">If you use staged deployment techniques, more than one version of your application will be running in production.</span></span> <span data-ttu-id="c4d9f-164">Se si verifica un problema, determinare quale versione rappresenta la causa.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-164">If a problem occurs, determine which version is causing it.</span></span>

## <a name="document-release-processes"></a><span data-ttu-id="c4d9f-165">Processi di rilascio di documento</span><span class="sxs-lookup"><span data-stu-id="c4d9f-165">Document release processes</span></span>

<span data-ttu-id="c4d9f-166">Senza la documentazione di processo di rilascio dettagliati, un operatore potrebbe distribuire un aggiornamento non valido o in modo non corretto può configurare le impostazioni per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-166">Without detailed release process documentation, an operator might deploy a bad update or might improperly configure settings for your application.</span></span> <span data-ttu-id="c4d9f-167">Definire e documentare chiaramente il processo di rilascio e assicurarsi che sia disponibile a tutto il team operativo.</span><span class="sxs-lookup"><span data-stu-id="c4d9f-167">Clearly define and document your release process, and ensure that it's available to the entire operations team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c4d9f-168">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="c4d9f-168">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="c4d9f-169">Monitorare l'integrità dell'applicazione per l'affidabilità</span><span class="sxs-lookup"><span data-stu-id="c4d9f-169">Monitor application health for reliability</span></span>](./monitoring.md)
