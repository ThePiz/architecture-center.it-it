---
title: Business intelligence aziendale con SQL Data Warehouse
description: Usare Azure per ottenere informazioni aziendali dettagliate da dati relazionali archiviati in locale
author: alexbuckgit
ms.date: 04/13/2018
ms.openlocfilehash: b5e5aa32fc9cc8c7b8b5a42c9a4fc3e0216b2f72
ms.sourcegitcommit: f665226cec96ec818ca06ac6c2d83edb23c9f29c
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/16/2018
ms.locfileid: "31012837"
---
# <a name="enterprise-bi-with-sql-data-warehouse"></a><span data-ttu-id="ac2a1-103">Business intelligence aziendale con SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-103">Enterprise BI with SQL Data Warehouse</span></span>
 
<span data-ttu-id="ac2a1-104">Questa architettura di riferimento implementa una pipeline [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (extract-load-transform) che sposta i dati da un database di SQL Server locale in SQL Data Warehouse e trasforma i dati per l'analisi.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-104">This reference architecture implements an [ELT](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) (extract-load-transform) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span> [<span data-ttu-id="ac2a1-105">**Distribuire questa soluzione**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

![](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="ac2a1-106">**Scenario**: un'organizzazione ha un ampio set di dati OLTP archiviati in un database di SQL Server locale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-106">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="ac2a1-107">L'organizzazione vuole usare SQL Data Warehouse per eseguire l'analisi tramite Power BI.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-107">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span> 

<span data-ttu-id="ac2a1-108">Questa architettura di riferimento è progettata per processi occasionali o su richiesta.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-108">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="ac2a1-109">Per spostare i dati in modo continuativo (con cadenza oraria o giornaliera) è consigliabile usare Azure Data Factory per definire un flusso di lavoro automatizzato.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-109">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span>

## <a name="architecture"></a><span data-ttu-id="ac2a1-110">Architecture</span><span class="sxs-lookup"><span data-stu-id="ac2a1-110">Architecture</span></span>

<span data-ttu-id="ac2a1-111">L'architettura è costituita dai componenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-111">The architecture consists of the following components.</span></span>

<span data-ttu-id="ac2a1-112">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-112">**SQL Server**.</span></span> <span data-ttu-id="ac2a1-113">I dati di origine si trovano in un database di SQL Server locale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-113">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="ac2a1-114">Per simulare l'ambiente locale, gli script di distribuzione per questa architettura eseguono il provisioning di una macchina virtuale in Azure con SQL Server installato.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-114">To simulate the on-premises environment, the deployment scripts for this architecture provision a virtual machine in Azure with SQL Server installed.</span></span> 

<span data-ttu-id="ac2a1-115">**Archiviazione BLOB**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-115">**Blob Storage**.</span></span> <span data-ttu-id="ac2a1-116">L'archiviazione BLOB viene usata come area di staging per copiare i dati prima di caricarli in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-116">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="ac2a1-117">**Azure SQL Data Warehouse**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-117">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="ac2a1-118">[SQL Data Warehouse](/azure/sql-data-warehouse/) è un sistema distribuito progettato per eseguire analisi su dati di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-118">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="ac2a1-119">Supporta l'elaborazione parallela su larga scala (MPP), che può essere usata per l'esecuzione di analisi ad alte prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-119">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span> 

<span data-ttu-id="ac2a1-120">**Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-120">**Azure Analysis Services**.</span></span> <span data-ttu-id="ac2a1-121">[Analysis Services](/azure/analysis-services/) è un servizio completamente gestito che offre funzionalità di creazione di modelli di dati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-121">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="ac2a1-122">Usare Analysis Services per creare un modello semantico in cui gli utenti possono eseguire query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-122">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="ac2a1-123">Analysis Services è particolarmente utile in uno scenario di dashboard di Business Intelligence.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-123">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="ac2a1-124">In questa architettura, Analysis Services legge i dati dal data warehouse per elaborare il modello semantico e gestisce in modo efficiente le query dashboard.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-124">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="ac2a1-125">Analysis Services supporta anche la concorrenza elastica, tramite il ridimensionamento di repliche per un'elaborazione delle query più veloce.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-125">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="ac2a1-126">Attualmente, Azure Analysis Services supporta modelli tabulari, ma non modelli multidimensionali.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-126">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="ac2a1-127">I modelli tabulari usano costrutti di modellazione relazionale (tabelle e colonne), mentre i modelli multidimensionali usano costrutti di modellazione OLAP (cubi, dimensioni e misure).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-127">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="ac2a1-128">Se sono necessari i modelli multidimensionali, usare SQL Server Analysis Services (SSAS).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-128">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="ac2a1-129">Per altre informazioni, vedere [Confronto tra soluzioni tabulari e multidimensionali](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-129">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="ac2a1-130">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-130">**Power BI**.</span></span> <span data-ttu-id="ac2a1-131">Power BI è una suite di strumenti di analisi aziendale che consente di analizzare dati e condividere informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-131">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="ac2a1-132">In questa architettura viene eseguita una query del modello semantico archiviato in Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-132">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

<span data-ttu-id="ac2a1-133">**Azure Active Directory** (Azure AD) autentica gli utenti che si connettono al server di Analysis Services tramite Power BI.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-133">**Azure Active Directory** (Azure AD) authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="ac2a1-134">Data Pipeline</span><span class="sxs-lookup"><span data-stu-id="ac2a1-134">Data Pipeline</span></span>
 
<span data-ttu-id="ac2a1-135">Questa architettura di riferimento usa il database di esempio [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) come origine dati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-135">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as data source.</span></span> <span data-ttu-id="ac2a1-136">La pipeline di dati contiene le fasi seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-136">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="ac2a1-137">Esportare i dati da SQL Server in file flat (utilità bcp).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-137">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="ac2a1-138">Copiare i file flat in Archiviazione BLOB di Azure (AzCopy).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-138">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="ac2a1-139">Caricare i dati in SQL Data Warehouse (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-139">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="ac2a1-140">Trasformare i dati in uno schema star (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-140">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="ac2a1-141">Caricare un modello semantico in Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-141">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![](./images/enterprise-bi-sqldw-pipeline.png)
 
> [!NOTE]
> <span data-ttu-id="ac2a1-142">Per i passaggi 1 &ndash; 3, provare a usare Redgate Data Platform Studio.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-142">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="ac2a1-143">Data Platform Studio applica le correzioni e le ottimizzazioni di compatibilità più appropriate, motivo per cui è il modo più rapido per iniziare a utilizzare SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-143">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="ac2a1-144">Per altre informazioni, vedere [Caricare dati con Data Platform Studio di Redgate](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-144">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span> 

<span data-ttu-id="ac2a1-145">Le sezioni successive descrivono queste opzioni in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-145">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="ac2a1-146">Esportare dati da SQL Server</span><span class="sxs-lookup"><span data-stu-id="ac2a1-146">Export data from SQL Server</span></span>

<span data-ttu-id="ac2a1-147">L'utilità [bcp](/sql/tools/bcp-utility) (programma di copia bulk) è un modo rapido per creare file flat di testo da tabelle SQL.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-147">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="ac2a1-148">In questo passaggio, si selezionano le colonne da esportare, ma non si trasforma alcun dato.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-148">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="ac2a1-149">Tutte le trasformazioni di dati saranno eseguite in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-149">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="ac2a1-150">**Raccomandazioni**</span><span class="sxs-lookup"><span data-stu-id="ac2a1-150">**Recommendations**</span></span>

<span data-ttu-id="ac2a1-151">Se possibile, pianificare l'estrazione dei dati durante le fasce orarie non di punta, per ridurre il contenuto di risorse nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-151">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span> 

<span data-ttu-id="ac2a1-152">Evitare di eseguire bcp nel server di database.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-152">Avoid running bcp on the database server.</span></span> <span data-ttu-id="ac2a1-153">Eseguirlo invece da un altro computer.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-153">Instead, run it from another machine.</span></span> <span data-ttu-id="ac2a1-154">Scrivere i file in un'unità locale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-154">Write the files to a local drive.</span></span> <span data-ttu-id="ac2a1-155">Assicurarsi di disporre di risorse I/O sufficienti per gestire le operazioni di scrittura simultanee.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-155">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="ac2a1-156">Per prestazioni ottimali, esportare i file in unità di archiviazione rapida dedicate.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-156">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="ac2a1-157">È possibile velocizzare il trasferimento tramite rete salvando i dati esportati in formato compresso Gzip.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-157">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="ac2a1-158">Tuttavia, caricare file compressi è più lento anziché caricare file non compressi, pertanto vi è un compromesso tra maggiore velocità di trasferimento di rete e caricamento più rapido.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-158">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="ac2a1-159">Se si decide di usare la compressione Gzip, non creare un unico file Gzip.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-159">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="ac2a1-160">Al contrario, suddividere i dati in più file compressi.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-160">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="ac2a1-161">Copiare i file flat nell'archiviazione BLOB</span><span class="sxs-lookup"><span data-stu-id="ac2a1-161">Copy flat files into blob storage</span></span>

<span data-ttu-id="ac2a1-162">L'utilità [AzCopy](/azure/storage/common/storage-use-azcopy) è progettata per prestazioni elevate di copia dei dati nell'archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-162">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="ac2a1-163">**Raccomandazioni**</span><span class="sxs-lookup"><span data-stu-id="ac2a1-163">**Recommendations**</span></span>

<span data-ttu-id="ac2a1-164">Creare l'account di archiviazione in un'area vicina alla posizione dei dati di origine.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-164">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="ac2a1-165">Distribuire l'account di archiviazione e l'istanza di SQL Data Warehouse nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-165">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span> 

<span data-ttu-id="ac2a1-166">Non eseguire AzCopy nello stesso computer che esegue i carichi di lavoro di produzione, perché il consumo di CPU e I/O può interferire con il carico di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-166">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span> 

<span data-ttu-id="ac2a1-167">Testare prima il caricamento per verificarne la velocità.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-167">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="ac2a1-168">È possibile usare l'opzione /NC in AzCopy per specificare il numero di operazioni di copia simultanee.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-168">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="ac2a1-169">Iniziare con il valore predefinito, quindi provare a usare questa impostazione per ottimizzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-169">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="ac2a1-170">In un ambiente con una larghezza di banda ridotta, troppe operazioni simultanee possono sovraccaricare la connessione di rete e impedire il corretto completamento delle operazioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-170">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>  

<span data-ttu-id="ac2a1-171">AZCopy sposta i dati in archiviazione tramite Internet pubblico.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-171">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="ac2a1-172">Se ciò non è sufficientemente veloce, è consigliabile configurare un circuito [ExpressRoute](/azure/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-172">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="ac2a1-173">ExpressRoute è un servizio che instrada i dati tramite una connessione privata dedicata ad Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-173">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="ac2a1-174">Se la connessione di rete è troppo lenta, un'altra opzione consiste nello spedire fisicamente i dati su disco in un data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-174">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="ac2a1-175">Per altre informazioni, vedere [Trasferimento dei dati da e verso Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-175">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="ac2a1-176">Durante un'operazione di copia, AzCopy crea un file journal temporaneo, che consente ad AzCopy di riavviare l'operazione se questa viene interrotta (ad esempio, a causa di un errore di rete).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-176">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="ac2a1-177">Assicurarsi che vi sia spazio su disco sufficiente per archiviare i file journal.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-177">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="ac2a1-178">È possibile usare l'opzione /Z per specificare dove scrivere i file journal.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-178">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="ac2a1-179">Caricare dati in SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-179">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="ac2a1-180">Usare [PolyBase](/sql/relational-databases/polybase/polybase-guide) per caricare i file dall'archivio BLOB nel data warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-180">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="ac2a1-181">PolyBase è progettato per sfruttare l'architettura MPP (Massively Parallel Processing, elaborazione parallela massiva) di SQL Data Warehouse, che lo rende il modo più rapido di caricare dati in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-181">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span> 

<span data-ttu-id="ac2a1-182">Il caricamento dei dati è un processo in due passaggi:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-182">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="ac2a1-183">Creare un set di tabelle esterne per i dati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-183">Create a set of external tables for the data.</span></span> <span data-ttu-id="ac2a1-184">Una tabella esterna è una definizione di tabella che punta ai dati archiviati all'esterno del warehouse &mdash;, in questo caso, i file flat nell'archivio BLOB.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-184">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="ac2a1-185">Questo passaggio non sposta i dati nel warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-185">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="ac2a1-186">Creare tabelle di staging e caricare i dati nelle tabelle di staging.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-186">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="ac2a1-187">Questo passaggio consiste nel copiare i dati nel warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-187">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="ac2a1-188">**Raccomandazioni**</span><span class="sxs-lookup"><span data-stu-id="ac2a1-188">**Recommendations**</span></span>

<span data-ttu-id="ac2a1-189">Prendere in considerazione SQL Data Warehouse quando si hanno grandi quantità di dati (più di 1 TB) ed è in esecuzione un carico di lavoro analitico che può trarre vantaggio dal parallelismo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-189">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="ac2a1-190">SQL Data Warehouse non è una scelta ottimale per carichi di lavoro OLTP o set di dati più piccoli (< 250GB).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-190">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="ac2a1-191">Per i set di dati inferiori a 250GB, provare Database SQL di Azure o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-191">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="ac2a1-192">Per altre informazioni, vedere [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-192">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="ac2a1-193">Creare le tabelle di staging come tabelle heap, che non sono indicizzate.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-193">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="ac2a1-194">Le query che creano le tabelle di produzione comporteranno una scansione di tabella completa; pertanto, non esiste alcun motivo per indicizzare le tabelle di staging.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-194">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="ac2a1-195">PolyBase sfrutta automaticamente il parallelismo nel warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-195">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="ac2a1-196">Le prestazioni di caricamento vengono ridimensionate con l'aumento delle Unità Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-196">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="ac2a1-197">Per prestazioni ottimali, usare un'unica operazione di caricamento.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-197">For best performance, use a single load operation.</span></span> <span data-ttu-id="ac2a1-198">Suddividendo i dati di input in blocchi ed eseguendo più caricamenti simultanei non vi è alcun miglioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-198">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="ac2a1-199">PolyBase è in grado di leggere dati compressi in file Gzip.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-199">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="ac2a1-200">Tuttavia, verrà usato solo un singolo lettore per ogni file compresso, poiché la decompressione del file è un'operazione a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-200">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="ac2a1-201">Pertanto, evitare di caricare un unico file compresso di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-201">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="ac2a1-202">Al contrario, suddividere i dati in più file compressi, per trarre vantaggio dal parallelismo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-202">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span> 

<span data-ttu-id="ac2a1-203">Tenere presente le limitazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-203">Be aware of the following limitations:</span></span>

- <span data-ttu-id="ac2a1-204">PolyBase supporta una dimensione massima delle colonne di `varchar(8000)`, `nvarchar(4000)`, o `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-204">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="ac2a1-205">Se sono presenti dati che superano questi limiti, un'opzione consiste nel suddividere i dati in blocchi al momento dell'esportazione e quindi riunire i blocchi dopo l'importazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-205">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span> 

- <span data-ttu-id="ac2a1-206">PolyBase impone un carattere di terminazione di riga fisso \n o una nuova riga.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-206">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="ac2a1-207">Ciò può comportare problemi se sono presenti caratteri di nuova riga nei dati di origine.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-207">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="ac2a1-208">Lo schema di origine dati potrebbe contenere tipi di dati che non sono supportati in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-208">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="ac2a1-209">Per risolvere queste limitazioni, è possibile creare una stored procedure che esegue le conversioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-209">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="ac2a1-210">Quando si esegue bcp, fare riferimento a questa stored procedure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-210">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="ac2a1-211">In alternativa, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) converte automaticamente i tipi di dati che non sono supportati in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-211">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="ac2a1-212">Per altre informazioni, vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-212">For more information, see the following articles:</span></span>

- <span data-ttu-id="ac2a1-213">[Procedure consigliate per il caricamento dei dati in Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-213">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="ac2a1-214">Eseguire la migrazione degli schemi a SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-214">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="ac2a1-215">Linee guida per la definizione dei tipi di dati per le tabelle in SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-215">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="ac2a1-216">Trasformare i dati</span><span class="sxs-lookup"><span data-stu-id="ac2a1-216">Transform the data</span></span>

<span data-ttu-id="ac2a1-217">Trasformare i dati e spostarli in tabelle di produzione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-217">Transform the data and move it into production tables.</span></span> <span data-ttu-id="ac2a1-218">In questo passaggio, i dati vengono trasformati in uno schema star con tabelle delle dimensioni e tabelle dei fatti, adatte per la modellazione semantica.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-218">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="ac2a1-219">Creare le tabelle di produzione con indici columnstore cluster, che offrono le migliori prestazioni complessive delle query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-219">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="ac2a1-220">Gli indici columnstore sono ottimizzati per query di analisi di record numerosi.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-220">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="ac2a1-221">Gli indici columnstore non sono ottimali per le ricerche singleton (ossia per ricerche di una singola riga).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-221">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="ac2a1-222">Se è necessario eseguire ricerche singleton frequenti, è possibile aggiungere un indice non cluster a una tabella.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-222">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="ac2a1-223">Le ricerche singleton possono essere eseguite in modo notevolmente più veloce usando un indice non cluster.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-223">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="ac2a1-224">Tuttavia, le ricerche singleton sono in genere meno comuni negli scenari di data warehouse rispetto ai carichi di lavoro OLTP.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-224">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="ac2a1-225">Per altre informazioni, vedere [Indicizzazione di tabelle in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-225">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="ac2a1-226">Le tabelle columnstore cluster supportano tipi di dati `varchar(max)`, `nvarchar(max)`, o `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-226">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="ac2a1-227">In tal caso, prendere in considerazione un indice cluster o heap.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-227">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="ac2a1-228">È possibile inserire tali colonne in una tabella distinta.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-228">You might put those columns into a separate table.</span></span>

<span data-ttu-id="ac2a1-229">Poiché il database di esempio non è molto grande, sono state create tabelle replicate senza partizioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-229">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="ac2a1-230">Per i carichi di lavoro di produzione, è probabile che l'uso di tabelle distribuite migliori le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-230">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="ac2a1-231">Vedere [Linee guida per la progettazione di tabelle distribuite in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-231">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="ac2a1-232">Gli script di esempio eseguono le query usando un valore [classe di risorse](/azure/sql-data-warehouse/resource-classes-for-workload-management) statico.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-232">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="ac2a1-233">Caricare il modello semantico</span><span class="sxs-lookup"><span data-stu-id="ac2a1-233">Load the semantic model</span></span>

<span data-ttu-id="ac2a1-234">Caricare i dati in un modello tabulare in Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-234">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="ac2a1-235">In questo passaggio viene creato un modello di dati semantico tramite SQL Server Data Tools (SSDT).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-235">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="ac2a1-236">È anche possibile creare un modello tramite l'importazione da un file di Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-236">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="ac2a1-237">Poiché SQL Data Warehouse non supporta chiavi esterne, è necessario aggiungere le relazioni al modello semantico, in modo che sia possibile creare un join tra tabelle.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-237">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="ac2a1-238">Usare Power BI per visualizzare i dati</span><span class="sxs-lookup"><span data-stu-id="ac2a1-238">Use Power BI to visualize the data</span></span>

<span data-ttu-id="ac2a1-239">Power BI supporta due opzioni per la connessione ad Azure Analysis Services:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-239">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="ac2a1-240">Importazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-240">Import.</span></span> <span data-ttu-id="ac2a1-241">I dati sono importati nel modello Power BI.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-241">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="ac2a1-242">Connessione dinamica.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-242">Live Connection.</span></span> <span data-ttu-id="ac2a1-243">I dati vengono estratti direttamente da Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-243">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="ac2a1-244">La connessione dinamica è consigliabile poiché non richiede la copia dei dati nel modello di Power BI.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-244">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="ac2a1-245">DirectQuery assicura anche che i risultati siano sempre coerenti con gli ultimi dati di origine.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-245">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="ac2a1-246">Per altre informazioni, vedere [Stabilire la connessione con Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-246">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="ac2a1-247">**Raccomandazioni**</span><span class="sxs-lookup"><span data-stu-id="ac2a1-247">**Recommendations**</span></span>

<span data-ttu-id="ac2a1-248">Evitare di eseguire query dashboard BI direttamente sul data warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-248">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="ac2a1-249">I dashboard BI richiedono tempi di risposta molto bassi, indirizzando query che il warehouse potrebbe non essere in grado di soddisfare.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-249">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="ac2a1-250">Anche l'aggiornamento del dashboard viene considerato nel conteggio delle query simultanee, influendo potenzialmente sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-250">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span> 

<span data-ttu-id="ac2a1-251">Azure Analysis Services è progettato per gestire i requisiti di query di un dashboard BI, pertanto la procedura consigliata consiste nella query di Analysis Services da Power BI.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-251">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="ac2a1-252">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="ac2a1-252">Scalability Considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="ac2a1-253">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-253">SQL Data Warehouse</span></span>

<span data-ttu-id="ac2a1-254">Con SQL Data Warehouse è possibile scalare orizzontalmente le risorse di calcolo su richiesta.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-254">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="ac2a1-255">Il motore di query consente di ottimizzare le query per l'elaborazione parallela in base al numero di nodi di calcolo e sposta i dati tra i nodi in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-255">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="ac2a1-256">Per altre informazioni, vedere [Gestire la potenza di calcolo in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-256">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="ac2a1-257">Analysis Services</span><span class="sxs-lookup"><span data-stu-id="ac2a1-257">Analysis Services</span></span>

<span data-ttu-id="ac2a1-258">Per i carichi di lavoro di produzione si consiglia il livello Standard per Azure Analysis Services, poiché supporta il partizionamento e DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-258">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="ac2a1-259">All'interno di un livello, le dimensioni dell'istanza determinano la capacità di elaborazione e di memoria.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-259">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="ac2a1-260">La capacità di elaborazione viene misurata in unità di elaborazione di query (QPU).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-260">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="ac2a1-261">Monitorare l'uso di QPU per selezionare le dimensioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-261">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="ac2a1-262">Per altre informazioni, vedere [Monitorare le metriche del server](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-262">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="ac2a1-263">Un carico elevato può compromettere le prestazioni delle query a causa della concorrenza tra query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-263">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="ac2a1-264">È possibile scalare orizzontalmente Analysis Services mediante la creazione di un pool di repliche per l'elaborazione delle query, in modo da eseguire più query contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-264">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="ac2a1-265">Le operazioni di elaborazione del modello di dati avvengono sempre nel server primario.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-265">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="ac2a1-266">Per impostazione predefinita, il server primario gestisce anche le query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-266">By default, the primary server also handles queries.</span></span> <span data-ttu-id="ac2a1-267">È possibile designare facoltativamente il server primario perché esegua l'elaborazione in modo esclusivo, così che il pool di query gestisca tutte le query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-267">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="ac2a1-268">In caso di requisiti di elaborazione elevati, è opportuno separare l'elaborazione dal pool di query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-268">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="ac2a1-269">In caso di carichi di query elevati e di un'elaborazione relativamente leggera, è possibile includere il server primario nel pool di query.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-269">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="ac2a1-270">Per altre informazioni, vedere [Ridimensionamento orizzontale di Azure Analysis Services](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-270">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span> 

<span data-ttu-id="ac2a1-271">Per ridurre la quantità di elaborazione non necessaria è consigliabile usare partizioni per dividere il modello tabulare in parti logiche.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-271">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="ac2a1-272">Ogni partizione può essere elaborate separatamente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-272">Each partition can be processed separately.</span></span> <span data-ttu-id="ac2a1-273">Per altre informazioni, vedere [Partizioni](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-273">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="ac2a1-274">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="ac2a1-274">Security Considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="ac2a1-275">Inserimento nell'elenco di IP consentiti di client di Analysis Services</span><span class="sxs-lookup"><span data-stu-id="ac2a1-275">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="ac2a1-276">È consigliabile usare la funzionalità firewall di Analysis Services per inserire gli indirizzi IP client nell'elenco di IP consentiti.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-276">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="ac2a1-277">Se abilitato, il firewall blocca tutte le connessioni client non specificate nelle regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-277">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="ac2a1-278">Secondo le regole predefinite il servizio Power BI viene inserito nell'elenco di IP consentiti, ma è possibile disabilitare questa regola se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-278">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="ac2a1-279">Per altre informazioni, vedere [Applicare la protezione avanzata ad Azure Analysis Services con la nuova funzionalità firewall](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-279">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="ac2a1-280">Authorization</span><span class="sxs-lookup"><span data-stu-id="ac2a1-280">Authorization</span></span>

<span data-ttu-id="ac2a1-281">Azure Analysis Services usa Azure Active Directory (Azure AD) per autenticare gli utenti che si connettono al server di Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-281">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="ac2a1-282">È possibile limitare i dati che un determinato utente è in grado di visualizzare creando dei ruoli e quindi assegnando gli utenti o gruppi di Azure AD a tali ruoli.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-282">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="ac2a1-283">Per ogni ruolo è possibile:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-283">For each role, you can:</span></span> 

- <span data-ttu-id="ac2a1-284">Proteggere le singole colonne o tabelle.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-284">Protect tables or individual columns.</span></span> 
- <span data-ttu-id="ac2a1-285">Proteggere le singole righe in base a espressioni filtro.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-285">Protect individual rows based on filter expressions.</span></span> 

<span data-ttu-id="ac2a1-286">Per altre informazioni, vedere [Gestire ruoli del database e utenti](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-286">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="ac2a1-287">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="ac2a1-287">Deploy the solution</span></span>

<span data-ttu-id="ac2a1-288">Una distribuzione di questa architettura di riferimento è disponibile in [GitHub][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="ac2a1-288">A deployment for this reference architecture is available on [GitHub][ref-arch-repo-folder].</span></span> <span data-ttu-id="ac2a1-289">Ecco cosa viene distribuito:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-289">It deploys the following:</span></span>

  * <span data-ttu-id="ac2a1-290">Una macchina virtuale di Windows per simulare un server di database locale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-290">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="ac2a1-291">Include SQL Server 2017 e strumenti correlati, assieme a Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-291">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
  * <span data-ttu-id="ac2a1-292">Un account di archiviazione di Azure che fornisce l'archiviazione BLOB per conservare i dati esportati dal database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-292">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
  * <span data-ttu-id="ac2a1-293">Un'istanza di Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-293">An Azure SQL Data Warehouse instance.</span></span>
  * <span data-ttu-id="ac2a1-294">Un'istanza di Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-294">An Azure Analysis Services instance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="ac2a1-295">prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ac2a1-295">Prerequisites</span></span>

1. <span data-ttu-id="ac2a1-296">Clonare, creare una copia tramite fork o scaricare il file ZIP per il repository GitHub delle [architetture di riferimento di Azure][ref-arch-repo].</span><span class="sxs-lookup"><span data-stu-id="ac2a1-296">Clone, fork, or download the zip file for the [Azure reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="ac2a1-297">Installare i [blocchi predefiniti di Azure][azbb-wiki] (azbb).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-297">Install the [Azure Building Blocks][azbb-wiki] (azbb).</span></span>

3. <span data-ttu-id="ac2a1-298">Al prompt dei comandi, di Bash o di PowerShell accedere all'account Azure con questo comando e seguire le istruzioni.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-298">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using the command below and following the instructions.</span></span>

  ```bash
  az login  
  ```

### <a name="deploy-the-simulated-on-premises-server"></a><span data-ttu-id="ac2a1-299">Distribuire il server locale simulato</span><span class="sxs-lookup"><span data-stu-id="ac2a1-299">Deploy the simulated on-premises server</span></span>

<span data-ttu-id="ac2a1-300">Innanzitutto verrà distribuita una macchina virtuale come server locale simulato, che include SQL Server 2017 e strumenti correlati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-300">First you'll deploy a VM as a simulated on-premises server, which includes SQL Server 2017 and related tools.</span></span> <span data-ttu-id="ac2a1-301">In questo passaggio viene caricato anche il [database Wide World Importers OLTP](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) di esempio in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-301">This step also loads the sample [Wide World Importers OLTP database](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) into SQL Server.</span></span>

1. <span data-ttu-id="ac2a1-302">Passare alla cartella `data\enterprise-bi-sqldw\onprem\templates` del repository scaricato nel passaggio dei prerequisiti precedente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-302">Navigate to the `data\enterprise-bi-sqldw\onprem\templates` folder of the repository you downloaded in the prerequisites above.</span></span>

2. <span data-ttu-id="ac2a1-303">Nel file `onprem.parameters.json`, sostituire i valori per `adminUsername` e `adminPassword`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-303">In the `onprem.parameters.json` file, replace the values for `adminUsername` and `adminPassword`.</span></span> <span data-ttu-id="ac2a1-304">Modificare anche i valori della sezione `SqlUserCredentials` in modo che corrispondano al nome utente e alla password.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-304">Also change the values in the `SqlUserCredentials` section to match the user name and password.</span></span> <span data-ttu-id="ac2a1-305">Si noti il prefisso `.\\` nella proprietà Nome utente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-305">Note the `.\\` prefix in the userName property.</span></span>
    
    ```bash
    "SqlUserCredentials": {
      "userName": ".\\username",
      "password": "password"
    }
    ```

3. <span data-ttu-id="ac2a1-306">Eseguire `azbb` come illustrato di seguito per distribuire il server locale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-306">Run `azbb` as shown below to deploy the on-premises server.</span></span>

    ```bash
    azbb -s <subscription_id> -g <resource_group_name> -l <location> -p onprem.parameters.json --deploy
    ```

4. <span data-ttu-id="ac2a1-307">La distribuzione potrebbe richiedere dai 20 ai 30 minuti, inclusa l'esecuzione dello script [DSC](/powershell/dsc/overview) per installare gli strumenti e il ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-307">The deployment may take 20 to 30 minutes to complete, which includes running the [DSC](/powershell/dsc/overview) script to install the tools and restore the database.</span></span> <span data-ttu-id="ac2a1-308">Verificare la distribuzione nel portale di Azure esaminando le risorse nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-308">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="ac2a1-309">Verrà visualizzata la macchina virtuale `sql-vm1` e le risorse associate.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-309">You should see the `sql-vm1` virtual machine and its associated resources.</span></span>

### <a name="deploy-the-azure-resources"></a><span data-ttu-id="ac2a1-310">Distribuire le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="ac2a1-310">Deploy the Azure resources</span></span>

<span data-ttu-id="ac2a1-311">In questo passaggio viene eseguito il provisioning di Azure SQL Data Warehouse e Azure Analysis Services, assieme a un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-311">This step provisions Azure SQL Data Warehouse and Azure Analysis Services, along with a Storage account.</span></span> <span data-ttu-id="ac2a1-312">Se lo si desidera, è possibile eseguire questo passaggio in parallelo con il passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-312">If you want, you can run this step in parallel with the previous step.</span></span>

1. <span data-ttu-id="ac2a1-313">Passare alla cartella `data\enterprise-bi-sqldw\azure\templates` del repository scaricato nel passaggio dei prerequisiti precedente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-313">Navigate to the `data\enterprise-bi-sqldw\azure\templates` folder of the repository you downloaded in the prerequisites above.</span></span>

2. <span data-ttu-id="ac2a1-314">Eseguire il seguente comando dell'interfaccia della riga di comando di Azure per creare un gruppo di risorse, sostituendo i parametri tra parentesi quadre specificati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-314">Run the following Azure CLI command to create a resource group, replacing the bracketed parameters specified.</span></span> <span data-ttu-id="ac2a1-315">Si noti che è possibile eseguire la distribuzione in un gruppo di risorse diverso rispetto a quello usato per il server locale nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-315">Note that you can deploy to a different resource group than you used for the on-premises server in the previous step.</span></span> 

    ```bash
    az group create --name <resource_group_name> --location <location>  
    ```

3. <span data-ttu-id="ac2a1-316">Eseguire il seguente comando dell'interfaccia della riga di comando di Azure per distribuire le risorse di Azure, sostituendo i parametri tra parentesi quadre specificati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-316">Run the following Azure CLI command to deploy the Azure resources, replacing the bracketed parameters specified.</span></span> <span data-ttu-id="ac2a1-317">Il parametro `storageAccountName` deve seguire le [regole di denominazione](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) per gli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-317">The `storageAccountName` parameter must follow the [naming rules](../../best-practices/naming-conventions.md#naming-rules-and-restrictions) for Storage accounts.</span></span> <span data-ttu-id="ac2a1-318">Per il parametro `analysisServerAdmin`, usare il nome dell'entità utente (UPN) di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-318">For the `analysisServerAdmin` parameter, use your Azure Active Directory user principal name (UPN).</span></span>

    ```bash
    az group deployment create --resource-group <resource_group_name> --template-file azure-resources-deploy.json --parameters "dwServerName"="<server_name>" "dwAdminLogin"="<admin_username>" "dwAdminPassword"="<password>" "storageAccountName"="<storage_account_name>" "analysisServerName"="<analysis_server_name>" "analysisServerAdmin"="user@contoso.com"
    ```

4. <span data-ttu-id="ac2a1-319">Verificare la distribuzione nel portale di Azure esaminando le risorse nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-319">Verify the deployment in the Azure portal by reviewing the resources in the resource group.</span></span> <span data-ttu-id="ac2a1-320">Verrà visualizzato un account di archiviazione, un'istanza di Azure SQL Data Warehouse e un'istanza di Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-320">You should see a storage account, Azure SQL Data Warehouse instance, and Analysis Services instance.</span></span>

5. <span data-ttu-id="ac2a1-321">Usare il portale di Azure per ottenere la chiave di accesso per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-321">Use the Azure portal to get the access key for the storage account.</span></span> <span data-ttu-id="ac2a1-322">Selezionare l'account di archiviazione per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-322">Select the storage account to open it.</span></span> <span data-ttu-id="ac2a1-323">In **Impostazioni** selezionare **Chiavi di accesso**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-323">Under **Settings**, select **Access keys**.</span></span> <span data-ttu-id="ac2a1-324">Prendere nota del valore della chiave primaria,</span><span class="sxs-lookup"><span data-stu-id="ac2a1-324">Copy the primary key value.</span></span> <span data-ttu-id="ac2a1-325">che sarà necessario nel passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-325">You will use it in the next step.</span></span>

### <a name="export-the-source-data-to-azure-blob-storage"></a><span data-ttu-id="ac2a1-326">Esportare i dati di origine in Archivio BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="ac2a1-326">Export the source data to Azure Blob storage</span></span> 

<span data-ttu-id="ac2a1-327">In questo passaggio verrà eseguito uno script di PowerShell che usa bcp per esportare il database SQL in file flat nella macchina virtuale e quindi AzCopy per copiare tali file in Archivio BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-327">In this step, you will run a PowerShell script that uses bcp to export the SQL database to flat files on the VM, and then uses AzCopy to copy those files into Azure Blob Storage.</span></span>

1. <span data-ttu-id="ac2a1-328">Connettersi alla macchina virtuale locale simulata tramite desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-328">Use Remote Desktop to connect to the simulated on-premises VM.</span></span>

2. <span data-ttu-id="ac2a1-329">Una volta eseguita la connessione alla macchina virtuale, eseguire i comandi seguenti da una finestra di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-329">While logged into the VM, run the following commands from a PowerShell window.</span></span>  

    ```powershell
    cd 'C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\onprem'

    .\Load_SourceData_To_Blob.ps1 -File .\sql_scripts\db_objects.txt -Destination 'https://<storage_account_name>.blob.core.windows.net/wwi' -StorageAccountKey '<storage_account_key>'
    ```

    <span data-ttu-id="ac2a1-330">Per il parametro `Destination`, sostituire `<storage_account_name>` con il nome dell'account di archiviazione creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-330">For the `Destination` parameter, replace `<storage_account_name>` with the name the Storage account that you created previously.</span></span> <span data-ttu-id="ac2a1-331">Per il parametro `StorageAccountKey`, usare la chiave di accesso per tale account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-331">For the `StorageAccountKey` parameter, use the access key for that Storage account.</span></span>

3. <span data-ttu-id="ac2a1-332">Nel portale di Azure, verificare che i dati di origine siano stati copiati nell'archivio BLOB passando all'account di archiviazione, selezionando il servizio BLOB e aprendo il contenitore `wwi`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-332">In the Azure portal, verify that the source data was copied to Blob storage by navigating to the storage account, selecting the Blob service, and opening the `wwi` container.</span></span> <span data-ttu-id="ac2a1-333">Verrà visualizzato un elenco di tabelle con il prefisso `WorldWideImporters_Application_*`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-333">You should see a list of tables prefaced with `WorldWideImporters_Application_*`.</span></span>

### <a name="execute-the-data-warehouse-scripts"></a><span data-ttu-id="ac2a1-334">Eseguire gli script del data warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-334">Execute the data warehouse scripts</span></span>

1. <span data-ttu-id="ac2a1-335">Dalla sessione di desktop remoto, avviare SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-335">From your Remote Desktop session, launch SQL Server Management Studio (SSMS).</span></span> 

2. <span data-ttu-id="ac2a1-336">Connettersi a SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="ac2a1-336">Connect to SQL Data Warehouse</span></span>

    - <span data-ttu-id="ac2a1-337">Tipo di server: motore di database</span><span class="sxs-lookup"><span data-stu-id="ac2a1-337">Server type: Database Engine</span></span>
    
    - <span data-ttu-id="ac2a1-338">Nome del server: `<dwServerName>.database.windows.net`, dove `<dwServerName>` è il nome specificato al momento della distribuzione delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-338">Server name: `<dwServerName>.database.windows.net`, where `<dwServerName>` is the name that you specified when you deployed the Azure resources.</span></span> <span data-ttu-id="ac2a1-339">È possibile ottenere tale nome dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-339">You can get this name from the Azure portal.</span></span>
    
    - <span data-ttu-id="ac2a1-340">Autenticazione: autenticazione di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-340">Authentication: SQL Server Authentication.</span></span> <span data-ttu-id="ac2a1-341">Usare le credenziali specificate durante la distribuzione delle risorse di Azure, nei parametri `dwAdminLogin` e `dwAdminPassword`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-341">Use the credentials that you specified when you deployed the Azure resources, in the `dwAdminLogin` and `dwAdminPassword` parameters.</span></span>

2. <span data-ttu-id="ac2a1-342">Passare alla cartella `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-342">Navigate to the `C:\SampleDataFiles\reference-architectures\data\enterprise_bi_sqldw\azure\sqldw_scripts` folder on the VM.</span></span> <span data-ttu-id="ac2a1-343">Eseguire gli script in questa cartella in ordine numerico, da `STEP_1` a `STEP_7`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-343">You will execute the scripts in this folder in numerical order, `STEP_1` through `STEP_7`.</span></span>

3. <span data-ttu-id="ac2a1-344">Selezionare il database `master` in SSMS e aprire lo script `STEP_1`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-344">Select the `master` database in SSMS and open the `STEP_1` script.</span></span> <span data-ttu-id="ac2a1-345">Modificare il valore della password nella riga seguente, quindi eseguire lo script.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-345">Change the value of the password in the following line, then execute the script.</span></span>

    ```sql
    CREATE LOGIN LoaderRC20 WITH PASSWORD = '<change this value>';
    ```

4. <span data-ttu-id="ac2a1-346">Selezionare il database `wwi` in SSMS.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-346">Select the `wwi` database in SSMS.</span></span> <span data-ttu-id="ac2a1-347">Aprire lo script `STEP_2` ed eseguirlo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-347">Open the `STEP_2` script and execute the script.</span></span> <span data-ttu-id="ac2a1-348">Se si verifica un errore, assicurarsi di stare eseguendo lo script in base al database `wwi` e non `master`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-348">If you get an error, make sure you are running the script against the `wwi` database and not `master`.</span></span>

5. <span data-ttu-id="ac2a1-349">Aprire una nuova connessione a SQL Data Warehouse tramite il nome utente e la password `LoaderRC20` indicati nello script `STEP_1`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-349">Open a new connection to SQL Data Warehouse, using the `LoaderRC20` user and the password indicated in the `STEP_1` script.</span></span>

6. <span data-ttu-id="ac2a1-350">Tramite questa connessione, aprire lo script `STEP_3`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-350">Using this connection, open the `STEP_3` script.</span></span> <span data-ttu-id="ac2a1-351">Nello script, impostare i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-351">Set the following values in the script:</span></span>

    - <span data-ttu-id="ac2a1-352">SEGRETO: immettere la chiave di accesso per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-352">SECRET: Use the access key for your storage account.</span></span>
    - <span data-ttu-id="ac2a1-353">PERCORSO: immettere il nome dell'account di archiviazione come segue: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-353">LOCATION: Use the name of the storage account as follows: `wasbs://wwi@<storage_account_name>.blob.core.windows.net`.</span></span>

7. <span data-ttu-id="ac2a1-354">Usando la stessa connessione, eseguire gli script da `STEP_4` a `STEP_7` in sequenza.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-354">Using the same connection, execute scripts `STEP_4` through `STEP_7` sequentially.</span></span> <span data-ttu-id="ac2a1-355">Verificare che ogni script sia completato correttamente prima di eseguire il successivo.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-355">Verify that each script completes successfully before running the next.</span></span>

<span data-ttu-id="ac2a1-356">In SMSS verrà visualizzato un set di tabelle `prd.*` nel database `wwi`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-356">In SMSS, you should see a set of `prd.*` tables in the `wwi` database.</span></span> <span data-ttu-id="ac2a1-357">Per verificare che i dati siano stati generati, eseguire la query seguente:</span><span class="sxs-lookup"><span data-stu-id="ac2a1-357">To verify that the data was generated, run the following query:</span></span> 

```sql
SELECT TOP 10 * FROM prd.CityDimensions
```

### <a name="build-the-azure-analysis-services-model"></a><span data-ttu-id="ac2a1-358">Compilare il modello di Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="ac2a1-358">Build the Azure Analysis Services model</span></span>

<span data-ttu-id="ac2a1-359">In questo passaggio verrà creato un modello tabulare per importare i dati dal data warehouse,</span><span class="sxs-lookup"><span data-stu-id="ac2a1-359">In this step, you will create a tabular model that imports data from the data warehouse.</span></span> <span data-ttu-id="ac2a1-360">per poi distribuire il modello ad Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-360">Then you will deploy the model to Azure Analysis Services.</span></span>

1. <span data-ttu-id="ac2a1-361">Dalla sessione di desktop remoto, avviare SQL Server Data Tools 2015.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-361">From your Remote Desktop session, launch SQL Server Data Tools 2015.</span></span>

2. <span data-ttu-id="ac2a1-362">Selezionare **File** > **Nuovo** > **Progetto**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-362">Select **File** > **New** > **Project**.</span></span>

3. <span data-ttu-id="ac2a1-363">Nella finestra di dialogo **Nuovo progetto**, in **Modelli** selezionare **Business Intelligence** > **Analysis Services** > **Progetto tabulare di Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-363">In the **New Project** dialog, under **Templates**, select  **Business Intelligence** > **Analysis Services** > **Analysis Services Tabular Project**.</span></span> 

4. <span data-ttu-id="ac2a1-364">Assegnare un nome al progetto e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-364">Name the project and click **OK**.</span></span>

5. <span data-ttu-id="ac2a1-365">Nella finestra di dialogo **Progettazione modelli tabulari**, selezionare **Area di lavoro integrata** e impostare il **Livello di compatibilità** su `SQL Server 2017 / Azure Analysis Services (1400)`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-365">In the **Tabular model designer** dialog, select **Integrated workspace**  and set **Compatibility level** to `SQL Server 2017 / Azure Analysis Services (1400)`.</span></span> <span data-ttu-id="ac2a1-366">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-366">Click **OK**.</span></span>

6. <span data-ttu-id="ac2a1-367">Nella finestra **Esplora modelli tabulari**, fare clic con il pulsante destro del mouse sul progetto e selezionare **Import from Data Source** (Importa da origine dati).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-367">In the **Tabular Model Explorer** window, right-click the project and select **Import from Data Source**.</span></span>

7. <span data-ttu-id="ac2a1-368">Selezionare **Azure SQL Data Warehouse** e fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-368">Select **Azure SQL Data Warehouse** and click **Connect**.</span></span>

8. <span data-ttu-id="ac2a1-369">Per **Server**, immettere il nome completo del server di Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-369">For **Server**, enter the fully qualified name of your Azure SQL Data Warehouse server.</span></span> <span data-ttu-id="ac2a1-370">Per **Database**, immettere `wwi`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-370">For **Database**, enter `wwi`.</span></span> <span data-ttu-id="ac2a1-371">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-371">Click **OK**.</span></span>

9. <span data-ttu-id="ac2a1-372">Nella finestra di dialogo successiva, scegliere l'autenticazione del **Database**, immettere il nome utente e la password di Azure SQL Data Warehouse e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-372">In the next dialog, choose **Database** authentication and enter your Azure SQL Data Warehouse user name and password, and click **OK**.</span></span>

10. <span data-ttu-id="ac2a1-373">Nella finestra di dialogo **Strumento di spostamento**, selezionare le caselle di controllo per **prd.CityDimensions**, **prd.DateDimensions** e **prd.SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-373">In the **Navigator** dialog, select the checkboxes for **prd.CityDimensions**, **prd.DateDimensions**, and **prd.SalesFact**.</span></span> 

    ![](./images/analysis-services-import.png)

11. <span data-ttu-id="ac2a1-374">Fare clic su **Carica**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-374">Click **Load**.</span></span> <span data-ttu-id="ac2a1-375">Una volta completata l'elaborazione, fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-375">When processing is complete, click **Close**.</span></span> <span data-ttu-id="ac2a1-376">Comparirà adesso una visualizzazione tabulare dei dati.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-376">You should now see a tabular view of the data.</span></span>

12. <span data-ttu-id="ac2a1-377">Nella finestra **Esplora modelli tabulari**, fare clic con il pulsante destro del mouse sul progetto e selezionare **Vista modelli** > **Vista diagramma**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-377">In the **Tabular Model Explorer** window, right-click the project and select **Model View** > **Diagram View**.</span></span>

13. <span data-ttu-id="ac2a1-378">Trascinare il campo **[prd.SalesFact].[WWI City ID]** nel campo **[prd.CityDimensions].[WWI City ID]** per creare una relazione.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-378">Drag the **[prd.SalesFact].[WWI City ID]** field to the **[prd.CityDimensions].[WWI City ID]** field to create a relationship.</span></span>  

14. <span data-ttu-id="ac2a1-379">Trascinare il campo **[prd.SalesFact].[Invoice Date Key]** nel campo **[prd.DateDimensions].[Date]**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-379">Drag the **[prd.SalesFact].[Invoice Date Key]** field to the **[prd.DateDimensions].[Date]** field.</span></span>  
    ![](./images/analysis-services-relations.png)

15. <span data-ttu-id="ac2a1-380">Scegliere **Salva tutto** nel menu **File**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-380">From the **File** menu, choose **Save All**.</span></span>  

16. <span data-ttu-id="ac2a1-381">In **Esplora soluzioni** fare clic con il pulsante destro del mouse sul progetto, quindi scegliere **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-381">In **Solution Explorer**, right-click the project and select **Properties**.</span></span> 

17. <span data-ttu-id="ac2a1-382">Sotto **Server**, immettere l'URL dell'istanza di Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-382">Under **Server**, enter the URL of your Azure Analysis Services instance.</span></span> <span data-ttu-id="ac2a1-383">È possibile ottenere questo valore dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-383">You can get this value from the Azure Portal.</span></span> <span data-ttu-id="ac2a1-384">Nel portale, selezionare la risorsa di Analysis Services, fare clic sul riquadro di anteprima e cercare la proprietà **Nome Server**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-384">In the portal, select the Analysis Services resource, click the Overview pane, and look for the **Server Name** property.</span></span> <span data-ttu-id="ac2a1-385">Sarà analogo a `asazure://westus.asazure.windows.net/contoso`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-385">It will be similar to `asazure://westus.asazure.windows.net/contoso`.</span></span> <span data-ttu-id="ac2a1-386">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-386">Click **OK**.</span></span>

    ![](./images/analysis-services-properties.png)

18. <span data-ttu-id="ac2a1-387">In **Esplora soluzioni**, fare clic con il pulsante destro del mouse sul progetto e scegliere **Distribuisci**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-387">In **Solution Explorer**, right-click the project and select **Deploy**.</span></span> <span data-ttu-id="ac2a1-388">Se richiesto, accedere ad Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-388">Sign into Azure if prompted.</span></span> <span data-ttu-id="ac2a1-389">Una volta completata l'elaborazione, fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-389">When processing is complete, click **Close**.</span></span>

19. <span data-ttu-id="ac2a1-390">Nel portale di Azure, visualizzare i dettagli per l'istanza di Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-390">In the Azure portal, view the details for your Azure Analysis Services instance.</span></span> <span data-ttu-id="ac2a1-391">Verificare che il modello sia visualizzato nell'elenco dei modelli.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-391">Verify that your model appears in the list of models.</span></span>

    ![](./images/analysis-services-models.png)

### <a name="analyze-the-data-in-power-bi-desktop"></a><span data-ttu-id="ac2a1-392">Analizzare i dati in Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="ac2a1-392">Analyze the data in Power BI Desktop</span></span>

<span data-ttu-id="ac2a1-393">In questo passaggio, si userà Power BI per creare un report dai dati in Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-393">In this step, you will use Power BI to create a report from the data in Analysis Services.</span></span>

1. <span data-ttu-id="ac2a1-394">Dalla sessione di desktop remoto, avviare Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-394">From your Remote Desktop session, launch Power BI Desktop.</span></span>

2. <span data-ttu-id="ac2a1-395">Nella schermata di benvenuto, fare clic su **Recupera dati**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-395">In the Welcome Scren, click **Get Data**.</span></span>

3. <span data-ttu-id="ac2a1-396">Selezionare **Azure** > **Database di Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-396">Select **Azure** > **Azure Analysis Services database**.</span></span> <span data-ttu-id="ac2a1-397">Fare clic su **Connetti**</span><span class="sxs-lookup"><span data-stu-id="ac2a1-397">Click **Connect**</span></span>

    ![](./images/power-bi-get-data.png)

4. <span data-ttu-id="ac2a1-398">Immettere l'URL dell'istanza di Azure Analysis Services e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-398">Enter the URL of your Analysis Services instance, then click **OK**.</span></span> <span data-ttu-id="ac2a1-399">Se richiesto, accedere ad Azure.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-399">Sign into Azure if prompted.</span></span>

5. <span data-ttu-id="ac2a1-400">Nella finestra di dialogo **Strumento di spostamenti**, espandere il progetto tabulare distribuito, selezionare il modello creato e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-400">In the **Navigator** dialog, expand the tabular project that you deployed, select the model that you created, and click **OK**.</span></span>

2. <span data-ttu-id="ac2a1-401">Nel riquadro **Visualizzazioni**, selezionare l'icona **Grafico a barre in pila**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-401">In the **Visualizations** pane, select the **Stacked Bar Chart** icon.</span></span> <span data-ttu-id="ac2a1-402">In visualizzazione Report, ridimensionare la visualizzazione per ingrandirla.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-402">In the Report view, resize the visualization to make it larger.</span></span>

6. <span data-ttu-id="ac2a1-403">Nel riquadro **Campi**, espandere **prd.CityDimensions**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-403">In the **Fields** pane, expand **prd.CityDimensions**.</span></span>

7. <span data-ttu-id="ac2a1-404">Trascinare **prd.CityDimensions** > **WWI City ID** (ID città WWI) nell'**area Asse**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-404">Drag **prd.CityDimensions** > **WWI City ID** to the **Axis well**.</span></span>

8. <span data-ttu-id="ac2a1-405">Trascinare **prd.CityDimensions** > **Città** nell'area **Legenda**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-405">Drag **prd.CityDimensions** > **City** to the **Legend** well.</span></span>

9. <span data-ttu-id="ac2a1-406">Nel riquadro Campi, espandere **prd.SalesFact**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-406">In the Fields pane, expand **prd.SalesFact**.</span></span>

10. <span data-ttu-id="ac2a1-407">Trascinare **prd.SalesFact** > **Totale tasse escluse** nell'area **Valore**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-407">Drag **prd.SalesFact** > **Total Excluding Tax** to the **Value** well.</span></span>

    ![](./images/power-bi-visualization.png)

11. <span data-ttu-id="ac2a1-408">In **Filtri a livello di oggetto visivo**, selezionare **WWI City ID** (ID città WWI).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-408">Under **Visual Level Filters**, select **WWI City ID**.</span></span>

12. <span data-ttu-id="ac2a1-409">Impostare il **Tipo di filtro** su `Top N` e **Mostra elementi** su `Top 10`.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-409">Set the **Filter Type** to `Top N`, and set **Show Items** to `Top 10`.</span></span>

13. <span data-ttu-id="ac2a1-410">Trascinare **prd.SalesFact** > **Totale tasse escluse** nell'area **By Value** (Per valore)</span><span class="sxs-lookup"><span data-stu-id="ac2a1-410">Drag **prd.SalesFact** > **Total Excluding Tax** to the **By Value** well</span></span>

    ![](./images/power-bi-visualization2.png)

14. <span data-ttu-id="ac2a1-411">Fare clic su **Applica filtro**.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-411">Click **Apply Filter**.</span></span> <span data-ttu-id="ac2a1-412">La visualizzazione mostra le prime 10 vendite totali per città.</span><span class="sxs-lookup"><span data-stu-id="ac2a1-412">The visualization shows the top 10 total sales by city.</span></span>

    ![](./images/power-bi-report.png)

<span data-ttu-id="ac2a1-413">Per altre informazioni su Power BI Desktop, vedere [Introduzione a Power BI Desktop](/power-bi/desktop-getting-started).</span><span class="sxs-lookup"><span data-stu-id="ac2a1-413">To learn more about Power BI Desktop, see [Getting started with Power BI Desktop](/power-bi/desktop-getting-started).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ac2a1-414">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ac2a1-414">Next steps</span></span>

- <span data-ttu-id="ac2a1-415">Per altre informazioni su questa architettura di riferimento, visitare il [repository GitHub][ref-arch-repo-folder].</span><span class="sxs-lookup"><span data-stu-id="ac2a1-415">For more information about this reference architecture, visit our [GitHub repository][ref-arch-repo-folder].</span></span>
- <span data-ttu-id="ac2a1-416">Informazioni sui [blocchi predefiniti di Azure][azbb-repo].</span><span class="sxs-lookup"><span data-stu-id="ac2a1-416">Learn about the [Azure Building Blocks][azbb-repo].</span></span>

<!-- links -->

[azure-cli-2]: /azure/install-azure-cli
[azbb-repo]: https://github.com/mspnp/template-building-blocks
[azbb-wiki]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[ref-arch-repo-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw

