---
title: Assegnazione dei punteggi in tempo reale per i modelli Python
titleSuffix: Azure Reference Architectures
description: Questa architettura di riferimento illustra come distribuire modelli Python come servizi Web in Azure per ottenere previsioni in tempo reale.
author: msalvaris
ms.date: 01/28/2019
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: azcat-ai
ms.openlocfilehash: ba2d9a295e5a231f0ffca9e3cf2d53ace4deddfe
ms.sourcegitcommit: 1ee873aaf40010eb2a38314ac56974bc9e227736
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/28/2019
ms.locfileid: "55141025"
---
# <a name="real-time-scoring-of-python-scikit-learn-and-deep-learning-models-on-azure"></a><span data-ttu-id="0893b-103">Assegnazione di punteggi in tempo reale per modelli Python scikit-learn e di Deep Learning in Azure</span><span class="sxs-lookup"><span data-stu-id="0893b-103">Real-time scoring of Python Scikit-Learn and deep learning models on Azure</span></span>

<span data-ttu-id="0893b-104">Questa architettura di riferimento mostra come distribuire modelli Python come servizi Web per effettuare previsioni in tempo reale usando il servizio Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="0893b-104">This reference architecture shows how to deploy Python models as web services to make real-time predictions using the Azure Machine Learning service.</span></span> <span data-ttu-id="0893b-105">Vengono esaminati due scenari: la distribuzione di modelli Python normali e gli specifici requisiti della distribuzione di modelli di Deep Learning.</span><span class="sxs-lookup"><span data-stu-id="0893b-105">Two scenarios are covered: deploying regular Python models, and the specific requirements of deploying deep learning models.</span></span> <span data-ttu-id="0893b-106">Entrambi gli scenari usano l'architettura illustrata.</span><span class="sxs-lookup"><span data-stu-id="0893b-106">Both scenarios use the architecture shown.</span></span>

<span data-ttu-id="0893b-107">In GitHub sono disponibili due implementazioni di riferimento di questa architettura, una per i [modelli Python normali][github-python] e una per i [modelli di Deep Learning][github-dl].</span><span class="sxs-lookup"><span data-stu-id="0893b-107">Two reference implementations for this architecture are available on GitHub, one for [regular Python models][github-python] and one for [deep learning models][github-dl].</span></span>

![Diagramma dell'architettura per l'assegnazione dei punteggi in tempo reale dei modelli Python in Azure](./_images/python-model-architecture.png)

## <a name="scenarios"></a><span data-ttu-id="0893b-109">Scenari</span><span class="sxs-lookup"><span data-stu-id="0893b-109">Scenarios</span></span>

<span data-ttu-id="0893b-110">Le implementazioni di riferimento offrono una dimostrazione di due scenari in cui viene usata questa architettura.</span><span class="sxs-lookup"><span data-stu-id="0893b-110">The reference implementations demonstrate two scenarios using this architecture.</span></span>

<span data-ttu-id="0893b-111">**Scenario 1: corrispondenza con le domande frequenti**.</span><span class="sxs-lookup"><span data-stu-id="0893b-111">**Scenario 1: FAQ matching**.</span></span> <span data-ttu-id="0893b-112">Questo scenario illustra come distribuire un modello di corrispondenza con le domande frequenti come servizio Web per offrire previsioni per le domande degli utenti.</span><span class="sxs-lookup"><span data-stu-id="0893b-112">This scenario shows how to deploy a frequently asked questions (FAQ) matching model as a web service to provide predictions for user questions.</span></span> <span data-ttu-id="0893b-113">Per questo scenario, i dati di input riportati nel diagramma dell'architettura sono stringhe di testo contenenti le domande degli utenti di cui deve essere trovata la corrispondenza con un elenco di domande frequenti.</span><span class="sxs-lookup"><span data-stu-id="0893b-113">For this scenario, "Input Data" in the architecture diagram refers to text strings containing user questions to match with a list of FAQs.</span></span> <span data-ttu-id="0893b-114">Questo scenario è progettato per la libreria di apprendimento automatico [scikit-learn][scikit] per Python, ma può essere generalizzato per qualsiasi scenario che usi modelli Python per ottenere previsioni in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="0893b-114">This scenario is designed for the [scikit-learn][scikit] machine learning library for Python, but can be generalized to any scenario that uses Python models to make real-time predictions.</span></span>

<span data-ttu-id="0893b-115">Lo scenario usa un subset di dati delle domande di Stack Overflow che include le domande originali con tag JavaScript, le domande duplicate e le risposte.</span><span class="sxs-lookup"><span data-stu-id="0893b-115">This scenario uses a subset of Stack Overflow question data that includes original questions tagged as JavaScript, their duplicate questions, and their answers.</span></span> <span data-ttu-id="0893b-116">Lo scenario esegue il training di una pipeline scikit-learn per prevedere la probabilità di corrispondenza di una domanda duplicata con ognuna delle domande originali.</span><span class="sxs-lookup"><span data-stu-id="0893b-116">It trains a scikit-learn pipeline to predict the match probability of a duplicate question with each of the original questions.</span></span> <span data-ttu-id="0893b-117">Queste previsioni vengono eseguite in tempo reale usando un endpoint API REST.</span><span class="sxs-lookup"><span data-stu-id="0893b-117">These predictions are made in real time using a REST API endpoint.</span></span>

<span data-ttu-id="0893b-118">Il flusso applicazione per questa architettura è il seguente:</span><span class="sxs-lookup"><span data-stu-id="0893b-118">The application flow for this architecture is as follows:</span></span>

1. <span data-ttu-id="0893b-119">Il modello sottoposto a training viene registrato nel registro del modello di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="0893b-119">The trained model is registered to the Machine Learning model registry.</span></span>
2. <span data-ttu-id="0893b-120">Il servizio Machine Learning crea un'immagine Docker che include il modello e lo script di assegnazione di punteggi.</span><span class="sxs-lookup"><span data-stu-id="0893b-120">The Machine Learning service creates a Docker image that includes the model and scoring script.</span></span>
3. <span data-ttu-id="0893b-121">Machine Learning distribuisce l'immagine di assegnazioni di punteggi nel servizio Azure Kubernetes (AKS) come servizio Web.</span><span class="sxs-lookup"><span data-stu-id="0893b-121">Machine Learning deploys the scoring image on Azure Kubernetes Service (AKS) as a web service.</span></span>
4. <span data-ttu-id="0893b-122">Il client invia una richiesta HTTP POST con i dati della domanda codificati.</span><span class="sxs-lookup"><span data-stu-id="0893b-122">The client sends an HTTP POST request with the encoded question data.</span></span>
5. <span data-ttu-id="0893b-123">Il servizio Web creato da Machine Learning estrae la domanda dalla richiesta.</span><span class="sxs-lookup"><span data-stu-id="0893b-123">The web service created by Machine Learning extracts the question from the request.</span></span>
6. <span data-ttu-id="0893b-124">La domanda viene inviata al modello della pipeline Scikit-learn per la definizione delle funzionalità e l'assegnazione di punteggi.</span><span class="sxs-lookup"><span data-stu-id="0893b-124">The question is sent to the Scikit-learn pipeline model for featurization and scoring.</span></span> 
7. <span data-ttu-id="0893b-125">Le domande frequenti corrispondenti con i relativi punteggi vengono restituite al client.</span><span class="sxs-lookup"><span data-stu-id="0893b-125">The matching FAQ questions with their scores are returned to the client.</span></span>

<span data-ttu-id="0893b-126">Di seguito è riportato uno screenshot dell'app di esempio che utilizza i risultati:</span><span class="sxs-lookup"><span data-stu-id="0893b-126">Here is a screenshot of the example app that consumes the results:</span></span>

![Screenshot dell'app di esempio](./_images/python-faq-matches.png)

<span data-ttu-id="0893b-128">**Scenario 2: classificazione di immagini**.</span><span class="sxs-lookup"><span data-stu-id="0893b-128">**Scenario 2: Image classification**.</span></span> <span data-ttu-id="0893b-129">Questo scenario illustra come distribuire un modello di rete neurale convoluzionale come servizio Web per offrire previsioni sulle immagini.</span><span class="sxs-lookup"><span data-stu-id="0893b-129">This scenario shows how to deploy a Convolutional Neural Network (CNN) model as a web service to provide predictions on images.</span></span> <span data-ttu-id="0893b-130">Per questo scenario, i dati di input riportati nel diagramma dell'architettura sono file di immagine.</span><span class="sxs-lookup"><span data-stu-id="0893b-130">For this scenario, "Input Data" in the architecture diagram refers to image files.</span></span> <span data-ttu-id="0893b-131">Le reti neurali convoluzionali sono molto efficaci nella visione artificiale, per attività come la classificazione di immagini e il rilevamento di oggetti.</span><span class="sxs-lookup"><span data-stu-id="0893b-131">CNNs are very effective in computer vision for tasks such as image classification and object detection.</span></span> <span data-ttu-id="0893b-132">Questo scenario è progettato per i framework TensorFlow, Keras (con back end TensorFlow) e PyTorch,</span><span class="sxs-lookup"><span data-stu-id="0893b-132">This scenario is designed for the frameworks TensorFlow, Keras (with the TensorFlow back end), and PyTorch.</span></span> <span data-ttu-id="0893b-133">ma può essere generalizzato per qualsiasi scenario che usi modelli di Deep Learning per ottenere previsioni in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="0893b-133">However, it can be generalized to any scenario that uses deep learning models to make real-time predictions.</span></span>

<span data-ttu-id="0893b-134">Questo scenario usa un modello ResNet-152 con training preliminare di cui viene eseguito il training sul set di dati ImageNet-1K (1.000 classi) per prevedere la categoria a cui un'immagine appartiene, come illustrato nella figura di seguito.</span><span class="sxs-lookup"><span data-stu-id="0893b-134">This scenario uses a pre-trained ResNet-152 model trained on ImageNet-1K (1,000 classes) dataset to predict which category (see figure below) an image belongs to.</span></span> <span data-ttu-id="0893b-135">Queste previsioni vengono eseguite in tempo reale usando un endpoint API REST.</span><span class="sxs-lookup"><span data-stu-id="0893b-135">These predictions are made in real time using a REST API endpoint.</span></span>

![Esempio di stime](./_images/python-example-predictions.png)

<span data-ttu-id="0893b-137">Il flusso applicazione per il modello di Deep Learning è il seguente:</span><span class="sxs-lookup"><span data-stu-id="0893b-137">The application flow for the deep learning model is as follows:</span></span>

1. <span data-ttu-id="0893b-138">Il modello di Deep Learning viene registrato nel registro del modello di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="0893b-138">The deep learning model is registered to the Machine Learning model registry.</span></span>
2. <span data-ttu-id="0893b-139">Il servizio Machine Learning crea un'immagine Docker che include il modello e lo script di assegnazione di punteggi.</span><span class="sxs-lookup"><span data-stu-id="0893b-139">The Machine Learning service creates a docker image including the model and scoring script.</span></span>
3. <span data-ttu-id="0893b-140">Machine Learning distribuisce l'immagine di assegnazioni di punteggi nel servizio Azure Kubernetes (AKS) come servizio Web.</span><span class="sxs-lookup"><span data-stu-id="0893b-140">Machine Learning deploys the scoring image on Azure Kubernetes Service (AKS) as a web service.</span></span>
4. <span data-ttu-id="0893b-141">Il client invia una richiesta HTTP POST con i dati di immagine codificati.</span><span class="sxs-lookup"><span data-stu-id="0893b-141">The client sends an HTTP POST request with the encoded image data.</span></span>
5. <span data-ttu-id="0893b-142">Il servizio Web creato da Machine Learning pre-elabora i dati di immagine e li invia al modello per l'assegnazione di punteggi.</span><span class="sxs-lookup"><span data-stu-id="0893b-142">The web service created by Machine Learning preprocesses the image data and sends it to the model for scoring.</span></span> 
6. <span data-ttu-id="0893b-143">Le categorie previste con i relativi punteggi vengono restituite al client.</span><span class="sxs-lookup"><span data-stu-id="0893b-143">The predicted categories with their scores are returned to the client.</span></span>

## <a name="architecture"></a><span data-ttu-id="0893b-144">Architettura</span><span class="sxs-lookup"><span data-stu-id="0893b-144">Architecture</span></span>

<span data-ttu-id="0893b-145">L'architettura è costituita dai componenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="0893b-145">This architecture consists of the following components.</span></span>

<span data-ttu-id="0893b-146">**[Servizio Azure Machine Learning][aml]**. Un servizio cloud che è possibile usare per eseguire il training di modelli di Machine Learning, distribuirli, automatizzarli e gestirli, il tutto su vasta scala, grazie all'ampia portata del cloud.</span><span class="sxs-lookup"><span data-stu-id="0893b-146">**[Azure Machine Learning service][aml]** is a cloud service that is used to train, deploy, automate and manage machine learning models, all at the broad scale that the cloud provides.</span></span> <span data-ttu-id="0893b-147">Viene usato in questa architettura per gestire la distribuzione di modelli, nonché le attività di autenticazione, routing e bilanciamento del carico del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="0893b-147">It is used in this architecture to manage the deployment of models as well as authentication, routing, and load balancing of the web service.</span></span>

<span data-ttu-id="0893b-148">**[Macchina virtuale][vm]** (VM).</span><span class="sxs-lookup"><span data-stu-id="0893b-148">**[Virtual machine][vm]** (VM).</span></span> <span data-ttu-id="0893b-149">La VM è riportata come un esempio di dispositivo (locale o nel cloud) che può inviare una richiesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="0893b-149">The VM is shown as an example of a device &mdash; local or in the cloud &mdash; that can send an HTTP request.</span></span>

<span data-ttu-id="0893b-150">**[Servizio Azure Kubernetes][aks]**. Viene usato per distribuire l'applicazione in un cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0893b-150">**[Azure Kubernetes Service][aks]** (AKS) is used to deploy the application on a Kubernetes cluster.</span></span> <span data-ttu-id="0893b-151">Il servizio Azure Kubernetes semplifica la distribuzione e le operazioni di Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0893b-151">AKS simplifies the deployment and operations of Kubernetes.</span></span> <span data-ttu-id="0893b-152">Il cluster può essere configurato usando VM solo CPU per i modelli Python normali o VM abilitate per GPU per i modelli di Deep Learning.</span><span class="sxs-lookup"><span data-stu-id="0893b-152">The cluster can be configured using CPU-only VMs for regular Python models or GPU-enabled VMs for deep learning models.</span></span>

<span data-ttu-id="0893b-153">**[Registro Azure Container][acr]**. Consente l'archiviazione di immagini per tutti i tipi di distribuzioni di contenitori Docker, inclusi DC/OS, Docker Swarm e Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0893b-153">**[Azure Container Registry][acr]** enables storage of images for all types of Docker container deployments including DC/OS, Docker Swarm and Kubernetes.</span></span> <span data-ttu-id="0893b-154">Le immagini di assegnazione di punteggi vengono distribuite come contenitori nel servizio Azure Kubernetes e usate per eseguire lo script di assegnazione di punteggi.</span><span class="sxs-lookup"><span data-stu-id="0893b-154">The scoring images are deployed as containers on Azure Kubernetes Service and used to run the scoring script.</span></span> <span data-ttu-id="0893b-155">L'immagine usata qui viene creata da Machine Learning dal modello sottoposto a training e lo script di assegnazione di punteggi e quindi ne viene eseguito il push nel Registro Azure Container.</span><span class="sxs-lookup"><span data-stu-id="0893b-155">The image used here is created by Machine Learning from the trained model and scoring script, and then is pushed to the Azure Container Registry.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="0893b-156">Considerazioni sulle prestazioni</span><span class="sxs-lookup"><span data-stu-id="0893b-156">Performance considerations</span></span>

<span data-ttu-id="0893b-157">Per le architetture di assegnazione di punteggi in tempo reale, le prestazioni in termini di velocità effettiva diventano una considerazione predominante.</span><span class="sxs-lookup"><span data-stu-id="0893b-157">For real-time scoring architectures, throughput performance becomes a dominant consideration.</span></span> <span data-ttu-id="0893b-158">Per i modelli Python normali, le CPU sono generalmente considerate sufficienti per gestire il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="0893b-158">For regular Python models, it's generally accepted that CPUs are sufficient to handle the workload.</span></span>

<span data-ttu-id="0893b-159">Per i carichi di lavoro di Deep Learning, in cui la velocità è un collo di bottiglia, le GPU offrono invece in genere [prestazioni][gpus-vs-cpus] superiori rispetto alle CPU.</span><span class="sxs-lookup"><span data-stu-id="0893b-159">However for deep learning workloads, when speed is a bottleneck, GPUs generally provide better [performance][gpus-vs-cpus] compared to CPUs.</span></span> <span data-ttu-id="0893b-160">Per ottenere prestazioni corrispondenti a quelle delle GPU usando CPU, è in genere necessario un cluster con un numero elevato di CPU.</span><span class="sxs-lookup"><span data-stu-id="0893b-160">To match GPU performance using CPUs, a cluster with large number of CPUs is usually needed.</span></span>

<span data-ttu-id="0893b-161">Per questa architettura, è possibile usare CPU in entrambi gli scenari, ma per i modelli di Deep Learning le GPU offrono valori di velocità effettiva nettamente superiori rispetto a un cluster di CPU con costo simile.</span><span class="sxs-lookup"><span data-stu-id="0893b-161">You can use CPUs for this architecture in either scenario, but for deep learning models, GPUs provide significantly higher throughput values compared to a CPU cluster of similar cost.</span></span> <span data-ttu-id="0893b-162">servizio Azure Kubernetes supporta l'uso di GPU e questo è uno dei vantaggi offerti da servizio Azure Kubernetes per questa architettura.</span><span class="sxs-lookup"><span data-stu-id="0893b-162">AKS supports the use of GPUs, which is one advantage of using AKS for this architecture.</span></span> <span data-ttu-id="0893b-163">Le distribuzioni di Deep Learning, inoltre, usano in genere modelli con un numero elevato di parametri.</span><span class="sxs-lookup"><span data-stu-id="0893b-163">Also, deep learning deployments typically use models with a high number of parameters.</span></span> <span data-ttu-id="0893b-164">L'uso di GPU evita la contesa per le risorse tra il modello e il servizio Web che costituisce invece un problema nelle distribuzioni solo CPU.</span><span class="sxs-lookup"><span data-stu-id="0893b-164">Using GPUs prevents contention for resources between the model and the web service, which is an issue in CPU-only deployments.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="0893b-165">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="0893b-165">Scalability considerations</span></span>

<span data-ttu-id="0893b-166">Per i modelli Python normali, in cui il provisioning del cluster del servizio Azure Kubernetes viene effettuato con VM solo CPU, prestare attenzione in caso di [aumento del numero di istanze dei pod][manually-scale-pods].</span><span class="sxs-lookup"><span data-stu-id="0893b-166">For regular Python models, where the AKS cluster is provisioned with CPU-only VMs, take care when [scaling out the number of pods][manually-scale-pods].</span></span> <span data-ttu-id="0893b-167">L'obiettivo è utilizzare appieno il cluster.</span><span class="sxs-lookup"><span data-stu-id="0893b-167">The goal is to fully utilize the cluster.</span></span> <span data-ttu-id="0893b-168">Il ridimensionamento dipende dalle richieste e dai limiti di CPU definiti per i pod.</span><span class="sxs-lookup"><span data-stu-id="0893b-168">Scaling depends on the CPU requests and limits defined for the pods.</span></span> <span data-ttu-id="0893b-169">Machine Learning tramite Kubernetes supporta anche il [ridimensionamento automatico dei pod][autoscale-pods] in base all'utilizzo della CPU o ad altre metriche.</span><span class="sxs-lookup"><span data-stu-id="0893b-169">Machine Learning through Kubernetes also supports [pod autoscaling][autoscale-pods] based on CPU utilization or other metrics.</span></span> <span data-ttu-id="0893b-170">Il [ridimensionamento automatico del cluster][autoscaler] (in anteprima) può ridimensionare i nodi agente in base ai pod in sospeso.</span><span class="sxs-lookup"><span data-stu-id="0893b-170">The [cluster autoscaler][autoscaler] (in preview) can scale agent nodes based on the pending pods.</span></span>

<span data-ttu-id="0893b-171">Per gli scenari di Deep Learning con VM abilitate per GPU, i limiti di risorse per i pod sono tali che una GPU viene assegnata a un unico pod.</span><span class="sxs-lookup"><span data-stu-id="0893b-171">For deep learning scenarios, using GPU-enabled VMs, resource limits on pods are such that one GPU is assigned to one pod.</span></span> <span data-ttu-id="0893b-172">A seconda del tipo di VM usato, è necessario [ridimensionare i nodi del cluster][scale-cluster] in base alle esigenze del servizio.</span><span class="sxs-lookup"><span data-stu-id="0893b-172">Depending on the type of VM used, you must [scale the nodes of the cluster][scale-cluster] to meet the demand for the service.</span></span> <span data-ttu-id="0893b-173">Questa operazione può essere eseguita facilmente usando kubectl e l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="0893b-173">You can do this easily using the Azure CLI and kubectl.</span></span>

## <a name="monitoring-and-logging-considerations"></a><span data-ttu-id="0893b-174">Considerazioni relative a monitoraggio e registrazione</span><span class="sxs-lookup"><span data-stu-id="0893b-174">Monitoring and logging considerations</span></span>

### <a name="aks-monitoring"></a><span data-ttu-id="0893b-175">Monitoraggio di servizio Azure Kubernetes</span><span class="sxs-lookup"><span data-stu-id="0893b-175">AKS monitoring</span></span>

<span data-ttu-id="0893b-176">Per ottenere la visibilità delle prestazioni di servizio Azure Kubernetes, usare la funzionalità [Monitoraggio di Azure per i contenitori][monitor-containers],</span><span class="sxs-lookup"><span data-stu-id="0893b-176">For visibility into AKS performance, use the [Azure Monitor for containers][monitor-containers] feature.</span></span> <span data-ttu-id="0893b-177">che raccoglie metriche sulla memoria e sul processore da controller, nodi e contenitori disponibili in Kubernetes tramite l'API Metriche.</span><span class="sxs-lookup"><span data-stu-id="0893b-177">It collects memory and processor metrics from controllers, nodes, and containers that are available in Kubernetes through the Metrics API.</span></span>

<span data-ttu-id="0893b-178">Durante la distribuzione dell'applicazione, monitorare il cluster servizio Azure Kubernetes per verificare che funzioni come previsto, che tutti i nodi siano operativi e che tutti i pod siano in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="0893b-178">While deploying your application, monitor the AKS cluster to make sure it's working as expected, all the nodes are operational, and all pods are running.</span></span> <span data-ttu-id="0893b-179">Nonostante sia possibile usare lo strumento da riga di comando [kubectl][kubectl] per recuperare lo stato dei pod, Kubernetes include anche un dashboard Web per il monitoraggio di base dello stato del cluster e la gestione.</span><span class="sxs-lookup"><span data-stu-id="0893b-179">Although you can use the [kubectl][kubectl] command-line tool to retrieve pod status, Kubernetes also includes a web dashboard for basic monitoring of the cluster status and management.</span></span>

![Screenshot del dashboard Kubernetes](./_images/python-kubernetes-dashboard.png)

<span data-ttu-id="0893b-181">Per visualizzare lo stato generale del cluster e dei nodi, passare alla sezione **Nodes** (Nodi) del dashboard Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0893b-181">To see the overall state of the cluster and nodes, go to the **Nodes** section of the Kubernetes dashboard.</span></span> <span data-ttu-id="0893b-182">In caso di nodo inattivo o con errori, è possibile visualizzare i log degli errori da tale pagina.</span><span class="sxs-lookup"><span data-stu-id="0893b-182">If a node is inactive or has failed, you can display the error logs from that page.</span></span> <span data-ttu-id="0893b-183">Analogamente, passare alle sezioni **Pods** (Pod) e **Deployments** (Distribuzioni) per informazioni sul numero di pod e sullo stato della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="0893b-183">Similarly, go to the **Pods** and **Deployments** sections for information about the number of pods and status of your deployment.</span></span>

### <a name="aks-logs"></a><span data-ttu-id="0893b-184">Log di servizio Azure Kubernetes</span><span class="sxs-lookup"><span data-stu-id="0893b-184">AKS logs</span></span>

<span data-ttu-id="0893b-185">servizio Azure Kubernetes registra automaticamente ogni stdout/stderr nei log dei pod del cluster.</span><span class="sxs-lookup"><span data-stu-id="0893b-185">AKS automatically logs all stdout/stderr to the logs of the pods in the cluster.</span></span> <span data-ttu-id="0893b-186">Usare kubectl per visualizzare questi elementi nonché gli eventi e i log a livello di nodo.</span><span class="sxs-lookup"><span data-stu-id="0893b-186">Use kubectl to see these and also node-level events and logs.</span></span> <span data-ttu-id="0893b-187">Per informazioni dettagliate, vedere la procedura di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="0893b-187">For details, see the deployment steps.</span></span>

<span data-ttu-id="0893b-188">Usare [Monitoraggio di Azure per i contenitori][monitor-containers] per raccogliere metriche e log tramite una versione in contenitori dell'agente di Log Analytics per Linux, archiviata nell'area di lavoro di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="0893b-188">Use [Azure Monitor for containers][monitor-containers] to collect metrics and logs through a containerized version of the Log Analytics agent for Linux, which is stored in your Log Analytics workspace.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="0893b-189">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="0893b-189">Security considerations</span></span>

<span data-ttu-id="0893b-190">Usare il [Centro sicurezza di Azure][security-center] per ottenere una visualizzazione centrale dello stato di sicurezza delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="0893b-190">Use [Azure Security Center][security-center] to get a central view of the security state of your Azure resources.</span></span> <span data-ttu-id="0893b-191">Il Centro sicurezza monitora i potenziali problemi di sicurezza e offre un quadro completo dell'integrità della sicurezza della distribuzione, pur non monitorando i nodi agente servizio Azure Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0893b-191">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment, although it doesn't monitor AKS agent nodes.</span></span> <span data-ttu-id="0893b-192">Il Centro sicurezza è configurato per ogni sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="0893b-192">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="0893b-193">Abilitare la raccolta dei dati sulla sicurezza come illustrato nell'articolo relativo all'[onboarding della sottoscrizione di Azure nel Centro sicurezza Standard][get-started].</span><span class="sxs-lookup"><span data-stu-id="0893b-193">Enable security data collection as described in [Onboard your Azure subscription to Security Center Standard][get-started].</span></span> <span data-ttu-id="0893b-194">Quando la raccolta dei dati è abilitata, il Centro sicurezza analizza automaticamente tutte le macchine virtuali create nell'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="0893b-194">When data collection is enabled, Security Center automatically scans any VMs created under that subscription.</span></span>

<span data-ttu-id="0893b-195">**Operazioni**.</span><span class="sxs-lookup"><span data-stu-id="0893b-195">**Operations**.</span></span> <span data-ttu-id="0893b-196">Per accedere a un cluster servizio Azure Kubernetes con il token di autenticazione di Azure Active Directory (Azure AD), configurare servizio Azure Kubernetes per l'uso di Azure AD per l'[autenticazione utente][aad-auth].</span><span class="sxs-lookup"><span data-stu-id="0893b-196">To sign in to an AKS cluster using your Azure Active Directory (Azure AD) authentication token, configure AKS to use Azure AD for [user authentication][aad-auth].</span></span> <span data-ttu-id="0893b-197">Gli amministratori di cluster possono anche configurare il controllo degli accessi in base al ruolo di Kubernetes in base all'identità o all'appartenenza a gruppi della directory di un utente.</span><span class="sxs-lookup"><span data-stu-id="0893b-197">Cluster administrators can also configure Kubernetes role-based access control (RBAC) based on a user's identity or directory group membership.</span></span>

<span data-ttu-id="0893b-198">Usare il [controllo degli accessi in base al ruolo][rbac] per controllare l'accesso alle risorse di Azure distribuite.</span><span class="sxs-lookup"><span data-stu-id="0893b-198">Use [RBAC][rbac] to control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="0893b-199">Il controllo degli accessi in base al ruolo consente di assegnare i ruoli di autorizzazione ai membri del proprio team DevOps.</span><span class="sxs-lookup"><span data-stu-id="0893b-199">RBAC lets you assign authorization roles to members of your DevOps team.</span></span> <span data-ttu-id="0893b-200">Un utente può essere assegnato a più ruoli ed è possibile creare ruoli personalizzati per [autorizzazioni] ancora più specifiche.</span><span class="sxs-lookup"><span data-stu-id="0893b-200">A user can be assigned to multiple roles, and you can create custom roles for even more fine-grained [permissions].</span></span>

<span data-ttu-id="0893b-201">**HTTPS**.</span><span class="sxs-lookup"><span data-stu-id="0893b-201">**HTTPS**.</span></span> <span data-ttu-id="0893b-202">Come procedura consigliata per la sicurezza, l'applicazione dovrebbe imporre HTTPS e reindirizzare le richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="0893b-202">As a security best practice, the application should enforce HTTPS and redirect HTTP requests.</span></span> <span data-ttu-id="0893b-203">Usare un [controller di ingresso][ingress-controller] per distribuire un proxy inverso per la terminazione SSL e il reindirizzamento delle richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="0893b-203">Use an [ingress controller][ingress-controller] to deploy a reverse proxy that terminates SSL and redirects HTTP requests.</span></span> <span data-ttu-id="0893b-204">Per altre informazioni, vedere [Creare un controller di ingresso HTTPS nel servizio Azure Kubernetes][https-ingress].</span><span class="sxs-lookup"><span data-stu-id="0893b-204">For more information, see [Create an HTTPS ingress controller on Azure Kubernetes Service (AKS)][https-ingress].</span></span>

<span data-ttu-id="0893b-205">**Autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="0893b-205">**Authentication**.</span></span> <span data-ttu-id="0893b-206">Questa soluzione non limita l'accesso agli endpoint.</span><span class="sxs-lookup"><span data-stu-id="0893b-206">This solution doesn't restrict access to the endpoints.</span></span> <span data-ttu-id="0893b-207">Per distribuire l'architettura in un contesto aziendale, proteggere gli endpoint tramite chiavi API e aggiungere una qualche forma di autenticazione utente all'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="0893b-207">To deploy the architecture in an enterprise setting, secure the endpoints through API keys and add some form of user authentication to the client application.</span></span>

<span data-ttu-id="0893b-208">**Registro contenitori**.</span><span class="sxs-lookup"><span data-stu-id="0893b-208">**Container registry**.</span></span> <span data-ttu-id="0893b-209">Questa soluzione usa Registro Azure Container per archiviare l'immagine Docker.</span><span class="sxs-lookup"><span data-stu-id="0893b-209">This solution uses Azure Container Registry to store the Docker image.</span></span> <span data-ttu-id="0893b-210">Il codice da cui l'applicazione dipende e il modello sono contenuti in tale immagine.</span><span class="sxs-lookup"><span data-stu-id="0893b-210">The code that the application depends on, and the model, are contained within this image.</span></span> <span data-ttu-id="0893b-211">Le applicazioni aziendali dovrebbero usare un registro privato per garantire la protezione dall'esecuzione di codice dannoso ed evitare la compromissione delle informazioni all'interno del contenitore.</span><span class="sxs-lookup"><span data-stu-id="0893b-211">Enterprise applications should use a private registry to help guard against running malicious code and to help keep the information inside the container from being compromised.</span></span>

<span data-ttu-id="0893b-212">**Protezione DDoS**.</span><span class="sxs-lookup"><span data-stu-id="0893b-212">**DDoS protection**.</span></span> <span data-ttu-id="0893b-213">Valutare la possibilità di abilitare [Protezione DDoS Standard][ddos].</span><span class="sxs-lookup"><span data-stu-id="0893b-213">Consider enabling [DDoS Protection Standard][ddos].</span></span> <span data-ttu-id="0893b-214">Nonostante la protezione DDoS di base sia abilitata come parte della piattaforma Azure, Protezione DDoS Standard offre funzionalità di mitigazione ottimizzate specificamente per le risorse di rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="0893b-214">Although basic DDoS protection is enabled as part of the Azure platform, DDoS Protection Standard provides mitigation capabilities that are tuned specifically to Azure virtual network resources.</span></span>

<span data-ttu-id="0893b-215">**Registrazione**.</span><span class="sxs-lookup"><span data-stu-id="0893b-215">**Logging**.</span></span> <span data-ttu-id="0893b-216">Prima di archiviare i dati di log, usare procedure consigliate come l'eliminazione delle password utente e delle altre informazioni che potrebbero essere usate per illeciti a livello di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="0893b-216">Use best practices before storing log data, such as scrubbing user passwords and other information that could be used to commit security fraud.</span></span>

## <a name="deployment"></a><span data-ttu-id="0893b-217">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="0893b-217">Deployment</span></span>

<span data-ttu-id="0893b-218">Per distribuire questa architettura di riferimento, seguire la procedura descritta nei repository GitHub:</span><span class="sxs-lookup"><span data-stu-id="0893b-218">To deploy this reference architecture, follow the steps described in the GitHub repos:</span></span>

- <span data-ttu-id="0893b-219">[Modelli Python normali][github-python]</span><span class="sxs-lookup"><span data-stu-id="0893b-219">[Regular Python models][github-python]</span></span>
- <span data-ttu-id="0893b-220">[Modelli di Deep Learning][github-dl]</span><span class="sxs-lookup"><span data-stu-id="0893b-220">[Deep learning models][github-dl]</span></span>

<!-- links -->

[aad-auth]: /azure/aks/aad-integration
[acr]: /azure/container-registry/
[something]: https://kubernetes.io/docs/reference/access-authn-authz/authentication/
[aks]: /azure/aks/intro-kubernetes
[autoscaler]: /azure/aks/autoscaler
[autoscale-pods]: /azure/aks/tutorial-kubernetes-scale#autoscale-pods
[azcopy]: /azure/storage/common/storage-use-azcopy-linux
[ddos]: /azure/virtual-network/ddos-protection-overview
[get-started]: /azure/security-center/security-center-get-started
[github-python]: https://github.com/Microsoft/MLAKSDeployAML
[github-dl]: https://github.com/Microsoft/AKSDeploymentTutorial_AML
[gpus-vs-cpus]: https://azure.microsoft.com/en-us/blog/gpus-vs-cpus-for-deployment-of-deep-learning-models/
[https-ingress]: /azure/aks/ingress-tls
[ingress-controller]: https://kubernetes.io/docs/concepts/services-networking/ingress/
[kubectl]: https://kubernetes.io/docs/tasks/tools/install-kubectl/
[aml]: /azure/machine-learning/service/overview-what-is-azure-ml
[manually-scale-pods]: /azure/aks/tutorial-kubernetes-scale#manually-scale-pods
[monitor-containers]: /azure/monitoring/monitoring-container-insights-overview
[autorizzazioni]: /azure/aks/concepts-identity
[permissions]: /azure/aks/concepts-identity
[rbac]: /azure/active-directory/role-based-access-control-what-is
[scale-cluster]: /azure/aks/scale-cluster
[scikit]: https://pypi.org/project/scikit-learn/
[security-center]: /azure/security-center/security-center-intro
[vm]: /azure/virtual-machines/
