---
title: Creare un bot di conversazione di livello aziendale
description: Come creare un bot di conversazione (chatbot) di livello aziendale con il framework Azure Bot.
author: roalexan
ms.date: 01/24/2019
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: azcat-ai
ms.openlocfilehash: f622041824d65978346bf39abb3de30732bad193
ms.sourcegitcommit: 3b15d65e7c35a19506e562c444343f8467b6a073
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/25/2019
ms.locfileid: "54908631"
---
# <a name="enterprise-grade-conversational-bot"></a><span data-ttu-id="5c736-103">Bot di conversazione di livello aziendale</span><span class="sxs-lookup"><span data-stu-id="5c736-103">Enterprise-grade conversational bot</span></span>

<span data-ttu-id="5c736-104">Questa architettura di riferimento descrive come creare un bot di conversazione (chatbot) di livello aziendale con il [framework Azure Bot][bot-framework].</span><span class="sxs-lookup"><span data-stu-id="5c736-104">This reference architecture describes how to build an enterprise-grade conversational bot (chatbot) using the [Azure Bot Framework][bot-framework].</span></span> <span data-ttu-id="5c736-105">Ogni bot è differente, ma esistono alcuni modelli, flussi di lavoro e tecnologie comuni da considerare.</span><span class="sxs-lookup"><span data-stu-id="5c736-105">Each bot is different, but there are some common patterns, workflows, and technologies to be aware of.</span></span> <span data-ttu-id="5c736-106">Per i bot da usare come carichi di la voro aziendali, in particolare, è necessario valutare diversi aspetti della progettazione oltre alle semplici funzionalità di base.</span><span class="sxs-lookup"><span data-stu-id="5c736-106">Especially for a bot to serve enterprise workloads, there are many design considerations beyond just the core functionality.</span></span> <span data-ttu-id="5c736-107">Questo articolo affronta la maggior parte degli aspetti essenziali della progettazione e presenta gli strumenti necessari per creare un bot affidabile, sicuro e con apprendimento attivo.</span><span class="sxs-lookup"><span data-stu-id="5c736-107">This article covers the most essential design aspects, and introduces the tools needed to build a robust, secure, and actively learning bot.</span></span>

<span data-ttu-id="5c736-108">[![Diagramma dell'architettura][0]][0]</span><span class="sxs-lookup"><span data-stu-id="5c736-108">[![Diagram of the architecture][0]][0]</span></span>

## <a name="architecture"></a><span data-ttu-id="5c736-109">Architettura</span><span class="sxs-lookup"><span data-stu-id="5c736-109">Architecture</span></span>

<span data-ttu-id="5c736-110">L'architettura mostrata in questo articolo si basa sui servizi di Azure seguenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-110">The architecture shown here uses the following Azure services.</span></span> <span data-ttu-id="5c736-111">Il proprio bot potrebbe non usare tutti questi servizi oppure potrebbe incorporarne altre.</span><span class="sxs-lookup"><span data-stu-id="5c736-111">Your own bot may not use all of these services, or may incorporate additional services.</span></span>

### <a name="bot-logic-and-user-experience"></a><span data-ttu-id="5c736-112">Logica del bot ed esperienza utente</span><span class="sxs-lookup"><span data-stu-id="5c736-112">Bot logic and user experience</span></span>

- <span data-ttu-id="5c736-113">**[Servizio Bot Framework ][bot-framework-service]** (BFS).</span><span class="sxs-lookup"><span data-stu-id="5c736-113">**[Bot Framework Service][bot-framework-service]** (BFS).</span></span> <span data-ttu-id="5c736-114">Questo servizio connette il bot a un'app per le comunicazioni, come Cortana, Facebook Messenger o Slack.</span><span class="sxs-lookup"><span data-stu-id="5c736-114">This service connects your bot to a communication app such as Cortana, Facebook Messenger, or Slack.</span></span> <span data-ttu-id="5c736-115">Facilita la comunicazione tra il bot e l'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-115">It facilitates communication between your bot and the user.</span></span>
- <span data-ttu-id="5c736-116">**[Servizio app di Azure][app-service]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-116">**[Azure App Service][app-service]**.</span></span> <span data-ttu-id="5c736-117">La logica dell'applicazione del bot è ospitata nel Servizio app di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-117">The bot application logic is hosted in Azure App Service.</span></span>

### <a name="bot-cognition-and-intelligence"></a><span data-ttu-id="5c736-118">Cognizione e intelligenza del bot</span><span class="sxs-lookup"><span data-stu-id="5c736-118">Bot cognition and intelligence</span></span>

- <span data-ttu-id="5c736-119">**[Language Understanding][luis]** (LUIS).</span><span class="sxs-lookup"><span data-stu-id="5c736-119">**[Language Understanding][luis]** (LUIS).</span></span> <span data-ttu-id="5c736-120">Parte di [Servizi cognitivi di Azure][cognitive-services], LUIS consente al bot di riconoscere il linguaggio naturale identificando finalità ed entità dell'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-120">Part of [Azure Cognitive Services][cognitive-services], LUIS enables your bot to understand natural language by identifying user intents and entities.</span></span>
- <span data-ttu-id="5c736-121">**[Ricerca di Azure][search]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-121">**[Azure Search][search]**.</span></span> <span data-ttu-id="5c736-122">Ricerca è un servizio gestito che fornisce un indice del documento disponibile per la ricerca rapida.</span><span class="sxs-lookup"><span data-stu-id="5c736-122">Search is a managed service that provides a quick searchable document index.</span></span>
- <span data-ttu-id="5c736-123">**[QnA Maker][qna-maker]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-123">**[QnA Maker][qna-maker]**.</span></span> <span data-ttu-id="5c736-124">QnA Maker è un servizio API basato sul cloud che crea un livello di domande e risposte simile a una conversazione sui dati.</span><span class="sxs-lookup"><span data-stu-id="5c736-124">QnA Maker is a cloud-based API service that creates a conversational, question-and-answer layer over your data.</span></span> <span data-ttu-id="5c736-125">Solitamente, viene caricato contenuto semistrutturato come le domande frequenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-125">Typically, it's loaded with semi-structured content such as FAQs.</span></span> <span data-ttu-id="5c736-126">Usarlo per creare una knowledge base per rispondere a domande in linguaggio naturale.</span><span class="sxs-lookup"><span data-stu-id="5c736-126">Use it to create a knowledge base for answering natural-language questions.</span></span>
- <span data-ttu-id="5c736-127">**[App Web][webapp]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-127">**[Web app][webapp]**.</span></span> <span data-ttu-id="5c736-128">Se per il bot sono necessarie soluzioni di intelligenza artificiale non fornite da un servizio esistente, è possibile implementare una soluzione personalizzata e ospitarla come app Web.</span><span class="sxs-lookup"><span data-stu-id="5c736-128">If your bot needs AI solutions not provided by an existing service, you can implement your own custom AI and host it as a web app.</span></span> <span data-ttu-id="5c736-129">In questo modo si rende disponibile un endpoint Web che il bot potrà chiamare.</span><span class="sxs-lookup"><span data-stu-id="5c736-129">This provides a web endpoint for your bot to call.</span></span>

### <a name="data-ingestion"></a><span data-ttu-id="5c736-130">Inserimento di dati</span><span class="sxs-lookup"><span data-stu-id="5c736-130">Data ingestion</span></span>

<span data-ttu-id="5c736-131">Il bot si basa su dati non elaborati che è necessario inserire e preparare.</span><span class="sxs-lookup"><span data-stu-id="5c736-131">The bot will rely on raw data that must be ingested and prepared.</span></span> <span data-ttu-id="5c736-132">Per orchestrare questo processo, considerare una delle opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5c736-132">Consider any of the following options to orchestrate this process:</span></span>

- <span data-ttu-id="5c736-133">**[Azure Data Factory][data-factory]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-133">**[Azure Data Factory][data-factory]**.</span></span> <span data-ttu-id="5c736-134">Data Factory orchestra e automatizza lo spostamento e la trasformazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="5c736-134">Data Factory orchestrates and automates data movement and data transformation.</span></span>
- <span data-ttu-id="5c736-135">**[App per la logica][logic-apps]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-135">**[Logic Apps][logic-apps]**.</span></span> <span data-ttu-id="5c736-136">App per la logica è una piattaforma serverless per la creazione di flussi di lavoro che integrano applicazioni, dati e servizi.</span><span class="sxs-lookup"><span data-stu-id="5c736-136">Logic Apps is a serverless platform for building workflows that integrate applications, data, and services.</span></span> <span data-ttu-id="5c736-137">Fornisce i connettori dei dati per molte applicazioni, tra cui Office 365.</span><span class="sxs-lookup"><span data-stu-id="5c736-137">Logic Apps provides data connectors for many applications, including Office 365.</span></span>
- <span data-ttu-id="5c736-138">**[Funzioni di Azure][functions]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-138">**[Azure Functions][functions]**.</span></span> <span data-ttu-id="5c736-139">È possibile usare Funzioni di Azure per scrivere codice serverless personalizzato che viene richiamato da un [trigger][functions-triggers], ad esempio ogni volta che un documento viene aggiunto in archiviazione BLOB o Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5c736-139">You can use Azure Functions to write custom serverless code that is invoked by a [trigger][functions-triggers] &mdash; for example, whenever a document is added to blob storage or Cosmos DB.</span></span>

### <a name="logging-and-monitoring"></a><span data-ttu-id="5c736-140">Registrazione e monitoraggio</span><span class="sxs-lookup"><span data-stu-id="5c736-140">Logging and monitoring</span></span>

- <span data-ttu-id="5c736-141">**[Application Insights][app-insights]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-141">**[Application Insights][app-insights]**.</span></span> <span data-ttu-id="5c736-142">Usare Application Insights per registrare le metriche dell'applicazione del bot a scopo di monitoraggio, diagnostica e analisi.</span><span class="sxs-lookup"><span data-stu-id="5c736-142">Use Application Insights to log the bot's application metrics for monitoring, diagnostic, and analytical purposes.</span></span>
- <span data-ttu-id="5c736-143">**[Archiviazione BLOB di Azure][blob]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-143">**[Azure Blob Storage][blob]**.</span></span> <span data-ttu-id="5c736-144">L'archiviazione BLOB è ottimizzata per archiviare enormi quantità di dati non strutturati.</span><span class="sxs-lookup"><span data-stu-id="5c736-144">Blob storage is optimized for storing massive amounts of unstructured data.</span></span>
- <span data-ttu-id="5c736-145">**[Cosmos DB][cosmosdb]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-145">**[Cosmos DB][cosmosdb]**.</span></span> <span data-ttu-id="5c736-146">Cosmos DB è particolarmente indicato per l'archiviazione di dati di log semistrutturati come le conversazioni.</span><span class="sxs-lookup"><span data-stu-id="5c736-146">Cosmos DB is well-suited for storing semi-structured log data such as conversations.</span></span>
- <span data-ttu-id="5c736-147">**[Power BI][power-bi]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-147">**[Power BI][power-bi]**.</span></span> <span data-ttu-id="5c736-148">Usare Power BI per creare i dashboard di monitoraggio per il bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-148">Use Power BI to create monitoring dashboards for your bot.</span></span>

### <a name="security-and-governance"></a><span data-ttu-id="5c736-149">Sicurezza e governance</span><span class="sxs-lookup"><span data-stu-id="5c736-149">Security and governance</span></span>

- <span data-ttu-id="5c736-150">**[Azure Active Directory][aad]** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="5c736-150">**[Azure Active Directory][aad]** (Azure AD).</span></span> <span data-ttu-id="5c736-151">Gli utenti verranno autenticati tramite un provider di identità come Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5c736-151">Users will authenticate through an identity provider such as Azure AD.</span></span> <span data-ttu-id="5c736-152">Il servizio Bot gestisce il flusso di autenticazione e i token OAuth.</span><span class="sxs-lookup"><span data-stu-id="5c736-152">The Bot Service handles the authentication flow and OAuth token management.</span></span> <span data-ttu-id="5c736-153">Vedere [Aggiungere l'autenticazione al bot tramite il servizio Azure Bot][bot-authentication].</span><span class="sxs-lookup"><span data-stu-id="5c736-153">See [Add authentication to your bot via Azure Bot Service][bot-authentication].</span></span>
- <span data-ttu-id="5c736-154">**[Azure Key Vault][key-vault]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-154">**[Azure Key Vault][key-vault]**.</span></span> <span data-ttu-id="5c736-155">Usare Key Vault per archiviare credenziali e altri segreti.</span><span class="sxs-lookup"><span data-stu-id="5c736-155">Store credentials and other secrets using Key Vault.</span></span>

### <a name="quality-assurance-and-enhancements"></a><span data-ttu-id="5c736-156">Controllo di qualità e ottimizzazioni</span><span class="sxs-lookup"><span data-stu-id="5c736-156">Quality assurance and enhancements</span></span>

- <span data-ttu-id="5c736-157">**[Azure DevOps][devops]**.</span><span class="sxs-lookup"><span data-stu-id="5c736-157">**[Azure DevOps][devops]**.</span></span> <span data-ttu-id="5c736-158">Fornisce molti servizi per la gestione delle app, tra cui controllo del codice sorgente, compilazione, test, distribuzione e verifica del progetto.</span><span class="sxs-lookup"><span data-stu-id="5c736-158">Provides many services for app management, including source control, building, testing, deployment, and project tracking.</span></span>
- <span data-ttu-id="5c736-159">**[VS Code][vscode]**. Un editor di codice leggero per lo sviluppo di app.</span><span class="sxs-lookup"><span data-stu-id="5c736-159">**[VS Code][vscode]** A lightweight code editor for app development.</span></span> <span data-ttu-id="5c736-160">È possibile usare qualsiasi altro IDE con funzionalità simili.</span><span class="sxs-lookup"><span data-stu-id="5c736-160">You can use any other IDE with similar features.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="5c736-161">Considerazioni sulla progettazione</span><span class="sxs-lookup"><span data-stu-id="5c736-161">Design considerations</span></span>

<span data-ttu-id="5c736-162">In generale, un bot di conversazione può essere diviso in funzionalità (il "cervello") e set di requisiti circostanti (il "corpo").</span><span class="sxs-lookup"><span data-stu-id="5c736-162">At a high level, a conversational bot can be divided into the bot functionality (the "brain") and a set of surrounding requirements (the "body").</span></span> <span data-ttu-id="5c736-163">Il cervello include i componenti che riconoscono il dominio, tra cui la logica del bot e le funzionalità di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="5c736-163">The brain includes the domain-aware components, including the bot logic and ML capabilities.</span></span> <span data-ttu-id="5c736-164">Gli altri componenti sono indipendenti dal dominio e rispondono a requisiti non funzionali, come CI/CD, controllo di qualità e sicurezza.</span><span class="sxs-lookup"><span data-stu-id="5c736-164">Other components are domain agnostic and address non-functional requirements such as CI/CD, quality assurance, and security.</span></span>

![Diagramma logico delle funzionalità del bot](./_images/conversational-bot-logical.png)

<span data-ttu-id="5c736-166">Prima di entrare nello specifico di questa architettura, iniziamo con il flusso di dati attraverso ogni sottocomponente del progetto.</span><span class="sxs-lookup"><span data-stu-id="5c736-166">Before getting into the specifics of this architecture, let's start with the data flow through each subcomponent of the design.</span></span> <span data-ttu-id="5c736-167">Il flusso di dati può essere avviato dall'utente e dal sistema.</span><span class="sxs-lookup"><span data-stu-id="5c736-167">The data flow includes user-initiated and system-initiated data flows.</span></span>

### <a name="user-message-flow"></a><span data-ttu-id="5c736-168">Flusso di messaggi dell'utente</span><span class="sxs-lookup"><span data-stu-id="5c736-168">User message flow</span></span>

<span data-ttu-id="5c736-169">**Autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="5c736-169">**Authentication**.</span></span> <span data-ttu-id="5c736-170">Per iniziare, gli utenti eseguono l'autenticazione con qualsiasi meccanismo fornito dal loro canale di comunicazione con il bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-170">Users start by authenticating themselves using whatever mechanism is provided by their channel of communication with the bot.</span></span> <span data-ttu-id="5c736-171">Il framework dei bot supporta molti canali di comunicazione, come Cortana, Microsoft Teams, Facebook Messenger, Kik e Slack.</span><span class="sxs-lookup"><span data-stu-id="5c736-171">The bot framework supports many communication channels, including Cortana, Microsoft Teams, Facebook Messenger, Kik, and Slack.</span></span> <span data-ttu-id="5c736-172">Per un elenco dei canali, vedere [Connettere un bot ai canali](/azure/bot-service/bot-service-manage-channels).</span><span class="sxs-lookup"><span data-stu-id="5c736-172">For a list of channels, see [Connect a bot to channels](/azure/bot-service/bot-service-manage-channels).</span></span> <span data-ttu-id="5c736-173">Quando si crea un bot con il servizio Azure Bot, viene automaticamente configurato il canale [Web Chat][webchat],</span><span class="sxs-lookup"><span data-stu-id="5c736-173">When you create a bot with Azure Bot Service, the [Web Chat][webchat] channel is automatically configured.</span></span> <span data-ttu-id="5c736-174">che consente agli utenti di interagire direttamente con il bot in una pagina Web.</span><span class="sxs-lookup"><span data-stu-id="5c736-174">This channel allows users to interact with your bot directly in a web page.</span></span> <span data-ttu-id="5c736-175">È anche possibile connettere il bot a un'app personalizzata usando il canale [Direct Line](/azure/bot-service/bot-service-channel-connect-directline).</span><span class="sxs-lookup"><span data-stu-id="5c736-175">You can also connect the bot to a custom app by using the [Direct Line](/azure/bot-service/bot-service-channel-connect-directline) channel.</span></span> <span data-ttu-id="5c736-176">L'identità dell'utente viene usata per fornire il controllo degli accessi in base al ruolo, oltre che per distribuire contenuto personalizzato.</span><span class="sxs-lookup"><span data-stu-id="5c736-176">The user's identity is used to provide role-based access control, as well as to serve personalized content.</span></span>

<span data-ttu-id="5c736-177">**Messaggio utente**.</span><span class="sxs-lookup"><span data-stu-id="5c736-177">**User message**.</span></span> <span data-ttu-id="5c736-178">Dopo aver eseguito l'autenticazione, l'utente invia un messaggio al bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-178">Once authenticated, the user sends a message to the bot.</span></span> <span data-ttu-id="5c736-179">Il bot legge il messaggio e lo instrada a un servizio di riconoscimento del linguaggio naturale, come [LUIS](/azure/cognitive-services/luis/).</span><span class="sxs-lookup"><span data-stu-id="5c736-179">The bot reads the message and routes it to a natural language understanding service such as [LUIS](/azure/cognitive-services/luis/).</span></span> <span data-ttu-id="5c736-180">Questo passaggio recupera le **finalità** (quello che l'utente vuole fare) e le **entità** (gli interessi dell'utente).</span><span class="sxs-lookup"><span data-stu-id="5c736-180">This step gets the **intents** (what the user wants to do) and **entities** (what things the user is interested in).</span></span> <span data-ttu-id="5c736-181">Il bot crea quindi una query e la passa a un servizio che fornisce informazioni, ad esempio [Ricerca di Azure][search] per il recupero di documenti, [QnA Maker](https://www.qnamaker.ai/) per le domande frequenti oppure una knowledge base personalizzata.</span><span class="sxs-lookup"><span data-stu-id="5c736-181">The bot then builds a query that it passes to a service that serves information, such as [Azure Search][search] for document retrieval, [QnA Maker](https://www.qnamaker.ai/) for FAQs, or a custom knowledge base.</span></span> <span data-ttu-id="5c736-182">Il bot usa questi risultati per creare una risposta.</span><span class="sxs-lookup"><span data-stu-id="5c736-182">The bot uses these results to construct a response.</span></span> <span data-ttu-id="5c736-183">Per ottimizzare il risultato di una specifica query, il bot potrebbe effettuare e ricevere diverse chiamate con questi servizi remoti.</span><span class="sxs-lookup"><span data-stu-id="5c736-183">To give the best result for a  given query, the bot might make several back-and-forth calls to these remote services.</span></span>

<span data-ttu-id="5c736-184">**Risposta**.</span><span class="sxs-lookup"><span data-stu-id="5c736-184">**Response**.</span></span> <span data-ttu-id="5c736-185">A questo punto, il bot ha identificato la risposta migliore e la invia all'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-185">At this point, the bot has determined the best response and sends it to the user.</span></span> <span data-ttu-id="5c736-186">Se il punteggio di attendibilità della risposta più corrispondente è basso, è possibile che si tratti di una domanda di disambiguazione o di un acknowledgement a cui il bot non è riuscito a rispondere adeguatamente.</span><span class="sxs-lookup"><span data-stu-id="5c736-186">If the confidence score of the best-matched answer is low, the response might be a disambiguation question or an acknowledgement that the bot could not reply adequately.</span></span>

<span data-ttu-id="5c736-187">**Registrazione**.</span><span class="sxs-lookup"><span data-stu-id="5c736-187">**Logging**.</span></span> <span data-ttu-id="5c736-188">Quando viene ricevuta una richiesta dell'utente o viene inviata una risposta, tutte le azioni della conversazione dovrebbero essere registrate in un apposito archivio, insieme alle metriche delle prestazioni e agli errori generali dei servizi esterni.</span><span class="sxs-lookup"><span data-stu-id="5c736-188">When a user request is received or a response is sent, all conversation actions should be logged to a logging store, along with performance metrics and general errors from external services.</span></span> <span data-ttu-id="5c736-189">Questi log saranno utili in seguito per diagnosticare i problemi e migliorare il sistema.</span><span class="sxs-lookup"><span data-stu-id="5c736-189">These logs will be useful later when diagnosing issues and improving the system.</span></span>

<span data-ttu-id="5c736-190">**Feedback**.</span><span class="sxs-lookup"><span data-stu-id="5c736-190">**Feedback**.</span></span> <span data-ttu-id="5c736-191">Un'altra procedura consigliata consiste nel raccogliere il feedback degli utenti e i punteggi di soddisfazione.</span><span class="sxs-lookup"><span data-stu-id="5c736-191">Another good practice is to collect user feedback and satisfaction scores.</span></span> <span data-ttu-id="5c736-192">Come completamento della risposta finale, il bot dovrebbe chiedere all'utente di valutare la propria soddisfazione al riguardo.</span><span class="sxs-lookup"><span data-stu-id="5c736-192">As a follow up to the bot's final response, the bot should ask the user to rate their satisfaction with the reply.</span></span> <span data-ttu-id="5c736-193">Il feedback può aiutare a risolvere il problema dell'avvio a freddo del riconoscimento del linguaggio naturale, nonché a continuare a migliorare l'accuratezza delle risposte.</span><span class="sxs-lookup"><span data-stu-id="5c736-193">Feedback can help you to solve the cold start problem of natural language understanding, and continually improve the accuracy of responses.</span></span>

### <a name="system-data-flow"></a><span data-ttu-id="5c736-194">Flusso di dati del sistema</span><span class="sxs-lookup"><span data-stu-id="5c736-194">System Data Flow</span></span>

<span data-ttu-id="5c736-195">**ETL**.</span><span class="sxs-lookup"><span data-stu-id="5c736-195">**ETL**.</span></span> <span data-ttu-id="5c736-196">Il bot si basa sulle informazioni e sulle conoscenze estratte dai dati non elaborati di un processo ETL eseguito nel back-end.</span><span class="sxs-lookup"><span data-stu-id="5c736-196">The bot relies on information and knowledge extracted from the raw data by an ETL process in the backend.</span></span> <span data-ttu-id="5c736-197">Questi dati potrebbero essere strutturati (database SQL), semistrutturati (sistema CRM, domande frequenti) o non strutturati (documenti di Word, PDF, log Web).</span><span class="sxs-lookup"><span data-stu-id="5c736-197">This data might be structured (SQL database), semi-structured (CRM system, FAQs), or unstructured (Word documents, PDFs, web logs).</span></span> <span data-ttu-id="5c736-198">Un sottosistema ETL estrae i dati in base a una pianificazione fissa.</span><span class="sxs-lookup"><span data-stu-id="5c736-198">An ETL subsystem extracts the data on a fixed schedule.</span></span> <span data-ttu-id="5c736-199">Il contenuto viene trasformato e arricchito, quindi viene caricato in un archivio dati intermedio, ad esempio Cosmos DB o Archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-199">The content is transformed and enriched, then loaded into an intermediary data store, such as Cosmos DB or Azure Blob Storage.</span></span>

<span data-ttu-id="5c736-200">I dati dell'archivio intermedio vengono quindi indicizzati in Ricerca di Azure per il recupero di documenti, caricati in QnA Maker per creare coppie di domande e risposte oppure caricati in un'app Web personalizzata per l'elaborazione di testo non strutturato.</span><span class="sxs-lookup"><span data-stu-id="5c736-200">Data in the intermediary store is then indexed into Azure Search for document retrieval, loaded into QnA Maker to create question and answer pairs, or loaded into a custom web app for unstructured text processing.</span></span> <span data-ttu-id="5c736-201">I dati vengono anche usati per eseguire il training di un modello LUIS per l'estrazione di finalità ed entità.</span><span class="sxs-lookup"><span data-stu-id="5c736-201">The data is also used to train a LUIS model for intent and entity extraction.</span></span>

<span data-ttu-id="5c736-202">**Controllo di qualità**.</span><span class="sxs-lookup"><span data-stu-id="5c736-202">**Quality assurance**.</span></span> <span data-ttu-id="5c736-203">I log delle conversazioni vengono usati per diagnosticare e risolvere bug, fornire informazioni sul modo in cui viene usato il bot e tenere traccia delle prestazioni generali.</span><span class="sxs-lookup"><span data-stu-id="5c736-203">The conversation logs are used to diagnose and fix bugs, provide insight into how the bot is being used, and track overall performance.</span></span> <span data-ttu-id="5c736-204">I dati del feedback sono utili per rieseguire il training dei modelli di intelligenza artificiale in modo da migliorare le prestazioni del bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-204">Feedback data is useful for retraining the AI models to improve bot performance.</span></span>

## <a name="building-a-bot"></a><span data-ttu-id="5c736-205">Compilazione di un bot</span><span class="sxs-lookup"><span data-stu-id="5c736-205">Building a bot</span></span>

<span data-ttu-id="5c736-206">Prima di scrivere anche una sola riga di codice, è importante scrivere una specifica funzionale in modo che il team di sviluppo abbia le idee chiare sulle funzioni previste del bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-206">Before you even write a single line of code, it's important to write a functional specification so the development team has a clear idea of what the bot is expected to do.</span></span> <span data-ttu-id="5c736-207">La specifica dovrà includere un elenco ragionevolmente completo di input utente e di risposte previste del bot in vari domini di conoscenza.</span><span class="sxs-lookup"><span data-stu-id="5c736-207">The specification should include a reasonably comprehensive list of user inputs and expected bot responses in various knowledge domains.</span></span> <span data-ttu-id="5c736-208">Questo documento attivo si rivelerà una guida preziosa per lo sviluppo e i test del bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-208">This living document will be an invaluable guide for developing and testing your bot.</span></span>

### <a name="ingest-data"></a><span data-ttu-id="5c736-209">Inserire dati</span><span class="sxs-lookup"><span data-stu-id="5c736-209">Ingest data</span></span>

<span data-ttu-id="5c736-210">Identificare quindi le origini dati che consentiranno al bot di interagire in modo intelligente con gli utenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-210">Next, identify the data sources that will enable the bot to interact intelligently with users.</span></span> <span data-ttu-id="5c736-211">Come accennato in precedenza, queste origini dati possono contenere set di dati strutturati, semistrutturati o non strutturati.</span><span class="sxs-lookup"><span data-stu-id="5c736-211">As mentioned earlier, these data sources could contain structured, semi-structured, or unstructured data sets.</span></span> <span data-ttu-id="5c736-212">Per iniziare, un approccio valido consiste nel creare una copia una tantum dei dati in un archivio centrale, come Cosmos DB o Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-212">When you're getting started, a good approach is to make a one-off copy of the data to a central store, such as Cosmos DB or Azure Storage.</span></span> <span data-ttu-id="5c736-213">Proseguendo, è necessario creare una pipeline automatizzata di inserimento dei dati per tenerli aggiornati.</span><span class="sxs-lookup"><span data-stu-id="5c736-213">As you progress, you should create an automated data ingestion pipeline to keep this data current.</span></span> <span data-ttu-id="5c736-214">Le opzioni per questa pipeline includono Data Factory, Funzioni e App per la logica.</span><span class="sxs-lookup"><span data-stu-id="5c736-214">Options for an automated ingestion pipeline include Data Factory, Functions, and Logic Apps.</span></span> <span data-ttu-id="5c736-215">A seconda degli archivi dati e degli schemi scelti, è possibile usare una combinazione di questi approcci.</span><span class="sxs-lookup"><span data-stu-id="5c736-215">Depending on the data stores and the schemas, you might use a combination of these approaches.</span></span>

<span data-ttu-id="5c736-216">Quando si inizia, è ragionevole usare il portale di Azure per creare manualmente le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-216">As you get started, it's reasonable to use the Azure portal to manually create Azure resources.</span></span> <span data-ttu-id="5c736-217">In seguito, è opportuno concentrarsi sull'automazione della distribuzione di queste risorse.</span><span class="sxs-lookup"><span data-stu-id="5c736-217">Later on, you should put more thought into automating the deployment of these resources.</span></span>

### <a name="core-bot-logic-and-ux"></a><span data-ttu-id="5c736-218">Logica di base del bot ed esperienza utente</span><span class="sxs-lookup"><span data-stu-id="5c736-218">Core bot logic and UX</span></span>

<span data-ttu-id="5c736-219">Dopo aver acquisito una specifica e alcuni dati, è il momento di iniziare a trasformare il bot in realtà.</span><span class="sxs-lookup"><span data-stu-id="5c736-219">Once you have a specification and some data, it's time to start making your bot into reality.</span></span> <span data-ttu-id="5c736-220">Focalizziamoci sulla logica di base del bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-220">Let's focus on the core bot logic.</span></span> <span data-ttu-id="5c736-221">Si tratta del codice che gestisce la conversazione con l'utente, tra cui la logica di routing, la logica di disambiguazione e la registrazione.</span><span class="sxs-lookup"><span data-stu-id="5c736-221">This is the code that handles the conversation with the user, including the routing logic, disambiguation logic, and logging.</span></span> <span data-ttu-id="5c736-222">Per iniziare, acquisire familiarità con [Bot Framework][bot-framework], ossia:</span><span class="sxs-lookup"><span data-stu-id="5c736-222">Start by familiarizing yourself with the [Bot Framework][bot-framework], including:</span></span>

- <span data-ttu-id="5c736-223">Terminologia e concetti di base usati nel framework, in particolare [conversazioni], [turni] e [attività].</span><span class="sxs-lookup"><span data-stu-id="5c736-223">Basic concepts and terminology used in the framework, especially [conversations], [turns], and [activities].</span></span>
- <span data-ttu-id="5c736-224">Il [servizio Bot Connector](/azure/bot-service/rest-api/bot-framework-rest-connector-quickstart), che gestisce i collegamenti tra il bot e i canali.</span><span class="sxs-lookup"><span data-stu-id="5c736-224">The [Bot Connector service](/azure/bot-service/rest-api/bot-framework-rest-connector-quickstart), which handles the networking between the bot and your channels.</span></span>
- <span data-ttu-id="5c736-225">La modalità con cui viene mantenuto lo [stato](/azure/bot-service/bot-builder-concept-state) della conversazione, ossia in memoria o, ancora meglio, in un archivio come Archiviazione BLOB di Azure o Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5c736-225">How conversation [state](/azure/bot-service/bot-builder-concept-state) is maintained, either in memory or better yet in a store such as Azure Blob Storage or Azure Cosmos DB.</span></span>
- <span data-ttu-id="5c736-226">Il [middleware](/azure/bot-service/bot-builder-basics#middleware) e come può essere usato per collegare il bot a servizi esterni, come Servizi cognitivi.</span><span class="sxs-lookup"><span data-stu-id="5c736-226">[Middleware](/azure/bot-service/bot-builder-basics#middleware), and how it can be used to hook up your bot with external services, such as Cognitive Services.</span></span>

<span data-ttu-id="5c736-227">Per un'[esperienza utente](/azure/bot-service/bot-service-design-user-experience) soddisfacente, sono disponibili diverse opzioni.</span><span class="sxs-lookup"><span data-stu-id="5c736-227">For a rich [user experience](/azure/bot-service/bot-service-design-user-experience), there are many options.</span></span>

- <span data-ttu-id="5c736-228">È possibile usare [schede](/azure/bot-service/bot-service-design-user-experience#cards) in cui includere pulsanti, immagini, sequenze e menu.</span><span class="sxs-lookup"><span data-stu-id="5c736-228">You can use [cards](/azure/bot-service/bot-service-design-user-experience#cards) to include buttons, images, carousels, and menus.</span></span>
- <span data-ttu-id="5c736-229">Un bot può supportare il parlato.</span><span class="sxs-lookup"><span data-stu-id="5c736-229">A bot can support speech.</span></span>
- <span data-ttu-id="5c736-230">È anche possibile incorporare il bot in un'app o in un sito Web e usare le funzionalità dell'app che lo ospita.</span><span class="sxs-lookup"><span data-stu-id="5c736-230">You can even embed your bot in an app or website and use the capabilities of the app hosting it.</span></span>

<span data-ttu-id="5c736-231">Per iniziare, è possibile creare il bot online usando il [servizio Azure Bot](/azure/bot-service/bot-service-quickstart) ed effettuando una selezione tra i modelli di C# e Node.js disponibili.</span><span class="sxs-lookup"><span data-stu-id="5c736-231">To get started, you can build your bot online using the [Azure Bot Service](/azure/bot-service/bot-service-quickstart), selecting from the available C# and Node.js templates.</span></span> <span data-ttu-id="5c736-232">Se i bot sono più sofisticati, però, è necessario crearli in locale e poi distribuirli sul Web.</span><span class="sxs-lookup"><span data-stu-id="5c736-232">As your bot gets more sophisticated, however, you will need to create your bot locally then deploy it to the web.</span></span> <span data-ttu-id="5c736-233">Scegliere un IDE, ad esempio Visual Studio o Visual Studio Code, e un linguaggio di programmazione.</span><span class="sxs-lookup"><span data-stu-id="5c736-233">Choose an IDE, such as Visual Studio or Visual Studio Code, and a programming language.</span></span> <span data-ttu-id="5c736-234">Sono disponibili SDK per i linguaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="5c736-234">SDKs are available for the following languages:</span></span>

- [<span data-ttu-id="5c736-235">C#</span><span class="sxs-lookup"><span data-stu-id="5c736-235">C#</span></span>](https://github.com/microsoft/botbuilder-dotnet)
- [<span data-ttu-id="5c736-236">JavaScript</span><span class="sxs-lookup"><span data-stu-id="5c736-236">JavaScript</span></span>](https://github.com/microsoft/botbuilder-js)
- <span data-ttu-id="5c736-237">[Java](https://github.com/microsoft/botbuilder-java) (anteprima)</span><span class="sxs-lookup"><span data-stu-id="5c736-237">[Java](https://github.com/microsoft/botbuilder-java) (preview)</span></span>
- <span data-ttu-id="5c736-238">[Python](https://github.com/microsoft/botbuilder-python) (anteprima)</span><span class="sxs-lookup"><span data-stu-id="5c736-238">[Python](https://github.com/microsoft/botbuilder-python) (preview)</span></span>

<span data-ttu-id="5c736-239">Come punto di partenza, è possibile scaricare il codice sorgente per il bot creato usando il servizio Azure Bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-239">As a starting point, you can download the source code for the bot you created using the Azure Bot Service.</span></span> <span data-ttu-id="5c736-240">È anche possibile trovare [codice di esempio](https://github.com/Microsoft/BotBuilder-Samples/blob/master/README.md), dai semplici bot eco a quelli più sofisticati che si integrano con vari servizi di intelligenza artificiale.</span><span class="sxs-lookup"><span data-stu-id="5c736-240">You can also find [sample code](https://github.com/Microsoft/BotBuilder-Samples/blob/master/README.md), from simple echo bots to more sophisticated bots that integrate with various AI services.</span></span>

### <a name="add-smarts-to-your-bot"></a><span data-ttu-id="5c736-241">Aggiungere funzionalità intelligenti al bot</span><span class="sxs-lookup"><span data-stu-id="5c736-241">Add smarts to your bot</span></span>

<span data-ttu-id="5c736-242">Per un semplice bot con un elenco ben definito di comandi, può essere possibile usare un approccio basato su regole per analizzare l'input utente tramite regex.</span><span class="sxs-lookup"><span data-stu-id="5c736-242">For a simple bot with a well-defined list of commands, you might be able to use a rules-based approach to parse the user input via regex.</span></span> <span data-ttu-id="5c736-243">Questo approccio ha il vantaggio di essere deterministico e comprensibile.</span><span class="sxs-lookup"><span data-stu-id="5c736-243">This has the advantage of being deterministic and understandable.</span></span> <span data-ttu-id="5c736-244">Tuttavia, se il bot deve comprendere le finalità e le entità di un messaggio in linguaggio più naturale, sono disponibili alcuni servizi di intelligenza artificiale che possono risultare utili.</span><span class="sxs-lookup"><span data-stu-id="5c736-244">However, when your bot needs to understand the intents and entities of a more natural-language message, there are AI services that can help.</span></span>

- <span data-ttu-id="5c736-245">LUIS è un servizio progettato specificamente per riconoscere finalità ed entità dell'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-245">LUIS is specifically designed to understand user intents and entities.</span></span> <span data-ttu-id="5c736-246">È possibile eseguirne il training con una raccolta di dimensioni modeste di [input utente](/azure/cognitive-services/luis/luis-concept-utterance) e risposte desiderate pertinenti per ricevere le finalità e le entità relative allo specifico messaggio di un utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-246">You train it with a moderately sized collection of relevant [user input](/azure/cognitive-services/luis/luis-concept-utterance) and desired responses, and it returns the intents and entities for a user's given message.</span></span>

- <span data-ttu-id="5c736-247">Insieme a LUIS è possibile usare Ricerca di Azure,</span><span class="sxs-lookup"><span data-stu-id="5c736-247">Azure Search can work alongside LUIS.</span></span> <span data-ttu-id="5c736-248">che consente di creare indici ricercabili per tutti i dati pertinenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-248">Using Search, you create searchable indexes over all relevant data.</span></span> <span data-ttu-id="5c736-249">Il bot esegue query su questi indici per trovare le entità estratte da LUIS.</span><span class="sxs-lookup"><span data-stu-id="5c736-249">The bot queries these indexes for the entities extracted by LUIS.</span></span> <span data-ttu-id="5c736-250">Ricerca di Azure supporta anche i [sinonimi][synonyms], che possono ampliare la rete di associazioni di parole corrette.</span><span class="sxs-lookup"><span data-stu-id="5c736-250">Azure Search also supports [synonyms][synonyms], which can widen the net of correct word mappings.</span></span>

- <span data-ttu-id="5c736-251">QnA Maker è un altro servizio progettato per restituire risposte a specifiche domande.</span><span class="sxs-lookup"><span data-stu-id="5c736-251">QnA Maker is another service that is designed to return answers for given questions.</span></span> <span data-ttu-id="5c736-252">Il relativo training viene solitamente eseguito su dati semistrutturati come le domande frequenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-252">It's typically trained over semi-structured data such as FAQs.</span></span>

<span data-ttu-id="5c736-253">Con il bot è possibile usare altri servizi di intelligenza artificiale per arricchire ulteriormente l'esperienza utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-253">Your bot can use other AI services to further enrich the user experience.</span></span> <span data-ttu-id="5c736-254">Il [gruppo di Servizi cognitivi predefiniti](https://azure.microsoft.com/en-us/services/cognitive-services/?v=18.44a) di intelligenza artificiale (che include LUIS e QnA Maker) offre servizi per la visione, il parlato, la lingua, la ricerca e la posizione.</span><span class="sxs-lookup"><span data-stu-id="5c736-254">The [Cognitive Services suite of pre-built AI](https://azure.microsoft.com/en-us/services/cognitive-services/?v=18.44a) services (which includes LUIS and QnA Maker) has services for vision, speech, language, search, and location.</span></span> <span data-ttu-id="5c736-255">È possibile aggiungere rapidamente funzionalità come la traduzione linguistica, il controllo ortografico, l'analisi del sentiment, il riconoscimento ottico dei caratteri (OCR), il riconoscimento della posizione e la moderazione del contenuto.</span><span class="sxs-lookup"><span data-stu-id="5c736-255">You can quickly add functionality such as language translation, spell checking, sentiment analysis, OCR, location awareness, and content moderation.</span></span> <span data-ttu-id="5c736-256">Questi servizi possono essere collegati come moduli di middleware nel bot per un'interazione più naturale e intelligente con l'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-256">These services can be wired up as middleware modules in your bot to interact more naturally and intelligently with the user.</span></span>

<span data-ttu-id="5c736-257">Un'altra opzione consiste nell'integrare un servizio di intelligenza artificiale personalizzato.</span><span class="sxs-lookup"><span data-stu-id="5c736-257">Another option is to integrate your own custom AI service.</span></span> <span data-ttu-id="5c736-258">Questo approccio è più complesso, ma offre la massima flessibilità in termini di algoritmo di Machine Learning, training e modello.</span><span class="sxs-lookup"><span data-stu-id="5c736-258">This approach is more complex, but gives you complete flexibility in terms of the machine learning algorithm, training, and model.</span></span> <span data-ttu-id="5c736-259">È ad esempio possibile implementare una modellazione di argomenti personalizzata e usare un algoritmo come [LDA][lda] per trovare documenti simili o pertinenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-259">For example, you could implement your own topic modeling and use algorithm such as [LDA][lda] to find similar or relevant documents.</span></span> <span data-ttu-id="5c736-260">Un approccio valido consiste nell'esporre la soluzione di intelligenza artificiale personalizzata come endpoint di servizio Web e chiamare l'endpoint dalla logica di base del bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-260">A good approach is to expose your custom AI solution as a web service endpoint, and call the endpoint from the core bot logic.</span></span> <span data-ttu-id="5c736-261">Il servizio Web potrebbe essere ospitato in Servizio app o in un cluster di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="5c736-261">The web service could be hosted in App Service or in a cluster of VMs.</span></span> <span data-ttu-id="5c736-262">[Azure Machine Learning][aml] fornisce numerosi servizi e librerie utili per il [training](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/training) e la [distribuzione](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/deployment) dei modelli.</span><span class="sxs-lookup"><span data-stu-id="5c736-262">[Azure Machine Learning][aml] provides a number of services and libraries to assist you in [training](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/training) and [deploying](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/deployment) your models.</span></span>

## <a name="quality-assurance-and-enhancement"></a><span data-ttu-id="5c736-263">Controllo di qualità e ottimizzazioni</span><span class="sxs-lookup"><span data-stu-id="5c736-263">Quality assurance and enhancement</span></span>

<span data-ttu-id="5c736-264">**Registrazione**.</span><span class="sxs-lookup"><span data-stu-id="5c736-264">**Logging**.</span></span> <span data-ttu-id="5c736-265">Registrare le conversazioni dell'utente con il bot, incluse le metriche delle prestazioni sottostanti ed eventuali errori.</span><span class="sxs-lookup"><span data-stu-id="5c736-265">Log user conversations with the bot, including the underlying performance metrics and any errors.</span></span> <span data-ttu-id="5c736-266">Questi log si riveleranno particolarmente utili per eseguire il debug dei problemi, per comprendere le interazioni con l'utente e per migliorare il sistema.</span><span class="sxs-lookup"><span data-stu-id="5c736-266">These logs will prove invaluable for debugging issues, understanding user interactions, and improving the system.</span></span> <span data-ttu-id="5c736-267">Gli archivi dati appropriati variano in base ai tipi di log.</span><span class="sxs-lookup"><span data-stu-id="5c736-267">Different data stores might be appropriate for different types of logs.</span></span> <span data-ttu-id="5c736-268">Considerare ad esempio Application Insights per i log Web, Cosmos DB per le conversazioni e Archiviazione di Azure per i payload di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="5c736-268">For example, consider Application Insights for web logs, Cosmos DB for conversations, and Azure Storage for large payloads.</span></span> <span data-ttu-id="5c736-269">Vedere [Scrivere direttamente nell'archivio][transcript-storage].</span><span class="sxs-lookup"><span data-stu-id="5c736-269">See [Write directly to storage][transcript-storage].</span></span>

<span data-ttu-id="5c736-270">**Feedback**.</span><span class="sxs-lookup"><span data-stu-id="5c736-270">**Feedback**.</span></span> <span data-ttu-id="5c736-271">È anche importante capire il grado di soddisfazione degli utenti riguardo alle loro interazioni con il bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-271">It's also important to understand how satisfied users are with their bot interactions.</span></span> <span data-ttu-id="5c736-272">Se si mantiene un record del feedback degli utenti, è possibile usare questi dati per dedicarsi a migliorare specifiche interazioni e rieseguire il training dei modelli di intelligenza artificiale per aumentare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5c736-272">If you have a record of user feedback, you can use this data to focus your efforts on improving certain interactions and retraining the AI models for improved performance.</span></span> <span data-ttu-id="5c736-273">Usare il feedback per rieseguire il training dei modelli, ad esempio LUIS, nel sistema.</span><span class="sxs-lookup"><span data-stu-id="5c736-273">Use the feedback to retrain the models, such as LUIS, in your system.</span></span>

<span data-ttu-id="5c736-274">**Test**.</span><span class="sxs-lookup"><span data-stu-id="5c736-274">**Testing**.</span></span> <span data-ttu-id="5c736-275">I test di un bot includono unit test, test di integrazione, test di regressione e test funzionali.</span><span class="sxs-lookup"><span data-stu-id="5c736-275">Testing a bot involves unit tests, integration tests, regression tests, and functional tests.</span></span> <span data-ttu-id="5c736-276">Per i test, è consigliabile registrare le risposte HTTP reali dei servizi esterni, come Ricerca di Azure o QnA Maker, in modo che sia possibile riprodurle senza la necessità di effettuare chiamate di rete reali a tali servizi.</span><span class="sxs-lookup"><span data-stu-id="5c736-276">For testing, we recommend recording real HTTP responses from external services, such as Azure Search or QnA Maker, so they can be played back during unit testing without needing to make real network calls to external services.</span></span>

<span data-ttu-id="5c736-277">Per velocizzare lo sviluppo in queste aree, esaminare [Botbuilder Utils per JavaScript](https://github.com/Microsoft/botbuilder-utils-js).</span><span class="sxs-lookup"><span data-stu-id="5c736-277">To jump-start your development in these areas, look at the [Botbuilder Utils for JavaScript](https://github.com/Microsoft/botbuilder-utils-js).</span></span> <span data-ttu-id="5c736-278">Questo repository contiene esempi di codice di utilità per i bot creati con [Microsoft Bot Framework v4][bot-framework] e che eseguono Node.js.</span><span class="sxs-lookup"><span data-stu-id="5c736-278">This repo contains sample utility code for bots built with [Microsoft Bot Framework v4][bot-framework] and running Node.js.</span></span> <span data-ttu-id="5c736-279">Sono inclusi i pacchetti seguenti:</span><span class="sxs-lookup"><span data-stu-id="5c736-279">It includes the following packages:</span></span>

- <span data-ttu-id="5c736-280">[Registratore di test HTTP](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-http-test-recorder).</span><span class="sxs-lookup"><span data-stu-id="5c736-280">[Http Test Recorder](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-http-test-recorder).</span></span> <span data-ttu-id="5c736-281">Registra il traffico HTTP proveniente da servizi esterni.</span><span class="sxs-lookup"><span data-stu-id="5c736-281">Records HTTP traffic from external services.</span></span> <span data-ttu-id="5c736-282">Include il supporto predefinito per LUIS, Ricerca di Azure e QnAMaker, ma sono disponibili estensioni per supportare qualsiasi servizio.</span><span class="sxs-lookup"><span data-stu-id="5c736-282">It comes pre-built with support for LUIS, Azure Search, and QnAMaker, but extensions are available to support any service.</span></span>

- <span data-ttu-id="5c736-283">[Archivio di trascrizioni di Cosmos DB](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-cosmosdb).</span><span class="sxs-lookup"><span data-stu-id="5c736-283">[Cosmos DB Transcript Store](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-cosmosdb).</span></span> <span data-ttu-id="5c736-284">Mostra come archiviare ed eseguire query sulle trascrizioni dei bot in Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5c736-284">Shows how to store and query bot transcripts in Cosmos DB.</span></span>

- <span data-ttu-id="5c736-285">[Archivio di trascrizioni di Application Insights](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-app-insights).</span><span class="sxs-lookup"><span data-stu-id="5c736-285">[Application Insights Transcript Store](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-app-insights).</span></span> <span data-ttu-id="5c736-286">Mostra come archiviare ed eseguire query sulle trascrizioni dei bot in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="5c736-286">Shows how to store and query bot transcripts in Application Insights.</span></span>

- <span data-ttu-id="5c736-287">[Middleware per la raccolta di feedback](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-feedback).</span><span class="sxs-lookup"><span data-stu-id="5c736-287">[Feedback Collection Middleware](https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-feedback).</span></span> <span data-ttu-id="5c736-288">Middleware di esempio che è possibile usare per creare un meccanismo di richiesta di feedback.</span><span class="sxs-lookup"><span data-stu-id="5c736-288">Sample middleware that can be used to build a feedback-request mechanism.</span></span>

> [!NOTE]
> <span data-ttu-id="5c736-289">Questi pacchetti vengono forniti come esempi di codice di utilità e non offrono alcuna garanzia di supporto o aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="5c736-289">These packages are provided as utility sample code, and come with no guarantee of support or updates.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="5c736-290">Considerazioni sulla disponibilità</span><span class="sxs-lookup"><span data-stu-id="5c736-290">Availability considerations</span></span>

<span data-ttu-id="5c736-291">Mentre vengono implementate nuove funzionalità o risolti i bug, è consigliabile usare più ambienti di distribuzione, ad esempio di gestione temporanea e di produzione.</span><span class="sxs-lookup"><span data-stu-id="5c736-291">As you roll out new features or bug fixes to your bot, it's best to use multiple deployment environments, such as staging and production.</span></span> <span data-ttu-id="5c736-292">Gli [slot][slots] di distribuzione di [Azure DevOps][devops] offrono questa possibilità senza tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="5c736-292">Using deployment [slots][slots] from [Azure DevOps][devops] allows you to do this with zero downtime.</span></span> <span data-ttu-id="5c736-293">È possibile testare gli ultimi aggiornamenti nell'ambiente di gestione temporanea prima di passarli all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="5c736-293">You can test your latest upgrades in the staging environment before swapping them to the production environment.</span></span> <span data-ttu-id="5c736-294">In termini di gestione del carico, Servizio app è progettato per offrire scalabilità verticale o orizzontale in modo manuale o automatico.</span><span class="sxs-lookup"><span data-stu-id="5c736-294">In terms of handling load, App Service is designed to scale up or out manually or automatically.</span></span> <span data-ttu-id="5c736-295">Poiché il bot viene ospitato nell'infrastruttura globale di data center Microsoft, il contratto di servizio di Servizio app assicura disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="5c736-295">Because your bot is hosted in Microsoft's global datacenter infrastructure, the App Service SLA promises high availability.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="5c736-296">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="5c736-296">Security considerations</span></span>

<span data-ttu-id="5c736-297">Come qualsiasi altra applicazione, il bot può essere progettato per la gestione di dati sensibili.</span><span class="sxs-lookup"><span data-stu-id="5c736-297">As with any other application, the bot can be designed to handle sensitive data.</span></span> <span data-ttu-id="5c736-298">Pertanto, limitare gli utenti autorizzati ad accedere e usare il bot.</span><span class="sxs-lookup"><span data-stu-id="5c736-298">Therefore, restrict who can sign in and use the bot.</span></span> <span data-ttu-id="5c736-299">Limitare anche i dati da rendere accessibili, in base all'identità o al ruolo dell'utente.</span><span class="sxs-lookup"><span data-stu-id="5c736-299">Also limit which data can be accessed, based on the user's identity or role.</span></span> <span data-ttu-id="5c736-300">Usare Azure AD per il controllo di identità e accesso e Key Vault per gestire chiavi e segreti.</span><span class="sxs-lookup"><span data-stu-id="5c736-300">Use Azure AD for identity and access control and Key Vault to manage keys and secrets.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="5c736-301">Considerazioni sulla gestibilità</span><span class="sxs-lookup"><span data-stu-id="5c736-301">Manageability considerations</span></span>

### <a name="monitoring-and-reporting"></a><span data-ttu-id="5c736-302">Monitoraggio e reporting</span><span class="sxs-lookup"><span data-stu-id="5c736-302">Monitoring and reporting</span></span>

<span data-ttu-id="5c736-303">Quando il bot viene eseguito in produzione, è necessario istituire un team DevOps che lo mantenga operativo.</span><span class="sxs-lookup"><span data-stu-id="5c736-303">Once your bot is running in production, you will need a DevOps team to keep it that way.</span></span> <span data-ttu-id="5c736-304">Monitorare continuamente il sistema per assicurarsi che il bot operi al livello massimo di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5c736-304">Continually monitor the system to ensure the bot operates at peak performance.</span></span> <span data-ttu-id="5c736-305">Usare i log inviati ad Application Insights o a Cosmos DB per creare dashboard di monitoraggio, usando Application Insights stesso, Power BI o un dashboard di app Web personalizzato.</span><span class="sxs-lookup"><span data-stu-id="5c736-305">Use the logs sent to Application Insights or Cosmos DB to create monitoring dashboards, either using Application Insights itself, Power BI, or a custom web app dashboard.</span></span> <span data-ttu-id="5c736-306">Inviare avvisi al team DevOps se si verificano errori critici o se le prestazioni diminuiscono al di sotto di una soglia accettabile.</span><span class="sxs-lookup"><span data-stu-id="5c736-306">Send alerts to the DevOps team if critical errors occur or performance falls below an acceptable threshold.</span></span>

### <a name="automated-resource-deployment"></a><span data-ttu-id="5c736-307">Distribuzione automatizzata di risorse</span><span class="sxs-lookup"><span data-stu-id="5c736-307">Automated resource deployment</span></span>

<span data-ttu-id="5c736-308">Il bot stesso è solo una parte di un sistema più ampio da cui riceve i dati più recenti e che ne assicura il corretto funzionamento.</span><span class="sxs-lookup"><span data-stu-id="5c736-308">The bot itself is only part of a larger system that provides it with the latest data and ensures its proper operation.</span></span> <span data-ttu-id="5c736-309">È necessario distribuire tutte queste altre risorse di Azure, ossia servizi di orchestrazione come Data Factory, servizi di archiviazione come Cosmos DB e così via.</span><span class="sxs-lookup"><span data-stu-id="5c736-309">All of these other Azure resources &mdash; data orchestration services such as Data Factory, storage services such as Cosmos DB, and so forth &mdash; must be deployed.</span></span> <span data-ttu-id="5c736-310">Azure Resource Manager fornisce un livello di gestione coerente accessibile tramite il portale di Azure, PowerShell o l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-310">Azure Resource Manager provides a consistent management layer that you can access through the Azure portal, PowerShell, or the Azure CLI.</span></span> <span data-ttu-id="5c736-311">Ai fini della velocità e della coerenza, è consigliabile automatizzare la distribuzione con uno di questi approcci.</span><span class="sxs-lookup"><span data-stu-id="5c736-311">For speed and consistency, it's best to automate your deployment using one of these approaches.</span></span>

### <a name="continuous-bot-deployment"></a><span data-ttu-id="5c736-312">Distribuzione continua del bot</span><span class="sxs-lookup"><span data-stu-id="5c736-312">Continuous bot deployment</span></span>

<span data-ttu-id="5c736-313">È possibile distribuire la logica del bot direttamente dall'IDE o da una riga di comando, ad esempio l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="5c736-313">You can deploy the bot logic directly from your IDE or from a command line, such as the Azure CLI.</span></span> <span data-ttu-id="5c736-314">Con la maturazione del bot, tuttavia, è consigliabile usare un processo di distribuzione continuo tramite una soluzione CI/CD come Azure DevOps, come descritto nell'articolo [Configurare la distribuzione continua](/azure/bot-service/bot-service-build-continuous-deployment).</span><span class="sxs-lookup"><span data-stu-id="5c736-314">As your bot matures, however, it's best to use a continual deployment process using a CI/CD solution such as Azure DevOps, as described in the article [Set up continuous deployment](/azure/bot-service/bot-service-build-continuous-deployment).</span></span> <span data-ttu-id="5c736-315">Si tratta di un approccio valido per semplificare i test di nuove funzionalità e la correzione di errori del bot in un ambiente di quasi produzione.</span><span class="sxs-lookup"><span data-stu-id="5c736-315">This is a good way to ease the friction in testing new features and fixes in your bot in a near-production environment.</span></span> <span data-ttu-id="5c736-316">È anche consigliabile avere più ambienti di distribuzione, in genere almeno un ambiente di gestione temporanea e uno di produzione.</span><span class="sxs-lookup"><span data-stu-id="5c736-316">It's also a good idea to have multiple deployment environments, typically at least staging and production.</span></span> <span data-ttu-id="5c736-317">Azure DevOps supporta questo approccio.</span><span class="sxs-lookup"><span data-stu-id="5c736-317">Azure DevOps supports this approach.</span></span>

<!-- links -->

[0]: ./_images/conversational-bot.png
[aad]: /azure/active-directory/
[attività]: /azure/bot-service/rest-api/bot-framework-rest-connector-activities
[activities]: /azure/bot-service/rest-api/bot-framework-rest-connector-activities
[aml]: /azure/machine-learning/service/
[app-insights]: /azure/azure-monitor/app/app-insights-overview
[app-service]: /azure/app-service/
[blob]: /azure/storage/blobs/storage-blobs-introduction
[bot-authentication]: /azure/bot-service/bot-builder-authentication
[bot-framework]: https://dev.botframework.com/
[bot-framework-service]: /azure/bot-service/bot-builder-basics
[cognitive-services]: /azure/cognitive-services/welcome
[conversazioni]: /azure/bot-service/bot-service-design-conversation-flow
[conversations]: /azure/bot-service/bot-service-design-conversation-flow
[cosmosdb]: /azure/cosmos-db/
[data-factory]: /azure/data-factory/
[data-factory-ref-arch]: ../data/enterprise-bi-adf.md
[devops]: https://azure.microsoft.com/solutions/devops/
[functions]: /azure/azure-functions/
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
[key-vault]: /azure/key-vault/
[lda]: https://wikipedia.org/wiki/Latent_Dirichlet_allocation/
[logic-apps]: /azure/logic-apps/logic-apps-overview
[luis]: /azure/cognitive-services/luis/
[power-bi]: /power-bi/
[qna-maker]: /azure/cognitive-services/QnAMaker/
[search]: /azure/search/
[slots]: /azure/app-service/deploy-staging-slots/
[synonyms]: /azure/search/search-synonyms
[transcript-storage]: /azure/bot-service/bot-builder-howto-v4-storage
[turni]: /azure/bot-service/bot-builder-basics#defining-a-turn
[turns]: /azure/bot-service/bot-builder-basics#defining-a-turn
[vscode]: https://azure.microsoft.com/products/visual-studio-code/
[webapp]: /azure/app-service/overview
[webchat]: /azure/bot-service/bot-service-channel-connect-webchat?view=azure-bot-service-4.0/
