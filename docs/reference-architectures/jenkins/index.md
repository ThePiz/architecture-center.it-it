---
title: Eseguire un server Jenkins in Azure
titleSuffix: Azure Reference Architectures
description: Architettura consigliata che illustra come distribuire e gestire un server Jenkins scalabile di livello aziendale in Azure, con la protezione dell'accesso Single Sign-On (SSO).
author: njray
ms.date: 04/30/2018
ms.custom: seodec18
ms.openlocfilehash: 3500e05631ad34af0abc8e0f7a3e2b4919157746
ms.sourcegitcommit: 680c9cef945dff6fee5e66b38e24f07804510fa9
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/04/2019
ms.locfileid: "54011345"
---
# <a name="run-a-jenkins-server-on-azure"></a><span data-ttu-id="f5e52-103">Eseguire un server Jenkins in Azure</span><span class="sxs-lookup"><span data-stu-id="f5e52-103">Run a Jenkins server on Azure</span></span>

<span data-ttu-id="f5e52-104">Questa architettura di riferimento illustra come distribuire e gestire un server Jenkins scalabile di livello aziendale in Azure, con la protezione dell'accesso Single Sign-On (SSO).</span><span class="sxs-lookup"><span data-stu-id="f5e52-104">This reference architecture shows how to deploy and operate a scalable, enterprise-grade Jenkins server on Azure secured with single sign-on (SSO).</span></span> <span data-ttu-id="f5e52-105">L'architettura usa anche Monitoraggio di Azure per monitorare lo stato del server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-105">The architecture also uses Azure Monitor to monitor the state of the Jenkins server.</span></span> <span data-ttu-id="f5e52-106">[**Distribuire questa soluzione**](#deploy-the-solution).</span><span class="sxs-lookup"><span data-stu-id="f5e52-106">[**Deploy this solution**](#deploy-the-solution).</span></span>

![Server Jenkins eseguito in Azure][0]

<span data-ttu-id="f5e52-108">*Scaricare un [file di Visio](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx) contenente questo diagramma dell'architettura.*</span><span class="sxs-lookup"><span data-stu-id="f5e52-108">*Download a [Visio file](https://archcenter.blob.core.windows.net/cdn/Jenkins-architecture.vsdx) that contains this architecture diagram.*</span></span>

<span data-ttu-id="f5e52-109">Questa architettura supporta il ripristino di emergenza con i servizi di Azure, ma non copre scenari di aumento del numero di istanze più avanzati che prevedono più master o disponibilità elevata senza tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="f5e52-109">This architecture supports disaster recovery with Azure services but does not cover more advanced scale-out scenarios involving multiple masters or high availability (HA) with no downtime.</span></span> <span data-ttu-id="f5e52-110">Per informazioni generali sui vari componenti di Azure e un'esercitazione dettagliata per la creazione di una pipeline CI/CD in Azure, vedere [Jenkins in Azure][jenkins-on-azure].</span><span class="sxs-lookup"><span data-stu-id="f5e52-110">For general insights about the various Azure components, including a step-by-step tutorial about building out a CI/CD pipeline on Azure, see [Jenkins on Azure][jenkins-on-azure].</span></span>

<span data-ttu-id="f5e52-111">Questo documento è incentrato sulle operazioni di base in Azure necessarie per supportare Jenkins, come l'uso di Archiviazione di Azure per gestire gli elementi di compilazione, gli elementi di sicurezza necessari per l'accesso SSO, gli altri servizi che possono essere integrati e la scalabilità per la pipeline.</span><span class="sxs-lookup"><span data-stu-id="f5e52-111">The focus of this document is on the core Azure operations needed to support Jenkins, including the use of Azure Storage to maintain build artifacts, the security items needed for SSO, other services that can be integrated, and scalability for the pipeline.</span></span> <span data-ttu-id="f5e52-112">L'architettura è progettata per essere usata con un repository di controllo del codice sorgente esistente.</span><span class="sxs-lookup"><span data-stu-id="f5e52-112">The architecture is designed to work with an existing source control repository.</span></span> <span data-ttu-id="f5e52-113">Uno scenario comune, ad esempio, consiste nell'avviare i processi Jenkins in base a commit GitHub.</span><span class="sxs-lookup"><span data-stu-id="f5e52-113">For example, a common scenario is to start Jenkins jobs based on GitHub commits.</span></span>

## <a name="architecture"></a><span data-ttu-id="f5e52-114">Architettura</span><span class="sxs-lookup"><span data-stu-id="f5e52-114">Architecture</span></span>

<span data-ttu-id="f5e52-115">Questa architettura è costituita dai componenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="f5e52-115">The architecture consists of the following components:</span></span>

- <span data-ttu-id="f5e52-116">**Gruppo di risorse**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-116">**Resource group**.</span></span> <span data-ttu-id="f5e52-117">Un [gruppo di risorse][rg] viene usato per raggruppare gli asset di Azure in modo che possano essere gestiti in base alla durata, al proprietario e ad altri criteri.</span><span class="sxs-lookup"><span data-stu-id="f5e52-117">A [resource group][rg] is used to group Azure assets so they can be managed by lifetime, owner, and other criteria.</span></span> <span data-ttu-id="f5e52-118">Usare gruppi di risorse per distribuire e monitorare gli asset di Azure come gruppo e tenere traccia dei costi per la fatturazione in base al gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="f5e52-118">Use resource groups to deploy and monitor Azure assets as a group and track billing costs by resource group.</span></span> <span data-ttu-id="f5e52-119">È inoltre possibile eliminare un intero set di risorse, operazione molto utile nelle distribuzioni di test.</span><span class="sxs-lookup"><span data-stu-id="f5e52-119">You can also delete resources as a set, which is very useful for test deployments.</span></span>

- <span data-ttu-id="f5e52-120">**Server Jenkins**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-120">**Jenkins server**.</span></span> <span data-ttu-id="f5e52-121">Viene distribuita una macchina virtuale che eseguirà [Jenkins][azure-market] come server di automazione e fungerà da master Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-121">A virtual machine is deployed to run [Jenkins][azure-market] as an automation server and serve as Jenkins Master.</span></span> <span data-ttu-id="f5e52-122">Questa architettura di riferimento usa il [modello di soluzione per Jenkins in Azure][solution], installato in una macchina virtuale Linux (Ubuntu 16.04 LTS) in Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-122">This reference architecture uses the [solution template for Jenkins on Azure][solution], installed on a Linux (Ubuntu 16.04 LTS) virtual machine on Azure.</span></span> <span data-ttu-id="f5e52-123">In Azure Marketplace sono disponibili altre offerte Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-123">Other Jenkins offerings are available in the Azure Marketplace.</span></span>

  > [!NOTE]
  > <span data-ttu-id="f5e52-124">Nginx viene installato nella VM per fungere da proxy inverso per Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-124">Nginx is installed on the VM to act as a reverse proxy to Jenkins.</span></span> <span data-ttu-id="f5e52-125">È possibile configurare Nginx per abilitare SSL per il server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-125">You can configure Nginx to enable SSL for the Jenkins server.</span></span>
  >

- <span data-ttu-id="f5e52-126">**Rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-126">**Virtual network**.</span></span> <span data-ttu-id="f5e52-127">Una [rete virtuale][vnet] connette tra loro le risorse di Azure e offre l'isolamento logico.</span><span class="sxs-lookup"><span data-stu-id="f5e52-127">A [virtual network][vnet] connects Azure resources to each other and provides logical isolation.</span></span> <span data-ttu-id="f5e52-128">In questa architettura, il server Jenkins viene eseguito in una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="f5e52-128">In this architecture, the Jenkins server runs in a virtual network.</span></span>

- <span data-ttu-id="f5e52-129">**Subnet**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-129">**Subnets**.</span></span> <span data-ttu-id="f5e52-130">Il server Jenkins viene isolato in una [subnet][subnet] per facilitare la gestione e la separazione del traffico di rete senza alcun impatto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f5e52-130">The Jenkins server is isolated in a [subnet][subnet] to make it easier to manage and segregate network traffic without impacting performance.</span></span>

- <span data-ttu-id="f5e52-131">**Gruppi di sicurezza di rete**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-131">**NSGs**.</span></span> <span data-ttu-id="f5e52-132">Usare [gruppi di sicurezza di rete][nsg] (NSG) per limitare il traffico di rete da Internet alla subnet di una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="f5e52-132">Use [network security groups][nsg] (NSGs) to restrict network traffic from the Internet to the subnet of a virtual network.</span></span>

- <span data-ttu-id="f5e52-133">**Dischi gestiti**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-133">**Managed disks**.</span></span> <span data-ttu-id="f5e52-134">Un [disco gestito][managed-disk] è un disco rigido virtuale permanente usato per l'archiviazione delle applicazioni nonché per mantenere lo stato del server Jenkins e offrire il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="f5e52-134">A [managed disk][managed-disk] is a persistent virtual hard disk (VHD) used for application storage and also to maintain the state of the Jenkins server and provide disaster recovery.</span></span> <span data-ttu-id="f5e52-135">I dischi dati vengono archiviati in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-135">Data disks are stored in Azure Storage.</span></span> <span data-ttu-id="f5e52-136">Per prestazioni elevate, è consigliabile usare [Archiviazione Premium][premium].</span><span class="sxs-lookup"><span data-stu-id="f5e52-136">For high performance, [premium storage][premium] is recommended.</span></span>

- <span data-ttu-id="f5e52-137">**Archiviazione BLOB di Azure**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-137">**Azure Blob Storage**.</span></span> <span data-ttu-id="f5e52-138">Il [plug-in Windows Azure Storage][configure-storage] usa Archiviazione BLOB di Azure per archiviare gli elementi di compilazione che vengono creati e condivisi con altre compilazioni Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-138">The [Windows Azure Storage plugin][configure-storage] uses Azure Blob Storage to store the build artifacts that are created and shared with other Jenkins builds.</span></span>

- <span data-ttu-id="f5e52-139">**Azure Active Directory (Azure AD)**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-139">**Azure Active Directory (Azure AD)**.</span></span> <span data-ttu-id="f5e52-140">[Azure AD][azure-ad] supporta l'autenticazione degli utenti, consentendo di configurare l'accesso SSO.</span><span class="sxs-lookup"><span data-stu-id="f5e52-140">[Azure AD][azure-ad] supports user authentication, allowing you to set up SSO.</span></span> <span data-ttu-id="f5e52-141">Le [entità servizio][service-principal] di Azure AD definiscono i criteri e le autorizzazioni per ogni autorizzazione di ruolo nel flusso di lavoro tramite il [controllo degli accessi in base al ruolo][rbac].</span><span class="sxs-lookup"><span data-stu-id="f5e52-141">Azure AD [service principals][service-principal] define the policy and permissions for each role authorization in the workflow, using [role-based access control][rbac] (RBAC).</span></span> <span data-ttu-id="f5e52-142">Ogni entità servizio è associata a un processo Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-142">Each service principal is associated with a Jenkins job.</span></span>

- <span data-ttu-id="f5e52-143">**Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-143">**Azure Key Vault**.</span></span> <span data-ttu-id="f5e52-144">Per gestire i segreti e le chiavi crittografiche usati, quando necessari, per il provisioning delle risorse di Azure, questa architettura usa [Key Vault][key-vault].</span><span class="sxs-lookup"><span data-stu-id="f5e52-144">To manage secrets and cryptographic keys used to provision Azure resources when secrets are required, this architecture uses [Key Vault][key-vault].</span></span> <span data-ttu-id="f5e52-145">Per un maggiore supporto per l'archiviazione dei segreti associati all'applicazione nella pipeline, vedere anche il plug-in [Azure Credentials][configure-credential] per Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-145">For added help storing secrets associated with the application in the pipeline, see also the [Azure Credentials][configure-credential] plugin for Jenkins.</span></span>

- <span data-ttu-id="f5e52-146">**Servizi di monitoraggio di Azure**.</span><span class="sxs-lookup"><span data-stu-id="f5e52-146">**Azure monitoring services**.</span></span> <span data-ttu-id="f5e52-147">Il servizio [monitora][monitor] la macchina virtuale di Azure che ospita Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-147">This service [monitors][monitor] the Azure virtual machine hosting Jenkins.</span></span> <span data-ttu-id="f5e52-148">Questa distribuzione monitora l'utilizzo della CPU e lo stato della macchina virtuale e invia avvisi.</span><span class="sxs-lookup"><span data-stu-id="f5e52-148">This deployment monitors the virtual machine status and CPU utilization and sends alerts.</span></span>

## <a name="recommendations"></a><span data-ttu-id="f5e52-149">Consigli</span><span class="sxs-lookup"><span data-stu-id="f5e52-149">Recommendations</span></span>

<span data-ttu-id="f5e52-150">Le raccomandazioni seguenti sono valide per la maggior parte degli scenari.</span><span class="sxs-lookup"><span data-stu-id="f5e52-150">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="f5e52-151">Seguire queste indicazioni, a meno che non si disponga di un requisito specifico che le escluda.</span><span class="sxs-lookup"><span data-stu-id="f5e52-151">Follow these recommendations unless you have a specific requirement that overrides them.</span></span>

### <a name="azure-ad"></a><span data-ttu-id="f5e52-152">Azure AD</span><span class="sxs-lookup"><span data-stu-id="f5e52-152">Azure AD</span></span>

<span data-ttu-id="f5e52-153">Il tenant di [Azure AD][azure-ad] per la sottoscrizione di Azure viene usato per abilitare l'accesso SSO per gli utenti di Jenkins e configurare le [entità servizio][service-principal] che consentono ai processi Jenkins di accedere alle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-153">The [Azure AD][azure-ad] tenant for your Azure subscription is used to enable SSO for Jenkins users and set up [service principals][service-principal] that enable Jenkins jobs to access Azure resources.</span></span>

<span data-ttu-id="f5e52-154">L'autenticazione e l'autorizzazione con SSO vengono implementate dal plug-in Azure AD installato nel server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-154">SSO authentication and authorization are implemented by the Azure AD plugin installed on the Jenkins server.</span></span> <span data-ttu-id="f5e52-155">L'accesso SSO consente di eseguire l'autenticazione usando le credenziali dell'organizzazione di Azure AD per l'accesso al server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-155">SSO allows you to authenticate using your organization credentials from Azure AD when logging on to the Jenkins server.</span></span> <span data-ttu-id="f5e52-156">Durante la configurazione del plug-in Azure AD, è possibile specificare il livello di accesso autorizzato al server Jenkins di un utente.</span><span class="sxs-lookup"><span data-stu-id="f5e52-156">When configuring the Azure AD plugin, you can specify the level of a user’s authorized access to the Jenkins server.</span></span>

<span data-ttu-id="f5e52-157">Per consentire ai processi Jenkins di accedere alle risorse di Azure, un amministratore di Azure AD crea entità servizio.</span><span class="sxs-lookup"><span data-stu-id="f5e52-157">To provide Jenkins jobs with access to Azure resources, an Azure AD administrator creates service principals.</span></span> <span data-ttu-id="f5e52-158">Le entità servizio concedono alle applicazioni (in questo caso ai processi Jenkins) l'[accesso autenticato e autorizzato][ad-sp] alle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-158">These grant applications—in this case, the Jenkins jobs—[authenticated, authorized access][ad-sp] to Azure resources.</span></span>

<span data-ttu-id="f5e52-159">Il [controllo degli accessi in base al ruolo][rbac] definisce e controlla ulteriormente l'accesso alle risorse di Azure da parte di utenti o entità servizio tramite il rispettivo ruolo assegnato.</span><span class="sxs-lookup"><span data-stu-id="f5e52-159">[RBAC][rbac] further defines and controls access to Azure resources for users or service principals through their assigned role.</span></span> <span data-ttu-id="f5e52-160">Sono supportati ruoli sia predefiniti che personalizzati.</span><span class="sxs-lookup"><span data-stu-id="f5e52-160">Both built-in and custom roles are supported.</span></span> <span data-ttu-id="f5e52-161">I ruoli consentono anche di proteggere la pipeline e garantiscono che le responsabilità di un utente o un agente vengano assegnate e autorizzate correttamente.</span><span class="sxs-lookup"><span data-stu-id="f5e52-161">Roles also help secure the pipeline and ensure that a user’s or agent’s responsibilities are assigned and authorized correctly.</span></span> <span data-ttu-id="f5e52-162">Il controllo degli accessi in base al ruolo può anche essere configurato in modo da limitare l'accesso agli asset di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-162">In addition, RBAC can be set up to limit access to Azure assets.</span></span> <span data-ttu-id="f5e52-163">È ad esempio possibile limitare un utente all'uso degli asset di un determinato gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="f5e52-163">For example, a user can be limited to working with only the assets in a particular resource group.</span></span>

### <a name="storage"></a><span data-ttu-id="f5e52-164">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="f5e52-164">Storage</span></span>

<span data-ttu-id="f5e52-165">Usare il [plug-in Windows Azure Storage][storage-plugin] per Jenkins, installato da Azure Marketplace, per archiviare elementi di compilazione che potranno essere condivisi con altri test e compilazioni.</span><span class="sxs-lookup"><span data-stu-id="f5e52-165">Use the Jenkins [Windows Azure Storage plugin][storage-plugin], which is installed from the Azure Marketplace, to store build artifacts that can be shared with other builds and tests.</span></span> <span data-ttu-id="f5e52-166">Affinché questo plug-in possa essere usato dai processi Jenkins, è prima necessario configurare un account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-166">An Azure Storage account must be configured before this plugin can be used by the Jenkins jobs.</span></span>

### <a name="jenkins-azure-plugins"></a><span data-ttu-id="f5e52-167">Plug-in Azure per Jenkins</span><span class="sxs-lookup"><span data-stu-id="f5e52-167">Jenkins Azure plugins</span></span>

<span data-ttu-id="f5e52-168">Il modello di soluzione per Jenkins in Azure installa diversi plug-in Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-168">The solution template for Jenkins on Azure installs several Azure plugins.</span></span> <span data-ttu-id="f5e52-169">Il team Azure DevOps crea e gestisce il modello di soluzione e i plug-in seguenti, che possono essere usati con le altre offerte Jenkins in Azure Marketplace nonché con qualsiasi master Jenkins configurato in locale:</span><span class="sxs-lookup"><span data-stu-id="f5e52-169">The Azure DevOps Team builds and maintains the solution template and the following plugins, which work with other Jenkins offerings in Azure Marketplace as well as any Jenkins master set up on premises:</span></span>

- <span data-ttu-id="f5e52-170">Il [plug-in Azure AD][configure-azure-ad] consente al server Jenkins di supportare l'accesso SSO degli utenti in base ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5e52-170">[Azure AD plugin][configure-azure-ad] allows the Jenkins server to support SSO for users based on Azure AD.</span></span>

- <span data-ttu-id="f5e52-171">Il plug-in [Azure VM Agents][configure-agent] usa un modello di Azure Resource Manager per creare agenti di Jenkins nelle macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-171">[Azure VM Agents][configure-agent] plugin uses an Azure Resource Manager template to create Jenkins agents in Azure virtual machines.</span></span>

- <span data-ttu-id="f5e52-172">Il plug-in [Azure Credentials][configure-credential] consente di archiviare le credenziali delle entità servizio di Azure in Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-172">[Azure Credentials][configure-credential] plugin allows you to store Azure service principal credentials in Jenkins.</span></span>

- <span data-ttu-id="f5e52-173">Il [plug-in Windows Azure Storage][configure-storage] carica gli elementi di compilazione nell'[archivio BLOB di Azure][blob] oppure scarica le dipendenze di compilazione da tale archivio.</span><span class="sxs-lookup"><span data-stu-id="f5e52-173">[Windows Azure Storage plugin][configure-storage] uploads build artifacts to, or downloads build dependencies from, [Azure Blob storage][blob].</span></span>

<span data-ttu-id="f5e52-174">È consigliabile esaminare il crescente elenco di tutti i plug-in Azure disponibili che possono essere usati con le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-174">We also recommend reviewing the growing list of all available Azure plugins that work with Azure resources.</span></span> <span data-ttu-id="f5e52-175">Per visualizzare l'elenco completo più recente, passare all'[indice dei plug-in per Jenkins][index] e cercare Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-175">To see all the latest list, visit [Jenkins Plugin Index][index] and search for Azure.</span></span> <span data-ttu-id="f5e52-176">Per la distribuzione, ad esempio, sono disponibili i plug-in seguenti:</span><span class="sxs-lookup"><span data-stu-id="f5e52-176">For example, the following plugins are available for deployment:</span></span>

- <span data-ttu-id="f5e52-177">[Azure Container Agents][container-agents] consente di eseguire un contenitore come agente in Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-177">[Azure Container Agents][container-agents] helps you to run a container as an agent in Jenkins.</span></span>

- <span data-ttu-id="f5e52-178">[Kubernetes Continuous Deploy](https://aka.ms/azjenkinsk8s) distribuisce le configurazioni delle risorse in un cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="f5e52-178">[Kubernetes Continuous Deploy](https://aka.ms/azjenkinsk8s) deploys resource configurations to a Kubernetes cluster.</span></span>

- <span data-ttu-id="f5e52-179">[Azure Container Service][acs] distribuisce le configurazioni nel servizio contenitore di Azure con Kubernetes, DC/OS con Marathon o Docker Swarm.</span><span class="sxs-lookup"><span data-stu-id="f5e52-179">[Azure Container Service][acs] deploys configurations to Azure Container Service with Kubernetes, DC/OS with Marathon, or Docker Swarm.</span></span>

- <span data-ttu-id="f5e52-180">[Azure Function][functions] distribuisce il progetto in Funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-180">[Azure Functions][functions] deploys your project to Azure Function.</span></span>

- <span data-ttu-id="f5e52-181">[Azure App Service][app-service] esegue la distribuzione nel servizio app di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-181">[Azure App Service][app-service] deploys to Azure App Service.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="f5e52-182">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="f5e52-182">Scalability considerations</span></span>

<span data-ttu-id="f5e52-183">È possibile ridimensionare Jenkins per supportare carichi di lavoro di dimensioni molto elevate.</span><span class="sxs-lookup"><span data-stu-id="f5e52-183">Jenkins can scale to support very large workloads.</span></span> <span data-ttu-id="f5e52-184">Per compilazione elastiche, non eseguire le compilazioni nel server master Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-184">For elastic builds, do not run builds on the Jenkins master server.</span></span> <span data-ttu-id="f5e52-185">Eseguire invece l'offload delle attività di compilazione negli agenti di Jenkins, di cui è possibile ridurre o aumentare le istanze in modo elastico in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="f5e52-185">Instead, offload build tasks to Jenkins agents, which can be elastically scaled in and out as need.</span></span> <span data-ttu-id="f5e52-186">Per ridimensionare gli agenti sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="f5e52-186">Consider two options for scaling agents:</span></span>

- <span data-ttu-id="f5e52-187">Usare il plug-in [Azure VM Agents][vm-agent] per creare agenti di Jenkins eseguiti in VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-187">Use the [Azure VM Agents][vm-agent] plugin to create Jenkins agents that run in Azure VMs.</span></span> <span data-ttu-id="f5e52-188">Questo plug-in consente di aumentare il numero di istanze degli agenti in modo elastico e può usare tipi distinti di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="f5e52-188">This plugin enables elastic scale-out for agents and can use distinct types of virtual machines.</span></span> <span data-ttu-id="f5e52-189">È possibile selezionare una diversa immagine di base in Azure Marketplace o usare un'immagine personalizzata.</span><span class="sxs-lookup"><span data-stu-id="f5e52-189">You can select a different base image from Azure Marketplace or use a custom image.</span></span> <span data-ttu-id="f5e52-190">Per informazioni dettagliate sul ridimensionamento degli agenti di Jenkins, vedere [Architecting for Scale][scale] (Progettazione per la scalabilità) nella documentazione di Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-190">For details about how the Jenkins agents scale, see [Architecting for Scale][scale] in the Jenkins documentation.</span></span>

- <span data-ttu-id="f5e52-191">Usare il plug-in [Azure Container Agents][container-agents] per eseguire un contenitore come agente nel [servizio contenitore di Azure con Kubernetes](/azure/container-service/kubernetes/) o in [Istanze di contenitore di Azure](/azure/container-instances/).</span><span class="sxs-lookup"><span data-stu-id="f5e52-191">Use the [Azure Container Agents][container-agents] plugin to run a container as an agent in either [Azure Container Service with Kubernetes](/azure/container-service/kubernetes/), or [Azure Container Instances](/azure/container-instances/).</span></span>

<span data-ttu-id="f5e52-192">Il ridimensionamento di macchine virtuali presenta in genere un costo superiore rispetto a quello di contenitori.</span><span class="sxs-lookup"><span data-stu-id="f5e52-192">Virtual machines generally cost more to scale than containers.</span></span> <span data-ttu-id="f5e52-193">Per usare contenitori per il ridimensionamento, tuttavia, è necessario che il processo di compilazione venga eseguito con contenitori.</span><span class="sxs-lookup"><span data-stu-id="f5e52-193">To use containers for scaling, however, your build process must run with containers.</span></span>

<span data-ttu-id="f5e52-194">Usare inoltre Archiviazione di Azure per condividere gli elementi di compilazione che potrebbero essere usati nella fase successiva della pipeline da altri agenti di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f5e52-194">Also, use Azure Storage to share build artifacts that may be used in the next stage of the pipeline by other build agents.</span></span>

### <a name="scaling-the-jenkins-server"></a><span data-ttu-id="f5e52-195">Ridimensionamento del server Jenkins</span><span class="sxs-lookup"><span data-stu-id="f5e52-195">Scaling the Jenkins server</span></span>

<span data-ttu-id="f5e52-196">È possibile aumentare o ridurre le prestazioni della macchina virtuale del server Jenkins modificando la dimensione di VM.</span><span class="sxs-lookup"><span data-stu-id="f5e52-196">You can scale the Jenkins server VM up or down by changing the VM size.</span></span> <span data-ttu-id="f5e52-197">Per impostazione predefinita, il [modello di soluzione per Jenkins in Azure][azure-market] specifica la dimensione DS2 v2, con due CPU e 7 GB,</span><span class="sxs-lookup"><span data-stu-id="f5e52-197">The [solution template for Jenkins on Azure][azure-market] specifies the DS2 v2 size (with two CPUs, 7 GB) by default.</span></span> <span data-ttu-id="f5e52-198">che gestisce il carico di lavoro di un team medio-piccolo.</span><span class="sxs-lookup"><span data-stu-id="f5e52-198">This size handles a small to medium team workload.</span></span> <span data-ttu-id="f5e52-199">Modificare la dimensione di VM scegliendo una diversa opzione durante la creazione del server.</span><span class="sxs-lookup"><span data-stu-id="f5e52-199">Change the VM size by choosing a different option when building out the server.</span></span>

<span data-ttu-id="f5e52-200">La selezione della dimensione corretta del server dipende dalle dimensioni del carico di lavoro previsto.</span><span class="sxs-lookup"><span data-stu-id="f5e52-200">Selecting the correct server size depends on the size of the expected workload.</span></span> <span data-ttu-id="f5e52-201">La community Jenkins gestisce una [guida alla selezione][selection-guide] che consente di identificare la configurazione più appropriata per i requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="f5e52-201">The Jenkins community maintains a [selection guide][selection-guide] to help identify the configuration that best meets your requirements.</span></span> <span data-ttu-id="f5e52-202">Azure offre molte [dimensioni per le VM Linux][sizes-linux], per soddisfare tutti i requisiti.</span><span class="sxs-lookup"><span data-stu-id="f5e52-202">Azure offers many [sizes for Linux VMs][sizes-linux] to meet any requirements.</span></span> <span data-ttu-id="f5e52-203">Per altre informazioni sul ridimensionamento del master Jenkins, vedere i dettagli in proposito inclusi nelle [procedure consigliate][best-practices] della community Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-203">For more information about scaling the Jenkins master, refer to the Jenkins community of [best practices][best-practices], which also includes details about scaling Jenkins master.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="f5e52-204">Considerazioni sulla disponibilità</span><span class="sxs-lookup"><span data-stu-id="f5e52-204">Availability considerations</span></span>

<span data-ttu-id="f5e52-205">Nel contesto di un server Jenkins, disponibilità significa poter ripristinare tutte le informazioni relative allo stato associate al flusso di lavoro, come i risultati dei test, le librerie create o altri elementi.</span><span class="sxs-lookup"><span data-stu-id="f5e52-205">Availability in the context of a Jenkins server means being able to recover any state information associated with your workflow, such as test results, libraries you have created, or other artifacts.</span></span> <span data-ttu-id="f5e52-206">Per ripristinare il flusso di lavoro in caso di arresto del server Jenkins è necessario mantenere gli elementi o lo stato del flusso di lavoro di importanza critica.</span><span class="sxs-lookup"><span data-stu-id="f5e52-206">Critical workflow state or artifacts must be maintained to recover the workflow if the Jenkins server goes down.</span></span> <span data-ttu-id="f5e52-207">Per valutare i requisiti di disponibilità, considerare due metriche comuni:</span><span class="sxs-lookup"><span data-stu-id="f5e52-207">To assess your availability requirements, consider two common metrics:</span></span>

- <span data-ttu-id="f5e52-208">L'obiettivo del tempo di ripristino (RTO) specifica per quanto tempo è possibile non usare Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-208">Recovery Time Objective (RTO) specifies how long you can go without Jenkins.</span></span>

- <span data-ttu-id="f5e52-209">L'obiettivo del punto di ripristino (RPO) indica quanti dati è possibile permettersi di perdere se un'interruzione del servizio influisce su Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-209">Recovery Point Objective (RPO) indicates how much data you can afford to lose if a disruption in service affects Jenkins.</span></span>

<span data-ttu-id="f5e52-210">In pratica, RTO e RPO implicano ridondanza e backup.</span><span class="sxs-lookup"><span data-stu-id="f5e52-210">In practice, RTO and RPO imply redundancy and backup.</span></span> <span data-ttu-id="f5e52-211">La disponibilità non riguarda il ripristino dell'hardware, che fa parte di Azure, ma piuttosto il mantenimento dello stato del server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-211">Availability is not a question of hardware recovery—that is part of Azure—but rather ensuring you maintain the state of your Jenkins server.</span></span> <span data-ttu-id="f5e52-212">Microsoft offre un [contratto di servizio][sla] per le singole istanze di VM.</span><span class="sxs-lookup"><span data-stu-id="f5e52-212">Microsoft offers a [service level agreement][sla] (SLA) for single VM instances.</span></span> <span data-ttu-id="f5e52-213">Se questo contratto di servizio non soddisfa gli specifici requisiti in termini di tempo di attività, assicurarsi di avere un piano per il ripristino di emergenza oppure valutare la possibilità di usare una distribuzione di [server Jenkins multimaster][multi-master] (non illustrata in questo documento).</span><span class="sxs-lookup"><span data-stu-id="f5e52-213">If this SLA doesn't meet your uptime requirements, make sure you have a plan for disaster recovery, or consider using a [multi-master Jenkins server][multi-master] deployment (not covered in this document).</span></span>

<span data-ttu-id="f5e52-214">Valutare la possibilità di usare gli [script][disaster] per il ripristino di emergenza nel passaggio 7 della distribuzione per creare un account di archiviazione di Azure con dischi gestiti per archiviare lo stato del server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-214">Consider using the disaster recovery [scripts][disaster] in step 7 of the deployment to create an Azure Storage account with managed disks to store the Jenkins server state.</span></span> <span data-ttu-id="f5e52-215">In caso di arresto di Jenkins, è possibile ripristinarne lo stato archiviato in questo account di archiviazione separato.</span><span class="sxs-lookup"><span data-stu-id="f5e52-215">If Jenkins goes down, it can be restored to the state stored in this separate storage account.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="f5e52-216">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="f5e52-216">Security considerations</span></span>

<span data-ttu-id="f5e52-217">Usare gli approcci seguenti per bloccare la sicurezza in un server Jenkins di base, perché nello stato di base non è sicuro.</span><span class="sxs-lookup"><span data-stu-id="f5e52-217">Use the following approaches to help lock down security on a basic Jenkins server, since in its basic state, it is not secure.</span></span>

- <span data-ttu-id="f5e52-218">Configurare un modo sicuro per accedere al server Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-218">Set up a secure way to log into the Jenkins server.</span></span> <span data-ttu-id="f5e52-219">Questa architettura usa HTTP e ha un indirizzo IP pubblico, ma HTTP non è sicuro per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="f5e52-219">This architecture uses HTTP and has a public IP, but HTTP is not secure by default.</span></span> <span data-ttu-id="f5e52-220">Per un accesso sicuro, valutare la possibilità di configurare [HTTPS nel server Nginx][nginx] in uso.</span><span class="sxs-lookup"><span data-stu-id="f5e52-220">Consider setting up [HTTPS on the Nginx server][nginx] being used for a secure logon.</span></span>

    > [!NOTE]
    > <span data-ttu-id="f5e52-221">Quando si aggiunge SSL al server, creare una regola NSG per la subnet Jenkins per aprire la porta 443.</span><span class="sxs-lookup"><span data-stu-id="f5e52-221">When adding SSL to your server, create an NSG rule for the Jenkins subnet to open port 443.</span></span> <span data-ttu-id="f5e52-222">Per altre informazioni, vedere [Come aprire le porte per una macchina virtuale con il portale di Azure][port443].</span><span class="sxs-lookup"><span data-stu-id="f5e52-222">For more information, see [How to open ports to a virtual machine with the Azure portal][port443].</span></span>
    >

- <span data-ttu-id="f5e52-223">Verificare che la configurazione di Jenkins impedisca richieste intersito false, selezionando Manage Jenkins (Gestisci Jenkins) \> Configure Global Security (Configura sicurezza globale).</span><span class="sxs-lookup"><span data-stu-id="f5e52-223">Ensure that the Jenkins configuration prevents cross site request forgery (Manage Jenkins \> Configure Global Security).</span></span> <span data-ttu-id="f5e52-224">Questa è l'impostazione predefinita per il server Microsoft Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-224">This is the default for Microsoft Jenkins Server.</span></span>

- <span data-ttu-id="f5e52-225">Configurare l'accesso di sola lettura al dashboard di Jenkins usando il [plug-in Matrix Authorization Strategy][matrix].</span><span class="sxs-lookup"><span data-stu-id="f5e52-225">Configure read-only access to the Jenkins dashboard by using the [Matrix Authorization Strategy Plugin][matrix].</span></span>

- <span data-ttu-id="f5e52-226">Installare il plug-in [Azure Credentials][configure-credential] per usare Key Vault per gestire i segreti degli asset di Azure, gli agenti nella pipeline e i componenti di terze parti.</span><span class="sxs-lookup"><span data-stu-id="f5e52-226">Install the [Azure Credentials][configure-credential] plugin to use Key Vault to handle secrets for the Azure assets, the agents in the pipeline, and third-party components.</span></span>

- <span data-ttu-id="f5e52-227">Usare il controllo degli accessi in base al ruolo per limitare l'accesso dell'entità servizio al minimo necessario per eseguire i processi.</span><span class="sxs-lookup"><span data-stu-id="f5e52-227">Use RBAC to restrict the access of the service principal to the minimum required to run the jobs.</span></span> <span data-ttu-id="f5e52-228">Ciò consente di limitare eventuali danni dovuti a processi non autorizzati.</span><span class="sxs-lookup"><span data-stu-id="f5e52-228">This helps limit the scope of damage from a rogue job.</span></span>

<span data-ttu-id="f5e52-229">I processi Jenkins spesso richiedono segreti per accedere ai servizi di Azure per cui è necessaria l'autorizzazione, come il servizio contenitore di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-229">Jenkins jobs often require secrets to access Azure services that require authorization, such as Azure Container Service.</span></span> <span data-ttu-id="f5e52-230">Per gestire in modo sicuro questi segreti, usare [Key Vault][key-vault] insieme al [plug-in Azure Credentials][configure-credential].</span><span class="sxs-lookup"><span data-stu-id="f5e52-230">Use [Key Vault][key-vault] along with the [Azure Credential plugin][configure-credential] to manage these secrets securely.</span></span> <span data-ttu-id="f5e52-231">Usare Key Vault per archiviare le credenziali delle entità servizio, le password, i token e altri segreti.</span><span class="sxs-lookup"><span data-stu-id="f5e52-231">Use Key Vault to store service principal credentials, passwords, tokens, and other secrets.</span></span>

<span data-ttu-id="f5e52-232">Per ottenere una visualizzazione centrale dello stato di sicurezza delle risorse di Azure, usare il [Centro sicurezza di Azure][security-center].</span><span class="sxs-lookup"><span data-stu-id="f5e52-232">To get a central view of the security state of your Azure resources, use [Azure Security Center][security-center].</span></span> <span data-ttu-id="f5e52-233">Il Centro sicurezza monitora potenziali problemi di sicurezza e offre un'immagine completa dello stato della sicurezza della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f5e52-233">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment.</span></span> <span data-ttu-id="f5e52-234">Il Centro sicurezza è configurato per ogni sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-234">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="f5e52-235">Abilitare la raccolta dei dati di sicurezza come descritto nella [Guida introduttiva per il Centro sicurezza di Azure][quick-start].</span><span class="sxs-lookup"><span data-stu-id="f5e52-235">Enable security data collection as described in the [Azure Security Center quick start guide][quick-start].</span></span> <span data-ttu-id="f5e52-236">Quando la raccolta di dati è abilitata, il Centro sicurezza analizza automaticamente tutte le macchine virtuali create nell'ambito della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="f5e52-236">When data collection is enabled, Security Center automatically scans any virtual machines created under that subscription.</span></span>

<span data-ttu-id="f5e52-237">Il server Jenkins ha un proprio sistema di gestione degli utenti e la community Jenkins offre procedure consigliate per la [protezione di un'istanza di Jenkins in Azure][secure-jenkins].</span><span class="sxs-lookup"><span data-stu-id="f5e52-237">The Jenkins server has its own user management system, and the Jenkins community provides best practices for [securing a Jenkins instance on Azure][secure-jenkins].</span></span> <span data-ttu-id="f5e52-238">Il modello di soluzione per Jenkins in Azure implementa tali procedure consigliate.</span><span class="sxs-lookup"><span data-stu-id="f5e52-238">The solution template for Jenkins on Azure implements these best practices.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="f5e52-239">Considerazioni sulla gestibilità</span><span class="sxs-lookup"><span data-stu-id="f5e52-239">Manageability considerations</span></span>

<span data-ttu-id="f5e52-240">Usare gruppi di risorse per organizzare le risorse di Azure distribuite.</span><span class="sxs-lookup"><span data-stu-id="f5e52-240">Use resource groups to organize the Azure resources that are deployed.</span></span> <span data-ttu-id="f5e52-241">Distribuire gli ambienti di produzione e gli ambienti di sviluppo/test in gruppi di risorse separati, per poter monitorare le risorse di ogni ambiente ed eseguire il rollup dei costi per la fatturazione in base al gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="f5e52-241">Deploy production environments and development/test environments in separate resource groups, so that you can monitor each environment’s resources and roll up billing costs by resource group.</span></span> <span data-ttu-id="f5e52-242">È inoltre possibile eliminare un intero set di risorse, operazione molto utile nelle distribuzioni di test.</span><span class="sxs-lookup"><span data-stu-id="f5e52-242">You can also delete resources as a set, which is very useful for test deployments.</span></span>

<span data-ttu-id="f5e52-243">Azure offre diverse funzionalità per [il monitoraggio e la diagnostica][monitoring-diag] dell'infrastruttura generale.</span><span class="sxs-lookup"><span data-stu-id="f5e52-243">Azure provides several features for [monitoring and diagnostics][monitoring-diag] of the overall infrastructure.</span></span> <span data-ttu-id="f5e52-244">Per monitorare l'utilizzo della CPU, questa architettura distribuisce Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-244">To monitor CPU usage, this architecture deploys Azure Monitor.</span></span> <span data-ttu-id="f5e52-245">Ad esempio, è possibile usare Monitoraggio di Azure per monitorare l'utilizzo della CPU e inviare una notifica se questo supera l'80%.</span><span class="sxs-lookup"><span data-stu-id="f5e52-245">For example, you can use Azure Monitor to monitor CPU utilization, and send a notification if CPU usage exceeds 80 percent.</span></span> <span data-ttu-id="f5e52-246">Un utilizzo elevato della CPU indica che potrebbe essere opportuno aumentare le prestazioni della VM del server Jenkins. È anche possibile inviare una notifica a un utente designato se si verifica un errore nella VM o se la macchina virtuale non è più disponibile.</span><span class="sxs-lookup"><span data-stu-id="f5e52-246">(High CPU usage indicates that you might want to scale up the Jenkins server VM.) You can also notify a designated user if the VM fails or becomes unavailable.</span></span>

## <a name="communities"></a><span data-ttu-id="f5e52-247">Community</span><span class="sxs-lookup"><span data-stu-id="f5e52-247">Communities</span></span>

<span data-ttu-id="f5e52-248">Le community possono rispondere alle domande ed essere utili per configurare correttamente la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f5e52-248">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="f5e52-249">Valutare gli aspetti seguenti:</span><span class="sxs-lookup"><span data-stu-id="f5e52-249">Consider the following:</span></span>

- [<span data-ttu-id="f5e52-250">Blog della community Jenkins</span><span class="sxs-lookup"><span data-stu-id="f5e52-250">Jenkins Community Blog</span></span>](https://jenkins.io/node/)
- [<span data-ttu-id="f5e52-251">Forum di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e52-251">Azure Forum</span></span>](https://azure.microsoft.com/support/forums/)
- [<span data-ttu-id="f5e52-252">Jenkins in Stack Overflow</span><span class="sxs-lookup"><span data-stu-id="f5e52-252">Stack Overflow Jenkins</span></span>](https://stackoverflow.com/tags/jenkins/info)

<span data-ttu-id="f5e52-253">Per altre procedure consigliate della community Jenkins, vedere [Jenkins Best Practices][jenkins-best] (Procedure consigliate per Jenkins).</span><span class="sxs-lookup"><span data-stu-id="f5e52-253">For more best practices from the Jenkins community, visit [Jenkins best practices][jenkins-best].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="f5e52-254">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="f5e52-254">Deploy the solution</span></span>

<span data-ttu-id="f5e52-255">Per distribuire questa architettura, seguire questa procedura per installare il [modello di soluzione per Jenkins in Azure][azure-market] e quindi installare gli script di configurazione del monitoraggio e del ripristino di emergenza nei passaggi successivi.</span><span class="sxs-lookup"><span data-stu-id="f5e52-255">To deploy this architecture, follow the steps below to install the [solution template for Jenkins on Azure][azure-market], then install the scripts that set up monitoring and disaster recovery in the steps below.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="f5e52-256">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="f5e52-256">Prerequisites</span></span>

- <span data-ttu-id="f5e52-257">Questa architettura di riferimento richiede una sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-257">This reference architecture requires an Azure subscription.</span></span>
- <span data-ttu-id="f5e52-258">Per creare un'entità servizio di Azure, è necessario avere diritti di amministratore per il tenant di Azure AD associato al server Jenkins distribuito.</span><span class="sxs-lookup"><span data-stu-id="f5e52-258">To create an Azure service principal, you must have admin rights to the Azure AD tenant that is associated with the deployed Jenkins server.</span></span>
- <span data-ttu-id="f5e52-259">Queste istruzioni presuppongono che l'amministratore di Jenkins sia anche un utente di Azure con almeno i privilegi di collaboratore.</span><span class="sxs-lookup"><span data-stu-id="f5e52-259">These instructions assume that the Jenkins administrator is also an Azure user with at least Contributor privileges.</span></span>

### <a name="step-1-deploy-the-jenkins-server"></a><span data-ttu-id="f5e52-260">Passaggio 1: Distribuire il server Jenkins</span><span class="sxs-lookup"><span data-stu-id="f5e52-260">Step 1: Deploy the Jenkins server</span></span>

1. <span data-ttu-id="f5e52-261">Aprire l'[immagine di Azure Marketplace per Jenkins][azure-market] nel Web browser e selezionare **SCARICA ADESSO** sul lato sinistro della pagina.</span><span class="sxs-lookup"><span data-stu-id="f5e52-261">Open the [Azure Marketplace image for Jenkins][azure-market] in your web browser and select **GET IT NOW** from the left side of the page.</span></span>

2. <span data-ttu-id="f5e52-262">Esaminare i dettagli relativi ai prezzi e selezionare **Continua** e quindi **Crea** per configurare il server Jenkins nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e52-262">Review the pricing details and select **Continue**, then select **Create** to configure the Jenkins server in the Azure portal.</span></span>

<span data-ttu-id="f5e52-263">Per istruzioni dettagliate, vedere [Creare un server Jenkins in una VM Linux di Azure dal portale di Azure][create-jenkins].</span><span class="sxs-lookup"><span data-stu-id="f5e52-263">For detailed instructions, see [Create a Jenkins server on an Azure Linux VM from the Azure portal][create-jenkins].</span></span> <span data-ttu-id="f5e52-264">Per questa architettura di riferimento, è sufficiente rendere operativo il server con l'account di accesso amministratore.</span><span class="sxs-lookup"><span data-stu-id="f5e52-264">For this reference architecture, it is sufficient to get the server up and running with the admin logon.</span></span> <span data-ttu-id="f5e52-265">È quindi possibile effettuarne il provisioning per usare vari altri servizi.</span><span class="sxs-lookup"><span data-stu-id="f5e52-265">Then you can provision it to use various other services.</span></span>

### <a name="step-2-set-up-sso"></a><span data-ttu-id="f5e52-266">Passaggio 2: Configurare l'accesso SSO</span><span class="sxs-lookup"><span data-stu-id="f5e52-266">Step 2: Set up SSO</span></span>

<span data-ttu-id="f5e52-267">Il passaggio viene eseguito dall'amministratore di Jenkins, che deve avere anche un account utente nella directory di Azure AD della sottoscrizione ed essere assegnato al ruolo Collaboratore.</span><span class="sxs-lookup"><span data-stu-id="f5e52-267">The step is run by the Jenkins administrator, who must also have a user account in the subscription’s Azure AD directory and must be assigned the Contributor role.</span></span>

<span data-ttu-id="f5e52-268">Usare il [plug-in Azure AD][configure-azure-ad] dal centro aggiornamenti Jenkins nel server Jenkins e seguire le istruzioni per configurare l'accesso SSO.</span><span class="sxs-lookup"><span data-stu-id="f5e52-268">Use the [Azure AD Plugin][configure-azure-ad] from the Jenkins Update Center in the Jenkins server and follow the instructions to set up SSO.</span></span>

### <a name="step-3-provision-jenkins-server-with-azure-vm-agent-plugin"></a><span data-ttu-id="f5e52-269">Passaggio 3: Effettuare il provisioning del server Jenkins con il plug-in Azure VM Agents</span><span class="sxs-lookup"><span data-stu-id="f5e52-269">Step 3: Provision Jenkins server with Azure VM Agent plugin</span></span>

<span data-ttu-id="f5e52-270">Il passaggio viene eseguito dall'amministratore di Jenkins per configurare il plug-in Azure VM Agents, che è già installato.</span><span class="sxs-lookup"><span data-stu-id="f5e52-270">The step is run by the Jenkins administrator to set up the Azure VM Agent plugin, which is already installed.</span></span>

<span data-ttu-id="f5e52-271">[Seguire questa procedura per configurare il plug-in][configure-agent].</span><span class="sxs-lookup"><span data-stu-id="f5e52-271">[Follow these steps to configure the plugin][configure-agent].</span></span> <span data-ttu-id="f5e52-272">Per un'esercitazione sulla configurazione delle entità servizio per il plug-in, vedere [Ridimensionare le distribuzioni di Jenkins per soddisfare la richiesta con agenti di macchine virtuali di Azure][scale-agent].</span><span class="sxs-lookup"><span data-stu-id="f5e52-272">For a tutorial about setting up service principals for the plugin, see [Scale your Jenkins deployments to meet demand with Azure VM agents][scale-agent].</span></span>

### <a name="step-4-provision-jenkins-server-with-azure-storage"></a><span data-ttu-id="f5e52-273">Passaggio 4: Effettuare il provisioning del server Jenkins con Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e52-273">Step 4: Provision Jenkins server with Azure Storage</span></span>

<span data-ttu-id="f5e52-274">Il passaggio viene eseguito dall'amministratore di Jenkins, che configura il plug-in Windows Azure Storage già installato.</span><span class="sxs-lookup"><span data-stu-id="f5e52-274">The step is run by the Jenkins administrator, who sets up the Windows Azure Storage Plugin, which is already installed.</span></span>

<span data-ttu-id="f5e52-275">[Seguire questa procedura per configurare il plug-in][configure-storage].</span><span class="sxs-lookup"><span data-stu-id="f5e52-275">[Follow these steps to configure the plugin][configure-storage].</span></span>

### <a name="step-5-provision-jenkins-server-with-azure-credential-plugin"></a><span data-ttu-id="f5e52-276">Passaggio 5: Effettuare il provisioning del server Jenkins con il plug-in Azure Credentials</span><span class="sxs-lookup"><span data-stu-id="f5e52-276">Step 5: Provision Jenkins server with Azure Credential plugin</span></span>

<span data-ttu-id="f5e52-277">Il passaggio viene eseguito dall'amministratore di Jenkins per configurare il plug-in Azure Credentials, che è già installato.</span><span class="sxs-lookup"><span data-stu-id="f5e52-277">The step is run by the Jenkins administrator to set up the Azure Credential plugin, which is already installed.</span></span>

<span data-ttu-id="f5e52-278">[Seguire questa procedura per configurare il plug-in][configure-credential].</span><span class="sxs-lookup"><span data-stu-id="f5e52-278">[Follow these steps to configure the plugin][configure-credential].</span></span>

### <a name="step-6-provision-jenkins-server-for-monitoring-by-the-azure-monitor-service"></a><span data-ttu-id="f5e52-279">Passaggio 6: Effettuare il provisioning del server Jenkins per il monitoraggio con il servizio Monitoraggio di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e52-279">Step 6: Provision Jenkins server for monitoring by the Azure Monitor Service</span></span>

<span data-ttu-id="f5e52-280">Per configurare il monitoraggio per il server Jenkins, seguire le istruzioni riportate in [Creare avvisi sulle metriche in Monitoraggio di Azure per i servizi di Azure][create-metric].</span><span class="sxs-lookup"><span data-stu-id="f5e52-280">To set up monitoring for your Jenkins server, follow the instructions in [Create metric alerts in Azure Monitor for Azure services][create-metric].</span></span>

### <a name="step-7-provision-jenkins-server-with-managed-disks-for-disaster-recovery"></a><span data-ttu-id="f5e52-281">Passaggio 7: Effettuare il provisioning del server Jenkins con dischi gestiti per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="f5e52-281">Step 7: Provision Jenkins server with Managed Disks for disaster recovery</span></span>

<span data-ttu-id="f5e52-282">Il team Microsoft Jenkins ha creato script per il ripristino di emergenza che creano un disco gestito usato per salvare lo stato di Jenkins.</span><span class="sxs-lookup"><span data-stu-id="f5e52-282">The Microsoft Jenkins product group has created disaster recovery scripts that build a managed disk used to save the Jenkins state.</span></span> <span data-ttu-id="f5e52-283">In caso di arresto del server, è possibile ripristinarne lo stato più recente.</span><span class="sxs-lookup"><span data-stu-id="f5e52-283">If the server goes down, it can be restored to its latest state.</span></span>

<span data-ttu-id="f5e52-284">Scaricare ed eseguire gli script per il ripristino di emergenza da[GitHub][disaster].</span><span class="sxs-lookup"><span data-stu-id="f5e52-284">Download and run the disaster recovery scripts from [GitHub][disaster].</span></span>

<span data-ttu-id="f5e52-285">È consigliabile esaminare lo [scenario di esempio di Azure](/azure/architecture/example-scenario) seguente, che illustra le soluzioni specifiche usando alcune delle stesse tecnologie:</span><span class="sxs-lookup"><span data-stu-id="f5e52-285">You may wish to review the following [Azure example scenario](/azure/architecture/example-scenario) that demonstrates specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="f5e52-286">Pipeline di integrazione continua/distribuzione continua per carichi di lavoro basati su contenitori</span><span class="sxs-lookup"><span data-stu-id="f5e52-286">CI/CD pipeline for container-based workloads</span></span>](/azure/architecture/example-scenario/apps/devops-with-aks)

<!-- links -->

[acs]: https://aka.ms/azjenkinsacs
[ad-sp]: /azure/active-directory/develop/active-directory-integrating-applications
[app-service]: https://plugins.jenkins.io/azure-app-service
[azure-ad]: /azure/active-directory/
[azure-market]: https://azuremarketplace.microsoft.com/marketplace/apps/azure-oss.jenkins?tab=Overview
[best-practices]: https://jenkins.io/doc/book/architecting-for-scale/
[blob]: /azure/storage/common/storage-java-jenkins-continuous-integration-solution
[configure-azure-ad]: https://plugins.jenkins.io/azure-ad
[configure-agent]: https://plugins.jenkins.io/azure-vm-agents
[configure-credential]: https://plugins.jenkins.io/azure-credentials
[configure-storage]: https://plugins.jenkins.io/windows-azure-storage
[container-agents]: https://aka.ms/azcontaineragent
[create-jenkins]: /azure/jenkins/install-jenkins-solution-template
[create-metric]: /azure/monitoring-and-diagnostics/insights-alerts-portal
[disaster]: https://github.com/Azure/jenkins/tree/master/disaster_recovery
[functions]: https://aka.ms/azjenkinsfunctions
[index]: https://plugins.jenkins.io
[jenkins-best]: https://wiki.jenkins.io/display/JENKINS/Jenkins+Best+Practices
[jenkins-on-azure]: /azure/jenkins/
[key-vault]: /azure/key-vault/
[managed-disk]: /azure/virtual-machines/linux/managed-disks-overview
[matrix]: https://plugins.jenkins.io/matrix-auth
[monitor]: /azure/monitoring-and-diagnostics/
[monitoring-diag]: /azure/architecture/best-practices/monitoring
[multi-master]: https://jenkins.io/doc/book/architecting-for-scale/
[nginx]: https://www.digitalocean.com/community/tutorials/how-to-create-an-ssl-certificate-on-nginx-for-ubuntu-14-04
[nsg]: /azure/virtual-network/virtual-networks-nsg
[quick-start]: /azure/security-center/security-center-get-started
[port443]: /azure/virtual-machines/windows/nsg-quickstart-portal
[premium]: /azure/virtual-machines/linux/premium-storage
[rbac]: /azure/active-directory/role-based-access-control-what-is
[rg]: /azure/azure-resource-manager/resource-group-overview
[scale]: https://jenkins.io/doc/book/architecting-for-scale/
[scale-agent]: /azure/jenkins/jenkins-azure-vm-agents
[selection-guide]: https://jenkins.io/doc/book/hardware-recommendations/
[service-principal]: /azure/active-directory/develop/active-directory-application-objects
[secure-jenkins]: https://jenkins.io/blog/2017/04/20/secure-jenkins-on-azure/
[security-center]: /azure/security-center/security-center-intro
[sizes-linux]: /azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json
[solution]: https://azure.microsoft.com/blog/announcing-the-solution-template-for-jenkins-on-azure/
[sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines/
[storage-plugin]: https://wiki.jenkins.io/display/JENKINS/Windows+Azure+Storage+Plugin
[subnet]: /azure/virtual-network/virtual-network-manage-subnet
[vm-agent]: https://wiki.jenkins.io/display/JENKINS/Azure+VM+Agents+plugin
[vnet]: /azure/virtual-network/virtual-networks-overview
[0]: ./images/jenkins-server.png
