---
title: Integrare i domini AD locali con Azure Active Directory
description: Come implementare un'architettura di rete ibrida protetta con Azure Active Directory.
author: telmosampaio
pnp.series.title: Identity management
ms.date: 11/28/2016
pnp.series.next: adds-extend-domain
pnp.series.prev: ./index
cardTitle: Integrate on-premises AD with Azure AD
ms.openlocfilehash: ade79f8ebffc15b423ef6ebfb9b19611c9500cd8
ms.sourcegitcommit: 85334ab0ccb072dac80de78aa82bcfa0f0044d3f
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 06/11/2018
ms.locfileid: "35252993"
---
# <a name="integrate-on-premises-active-directory-domains-with-azure-active-directory"></a><span data-ttu-id="f5741-103">Integrare i domini Active Directory locali con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f5741-103">Integrate on-premises Active Directory domains with Azure Active Directory</span></span>

<span data-ttu-id="f5741-104">Azure Active Directory (Azure AD) è un servizio per la gestione delle identità e delle directory multi-tenant, basato sul cloud.</span><span class="sxs-lookup"><span data-stu-id="f5741-104">Azure Active Directory (Azure AD) is a cloud based multi-tenant directory and identity service.</span></span> <span data-ttu-id="f5741-105">Questa architettura di riferimento illustra le procedure consigliate per l'integrazione di domini Active Directory locali con Azure AD per fornire l'autenticazione delle identità basata sul cloud.</span><span class="sxs-lookup"><span data-stu-id="f5741-105">This reference architecture shows best practices for integrating on-premises Active Directory domains with Azure AD to provide cloud-based identity authentication.</span></span> [<span data-ttu-id="f5741-106">**Distribuire questa soluzione**.</span><span class="sxs-lookup"><span data-stu-id="f5741-106">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="f5741-107">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="f5741-107">[![0]][0]</span></span> 

<span data-ttu-id="f5741-108">*Scaricare un [file Visio][visio-download] di questa architettura.*</span><span class="sxs-lookup"><span data-stu-id="f5741-108">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="f5741-109">Per semplicità questo diagramma mostra solo le connessioni direttamente correlate ad Azure AD e non il traffico correlato al protocollo che può verificarsi durante l'autenticazione e la federazione delle identità.</span><span class="sxs-lookup"><span data-stu-id="f5741-109">For simplicity, this diagram only shows the connections directly related to Azure AD, and not protocol-related traffic that may occur as part of authentication and identity federation.</span></span> <span data-ttu-id="f5741-110">Ad esempio, un'applicazione Web può reindirizzare il Web browser per autenticare la richiesta mediante Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-110">For example, a web application may redirect the web browser to authenticate the request through Azure AD.</span></span> <span data-ttu-id="f5741-111">Una volta autenticata, la richiesta può essere passata nuovamente all'applicazione Web, con le informazioni sull'identità appropriate.</span><span class="sxs-lookup"><span data-stu-id="f5741-111">Once authenticated, the request can be passed back to the web application, with the appropriate identity information.</span></span>
> 

<span data-ttu-id="f5741-112">Gli usi tipici di questa architettura di riferimento includono:</span><span class="sxs-lookup"><span data-stu-id="f5741-112">Typical uses for this reference architecture include:</span></span>

* <span data-ttu-id="f5741-113">Le applicazioni Web distribuite in Azure che forniscono l'accesso agli utenti remoti che appartengono all'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-113">Web applications deployed in Azure that provide access to remote users who belong to your organization.</span></span>
* <span data-ttu-id="f5741-114">L'implementazione delle capacità self-service per gli utenti finali, ad esempio la reimpostazione della password e la delega della gestione dei gruppi.</span><span class="sxs-lookup"><span data-stu-id="f5741-114">Implementing self-service capabilities for end-users, such as resetting their passwords, and delegating group management.</span></span> <span data-ttu-id="f5741-115">Si noti che questa operazione richiede Azure AD Premium edition.</span><span class="sxs-lookup"><span data-stu-id="f5741-115">Note that this requires Azure AD Premium edition.</span></span>
* <span data-ttu-id="f5741-116">Le architetture in cui la rete locale e la rete virtuale di Azure dell'applicazione non sono connesse tramite un tunnel VPN o un circuito ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="f5741-116">Architectures in which the on-premises network and the application's Azure VNet are not connected using a VPN tunnel or ExpressRoute circuit.</span></span>

> [!NOTE]
> <span data-ttu-id="f5741-117">Azure AD può autenticare l'identità di utenti e applicazioni presenti nella directory di un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-117">Azure AD can authenticate the identity of users and applications that exist in an organization’s directory.</span></span> <span data-ttu-id="f5741-118">Alcune applicazioni e alcuni servizi, ad esempio SQL Server, potrebbero richiedere l'autenticazione computer. In questo caso questa soluzione non è appropriata.</span><span class="sxs-lookup"><span data-stu-id="f5741-118">Some applications and services, such as SQL Server, may require computer authentication, in which case this solution is not appropriate.</span></span>
> 

<span data-ttu-id="f5741-119">Per altre considerazioni, vedere l'articolo su come [scegliere una soluzione per l'integrazione di Active Directory locale con Azure][considerations].</span><span class="sxs-lookup"><span data-stu-id="f5741-119">For additional considerations, see [Choose a solution for integrating on-premises Active Directory with Azure][considerations].</span></span> 

## <a name="architecture"></a><span data-ttu-id="f5741-120">Architecture</span><span class="sxs-lookup"><span data-stu-id="f5741-120">Architecture</span></span>

<span data-ttu-id="f5741-121">L'architettura include i componenti indicati di seguito.</span><span class="sxs-lookup"><span data-stu-id="f5741-121">The architecture has the following components.</span></span>

* <span data-ttu-id="f5741-122">**Tenant di Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="f5741-122">**Azure AD tenant**.</span></span> <span data-ttu-id="f5741-123">Istanza di [Azure Active Directory][azure-active-directory] creata dall'organizzazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="f5741-123">An instance of [Azure AD][azure-active-directory] created by your organization.</span></span> <span data-ttu-id="f5741-124">Funge da servizio di directory per le applicazioni cloud archiviando oggetti copiati da Active Directory locale e fornisce servizi di identità.</span><span class="sxs-lookup"><span data-stu-id="f5741-124">It acts as a directory service for cloud applications by storing objects copied from the on-premises Active Directory and provides identity services.</span></span>
* <span data-ttu-id="f5741-125">**Subnet di livello Web**.</span><span class="sxs-lookup"><span data-stu-id="f5741-125">**Web tier subnet**.</span></span> <span data-ttu-id="f5741-126">Questa subnet include macchine virtuali che eseguono un'applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="f5741-126">This subnet holds VMs that run a web application.</span></span> <span data-ttu-id="f5741-127">Azure Active Directory può fungere da broker di identità per questa applicazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-127">Azure AD can act as an identity broker for this application.</span></span>
* <span data-ttu-id="f5741-128">**Server Active Directory Domain Services locale**.</span><span class="sxs-lookup"><span data-stu-id="f5741-128">**On-premises AD DS server**.</span></span> <span data-ttu-id="f5741-129">Servizio di identità e directory locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-129">An on-premise directory and identity service.</span></span> <span data-ttu-id="f5741-130">La directory Active Directory Domain Services può essere sincronizzata con Azure Active Directory per consentire l'autenticazione di utenti locali.</span><span class="sxs-lookup"><span data-stu-id="f5741-130">The AD DS directory can be synchronized with Azure AD to enable it to authenticate on-premise users.</span></span>
* <span data-ttu-id="f5741-131">**Server di sincronizzazione di Azure AD Connect**.</span><span class="sxs-lookup"><span data-stu-id="f5741-131">**Azure AD Connect sync server**.</span></span> <span data-ttu-id="f5741-132">Un computer locale che esegue il servizio di sincronizzazione [Azure AD Connect][azure-ad-connect].</span><span class="sxs-lookup"><span data-stu-id="f5741-132">An on-premises computer that runs the [Azure AD Connect][azure-ad-connect] sync service.</span></span> <span data-ttu-id="f5741-133">Questo servizio consente di sincronizzare le informazioni contenute in Active Directory locale in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-133">This service synchronizes information held in the on-premises Active Directory to Azure AD.</span></span> <span data-ttu-id="f5741-134">Ad esempio, se si esegue il provisioning o il deprovisioning di gruppi e utenti locali, queste modifiche verranno propagate in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-134">For example, if you provision or deprovision groups and users on-premises, these changes propagate to Azure AD.</span></span> 
  
  > [!NOTE]
  > <span data-ttu-id="f5741-135">Per motivi di sicurezza, Azure AD archivia le password dell'utente come hash.</span><span class="sxs-lookup"><span data-stu-id="f5741-135">For security reasons, Azure AD stores user's passwords as a hash.</span></span> <span data-ttu-id="f5741-136">Se un utente richiede la reimpostazione della password, questa deve essere eseguita in locale e il nuovo valore hash deve essere inviato ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-136">If a user requires a password reset, this must be performed on-premises and the new hash must be sent to Azure AD.</span></span> <span data-ttu-id="f5741-137">Le Azure AD Premium Edition includono funzionalità in grado di automatizzare questa attività per consentire agli utenti di reimpostare la propria password.</span><span class="sxs-lookup"><span data-stu-id="f5741-137">Azure AD Premium editions include features that can automate this task to enable users to reset their own passwords.</span></span>
  > 

* <span data-ttu-id="f5741-138">**Macchine virtuali per l'applicazione a più livelli**.</span><span class="sxs-lookup"><span data-stu-id="f5741-138">**VMs for N-tier application**.</span></span> <span data-ttu-id="f5741-139">La distribuzione include l'infrastruttura per un'applicazione a più livelli.</span><span class="sxs-lookup"><span data-stu-id="f5741-139">The deployment includes infrastructure for an N-tier application.</span></span> <span data-ttu-id="f5741-140">Per altre informazioni su queste risorse, vedere [Eseguire macchine virtuali Windows per un'applicazione a più livelli][implementing-a-multi-tier-architecture-on-Azure].</span><span class="sxs-lookup"><span data-stu-id="f5741-140">For more information about these resources, see [Run VMs for an N-tier architecture][implementing-a-multi-tier-architecture-on-Azure].</span></span>

## <a name="recommendations"></a><span data-ttu-id="f5741-141">Raccomandazioni</span><span class="sxs-lookup"><span data-stu-id="f5741-141">Recommendations</span></span>

<span data-ttu-id="f5741-142">Le raccomandazioni seguenti sono valide per la maggior parte degli scenari.</span><span class="sxs-lookup"><span data-stu-id="f5741-142">The following recommendations apply for most scenarios.</span></span> <span data-ttu-id="f5741-143">Seguire queste indicazioni, a meno che non si disponga di un requisito specifico che le escluda.</span><span class="sxs-lookup"><span data-stu-id="f5741-143">Follow these recommendations unless you have a specific requirement that overrides them.</span></span> 

### <a name="azure-ad-connect-sync-service"></a><span data-ttu-id="f5741-144">Servizio di sincronizzazione Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="f5741-144">Azure AD Connect sync service</span></span>

<span data-ttu-id="f5741-145">Il servizio di sincronizzazione Azure AD Connect garantisce che le informazioni sull'identità archiviate nel cloud siano coerenti con quelle conservate in locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-145">The Azure AD Connect sync service ensures that identity information stored in the cloud is consistent with that held on-premises.</span></span> <span data-ttu-id="f5741-146">Installare questo servizio usando il software Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-146">You install this service using the Azure AD Connect software.</span></span> 

<span data-ttu-id="f5741-147">Prima di implementare la sincronizzazione Azure AD Connect, stabilire i requisiti di sincronizzazione della propria organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-147">Before implementing Azure AD Connect sync, determine the synchronization requirements of your organization.</span></span> <span data-ttu-id="f5741-148">Ad esempio, cosa sincronizzare, da quali domini e con quale frequenza.</span><span class="sxs-lookup"><span data-stu-id="f5741-148">For example, what to synchronize, from which domains, and how frequently.</span></span> <span data-ttu-id="f5741-149">Per altre informazioni, vedere [Determinare i requisiti di sincronizzazione delle directory][aad-sync-requirements].</span><span class="sxs-lookup"><span data-stu-id="f5741-149">For more information, see [Determine directory synchronization requirements][aad-sync-requirements].</span></span>

<span data-ttu-id="f5741-150">È possibile eseguire il servizio di sincronizzazione Azure AD Connect in una macchina virtuale o in un computer ospitato in locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-150">You can run the Azure AD Connect sync service on a VM or a computer hosted on-premises.</span></span> <span data-ttu-id="f5741-151">A causa della volatilità delle informazioni nella directory di Active Directory, è improbabile che il carico sul servizio di sincronizzazione Azure AD Connect sia elevato dopo la sincronizzazione iniziale con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-151">Depending on the volatility of the information in your Active Directory directory, the load on the Azure AD Connect sync service is unlikely to be high after the initial synchronization with Azure AD.</span></span> <span data-ttu-id="f5741-152">L'esecuzione del servizio su una macchina virtuale rende più semplice scalare il server, se necessario.</span><span class="sxs-lookup"><span data-stu-id="f5741-152">Running the service on a VM makes it easier to scale the server if needed.</span></span> <span data-ttu-id="f5741-153">Monitorare l'attività nella macchina virtuale come descritto nella sezione Considerazioni di monitoraggio per determinare se è necessario scalare.</span><span class="sxs-lookup"><span data-stu-id="f5741-153">Monitor the activity on the VM as described in the Monitoring considerations section to determine whether scaling is necessary.</span></span>

<span data-ttu-id="f5741-154">Se in una foresta sono presenti più domini locali, si consiglia di archiviare e sincronizzare le informazioni per l'intera foresta in un singolo tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-154">If you have multiple on-premises domains in a forest, we recommend storing and synchronizing information for the entire forest to a single Azure AD tenant.</span></span> <span data-ttu-id="f5741-155">Filtrare le informazioni per le identità che presenti in più di un dominio, in modo che ogni identità non sia duplicata ma venga visualizzata una sola volta in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-155">Filter information for identities that occur in more than one domain, so that each identity appears only once in Azure AD, rather than being duplicated.</span></span> <span data-ttu-id="f5741-156">La duplicazione può determinare incoerenze quando i dati vengono sincronizzati.</span><span class="sxs-lookup"><span data-stu-id="f5741-156">Duplication can lead to inconsistencies when data is synchronized.</span></span> <span data-ttu-id="f5741-157">Per altre informazioni, vedere la sezione Topologia di seguito.</span><span class="sxs-lookup"><span data-stu-id="f5741-157">For more information, see the Topology section below.</span></span> 

<span data-ttu-id="f5741-158">Usare i filtri in modo che in Azure AD siano archiviati solo i dati necessari.</span><span class="sxs-lookup"><span data-stu-id="f5741-158">Use filtering so that only necessary data is stored in Azure AD.</span></span> <span data-ttu-id="f5741-159">Ad esempio, l'organizzazione potrebbe non essere interessata ad archiviare le informazioni sugli account inattivi in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-159">For example, your organization might not want to store information about inactive accounts in Azure AD.</span></span> <span data-ttu-id="f5741-160">I filtri possono essere basati sui gruppi, sui domini, sull'unità organizzativa (OU) o sugli attributi.</span><span class="sxs-lookup"><span data-stu-id="f5741-160">Filtering can be group-based, domain-based, organization unit (OU)-based, or attribute-based.</span></span> <span data-ttu-id="f5741-161">È possibile combinare i filtri per generare regole più complesse.</span><span class="sxs-lookup"><span data-stu-id="f5741-161">You can combine filters to generate more complex rules.</span></span> <span data-ttu-id="f5741-162">Ad esempio, è possibile sincronizzare gli oggetti inclusi in un dominio che presentano un valore specifico in un attributo selezionato.</span><span class="sxs-lookup"><span data-stu-id="f5741-162">For example, you could synchronize objects held in a domain that have a specific value in a selected attribute.</span></span> <span data-ttu-id="f5741-163">Per informazioni dettagliate, vedere [Servizio di sincronizzazione Azure AD Connect: Configurare il filtro][aad-filtering].</span><span class="sxs-lookup"><span data-stu-id="f5741-163">For detailed information, see [Azure AD Connect sync: Configure Filtering][aad-filtering].</span></span>

<span data-ttu-id="f5741-164">Per implementare la disponibilità elevata per il servizio di sincronizzazione AD Connect, eseguire un server di gestione temporanea secondario.</span><span class="sxs-lookup"><span data-stu-id="f5741-164">To implement high availability for the AD Connect sync service, run a secondary staging server.</span></span> <span data-ttu-id="f5741-165">Per altre informazioni, vedere la sezione relativa alle raccomandazioni sulla topologia di seguito.</span><span class="sxs-lookup"><span data-stu-id="f5741-165">For more information, see the Topology recommendations section.</span></span>

### <a name="security-recommendations"></a><span data-ttu-id="f5741-166">Suggerimenti per la sicurezza</span><span class="sxs-lookup"><span data-stu-id="f5741-166">Security recommendations</span></span>

<span data-ttu-id="f5741-167">**Gestione delle password utente.**</span><span class="sxs-lookup"><span data-stu-id="f5741-167">**User password management.**</span></span> <span data-ttu-id="f5741-168">Le edizioni di Azure AD Premium supportano il ripristino delle password, consentendo agli utenti locali di eseguire la reimpostazione della password self-service dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5741-168">The Azure AD Premium editions support password writeback, enabling your on-premises users to perform self-service password resets from within the Azure portal.</span></span> <span data-ttu-id="f5741-169">Questa funzionalità deve essere abilitata solo dopo avere esaminato i criteri di sicurezza delle password dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-169">This feature should only be enabled after reviewing your organization's password security policy.</span></span> <span data-ttu-id="f5741-170">Ad esempio, è possibile limitare gli utenti che possono modificare la password e personalizzare l'esperienza di gestione delle password.</span><span class="sxs-lookup"><span data-stu-id="f5741-170">For example, you can restrict which users can change their passwords, and you can tailor the password management experience.</span></span> <span data-ttu-id="f5741-171">Per altre informazioni, vedere [Personalizzare la funzionalità di Azure AD per la reimpostazione della password self-service][aad-password-management].</span><span class="sxs-lookup"><span data-stu-id="f5741-171">For more information, see [Customizing Password Management to fit your organization's needs][aad-password-management].</span></span> 

<span data-ttu-id="f5741-172">**Proteggere le applicazioni locali accessibili dall'esterno.**</span><span class="sxs-lookup"><span data-stu-id="f5741-172">**Protect on-premises applications that can be accessed externally.**</span></span> <span data-ttu-id="f5741-173">Usare il proxy di applicazione di Azure AD per offrire accesso controllato alle applicazioni Web locali per gli utenti esterni tramite Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-173">Use the Azure AD Application Proxy to provide controlled access to on-premises web applications for external users through Azure AD.</span></span> <span data-ttu-id="f5741-174">Solo gli utenti che dispongono di credenziali valide nella directory di Azure sono autorizzati a usare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-174">Only users that have valid credentials in your Azure directory have permission to use the application.</span></span> <span data-ttu-id="f5741-175">Per altre informazioni, vedere l'articolo [Attività iniziali del proxy di applicazione e installazione del connettore][aad-application-proxy].</span><span class="sxs-lookup"><span data-stu-id="f5741-175">For more information, see the article [Enable Application Proxy in the Azure portal][aad-application-proxy].</span></span>

<span data-ttu-id="f5741-176">**Monitorare attivamente Azure AD per rilevare segnali di attività sospette.**</span><span class="sxs-lookup"><span data-stu-id="f5741-176">**Actively monitor Azure AD for signs of suspicious activity.**</span></span>    <span data-ttu-id="f5741-177">È consigliabile usare l'edizione Azure AD Premium P2 che include Azure AD Identity Protection.</span><span class="sxs-lookup"><span data-stu-id="f5741-177">Consider using Azure AD Premium P2 edition, which includes Azure AD Identity Protection.</span></span> <span data-ttu-id="f5741-178">Identity Protection usa l'euristica e algoritmi di apprendimento automatico adattivi per rilevare anomalie ed eventi di rischio che possono indicare la compromissione di un'identità.</span><span class="sxs-lookup"><span data-stu-id="f5741-178">Identity Protection uses adaptive machine learning algorithms and heuristics to detect anomalies and risk events that may indicate that an identity has been compromised.</span></span> <span data-ttu-id="f5741-179">Ad esempio, è possibile rilevare attività potenzialmente insolite, come attività di accesso irregolari, accessi da origini sconosciute o da indirizzi IP con attività sospette oppure accessi da dispositivi che potrebbero essere infetti.</span><span class="sxs-lookup"><span data-stu-id="f5741-179">For example, it can detect potentially unusual activity such as irregular sign-in activities, sign-ins from unknown sources or from IP addresses with suspicious activity, or sign-ins from devices that may be infected.</span></span> <span data-ttu-id="f5741-180">Sulla base di tali dati, Identity Protection genera report e avvisi che consentono di analizzare gli eventi di rischio e adottare le azioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="f5741-180">Using this data, Identity Protection generates reports and alerts that enables you to investigate these risk events and take appropriate action.</span></span> <span data-ttu-id="f5741-181">Per altre informazioni, vedere [Azure Active Directory Identity Protection][aad-identity-protection].</span><span class="sxs-lookup"><span data-stu-id="f5741-181">For more information, see [Azure Active Directory Identity Protection][aad-identity-protection].</span></span>
  
<span data-ttu-id="f5741-182">È possibile usare la funzionalità di creazione di report di Azure Active Directory nel portale di Azure per monitorare le attività relative alla sicurezza che si verificano nel sistema.</span><span class="sxs-lookup"><span data-stu-id="f5741-182">You can use the reporting feature of Azure AD in the Azure portal to monitor security-related activities occurring in your system.</span></span> <span data-ttu-id="f5741-183">Per altre informazioni sull'uso di questi report, vedere [Creazione di report in Azure Active Directory][aad-reporting-guide].</span><span class="sxs-lookup"><span data-stu-id="f5741-183">For more information about using these reports, see [Azure Active Directory Reporting Guide][aad-reporting-guide].</span></span>

### <a name="topology-recommendations"></a><span data-ttu-id="f5741-184">Raccomandazioni sulla topologia</span><span class="sxs-lookup"><span data-stu-id="f5741-184">Topology recommendations</span></span>

<span data-ttu-id="f5741-185">Configurare Azure AD Connect per implementare una topologia che corrisponda il più possibile ai requisiti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-185">Configure Azure AD Connect to implement a topology that most closely matches the requirements of your organization.</span></span> <span data-ttu-id="f5741-186">Di seguito sono elencate le topologie supportate da Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-186">Topologies that Azure AD Connect supports include the following:</span></span>

* <span data-ttu-id="f5741-187">**Foresta singola, singola directory di Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="f5741-187">**Single forest, single Azure AD directory**.</span></span> <span data-ttu-id="f5741-188">In questa topologia Azure AD Connect sincronizza oggetti e informazioni sull'identità da uno o più domini in una singola foresta locale in un unico tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-188">In this topology, Azure AD Connect synchronizes objects and identity information from one or more domains in a single on-premises forest into a single Azure AD tenant.</span></span> <span data-ttu-id="f5741-189">Questa è la topologia predefinita implementata dall'installazione rapida di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-189">This is the default topology implemented by the express installation of Azure AD Connect.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="f5741-190">Non usare più server di sincronizzazione di Azure AD Connect per connettersi a domini diversi nella stessa foresta locale per lo stesso tenant di Azure AD, a meno che non si esegua un server in modalità di gestione temporanea, come descritto di seguito.</span><span class="sxs-lookup"><span data-stu-id="f5741-190">Don't use multiple Azure AD Connect sync servers to connect different domains in the same on-premises forest to the same Azure AD tenant, unless you are running a server in staging mode, described below.</span></span>
  > 
  > 

* <span data-ttu-id="f5741-191">**Più foreste, singola directory di Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="f5741-191">**Multiple forests, single Azure AD directory**.</span></span> <span data-ttu-id="f5741-192">In questa topologia Azure AD Connect sincronizza gli oggetti e le informazioni sull'identità da più foreste in un unico tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-192">In this topology, Azure AD Connect synchronizes objects and identity information from multiple forests into a single Azure AD tenant.</span></span> <span data-ttu-id="f5741-193">Usare questa topologia se l'organizzazione dispone di più di una foresta locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-193">Use this topology if your organization has more than one on-premises forest.</span></span> <span data-ttu-id="f5741-194">È possibile consolidare le informazioni sull'identità in modo che ogni singolo utente venga rappresentato una volta nella directory di Azure AD, anche se lo stesso utente è presente in più di una foresta.</span><span class="sxs-lookup"><span data-stu-id="f5741-194">You can consolidate identity information so that each unique user is represented once in the Azure AD directory, even if the same user exists in more than one forest.</span></span> <span data-ttu-id="f5741-195">Tutte le foreste usano lo stesso server di sincronizzazione di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-195">All forests use the same Azure AD Connect sync server.</span></span> <span data-ttu-id="f5741-196">Non è necessario che il server di sincronizzazione di Azure AD Connect faccia parte di un dominio, ma deve essere raggiungibile da tutte le foreste.</span><span class="sxs-lookup"><span data-stu-id="f5741-196">The Azure AD Connect sync server does not have to be part of any domain, but it must be reachable from all forests.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="f5741-197">In questa topologia non usare server di sincronizzazione separati di Azure AD Connect per connettere ogni foresta locale a un singolo tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-197">In this topology, don't use separate Azure AD Connect sync servers to connect each on-premises forest to a single Azure AD tenant.</span></span> <span data-ttu-id="f5741-198">Ciò può generare informazioni sull'identità duplicate in Azure AD, se gli utenti sono presenti in più foreste.</span><span class="sxs-lookup"><span data-stu-id="f5741-198">This can result in duplicated identity information in Azure AD if users are present in more than one forest.</span></span>
  > 
  > 

* <span data-ttu-id="f5741-199">**Più foreste, topologie separate**.</span><span class="sxs-lookup"><span data-stu-id="f5741-199">**Multiple forests, separate topologies**.</span></span> <span data-ttu-id="f5741-200">Questa topologia unisce le informazioni sull'identità da foreste separate in un singolo tenant di Azure AD, considerando tutte le foreste come entità separate.</span><span class="sxs-lookup"><span data-stu-id="f5741-200">This topology merges identity information from separate forests into a single Azure AD tenant, treating all forests as separate entities.</span></span> <span data-ttu-id="f5741-201">Questa topologia è utile se si desidera combinare le foreste di organizzazioni diverse e le informazioni sull'identità per ogni utente si trovano in una sola foresta.</span><span class="sxs-lookup"><span data-stu-id="f5741-201">This topology is useful if you are combining forests from different organizations and the identity information for each user is held in only one forest.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="f5741-202">Se gli elenchi di indirizzi globali in ogni foresta sono sincronizzati, è possibile che un utente in una foresta sia presente in un'altra come contatto.</span><span class="sxs-lookup"><span data-stu-id="f5741-202">If the global address lists (GAL) in each forest are synchronized, a user in one forest may be present in another as a contact.</span></span> <span data-ttu-id="f5741-203">Ciò può verificarsi se l'organizzazione ha implementato GALSync con Forefront Identity Manager 2010 o Microsoft Identity Manager 2016.</span><span class="sxs-lookup"><span data-stu-id="f5741-203">This can occur if your organization has implemented GALSync with Forefront Identity manager 2010 or Microsoft Identity Manager 2016.</span></span> <span data-ttu-id="f5741-204">In questo scenario è possibile specificare che gli utenti devono essere identificati dal proprio attributo *Mail*.</span><span class="sxs-lookup"><span data-stu-id="f5741-204">In this scenario, you can specify that users should be identified by their *Mail* attribute.</span></span> <span data-ttu-id="f5741-205">È inoltre possibile associare le identità usando gli attributi *ObjectSID* e *msExchMasterAccountSID*.</span><span class="sxs-lookup"><span data-stu-id="f5741-205">You can also match identities using the *ObjectSID* and *msExchMasterAccountSID* attributes.</span></span> <span data-ttu-id="f5741-206">Questo approccio risulta utile in presenza di una o più foreste risorse con account disabilitati.</span><span class="sxs-lookup"><span data-stu-id="f5741-206">This is useful if you have one or more resource forests with disabled accounts.</span></span>
  > 
  > 

* <span data-ttu-id="f5741-207">**Server di gestione temporanea**.</span><span class="sxs-lookup"><span data-stu-id="f5741-207">**Staging server**.</span></span> <span data-ttu-id="f5741-208">In questa configurazione viene eseguita una seconda istanza del server di sincronizzazione Azure AD Connect in parallelo con il primo.</span><span class="sxs-lookup"><span data-stu-id="f5741-208">In this configuration, you run a second instance of the Azure AD Connect sync server in parallel with the first.</span></span> <span data-ttu-id="f5741-209">Questa struttura supporta scenari come quelli illustrati di seguito.</span><span class="sxs-lookup"><span data-stu-id="f5741-209">This structure supports scenarios such as:</span></span>
  
  * <span data-ttu-id="f5741-210">Disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="f5741-210">High availability.</span></span>
  * <span data-ttu-id="f5741-211">Test e distribuzione di una nuova configurazione del server di sincronizzazione Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-211">Testing and deploying a new configuration of the Azure AD Connect sync server.</span></span>
  * <span data-ttu-id="f5741-212">Introduzione di un nuovo server e rimozione di una configurazione precedente.</span><span class="sxs-lookup"><span data-stu-id="f5741-212">Introducing a new server and decommissioning an old configuration.</span></span> 
    
    <span data-ttu-id="f5741-213">In questi scenari la seconda istanza viene eseguita in *modalità di gestione temporanea*.</span><span class="sxs-lookup"><span data-stu-id="f5741-213">In these scenarios, the second instance runs in *staging mode*.</span></span> <span data-ttu-id="f5741-214">Il server registra gli oggetti importati e i dati di sincronizzazione nel proprio database, ma non passa i dati in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-214">The server records imported objects and synchronization data in its database, but does not pass the data to Azure AD.</span></span> <span data-ttu-id="f5741-215">Se si disattiva la modalità di gestione temporanea, il server inizia la scrittura dei dati in Azure AD e avvia l'esecuzione del ripristino delle password nelle directory locali, laddove appropriato.</span><span class="sxs-lookup"><span data-stu-id="f5741-215">If you disable staging mode, the server starts writing data to Azure AD, and also starts performing password write-backs into the on-premises directories where appropriate.</span></span> <span data-ttu-id="f5741-216">Per altre informazioni, vedere [Servizio di sincronizzazione Azure AD Connect: Attività operative e considerazioni][aad-connect-sync-operational-tasks].</span><span class="sxs-lookup"><span data-stu-id="f5741-216">For more information, see [Azure AD Connect sync: Operational tasks and considerations][aad-connect-sync-operational-tasks].</span></span>

* <span data-ttu-id="f5741-217">**Più directory di Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="f5741-217">**Multiple Azure AD directories**.</span></span> <span data-ttu-id="f5741-218">È consigliabile creare una singola directory di Azure AD per un'organizzazione, ma potrebbero verificarsi situazioni in cui è necessario partizionare le informazioni in directory di Azure AD separate.</span><span class="sxs-lookup"><span data-stu-id="f5741-218">It is recommended that you create a single Azure AD directory for an organization, but there may be situations where you need to partition information across separate Azure AD directories.</span></span> <span data-ttu-id="f5741-219">In questo caso è possibile evitare i problemi di sincronizzazione e di ripristino delle password verificando che ogni oggetto dalla foresta locale sia presente in una sola directory di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-219">In this case, avoid synchronization and password write-back issues by ensuring that each object from the on-premises forest appears in only one Azure AD directory.</span></span> <span data-ttu-id="f5741-220">Per implementare questo scenario, configurare server di sincronizzazione Azure AD Connect separati per ogni directory di Azure AD e usare i filtri in modo che ogni server di sincronizzazione di Azure AD Connect operi su set di oggetti che si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="f5741-220">To implement this scenario, configure separate Azure AD Connect sync servers for each Azure AD directory, and use filtering so that each Azure AD Connect sync server operates on a mutually exclusive set of objects.</span></span> 

<span data-ttu-id="f5741-221">Per altre informazioni su queste topologie, vedere [Topologie per Azure AD Connect][aad-topologies].</span><span class="sxs-lookup"><span data-stu-id="f5741-221">For more information about these topologies, see [Topologies for Azure AD Connect][aad-topologies].</span></span>

### <a name="user-authentication"></a><span data-ttu-id="f5741-222">Autenticazione utente</span><span class="sxs-lookup"><span data-stu-id="f5741-222">User authentication</span></span>

<span data-ttu-id="f5741-223">Per impostazione predefinita, il server di sincronizzazione di Azure AD Connect consente di configurare la sincronizzazione degli hash delle password tra il dominio locale e Azure AD e il servizio di Azure AD presuppone che gli utenti eseguano l'autenticazione con la stessa password che usano in locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-223">By default, the Azure AD Connect sync server configures password hash synchronization between the on-premises domain and Azure AD, and the Azure AD service assumes that users authenticate by providing the same password that they use on-premises.</span></span> <span data-ttu-id="f5741-224">Per molte organizzazioni questo comportamento è appropriato, ma è necessario considerare l'infrastruttura e i criteri esistenti dell'organizzazione specifica.</span><span class="sxs-lookup"><span data-stu-id="f5741-224">For many organizations, this is appropriate, but you should consider your organization's existing policies and infrastructure.</span></span> <span data-ttu-id="f5741-225">Ad esempio: </span><span class="sxs-lookup"><span data-stu-id="f5741-225">For example:</span></span>

* <span data-ttu-id="f5741-226">I criteri di sicurezza dell'organizzazione potrebbero non consentire la sincronizzazione degli hash delle password nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f5741-226">The security policy of your organization may prohibit synchronizing password hashes to the cloud.</span></span> <span data-ttu-id="f5741-227">In questo caso l'organizzazione dovrà prendere in considerazione l'[autenticazione pass-through](/azure/active-directory/connect/active-directory-aadconnect-pass-through-authentication).</span><span class="sxs-lookup"><span data-stu-id="f5741-227">In this case your organization should consider [pass-through authentication](/azure/active-directory/connect/active-directory-aadconnect-pass-through-authentication).</span></span>
* <span data-ttu-id="f5741-228">Quando si accede alle risorse del cloud da computer appartenenti al dominio nella rete aziendale, è necessario che gli utenti non vadano incontro ad alcun problema nell’uso dell’SSO.</span><span class="sxs-lookup"><span data-stu-id="f5741-228">You might require that users experience seamless single sign-on (SSO) when accessing cloud resources from domain-joined machines on the corporate network.</span></span>
* <span data-ttu-id="f5741-229">L'organizzazione potrebbe avere già distribuito Active Directory Federation Services (ADFS) o provider federativi di terze parti.</span><span class="sxs-lookup"><span data-stu-id="f5741-229">Your organization might already have Active Directory Federation Services (AD FS) or a third party federation provider deployed.</span></span> <span data-ttu-id="f5741-230">È possibile configurare Azure AD in modo che per implementare l'autenticazione e SSO usi questa infrastruttura anziché le informazioni relative alle password che si trovano nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f5741-230">You can configure Azure AD to use this infrastructure to implement authentication and SSO rather than by using password information held in the cloud.</span></span>

<span data-ttu-id="f5741-231">Per altre informazioni, vedere [Opzioni di accesso utente di Azure AD Connect][aad-user-sign-in].</span><span class="sxs-lookup"><span data-stu-id="f5741-231">For more information, see [Azure AD Connect User Sign on options][aad-user-sign-in].</span></span>

### <a name="azure-ad-application-proxy"></a><span data-ttu-id="f5741-232">Proxy di applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="f5741-232">Azure AD application proxy</span></span> 

<span data-ttu-id="f5741-233">Usare Azure AD per consentire l'accesso alle applicazioni locali.</span><span class="sxs-lookup"><span data-stu-id="f5741-233">Use Azure AD to provide access to on-premises applications.</span></span>

<span data-ttu-id="f5741-234">Esporre le applicazioni Web locali usando connettori proxy di applicazione gestiti dal componente proxy di applicazione Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-234">Expose your on-premises web applications using application proxy connectors managed by the Azure AD application proxy component.</span></span> <span data-ttu-id="f5741-235">Il connettore proxy di applicazione apre una connessione di rete in uscita per il proxy di applicazione Azure AD e le richieste degli utenti remoti vengono reinstradate da Azure AD alle app Web tramite questa connessione.</span><span class="sxs-lookup"><span data-stu-id="f5741-235">The application proxy connector opens an outbound network connection to the Azure AD application proxy, and remote users' requests are routed back from Azure AD through this connection to the web apps.</span></span> <span data-ttu-id="f5741-236">Ciò elimina la necessità di aprire porte in ingresso nel firewall locale e riduce la superficie di attacco esposta dall'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-236">This removes the need to open inbound ports in the on-premises firewall and reduces the attack surface exposed by your organization.</span></span>

<span data-ttu-id="f5741-237">Per altre informazioni, vedere [Attività iniziali del proxy di applicazione e installazione del connettore][aad-application-proxy].</span><span class="sxs-lookup"><span data-stu-id="f5741-237">For more information, see [Publish applications using Azure AD Application proxy][aad-application-proxy].</span></span>

### <a name="object-synchronization"></a><span data-ttu-id="f5741-238">Sincronizzazione degli oggetti</span><span class="sxs-lookup"><span data-stu-id="f5741-238">Object synchronization</span></span> 

<span data-ttu-id="f5741-239">La configurazione predefinita di Azure AD Connect sincronizza gli oggetti dalla directory di Active Directory locale in base alle regole specificate nell'articolo [Servizio di sincronizzazione Azure AD Connect: Informazioni sulla configurazione predefinita][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="f5741-239">Azure AD Connect's default configuration synchronizes objects from your local Active Directory directory based on the rules specified in the article [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules].</span></span> <span data-ttu-id="f5741-240">Gli oggetti che soddisfano queste regole vengono sincronizzati mentre tutti gli altri oggetti vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="f5741-240">Objects that satisfy these rules are synchronized while all other objects are ignored.</span></span> <span data-ttu-id="f5741-241">Alcune regole di esempio:</span><span class="sxs-lookup"><span data-stu-id="f5741-241">Some example rules:</span></span>

* <span data-ttu-id="f5741-242">Gli oggetti utente devono avere un attributo *sourceAnchor* univoco e l'attributo *accountEnabled*.</span><span class="sxs-lookup"><span data-stu-id="f5741-242">User objects must have a unique *sourceAnchor* attribute and the *accountEnabled* attribute must be populated.</span></span>
* <span data-ttu-id="f5741-243">Gli oggetti utente devono avere un attributo *sAMAccountName* e non possono iniziare con il testo *Azure AD_* o *MSOL_*.</span><span class="sxs-lookup"><span data-stu-id="f5741-243">User objects must have a *sAMAccountName* attribute and cannot start with the text *Azure AD_* or *MSOL_*.</span></span>

<span data-ttu-id="f5741-244">Azure AD Connect applica diverse regole agli oggetti User, Contact, Group, ForeignSecurityPrincipal e Computer.</span><span class="sxs-lookup"><span data-stu-id="f5741-244">Azure AD Connect applies several rules to User, Contact, Group, ForeignSecurityPrincipal, and Computer objects.</span></span> <span data-ttu-id="f5741-245">Usare l'Editor regole di sincronizzazione installato con Azure AD Connect, se è necessario modificare il set predefinito di regole.</span><span class="sxs-lookup"><span data-stu-id="f5741-245">Use the Synchronization Rules Editor installed with Azure AD Connect if you need to modify the default set of rules.</span></span> <span data-ttu-id="f5741-246">Per altre informazioni, vedere [Servizio di sincronizzazione Azure AD Connect: Informazioni sulla configurazione predefinita][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="f5741-246">For more information, see [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules]).</span></span>

<span data-ttu-id="f5741-247">È inoltre possibile definire filtri personalizzati per limitare gli oggetti che devono essere sincronizzati dal dominio o dall'unità organizzativa.</span><span class="sxs-lookup"><span data-stu-id="f5741-247">You can also define your own filters to limit the objects to be synchronized by domain or OU.</span></span> <span data-ttu-id="f5741-248">In alternativa, è possibile implementare filtri personalizzati più complessi, come descritto in [Servizio di sincronizzazione Azure AD Connect: Configurare il filtro][aad-filtering].</span><span class="sxs-lookup"><span data-stu-id="f5741-248">Alternatively, you can implement more complex custom filtering such as that described in [Azure AD Connect sync: Configure Filtering][aad-filtering].</span></span>

### <a name="monitoring"></a><span data-ttu-id="f5741-249">Monitoraggio</span><span class="sxs-lookup"><span data-stu-id="f5741-249">Monitoring</span></span> 

<span data-ttu-id="f5741-250">Il monitoraggio dell'integrità viene eseguito dagli agenti elencati di seguito installati in locale:</span><span class="sxs-lookup"><span data-stu-id="f5741-250">Health monitoring is performed by the following agents installed on-premises:</span></span>

* <span data-ttu-id="f5741-251">Azure AD Connect consente di installare un agente che acquisisce le informazioni sulle operazioni di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-251">Azure AD Connect installs an agent that captures information about synchronization operations.</span></span> <span data-ttu-id="f5741-252">Usare il pannello di Azure AD Connect Health nel portale di Azure per monitorarne lo stato e le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="f5741-252">Use the Azure AD Connect Health blade in the Azure portal to monitor its health and performance.</span></span> <span data-ttu-id="f5741-253">Per altre informazioni, vedere [Monitorare la sincronizzazione di Azure AD Connect con Azure AD Connect Health][aad-health].</span><span class="sxs-lookup"><span data-stu-id="f5741-253">For more information, see [Using Azure AD Connect Health for sync][aad-health].</span></span>
* <span data-ttu-id="f5741-254">Per monitorare l'integrità dei domini di Active Directory e delle directory da Azure, installare Azure AD Connect Health per l'agente Active Directory Domain Services in un computer all'interno del dominio locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-254">To monitor the health of the AD DS domains and directories from Azure, install the Azure AD Connect Health for AD DS agent on a machine within the on-premises domain.</span></span> <span data-ttu-id="f5741-255">Usare il pannello di Azure Active Directory Connect Health nel portale di Azure per il monitoraggio dello stato.</span><span class="sxs-lookup"><span data-stu-id="f5741-255">Use the Azure Active Directory Connect Health blade in the Azure portal for health monitoring.</span></span> <span data-ttu-id="f5741-256">Per altre informazioni, vedere [Uso di Azure AD Connect Health con Servizi di dominio Active Directory][aad-health-adds].</span><span class="sxs-lookup"><span data-stu-id="f5741-256">For more information, see [Using Azure AD Connect Health with AD DS][aad-health-adds]</span></span> 
* <span data-ttu-id="f5741-257">Installare Azure AD Connect Health per l'agente Active Directory Federation Services per monitorare l'integrità dei servizi in esecuzione in locale e usare il pannello di Azure Active Directory Connect Health nel portale di Azure per il monitoraggio di AD FS.</span><span class="sxs-lookup"><span data-stu-id="f5741-257">Install the Azure AD Connect Health for AD FS agent to monitor the health of services running on on-premises, and use the Azure Active Directory Connect Health blade in the Azure portal to monitor AD FS.</span></span> <span data-ttu-id="f5741-258">Per altre informazioni, vedere [Monitorare AD FS con Azure AD Connect Health][aad-health-adfs].</span><span class="sxs-lookup"><span data-stu-id="f5741-258">For more information, see [Using Azure AD Connect Health with AD FS][aad-health-adfs]</span></span>

<span data-ttu-id="f5741-259">Per altre informazioni sull'installazione di agenti AD Connect Health e sui relativi requisiti, vedere [Installazione dell'agente di Azure AD Connect Health][aad-agent-installation].</span><span class="sxs-lookup"><span data-stu-id="f5741-259">For more information on installing the AD Connect Health agents and their requirements, see [Azure AD Connect Health Agent Installation][aad-agent-installation].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="f5741-260">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="f5741-260">Scalability considerations</span></span>

<span data-ttu-id="f5741-261">Il servizio di Azure AD supporta la scalabilità in base alle repliche, con una singola replica primaria che gestisce le operazioni di scrittura e più repliche secondarie di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="f5741-261">The Azure AD service supports scalability based on replicas, with a single primary replica that handles write operations plus multiple read-only secondary replicas.</span></span> <span data-ttu-id="f5741-262">Azure AD reindirizza in modo trasparente i tentativi di scrittura elaborati in risposta alle repliche secondarie alla replica primaria garantendo la coerenza finale.</span><span class="sxs-lookup"><span data-stu-id="f5741-262">Azure AD transparently redirects attempted writes made against secondary replicas to the primary replica and provides eventual consistency.</span></span> <span data-ttu-id="f5741-263">Tutte le modifiche apportate alla replica primaria vengono propagate alle repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="f5741-263">All changes made to the primary replica are propagated to the secondary replicas.</span></span> <span data-ttu-id="f5741-264">Questa architettura consente di scalare in quanto le operazioni eseguite in Azure AD sono per la maggior parte letture e non scritture.</span><span class="sxs-lookup"><span data-stu-id="f5741-264">This architecture scales well because most operations against Azure AD are reads rather than writes.</span></span> <span data-ttu-id="f5741-265">Per altre informazioni, vedere l'articolo relativo alla [ directory cloud distribuita a disponibilità elevata con ridondanza geografica di Azure AD][aad-scalability].</span><span class="sxs-lookup"><span data-stu-id="f5741-265">For more information, see [Azure AD: Under the hood of our geo-redundant, highly available, distributed cloud directory][aad-scalability].</span></span>

<span data-ttu-id="f5741-266">Per il server di sincronizzazione di Azure AD Connect, determinare il numero di oggetti che probabilmente verranno sincronizzati dalla directory locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-266">For the Azure AD Connect sync server, determine how many objects you are likely to synchronize from your local directory.</span></span> <span data-ttu-id="f5741-267">Se si dispone di meno di 100.000 oggetti, è possibile usare il software SQL Server Express Local DB predefinito fornito con Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-267">If you have less than 100,000 objects, you can use the default SQL Server Express LocalDB software provided with Azure AD Connect.</span></span> <span data-ttu-id="f5741-268">Se si dispone di un numero maggiore di oggetti, è necessario installare una versione di produzione di SQL Server ed eseguire un'installazione personalizzata di Azure AD Connect, specificando che deve usare un'istanza esistente di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f5741-268">If you have a larger number of objects, you should install a production version of SQL Server and perform a custom installation of Azure AD Connect, specifying that it should use an existing instance of SQL Server.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="f5741-269">Considerazioni sulla disponibilità</span><span class="sxs-lookup"><span data-stu-id="f5741-269">Availability considerations</span></span>

<span data-ttu-id="f5741-270">Il servizio Azure AD è distribuito geograficamente e viene eseguito in più data center distribuito nel mondo con failover automatico.</span><span class="sxs-lookup"><span data-stu-id="f5741-270">The Azure AD service is geo-distributed and runs in multiple data centers spread around the world with automated failover.</span></span> <span data-ttu-id="f5741-271">Se un data center diventa non disponibile, Azure AD garantisce che i dati di directory siano disponibili per l'accesso di istanza in almeno due più centri dati dislocati nella regione.</span><span class="sxs-lookup"><span data-stu-id="f5741-271">If a data center becomes unavailable, Azure AD ensures that your directory data is available for instance access in at least two more regionally dispersed data centers.</span></span>

> [!NOTE]
> <span data-ttu-id="f5741-272">Il contratto di servizio (SLA) per Azure AD Basic e i servizi Premium garantisce almeno il 99,9% di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="f5741-272">The service level agreement (SLA) for Azure AD Basic and Premium services guarantees at least 99.9% availability.</span></span> <span data-ttu-id="f5741-273">Non esiste un contratto di servizio per il livello gratuito di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f5741-273">There is no SLA for the Free tier of Azure AD.</span></span> <span data-ttu-id="f5741-274">Per altre informazioni, vedere [Contratto di Servizio per Azure Active Directory][sla-aad].</span><span class="sxs-lookup"><span data-stu-id="f5741-274">For more information, see [SLA for Azure Active Directory][sla-aad].</span></span>
> 
> 

<span data-ttu-id="f5741-275">Prendere in considerazione il provisioning di una seconda istanza del server di sincronizzazione di Azure AD Connect in modalità di gestione temporanea per aumentare la disponibilità, come descritto nella sezione relativa alle raccomandazioni sulla topologia.</span><span class="sxs-lookup"><span data-stu-id="f5741-275">Consider provisioning a second instance of Azure AD Connect sync server in staging mode to increase availability, as discussed in the topology recommendations section.</span></span> 

<span data-ttu-id="f5741-276">Se non si usa l'istanza di SQL Server Express Local DB fornita con Azure AD Connect, considerare l'uso del clustering SQL per ottenere la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="f5741-276">If you are not using the SQL Server Express LocalDB instance that comes with Azure AD Connect, consider using SQL clustering to achieve high availability.</span></span> <span data-ttu-id="f5741-277">Soluzioni come il mirroring e Always On non sono supportate da Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-277">Solutions such as mirroring and Always On are not supported by Azure AD Connect.</span></span>

<span data-ttu-id="f5741-278">Per altre considerazioni su come ottenere un'elevata disponibilità del server di sincronizzazione di Azure AD Connect e su come eseguire il ripristino dopo un errore, vedere [Servizio di sincronizzazione Azure AD Connect: Attività operative e considerazioni] [ aad-sync-disaster-recovery].</span><span class="sxs-lookup"><span data-stu-id="f5741-278">For additional considerations about achieving high availability of the Azure AD Connect sync server and also how to recover after a failure, see [Azure AD Connect sync: Operational tasks and considerations - Disaster Recovery][aad-sync-disaster-recovery].</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="f5741-279">Considerazioni sulla gestibilità</span><span class="sxs-lookup"><span data-stu-id="f5741-279">Manageability considerations</span></span>

<span data-ttu-id="f5741-280">Esistono due aspetti legati alla gestione di Azure AD:</span><span class="sxs-lookup"><span data-stu-id="f5741-280">There are two aspects to managing Azure AD:</span></span>

* <span data-ttu-id="f5741-281">Amministrazione di Azure AD nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f5741-281">Administering Azure AD in the cloud.</span></span>
* <span data-ttu-id="f5741-282">Gestione dei server di sincronizzazione di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f5741-282">Maintaining the Azure AD Connect sync servers.</span></span>

<span data-ttu-id="f5741-283">Azure Active Directory offre le opzioni seguenti per la gestione dei domini e delle directory nel cloud:</span><span class="sxs-lookup"><span data-stu-id="f5741-283">Azure AD provides the following options for managing domains and directories in the cloud:</span></span> 

* <span data-ttu-id="f5741-284">**Modulo Azure Active Directory PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="f5741-284">**Azure Active Directory PowerShell Module**.</span></span> <span data-ttu-id="f5741-285">Usare questo [modulo][aad-powershell] se è necessario eseguire lo script di comuni attività amministrative di Azure AD, ad esempio la gestione di utenti, la gestione di domini e la configurazione di single sign-on.</span><span class="sxs-lookup"><span data-stu-id="f5741-285">Use this [module][aad-powershell] if you need to script common Azure AD administrative tasks such as user management, domain management, and configuring single sign-on.</span></span>
* <span data-ttu-id="f5741-286">**Pannello di gestione di Azure Active Directory nel portale di Azure**.</span><span class="sxs-lookup"><span data-stu-id="f5741-286">**Azure AD management blade in the Azure portal**.</span></span> <span data-ttu-id="f5741-287">Questo pannello offre una visualizzazione di gestione interattiva della directory e consente di controllare e configurare la maggior parte degli aspetti di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f5741-287">This blade provides an interactive management view of the directory, and enables you to control and configure most aspects of Azure AD.</span></span> 

<span data-ttu-id="f5741-288">Azure AD Connect installa gli strumenti seguenti per consentire la gestione di servizi di sincronizzazione di Azure AD Connect dai computer locali:</span><span class="sxs-lookup"><span data-stu-id="f5741-288">Azure AD Connect installs the following tools to maintain Azure AD Connect sync services from your on-premises machines:</span></span>
  
* <span data-ttu-id="f5741-289">**Console di Microsoft Azure Active Directory Connect**.</span><span class="sxs-lookup"><span data-stu-id="f5741-289">**Microsoft Azure Active Directory Connect console**.</span></span> <span data-ttu-id="f5741-290">Questo strumento consente di modificare la configurazione del server Azure AD Sync, di personalizzare la modalità di esecuzione della sincronizzazione, abilitare o disabilitare la modalità di gestione temporanea e passare alla modalità di accesso utente.</span><span class="sxs-lookup"><span data-stu-id="f5741-290">This tool enables you to modify the configuration of the Azure AD Sync server, customize how synchronization occurs, enable or disable staging mode, and switch the user sign-in mode.</span></span> <span data-ttu-id="f5741-291">Si noti che è possibile abilitare l'accesso ad Active Directory ADFS con l'infrastruttura locale.</span><span class="sxs-lookup"><span data-stu-id="f5741-291">Note that you can enable Active Directory FS sign-in using your on-premises infrastructure.</span></span>
* <span data-ttu-id="f5741-292">**Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="f5741-292">**Synchronization Service Manager**.</span></span> <span data-ttu-id="f5741-293">Usare la scheda *Operazioni* in questo strumento per gestire il processo di sincronizzazione e rilevare se una parte del processo non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="f5741-293">Use the *Operations* tab in this tool to manage the synchronization process and detect whether any parts of the process have failed.</span></span> <span data-ttu-id="f5741-294">È possibile attivare le sincronizzazioni manualmente usando questo strumento.</span><span class="sxs-lookup"><span data-stu-id="f5741-294">You can trigger synchronizations manually using this tool.</span></span> <span data-ttu-id="f5741-295">La scheda *Connettori* consente di controllare le connessioni per i domini a cui è collegato il motore di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="f5741-295">The *Connectors* tab enables you to control the connections for the domains that the synchronization engine is attached to.</span></span>
* <span data-ttu-id="f5741-296">**Editor regole di sincronizzazione**.</span><span class="sxs-lookup"><span data-stu-id="f5741-296">**Synchronization Rules Editor**.</span></span> <span data-ttu-id="f5741-297">Usare questo strumento per personalizzare il modo in cui gli oggetti vengono trasformati quando vengono copiati tra una directory locale e Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5741-297">Use this tool to customize the way objects are transformed when they are copied between an on-premises directory and Azure AD.</span></span> <span data-ttu-id="f5741-298">Questo strumento consente di specificare attributi e oggetti aggiuntivi per la sincronizzazione, quindi esegue i filtri per determinare quali oggetti devono o non devono essere sincronizzati.</span><span class="sxs-lookup"><span data-stu-id="f5741-298">This tool enables you to specify additional attributes and objects for synchronization, then executes filters to determine which objects should or should not be synchronized.</span></span> <span data-ttu-id="f5741-299">Per altre informazioni, vedere la sezione Editor delle regole di sincronizzazione nel documento [Servizio di sincronizzazione Azure AD Connect: Informazioni sulla configurazione predefinita][aad-connect-sync-default-rules].</span><span class="sxs-lookup"><span data-stu-id="f5741-299">For more information, see the Synchronization Rule Editor section in the document [Azure AD Connect sync: Understanding the default configuration][aad-connect-sync-default-rules].</span></span>

<span data-ttu-id="f5741-300">Per altre informazioni e suggerimenti per la gestione di Azure AD Connect, vedere [Servizio di sincronizzazione Azure AD Connect: procedure consigliate per modificare la configurazione predefinita][aad-sync-best-practices].</span><span class="sxs-lookup"><span data-stu-id="f5741-300">For more information and tips for managing Azure AD Connect, see [Azure AD Connect sync: Best practices for changing the default configuration][aad-sync-best-practices].</span></span>

## <a name="security-considerations"></a><span data-ttu-id="f5741-301">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="f5741-301">Security considerations</span></span>

<span data-ttu-id="f5741-302">Usare il controllo di accesso condizionale per negare le richieste di autenticazione provenienti da origini impreviste:</span><span class="sxs-lookup"><span data-stu-id="f5741-302">Use conditional access control to deny authentication requests from unexpected sources:</span></span>

- <span data-ttu-id="f5741-303">Attivare [Azure Multi-Factor Authentication (MFA)][azure-multifactor-authentication] se un utente prova a connettersi da una posizione non attendibile, ad esempio su Internet anziché una rete attendibile.</span><span class="sxs-lookup"><span data-stu-id="f5741-303">Trigger [Azure Multi-Factor Authentication (MFA)][azure-multifactor-authentication] if a user attempts to connect from a nontrusted location such as across the Internet instead of a trusted network.</span></span>

- <span data-ttu-id="f5741-304">Usare il tipo di piattaforma del dispositivo dell'utente (iOS, Android, Windows Mobile, Windows) per determinare i criteri di accesso alle applicazioni e alle funzionalità.</span><span class="sxs-lookup"><span data-stu-id="f5741-304">Use the device platform type of the user (iOS, Android, Windows Mobile, Windows) to determine access policy to applications and features.</span></span>

- <span data-ttu-id="f5741-305">Registrare lo stato di abilitazione/disabilitazione dei dispositivi degli utenti e incorporare le informazioni nei controlli dei criteri di accesso.</span><span class="sxs-lookup"><span data-stu-id="f5741-305">Record the enabled/disabled state of users' devices, and incorporate this information into the access policy checks.</span></span> <span data-ttu-id="f5741-306">Ad esempio, se il telefono di un utente viene smarrito o rubato, deve essere registrato come disabilitato per evitare che venga usato per ottenere l'accesso.</span><span class="sxs-lookup"><span data-stu-id="f5741-306">For example, if a user's phone is lost or stolen it should be recorded as disabled to prevent it from being used to gain access.</span></span>

- <span data-ttu-id="f5741-307">Controllare l'accesso utente alle risorse in base all'appartenenza al gruppo.</span><span class="sxs-lookup"><span data-stu-id="f5741-307">Control user access to resources based on group membership.</span></span> <span data-ttu-id="f5741-308">Usare le [regole basate per l'appartenenza dinamica di Azure Active Directory] [ aad-dynamic-membership-rules] per semplificare l'amministrazione dei gruppi.</span><span class="sxs-lookup"><span data-stu-id="f5741-308">Use [Azure AD dynamic membership rules][aad-dynamic-membership-rules] to simplify group administration.</span></span> <span data-ttu-id="f5741-309">Per una breve panoramica del funzionamento, vedere [Introduction to Dynamic Memberships for Groups][aad-dynamic-memberships].</span><span class="sxs-lookup"><span data-stu-id="f5741-309">For a brief overview of how this works, see [Introduction to Dynamic Memberships for Groups][aad-dynamic-memberships].</span></span>

- <span data-ttu-id="f5741-310">Usare i criteri di rischio per l'accesso condizionale con Azure AD Identity Protection per assicurare la protezione avanzata in base ad attività di accesso anomale o altri eventi.</span><span class="sxs-lookup"><span data-stu-id="f5741-310">Use conditional access risk policies with Azure AD Identity Protection to provide advanced protection based on unusual sign-in activities or other events.</span></span>

<span data-ttu-id="f5741-311">Per altre informazioni, vedere l'articolo relativo all'[accesso condizionale di Azure Active Directory][aad-conditional-access].</span><span class="sxs-lookup"><span data-stu-id="f5741-311">For more information, see [Azure Active Directory conditional access][aad-conditional-access].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="f5741-312">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="f5741-312">Deploy the solution</span></span>

<span data-ttu-id="f5741-313">È disponibile una distribuzione per un'architettura di riferimento che implementa queste raccomandazioni e considerazioni su GitHub.</span><span class="sxs-lookup"><span data-stu-id="f5741-313">A deployment for a reference architecture that implements these recommendations and considerations is available on GitHub.</span></span> <span data-ttu-id="f5741-314">Questa architettura di riferimento distribuisce in Azure una rete locale simulata che è possibile usare per eseguire test ed esperimenti.</span><span class="sxs-lookup"><span data-stu-id="f5741-314">This reference architecture deploys a simulated on-premise network in Azure that you can use to test and experiment.</span></span> <span data-ttu-id="f5741-315">L'architettura di riferimento può essere distribuita con macchine virtuali sia Windows sia Linux seguendo le istruzioni riportate di seguito:</span><span class="sxs-lookup"><span data-stu-id="f5741-315">The reference architecture can be deployed with either with Windows or Linux VMs by following the directions below:</span></span> 

1. <span data-ttu-id="f5741-316">Fare clic sul pulsante seguente:</span><span class="sxs-lookup"><span data-stu-id="f5741-316">Click the button below:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Freference-architectures%2Fmaster%2Fidentity%2Fazure-ad%2Fazuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="f5741-317">Dopo avere aperto il collegamento nel portale di Azure, è necessario immettere i valori per alcune impostazioni:</span><span class="sxs-lookup"><span data-stu-id="f5741-317">Once the link has opened in the Azure portal, you must enter values for some of the settings:</span></span> 
   * <span data-ttu-id="f5741-318">Poiché il nome del **gruppo di risorse** è già definito nel file dei parametri, selezionare **Crea nuovo** e immettere `ra-aad-onpremise-rg` nella casella di testo.</span><span class="sxs-lookup"><span data-stu-id="f5741-318">The **Resource group** name is already defined in the parameter file, so select **Create New** and enter `ra-aad-onpremise-rg` in the text box.</span></span>
   * <span data-ttu-id="f5741-319">Selezionare l'area dalla casella di riepilogo a discesa **Località**.</span><span class="sxs-lookup"><span data-stu-id="f5741-319">Select the region from the **Location** drop down box.</span></span>
   * <span data-ttu-id="f5741-320">Non modificare le caselle di testo **Template Root Uri** (URI radice modello) né **Parameter Root Uri** (URI radice parametro).</span><span class="sxs-lookup"><span data-stu-id="f5741-320">Do not edit the **Template Root Uri** or the **Parameter Root Uri** text boxes.</span></span>
   * <span data-ttu-id="f5741-321">Selezionare **Windows** o **Linux** nella casella di riepilogo a discesa **Tipo di sistema operativo**.</span><span class="sxs-lookup"><span data-stu-id="f5741-321">Select **windows** or **linux** in the **Os Type** the drop down box.</span></span>
   * <span data-ttu-id="f5741-322">Leggere i termini e le condizioni, quindi fare clic sulla casella di controllo **Accetto le condizioni riportate sopra**.</span><span class="sxs-lookup"><span data-stu-id="f5741-322">Review the terms and conditions, then click the **I agree to the terms and conditions stated above** checkbox.</span></span>
   * <span data-ttu-id="f5741-323">Fare clic sul pulsante **Acquista**.</span><span class="sxs-lookup"><span data-stu-id="f5741-323">Click the **Purchase** button.</span></span>
3. <span data-ttu-id="f5741-324">Attendere il completamento della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f5741-324">Wait for the deployment to complete.</span></span>
4. <span data-ttu-id="f5741-325">I file dei parametri includono un nome utente e una password amministratore hardcoded. È consigliabile cambiarli immediatamente in tutte le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="f5741-325">The parameter files include a hard-coded administrator user names and passwords, and it is strongly recommended that you immediately change both on all the VMs.</span></span> <span data-ttu-id="f5741-326">Fare clic su ogni macchina virtuale nel portale di Azure, quindi su **Reimposta password** nel pannello **Supporto e risoluzione dei problemi**.</span><span class="sxs-lookup"><span data-stu-id="f5741-326">Click each VM in the Azure Portal then click on **Reset password** in the **Support + troubleshooting** blade.</span></span> <span data-ttu-id="f5741-327">Selezionare **Reimposta password** nella casella di riepilogo a discesa **Modalità**, quindi selezionare un nuovo **Nome utente** e una nuova **Password**.</span><span class="sxs-lookup"><span data-stu-id="f5741-327">Select **Reset password** in the **Mode** drop down box, then select a new **User name** and **Password**.</span></span> <span data-ttu-id="f5741-328">Fare clic sul pulsante **Aggiorna** per rendere permanenti il nuovo nome utente e la nuova password.</span><span class="sxs-lookup"><span data-stu-id="f5741-328">Click the **Update** button to persist the new user name and password.</span></span>

<!-- links -->

[implementing-a-multi-tier-architecture-on-Azure]: ../virtual-machines-windows/n-tier.md

[aad-agent-installation]: /azure/active-directory/active-directory-aadconnect-health-agent-install
[aad-application-proxy]: /azure/active-directory/active-directory-application-proxy-enable
[aad-conditional-access]: /azure/active-directory//active-directory-conditional-access
[aad-connect-sync-default-rules]: /azure/active-directory/active-directory-aadconnectsync-understanding-default-configuration
[aad-connect-sync-operational-tasks]: /azure/active-directory/active-directory-aadconnectsync-operations#staging-mode
[aad-dynamic-memberships]: https://youtu.be/Tdiz2JqCl9Q
[aad-dynamic-membership-rules]: /azure/active-directory/active-directory-accessmanagement-groups-with-advanced-rules
[aad-editions]: /azure/active-directory/active-directory-editions
[aad-filtering]: /azure/active-directory/active-directory-aadconnectsync-configure-filtering
[aad-health]: /azure/active-directory/active-directory-aadconnect-health-sync
[aad-health-adds]: /azure/active-directory/active-directory-aadconnect-health-adds
[aad-health-adfs]: /azure/active-directory/active-directory-aadconnect-health-adfs
[aad-identity-protection]: /azure/active-directory/active-directory-identityprotection
[aad-password-management]: /azure/active-directory/active-directory-passwords-customize
[aad-powershell]: https://msdn.microsoft.com/library/azure/mt757189.aspx
[aad-reporting-guide]: /azure/active-directory/active-directory-reporting-guide
[aad-scalability]: https://blogs.technet.microsoft.com/enterprisemobility/2014/09/02/azure-ad-under-the-hood-of-our-geo-redundant-highly-available-distributed-cloud-directory/
[aad-sync-best-practices]: /azure/active-directory/active-directory-aadconnectsync-best-practices-changing-default-configuration
[aad-sync-disaster-recovery]: /azure/active-directory/active-directory-aadconnectsync-operations#disaster-recovery
[aad-sync-requirements]: /azure/active-directory/active-directory-hybrid-identity-design-considerations-directory-sync-requirements
[aad-topologies]: /azure/active-directory/active-directory-aadconnect-topologies
[aad-user-sign-in]: /azure/active-directory/active-directory-aadconnect-user-signin
[azure-active-directory]: /azure/active-directory-domain-services/active-directory-ds-overview
[azure-ad-connect]: /azure/active-directory/active-directory-aadconnect
[azure-multifactor-authentication]: /azure/multi-factor-authentication/multi-factor-authentication
[considerations]: ./considerations.md
[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[sla-aad]: https://azure.microsoft.com/support/legal/sla/active-directory/v1_0/
[visio-download]: https://archcenter.blob.core.windows.net/cdn/identity-architectures.vsdx


[0]: ./images/azure-ad.png "Architettura identità cloud tramite Azure Active Directory"
