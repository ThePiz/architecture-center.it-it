---
title: Applicazione Web senza server
description: Architettura di riferimento che illustra un'applicazione Web senza server e un'API web
author: MikeWasson
ms.date: 10/16/2018
ms.openlocfilehash: 9ce80aa904b7a04f78127438f9898244c979c2b5
ms.sourcegitcommit: 69fc16f2b3bd3e3ffeff5bba277a4204e125cf78
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/26/2018
ms.locfileid: "50150268"
---
# <a name="serverless-web-application"></a><span data-ttu-id="064ec-103">Applicazione Web senza server</span><span class="sxs-lookup"><span data-stu-id="064ec-103">Serverless web application</span></span> 

<span data-ttu-id="064ec-104">Questa architettura di riferimento illustra un'applicazione Web senza server.</span><span class="sxs-lookup"><span data-stu-id="064ec-104">This reference architecture shows a serverless web application.</span></span> <span data-ttu-id="064ec-105">L'applicazione rende disponibile il contenuto statico di Archiviazione BLOB di Azure e implementa un'API che usa Funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-105">The application serves static content from Azure Blob Storage, and implements an API using Azure Functions.</span></span> <span data-ttu-id="064ec-106">L'API legge i dati di Cosmos DB e restituisce i risultati per l'app Web.</span><span class="sxs-lookup"><span data-stu-id="064ec-106">The API reads data from Cosmos DB and returns the results to the web app.</span></span> <span data-ttu-id="064ec-107">Un'implementazione di riferimento per questa architettura è disponibile in [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="064ec-107">A reference implementation for this architecture is available on [GitHub][github].</span></span>

![](./_images/serverless-web-app.png)
 
<span data-ttu-id="064ec-108">Il termine senza server ha due significati distinti ma correlati:</span><span class="sxs-lookup"><span data-stu-id="064ec-108">The term serverless has two distinct but related meanings:</span></span>

- <span data-ttu-id="064ec-109">**Back-end come servizio** (BaaS).</span><span class="sxs-lookup"><span data-stu-id="064ec-109">**Backend as a service** (BaaS).</span></span> <span data-ttu-id="064ec-110">I servizi cloud di back-end, ad esempio database e archiviazione, offrono le API che consentono alle applicazioni client di connettersi direttamente a questi servizi.</span><span class="sxs-lookup"><span data-stu-id="064ec-110">Backend cloud services, such as databases and storage, provide APIs that enable client applications to connect directly to these services.</span></span> 
- <span data-ttu-id="064ec-111">**Funzioni come servizio** (FaaS).</span><span class="sxs-lookup"><span data-stu-id="064ec-111">**Functions as a service** (FaaS).</span></span> <span data-ttu-id="064ec-112">In questo modello una "funzione" è un frammento di codice che viene distribuito nel cloud ed eseguito all'interno di un ambiente di hosting che elimina completamente i server che eseguono il codice.</span><span class="sxs-lookup"><span data-stu-id="064ec-112">In this model, a "function" is a piece of code that is deployed to the cloud and runs inside a hosting environment that completely abstracts the servers that run the code.</span></span> 

<span data-ttu-id="064ec-113">Entrambe le definizioni hanno in comune l'idea che gli sviluppatori e il personale DevOps non dovranno distribuire, configurare o gestire i server.</span><span class="sxs-lookup"><span data-stu-id="064ec-113">Both definitions have in common the idea that developers and DevOps personnel don't need to deploy, configure, or manage servers.</span></span> <span data-ttu-id="064ec-114">Questa architettura di riferimento è incentrata su FaaS che usa Funzioni di Azure, sebbene rendere disponibile il contenuto Web di Archiviazione BLOB di Azure sia un esempio di BaaS.</span><span class="sxs-lookup"><span data-stu-id="064ec-114">This reference architecture focuses on FaaS using Azure Functions, although serving web content from Azure Blob Storage is an example of BaaS.</span></span> <span data-ttu-id="064ec-115">Alcune caratteristiche importanti di FaaS sono:</span><span class="sxs-lookup"><span data-stu-id="064ec-115">Some important characteristics of FaaS are:</span></span>

1. <span data-ttu-id="064ec-116">Le risorse di calcolo vengono allocate in modo dinamico dalla piattaforma in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="064ec-116">Compute resources are allocated dynamically as needed by the platform.</span></span>
1. <span data-ttu-id="064ec-117">Prezzi a consumo: vengono addebitati solo i costi per le risorse di calcolo usate per eseguire il codice.</span><span class="sxs-lookup"><span data-stu-id="064ec-117">Consumption-based pricing: You are charged only for the compute resources used to execute your code.</span></span>
1. <span data-ttu-id="064ec-118">Scalabilità delle risorse di calcolo su richiesta in base al traffico, senza che lo sviluppatore debba eseguire una qualsiasi configurazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-118">The compute resources scale on demand based on traffic, without the developer needing to do any configuration.</span></span>

<span data-ttu-id="064ec-119">Le funzioni vengono eseguite quando si verifica un trigger esterno, ad esempio una richiesta HTTP o un messaggio che arriva su una coda.</span><span class="sxs-lookup"><span data-stu-id="064ec-119">Functions are executed when an external trigger occurs, such as an HTTP request or a message arriving on a queue.</span></span> <span data-ttu-id="064ec-120">In questo modo, lo [stile di architettura basata su eventi][event-driven] diventa naturale per le architetture senza server.</span><span class="sxs-lookup"><span data-stu-id="064ec-120">This makes an [event-driven architecture style][event-driven] natural for serverless architectures.</span></span> <span data-ttu-id="064ec-121">Per coordinare il lavoro tra i componenti dell'architettura, è consigliabile usare i broker di messaggi o i modelli di pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="064ec-121">To coordinate work between components in the architecture, consider using message brokers or pub/sub patterns.</span></span> <span data-ttu-id="064ec-122">Per informazioni su come scegliere le tecnologie di messaggistica in Azure, vedere [Scegliere tra i servizi di Azure che recapitano messaggi][azure-messaging].</span><span class="sxs-lookup"><span data-stu-id="064ec-122">For help choosing between messaging technologies in Azure, see [Choose between Azure services that deliver messages][azure-messaging].</span></span>

## <a name="architecture"></a><span data-ttu-id="064ec-123">Architettura</span><span class="sxs-lookup"><span data-stu-id="064ec-123">Architecture</span></span>
<span data-ttu-id="064ec-124">L'architettura è costituita dai componenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="064ec-124">The architecture consists of the following components.</span></span>

<span data-ttu-id="064ec-125">**Archiviazione BLOB**.</span><span class="sxs-lookup"><span data-stu-id="064ec-125">**Blob Storage**.</span></span> <span data-ttu-id="064ec-126">I contenuti Web statici, quali file HTML, CSS e JavaScript, vengono archiviati in Archiviazione BLOB di Azure e resi disponibili ai client tramite l'[hosting di siti Web statici][static-hosting].</span><span class="sxs-lookup"><span data-stu-id="064ec-126">Static web content, such as HTML, CSS, and JavaScript files, are stored in Azure Blob Storage and served to clients by using [static website hosting][static-hosting].</span></span> <span data-ttu-id="064ec-127">Tutte le interazioni dinamiche avvengono tramite il codice JavaScript che effettua le chiamate all'API back-end.</span><span class="sxs-lookup"><span data-stu-id="064ec-127">All dynamic interaction happens through JavaScript code making calls to the backend APIs.</span></span> <span data-ttu-id="064ec-128">Non è presente alcun codice lato server per il rendering della pagina Web.</span><span class="sxs-lookup"><span data-stu-id="064ec-128">There is no server-side code to render the web page.</span></span> <span data-ttu-id="064ec-129">L'hosting di siti Web statici supporta l'indicizzazione dei documenti e le pagine di errore 404 personalizzate.</span><span class="sxs-lookup"><span data-stu-id="064ec-129">Static website hosting supports index documents and custom 404 error pages.</span></span>

> [!NOTE]
> <span data-ttu-id="064ec-130">L'hosting di siti Web statici è attualmente disponibile in [anteprima][static-hosting-preview].</span><span class="sxs-lookup"><span data-stu-id="064ec-130">Static website hosting is currently in [preview][static-hosting-preview].</span></span>

<span data-ttu-id="064ec-131">**Rete CDN**.</span><span class="sxs-lookup"><span data-stu-id="064ec-131">**CDN**.</span></span> <span data-ttu-id="064ec-132">Usare la [rete per la distribuzione di contenuti di Azure][cdn], ovvero la rete CDN, per memorizzare nella cache il contenuto in modo da ridurre la latenza e accelerare la distribuzione del contenuto, nonché offrire un endpoint HTTPS.</span><span class="sxs-lookup"><span data-stu-id="064ec-132">Use [Azure Content Delivery Network][cdn] (CDN) to cache content for lower latency and faster delivery of content, as well as providing an HTTPS endpoint.</span></span>

<span data-ttu-id="064ec-133">**App per le funzioni**.</span><span class="sxs-lookup"><span data-stu-id="064ec-133">**Function Apps**.</span></span> <span data-ttu-id="064ec-134">[Funzioni di Azure][functions] è un'opzione di calcolo senza server.</span><span class="sxs-lookup"><span data-stu-id="064ec-134">[Azure Functions][functions] is a serverless compute option.</span></span> <span data-ttu-id="064ec-135">Usa un modello basato su eventi, in cui un frammento di codice, vale a dire una "funzione", viene richiamato da un trigger.</span><span class="sxs-lookup"><span data-stu-id="064ec-135">It uses an event-driven model, where a piece of code (a "function") is invoked by a trigger.</span></span> <span data-ttu-id="064ec-136">In questa architettura la funzione viene richiamata quando un client effettua una richiesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="064ec-136">In this architecture, the function is invoked when a client makes an HTTP request.</span></span> <span data-ttu-id="064ec-137">La richiesta viene sempre instradata attraverso un gateway API, descritto di seguito.</span><span class="sxs-lookup"><span data-stu-id="064ec-137">The request is always routed through an API gateway, described below.</span></span>

<span data-ttu-id="064ec-138">**Gestione API**.</span><span class="sxs-lookup"><span data-stu-id="064ec-138">**API Management**.</span></span> <span data-ttu-id="064ec-139">[Gestione API][apim] offre un gateway API posizionato davanti alla funzione HTTP.</span><span class="sxs-lookup"><span data-stu-id="064ec-139">[API Management][apim] provides a API gateway that sits in front of the HTTP function.</span></span> <span data-ttu-id="064ec-140">È possibile usare Gestione API per pubblicare e gestire le API usate dalle applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="064ec-140">You can use API Management to publish and manage APIs used by client applications.</span></span> <span data-ttu-id="064ec-141">L'uso di un gateway consente di separare l'applicazione front-end dalle API back-end.</span><span class="sxs-lookup"><span data-stu-id="064ec-141">Using a gateway helps to decouple the front-end application from the back-end APIs.</span></span> <span data-ttu-id="064ec-142">Gestione API può, ad esempio, riscrivere gli URL, trasformare le richieste prima che raggiungano il back-end, impostare le intestazioni delle richieste o delle risposte e così via.</span><span class="sxs-lookup"><span data-stu-id="064ec-142">For example, API Management can rewrite URLs, transform requests before they reach the backend, set request or response headers, and so forth.</span></span>

<span data-ttu-id="064ec-143">Gestione API può essere usato anche per implementare le problematiche trasversali quali:</span><span class="sxs-lookup"><span data-stu-id="064ec-143">API Management can also be used to implement cross-cutting concerns such as:</span></span>

- <span data-ttu-id="064ec-144">applicazione delle quote di uso e dei limiti di frequenza</span><span class="sxs-lookup"><span data-stu-id="064ec-144">Enforcing usage quotas and rate limits</span></span>
- <span data-ttu-id="064ec-145">convalida dei token OAuth per l'autenticazione</span><span class="sxs-lookup"><span data-stu-id="064ec-145">Validating OAuth tokens for authentication</span></span>
- <span data-ttu-id="064ec-146">abilitazione di richieste multiorigine (CORS)</span><span class="sxs-lookup"><span data-stu-id="064ec-146">Enabling cross-origin requests (CORS)</span></span>
- <span data-ttu-id="064ec-147">memorizzazione nella cache delle risposte</span><span class="sxs-lookup"><span data-stu-id="064ec-147">Caching responses</span></span>
- <span data-ttu-id="064ec-148">monitoraggio e registrazione delle richieste</span><span class="sxs-lookup"><span data-stu-id="064ec-148">Monitoring and logging requests</span></span>  

<span data-ttu-id="064ec-149">Se l'utente non ha bisogno di tutte le funzionalità offerte da Gestione API, un'altra opzione consiste nell'usare [Proxy di Funzioni][functions-proxy].</span><span class="sxs-lookup"><span data-stu-id="064ec-149">If you don't need all of the functionality provided by API Management, another option is to use [Functions Proxies][functions-proxy].</span></span> <span data-ttu-id="064ec-150">Questa funzionalità di Funzioni di Azure consente di definire un'unica superficie API per più app per le funzioni, tramite la creazione di route per le funzioni di back-end.</span><span class="sxs-lookup"><span data-stu-id="064ec-150">This feature of Azure Functions lets you define a single API surface for multiple function apps, by creating routes to back-end functions.</span></span> <span data-ttu-id="064ec-151">Proxy di Funzioni può eseguire anche trasformazioni limitate sulla richiesta e la risposta HTTP.</span><span class="sxs-lookup"><span data-stu-id="064ec-151">Function proxies can also perform limited transformations on the HTTP request and response.</span></span> <span data-ttu-id="064ec-152">Tuttavia, non offre lo stesso numero di funzionalità basate su criteri di Gestione API.</span><span class="sxs-lookup"><span data-stu-id="064ec-152">However, they don't provide the same rich policy-based capabilities of API Management.</span></span>

<span data-ttu-id="064ec-153">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="064ec-153">**Cosmos DB**.</span></span> <span data-ttu-id="064ec-154">[Cosmos DB][cosmosdb] è un servizio database multimodello.</span><span class="sxs-lookup"><span data-stu-id="064ec-154">[Cosmos DB][cosmosdb] is a multi-model database  service.</span></span> <span data-ttu-id="064ec-155">Per questo scenario, l'applicazione per le funzioni recupera i documenti da Cosmos DB in risposta alle richieste HTTP GET del client.</span><span class="sxs-lookup"><span data-stu-id="064ec-155">For this scenario, the function application fetches documents from Cosmos DB in response to HTTP GET requests from the client.</span></span>

<span data-ttu-id="064ec-156">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="064ec-156">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="064ec-157">Gli utenti accedono all'applicazione Web usando le proprie credenziali di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="064ec-157">Users sign into the web application by using their Azure AD credentials.</span></span> <span data-ttu-id="064ec-158">Azure AD restituisce un token di accesso per l'API, che l'applicazione Web usa per autenticare le richieste API (vedere [Autenticazione](#authentication)).</span><span class="sxs-lookup"><span data-stu-id="064ec-158">Azure AD returns an access token for the API, which the web application uses to authenticate API requests (see [Authentication](#authentication)).</span></span>

<span data-ttu-id="064ec-159">**Monitoraggio di Azure**.</span><span class="sxs-lookup"><span data-stu-id="064ec-159">**Azure Monitor**.</span></span> <span data-ttu-id="064ec-160">[Monitoraggio][monitor] raccoglie le metriche relative alle prestazioni dei servizi di Azure distribuiti nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-160">[Monitor][monitor] collects performance metrics about the Azure services deployed in the solution.</span></span> <span data-ttu-id="064ec-161">La visualizzazione delle metriche in una dashboard consente di ottenere visibilità sull'integrità della soluzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-161">By visualizing these in a dashboard, you can get visibility into the health of the solution.</span></span> <span data-ttu-id="064ec-162">Vengono raccolti anche i registri applicazioni.</span><span class="sxs-lookup"><span data-stu-id="064ec-162">It also collected application logs.</span></span>

<span data-ttu-id="064ec-163">**Azure Pipelines**.</span><span class="sxs-lookup"><span data-stu-id="064ec-163">**Azure Pipelines**.</span></span> <span data-ttu-id="064ec-164">[Pipelines][pipelines] è un servizio di integrazione continua, ovvero CI, e recapito continuo, ovvero CD, che compila, verifica e distribuisce l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-164">[Pipelines][pipelines] is a continuous integration (CI) and continuous delivery (CD) service that builds, tests, and deploys the application.</span></span>

## <a name="recommendations"></a><span data-ttu-id="064ec-165">Consigli</span><span class="sxs-lookup"><span data-stu-id="064ec-165">Recommendations</span></span>

### <a name="function-app-plans"></a><span data-ttu-id="064ec-166">Piani dell'app per le funzioni</span><span class="sxs-lookup"><span data-stu-id="064ec-166">Function App plans</span></span>

<span data-ttu-id="064ec-167">Funzioni di Azure supporta due modelli di hosting.</span><span class="sxs-lookup"><span data-stu-id="064ec-167">Azure Functions supports two hosting models.</span></span> <span data-ttu-id="064ec-168">Il **piano a consumo** consente di allocare automaticamente le funzionalità di calcolo durante l'esecuzione del codice.</span><span class="sxs-lookup"><span data-stu-id="064ec-168">With the **consumption plan**, compute power is automatically allocated when your code is running.</span></span>  <span data-ttu-id="064ec-169">Il piano di **servizio app** consente di allocare un set di macchine virtuali per il codice.</span><span class="sxs-lookup"><span data-stu-id="064ec-169">With the **App Service** plan, a set of VMs are allocated for your code.</span></span> <span data-ttu-id="064ec-170">Definisce anche il numero di macchine virtuali e le relative dimensioni.</span><span class="sxs-lookup"><span data-stu-id="064ec-170">The App Service plan defines the number of VMs and the VM size.</span></span> 

<span data-ttu-id="064ec-171">Si noti che il piano di servizio app non è inteso *senza server* in senso stretto, in base alla definizione sopra specificata.</span><span class="sxs-lookup"><span data-stu-id="064ec-171">Note that the App Service plan is not strictly *serverless*, according to the definition given above.</span></span> <span data-ttu-id="064ec-172">Il modello di programmazione è lo stesso, tuttavia &mdash; lo stesso codice di funzione può essere eseguito sia in un piano a consumo che in un piano di servizio app.</span><span class="sxs-lookup"><span data-stu-id="064ec-172">The programming model is the same, however &mdash; the same function code can run in both a consumption plan and an App Service plan.</span></span>

<span data-ttu-id="064ec-173">Ecco alcuni fattori da considerare quando si sceglie il tipo di piano da usare:</span><span class="sxs-lookup"><span data-stu-id="064ec-173">Here are some factors to consider when choosing which type of plan to use:</span></span>

- <span data-ttu-id="064ec-174">**Avvio a freddo**.</span><span class="sxs-lookup"><span data-stu-id="064ec-174">**Cold start**.</span></span> <span data-ttu-id="064ec-175">Con il piano a consumo, una funzione che non è stata richiamata di recente riscontrerà una maggiore latenza alla successiva esecuzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-175">With the consumption plan, a function that hasn't been invoked recently will incur some additional latency the next time it runs.</span></span> <span data-ttu-id="064ec-176">Questa maggiore latenza è dovuta all'allocazione e alla preparazione dell'ambiente di runtime.</span><span class="sxs-lookup"><span data-stu-id="064ec-176">This additional latency is due to allocating and preparing the runtime environment.</span></span> <span data-ttu-id="064ec-177">In genere è nell'ordine di secondi, ma questo dipende da diversi fattori, tra cui il numero di dipendenze che devono essere caricate.</span><span class="sxs-lookup"><span data-stu-id="064ec-177">It is usually on the order of seconds but depends on several factors, including the number of dependencies that need to be loaded.</span></span> <span data-ttu-id="064ec-178">Per altre informazioni, vedere [Understanding Serverless Cold Start][functions-cold-start] (Informazioni sull'avvio a freddo senza server).</span><span class="sxs-lookup"><span data-stu-id="064ec-178">For more information, see [Understanding Serverless Cold Start][functions-cold-start].</span></span> <span data-ttu-id="064ec-179">L'avvio a freddo riguarda in genere più i carichi di lavoro interattivi, ovvero i trigger HTTP, che i carichi di lavoro asincroni basati sui messaggi, ovvero le code o i trigger basati sugli eventi, perché la maggiore latenza viene osservata direttamente dagli utenti.</span><span class="sxs-lookup"><span data-stu-id="064ec-179">Cold start is usually more of a concern for interactive workloads (HTTP triggers) than asynchronous message-driven workloads (queue or event hubs triggers), because the additional latency is directly observed by users.</span></span>
- <span data-ttu-id="064ec-180">**Periodo di timeout**.</span><span class="sxs-lookup"><span data-stu-id="064ec-180">**Timeout period**.</span></span>  <span data-ttu-id="064ec-181">Nel piano a consumo il timeout dell'esecuzione di una funzione si verifica dopo un periodo di tempo [configurabile][functions-timeout] per un massimo di 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="064ec-181">In the consumption plan, a function execution times out after a [configurable][functions-timeout] period of time (to a maximum of 10 minutes)</span></span>
- <span data-ttu-id="064ec-182">**Isolamento della rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="064ec-182">**Virtual network isolation**.</span></span> <span data-ttu-id="064ec-183">L'uso di un piano di servizio app consente alle funzioni di essere eseguite all'interno di un [ambiente del servizio app][ase], ovvero un ambiente di hosting dedicato e isolato.</span><span class="sxs-lookup"><span data-stu-id="064ec-183">Using an App Service plan allows functions to run inside of an [App Service Environment][ase], which is a dedicated and isolated hosting environment.</span></span>
- <span data-ttu-id="064ec-184">**Modello di prezzi**.</span><span class="sxs-lookup"><span data-stu-id="064ec-184">**Pricing model**.</span></span> <span data-ttu-id="064ec-185">Il piano a consumo viene fatturato in base al numero di esecuzioni e al consumo di risorse (memoria &times; tempo di esecuzione).</span><span class="sxs-lookup"><span data-stu-id="064ec-185">The consumption plan is billed by the number of executions and resource consumption (memory &times; execution time).</span></span> <span data-ttu-id="064ec-186">Il piano di servizio app viene fatturato a tariffa oraria in base allo SKU dell'istanza della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="064ec-186">The App Service plan is billed hourly based on VM instance SKU.</span></span> <span data-ttu-id="064ec-187">Spesso, il piano a consumo può essere più economico rispetto a un piano di servizio app, perché l'utente paga solo per le risorse di calcolo che usa.</span><span class="sxs-lookup"><span data-stu-id="064ec-187">Often, the consumption plan can be cheaper than an App Service plan, because you pay only for the compute resources that you use.</span></span> <span data-ttu-id="064ec-188">Ciò è particolarmente vero se il traffico presenta picchi e valli.</span><span class="sxs-lookup"><span data-stu-id="064ec-188">This is especially true if your traffic experiences peaks and troughs.</span></span> <span data-ttu-id="064ec-189">Tuttavia, se un'applicazione riscontra una velocità effettiva elevata costante, il piano di servizio app può costare meno del piano a consumo.</span><span class="sxs-lookup"><span data-stu-id="064ec-189">However, if an application experiences constant high-volume throughput, an App Service plan may cost less than the consumption plan.</span></span>
- <span data-ttu-id="064ec-190">**Ridimensionamento**.</span><span class="sxs-lookup"><span data-stu-id="064ec-190">**Scaling**.</span></span> <span data-ttu-id="064ec-191">Un grande vantaggio del modello a consumo è che viene ridimensionato in modo dinamico a seconda delle esigenze, in base al traffico in ingresso.</span><span class="sxs-lookup"><span data-stu-id="064ec-191">A big advantage of the consumption model is that it scales dynamically as needed, based on the incoming traffic.</span></span> <span data-ttu-id="064ec-192">Sebbene il ridimensionamento si verifichi in modo rapido, c'è comunque un periodo di preparazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-192">While this scaling occurs quickly, there is still a ramp-up period.</span></span> <span data-ttu-id="064ec-193">Per alcuni carichi di lavoro, l'utente potrebbe voler eseguire deliberatamente un provisioning eccessivo delle macchine virtuali, in modo che sia possibile gestire i picchi di traffico con un tempo di preparazione pari a zero.</span><span class="sxs-lookup"><span data-stu-id="064ec-193">For some workloads, you might want to deliberately overprovision the VMs, so that you can handle bursts of traffic with zero ramp-up time.</span></span> <span data-ttu-id="064ec-194">In tal caso, prendere in considerazione un piano di servizio app.</span><span class="sxs-lookup"><span data-stu-id="064ec-194">In that case, consider an App Service plan.</span></span>

### <a name="function-app-boundaries"></a><span data-ttu-id="064ec-195">Limiti di app per le funzioni</span><span class="sxs-lookup"><span data-stu-id="064ec-195">Function App boundaries</span></span>

<span data-ttu-id="064ec-196">Un'*app per le funzioni* ospita l'esecuzione di una o più *funzioni*.</span><span class="sxs-lookup"><span data-stu-id="064ec-196">A *function app* hosts the execution of one or more *functions*.</span></span> <span data-ttu-id="064ec-197">È possibile usare un'app per le funzioni per raggruppare diverse funzioni come un'unità logica.</span><span class="sxs-lookup"><span data-stu-id="064ec-197">You can use a function app to group several functions together as a logical unit.</span></span> <span data-ttu-id="064ec-198">All'interno di un'app per le funzioni le funzioni condividono le stesse impostazioni applicazione, piano di hosting e ciclo di vita di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-198">Within a function app, the functions share the same application settings, hosting plan, and deployment lifecycle.</span></span> <span data-ttu-id="064ec-199">Ogni app per le funzioni ha il proprio nome host.</span><span class="sxs-lookup"><span data-stu-id="064ec-199">Each function app has its own hostname.</span></span>  

<span data-ttu-id="064ec-200">Usare le app per le funzioni per raggruppare le funzioni che condividono lo stesso ciclo di vita e le stesse impostazioni.</span><span class="sxs-lookup"><span data-stu-id="064ec-200">Use function apps to group functions that share the same lifecycle and settings.</span></span> <span data-ttu-id="064ec-201">Le funzioni che non condividono lo stesso ciclo di vita devono essere ospitate in app per le funzioni diverse.</span><span class="sxs-lookup"><span data-stu-id="064ec-201">Functions that don't share the same lifecycle should be hosted in different function apps.</span></span> 

<span data-ttu-id="064ec-202">È consigliabile adottare un approccio ai microservizi, in cui ogni app per le funzioni rappresenta un microservizio, se possibile costituito da diverse funzioni correlate.</span><span class="sxs-lookup"><span data-stu-id="064ec-202">Consider taking a microservices approach, where each function app represents one microservice, possibly consisting of several related functions.</span></span> <span data-ttu-id="064ec-203">In un'architettura dei microservizi, i servizi dovrebbero avere un regime di controllo libero e un'elevata coesione funzionale.</span><span class="sxs-lookup"><span data-stu-id="064ec-203">In a microservices architecture, services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="064ec-204">Regime di controllo *libero* significa che è possibile apportare modifiche a un servizio senza dover contemporaneamente aggiornare gli altri servizi.</span><span class="sxs-lookup"><span data-stu-id="064ec-204">*Loosely* coupled means you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="064ec-205">*Coesivo* significa che un servizio ha un unico obiettivo ben definito.</span><span class="sxs-lookup"><span data-stu-id="064ec-205">*Cohesive* means a service has a single, well-defined purpose.</span></span> <span data-ttu-id="064ec-206">Per altre informazioni su questi concetti, vedere [Progettazione di microservizi: analisi del dominio][microservices-domain-analysis].</span><span class="sxs-lookup"><span data-stu-id="064ec-206">For more discussion of these ideas, see [Designing microservices: Domain analysis][microservices-domain-analysis].</span></span>

### <a name="function-bindings"></a><span data-ttu-id="064ec-207">Associazioni di funzioni</span><span class="sxs-lookup"><span data-stu-id="064ec-207">Function bindings</span></span>

<span data-ttu-id="064ec-208">Usare le [associazioni][functions-bindings] di funzioni quando possibile.</span><span class="sxs-lookup"><span data-stu-id="064ec-208">Use Functions [bindings][functions-bindings] when possible.</span></span> <span data-ttu-id="064ec-209">Le associazioni offrono una modalità dichiarativa per connettere il codice ai dati e integrare altri servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-209">Bindings provide a declarative way to connect your code to data and integrate with other Azure services.</span></span> <span data-ttu-id="064ec-210">Un'associazione di input consente di compilare un parametro di input da un'origine dati esterna.</span><span class="sxs-lookup"><span data-stu-id="064ec-210">An input binding populates an input parameter from an external data source.</span></span> <span data-ttu-id="064ec-211">Un'associazione di output invia il valore restituito della funzione a un sink di dati, ad esempio una coda o un database.</span><span class="sxs-lookup"><span data-stu-id="064ec-211">An output binding sends the function's return value to a data sink, such as a queue or database.</span></span>

<span data-ttu-id="064ec-212">La funzione `GetStatus` nell'implementazione di riferimento, ad esempio, usa l'[associazione di input][cosmosdb-input-binding] di Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="064ec-212">For example, the `GetStatus` function in the reference implementation uses the Cosmos DB [input binding][cosmosdb-input-binding].</span></span> <span data-ttu-id="064ec-213">Questa associazione è configurata per cercare un documento in Cosmos DB, usando i parametri di query che vengono eseguiti dalla stringa di query nella richiesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="064ec-213">This binding is configured to look up a document in Cosmos DB, using query parameters that are taken from the query string in the HTTP request.</span></span> <span data-ttu-id="064ec-214">Se viene trovato, il documento viene passato alla funzione come parametro.</span><span class="sxs-lookup"><span data-stu-id="064ec-214">If the document is found, it is passed to the function as a parameter.</span></span>

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    ...
}
```

<span data-ttu-id="064ec-215">Tramite le associazioni, non è necessario scrivere il codice che comunica direttamente con il servizio e questo semplifica il codice della funzione e inoltre consente di eliminare i dettagli dell'origine dati o del sink.</span><span class="sxs-lookup"><span data-stu-id="064ec-215">By using bindings, you don't need to write code that talks directly to the service, which makes the function code simpler and also abstracts the details of the data source or sink.</span></span> <span data-ttu-id="064ec-216">In alcuni casi, tuttavia, potrebbe essere necessaria una logica più complessa rispetto a quella offerta dall'associazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-216">In some cases, however, you may need more complex logic than the binding provides.</span></span> <span data-ttu-id="064ec-217">In tal caso, usare direttamente gli SDK del client Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-217">In that case, use the Azure client SDKs directly.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="064ec-218">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="064ec-218">Scalability considerations</span></span>

<span data-ttu-id="064ec-219">**Funzioni**.</span><span class="sxs-lookup"><span data-stu-id="064ec-219">**Functions**.</span></span> <span data-ttu-id="064ec-220">Per il piano a consumo, il trigger HTTP viene ridimensionato in base al traffico.</span><span class="sxs-lookup"><span data-stu-id="064ec-220">For the consumption plan, the HTTP trigger scales based on the traffic.</span></span> <span data-ttu-id="064ec-221">È previsto un limite al numero di istanze di funzione simultanee, ma ogni istanza può elaborare più di una richiesta alla volta.</span><span class="sxs-lookup"><span data-stu-id="064ec-221">There is a limit to the number of concurrent function instances, but each instance can process more than one request at a time.</span></span> <span data-ttu-id="064ec-222">Per un piano di servizio app, il trigger HTTP viene ridimensionato in base al numero di istanze della macchina virtuale, che può essere un valore fisso oppure può essere ridimensionato in modo automatico in base a un set di regole di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="064ec-222">For an App Service plan, the HTTP trigger scales according to the number of VM instances, which can be a fixed value or can autoscale based on a set of autoscaling rules.</span></span> <span data-ttu-id="064ec-223">Per informazioni vedere [Ridimensionamento e hosting di Funzioni di Azure][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="064ec-223">For information, see [Azure Functions scale and hosting][functions-scale].</span></span> 

<span data-ttu-id="064ec-224">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="064ec-224">**Cosmos DB**.</span></span> <span data-ttu-id="064ec-225">La capacità di elaborazione per Cosmos DB viene misurata in [unità richiesta][ru] (UR).</span><span class="sxs-lookup"><span data-stu-id="064ec-225">Throughput capacity for Cosmos DB is measured in [Request Units][ru] (RU).</span></span> <span data-ttu-id="064ec-226">Una velocità effettiva di 1 UR corrisponde alla velocità effettiva necessaria per l'operazione GET su un documento da 1 kB.</span><span class="sxs-lookup"><span data-stu-id="064ec-226">A 1-RU throughput corresponds to the throughput need to GET a 1KB document.</span></span> <span data-ttu-id="064ec-227">Per ridimensionare un contenitore Cosmos DB fino a un valore superiore a 10.000 UR, è necessario specificare una [chiave di partizione][partition-key] quando si crea il contenitore e includere la chiave di partizione in ogni documento creato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="064ec-227">In order to scale a Cosmos DB container past 10,000 RU, you must specify a [partition key][partition-key] when you create the container and include the partition key in every document that you create.</span></span> <span data-ttu-id="064ec-228">Per altre informazioni sulle chiavi di partizione, vedere [Partizionamento e ridimensionamento in Azure Cosmos DB][cosmosdb-scale].</span><span class="sxs-lookup"><span data-stu-id="064ec-228">For more information about partition keys, see [Partition and scale in Azure Cosmos DB][cosmosdb-scale].</span></span>

<span data-ttu-id="064ec-229">**Gestione API**.</span><span class="sxs-lookup"><span data-stu-id="064ec-229">**API Management**.</span></span> <span data-ttu-id="064ec-230">Gestione API consente di aumentare e supportare il ridimensionamento automatico basato su regole.</span><span class="sxs-lookup"><span data-stu-id="064ec-230">API Management can scale out and supports rule-based autoscaling.</span></span> <span data-ttu-id="064ec-231">Si noti che il processo di ridimensionamento richiede almeno 20 minuti.</span><span class="sxs-lookup"><span data-stu-id="064ec-231">Note that the scaling process takes at least 20 minutes.</span></span> <span data-ttu-id="064ec-232">Se ci sono picchi di traffico, è necessario eseguire il provisioning per il picco di traffico massimo previsto.</span><span class="sxs-lookup"><span data-stu-id="064ec-232">If your traffic is bursty, you should provision for the maximum burst traffic that you expect.</span></span> <span data-ttu-id="064ec-233">Tuttavia, la scalabilità automatica è utile per la gestione delle variazioni orarie o giornaliere del traffico.</span><span class="sxs-lookup"><span data-stu-id="064ec-233">However, autoscaling is useful for handling hourly or daily variations in traffic.</span></span> <span data-ttu-id="064ec-234">Per altre informazioni, vedere [Ridimensionare automaticamente un'istanza di Gestione API di Azure][apim-scale].</span><span class="sxs-lookup"><span data-stu-id="064ec-234">For more information, see [Automatically scale an Azure API Management instance][apim-scale].</span></span>

## <a name="disaster-recovery-considerations"></a><span data-ttu-id="064ec-235">Considerazioni sul ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="064ec-235">Disaster recovery considerations</span></span>

<span data-ttu-id="064ec-236">La distribuzione illustrata di seguito si trova in una sola area di Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-236">The deployment shown here resides in a single Azure region.</span></span> <span data-ttu-id="064ec-237">Per un approccio più resiliente al ripristino di emergenza, sfruttare le funzionalità di distribuzione a livello geografico nei vari servizi:</span><span class="sxs-lookup"><span data-stu-id="064ec-237">For a more resilient approach to disaster-recovery, take advantage of the geo-distribution features in the various services:</span></span>

- <span data-ttu-id="064ec-238">Gestione API supporta la distribuzione in più aree che può essere usata per distribuire una sola istanza di Gestione API in qualsiasi numero di aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-238">API Management supports multi-region deployment, which can be used to distribute a single API Management instance across any number of Azure regions.</span></span> <span data-ttu-id="064ec-239">Per altre informazioni, vedere [Come distribuire un'istanza del servizio Gestione API di Azure in più aree di Azure][api-geo].</span><span class="sxs-lookup"><span data-stu-id="064ec-239">For more information, see [How to deploy an Azure API Management service instance to multiple Azure regions][api-geo].</span></span>

- <span data-ttu-id="064ec-240">Usare [Gestione traffico][tm] per indirizzare le richieste HTTP all'area primaria.</span><span class="sxs-lookup"><span data-stu-id="064ec-240">Use [Traffic Manager][tm] to route HTTP requests to the primary region.</span></span> <span data-ttu-id="064ec-241">Se l'app per le funzioni in esecuzione in tale area diventa disponibile, Gestione traffico può effettuare il failover all'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="064ec-241">If the Function App running in that region becomes unavailable, Traffic Manager can fail over to a secondary region.</span></span>

- <span data-ttu-id="064ec-242">Cosmos DB supporta [più aree master][cosmosdb-geo], che consentono di effettuare operazioni di scrittura in tutte le aree aggiunte al proprio account Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="064ec-242">Cosmos DB supports [multiple master regions][cosmosdb-geo], which enables writes to any region that you add to your Cosmos DB account.</span></span> <span data-ttu-id="064ec-243">Se non si abilita multimaster, è comunque possibile eseguire il failover dell'area di scrittura primaria.</span><span class="sxs-lookup"><span data-stu-id="064ec-243">If you don't enable multi-master, you can still fail over the primary write region.</span></span> <span data-ttu-id="064ec-244">Gli SDK del client Cosmos DB e le associazioni di Funzioni di Azure gestiscono automaticamente il failover, quindi non è necessario aggiornare le impostazioni di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-244">The Cosmos DB client SDKs and the Azure Function bindings automatically handle the failover, so you don't need to update any application configuration settings.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="064ec-245">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="064ec-245">Security considerations</span></span>

### <a name="authentication"></a><span data-ttu-id="064ec-246">Authentication</span><span class="sxs-lookup"><span data-stu-id="064ec-246">Authentication</span></span>

<span data-ttu-id="064ec-247">L'API `GetStatus` nell'implementazione di riferimento usa Azure AD per autenticare le richieste.</span><span class="sxs-lookup"><span data-stu-id="064ec-247">The `GetStatus` API in the reference implementation uses Azure AD to authenticate requests.</span></span> <span data-ttu-id="064ec-248">Azure AD supporta il protocollo Open ID Connect, ovvero un protocollo di autenticazione creato sul protocollo OAuth 2.</span><span class="sxs-lookup"><span data-stu-id="064ec-248">Azure AD supports the Open ID Connect protocol, which is an authentication protocol built on top of the OAuth 2 protocol.</span></span>

<span data-ttu-id="064ec-249">In questa architettura l'applicazione client è un'applicazione a pagina singola che viene eseguita nel browser.</span><span class="sxs-lookup"><span data-stu-id="064ec-249">In this architecture, the client application is a single-page application (SPA) that runs in the browser.</span></span> <span data-ttu-id="064ec-250">Questo tipo di applicazione client non può tenere un segreto client o un codice di autorizzazione nascosti, pertanto il flusso di concessione implicita è appropriato.</span><span class="sxs-lookup"><span data-stu-id="064ec-250">This type of client application cannot keep a client secret or an authorization code hidden, so the implicit grant flow is appropriate.</span></span> <span data-ttu-id="064ec-251">Vedere [Which OAuth 2.0 flow should I use?][oauth-flow] (Quale flusso di OAuth 2.0 è necessario usare?).</span><span class="sxs-lookup"><span data-stu-id="064ec-251">(See [Which OAuth 2.0 flow should I use?][oauth-flow]).</span></span> <span data-ttu-id="064ec-252">Di seguito è riportato il flusso completo:</span><span class="sxs-lookup"><span data-stu-id="064ec-252">Here's the overall flow:</span></span>

1. <span data-ttu-id="064ec-253">L'utente fa clic sul collegamento "Accedi" nell'applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="064ec-253">The user clicks the "Sign in" link in the web application.</span></span>
1. <span data-ttu-id="064ec-254">Il browser viene reindirizzato alla pagina di accesso di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="064ec-254">The browser is redirected the Azure AD sign in page.</span></span> 
1. <span data-ttu-id="064ec-255">L'utente effettua l'accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-255">The user signs in.</span></span>
1. <span data-ttu-id="064ec-256">Azure AD reindirizza all'applicazione client, includendo un token di accesso nel frammento di URL.</span><span class="sxs-lookup"><span data-stu-id="064ec-256">Azure AD redirects back to the client application, including an access token in the URL fragment.</span></span>
1. <span data-ttu-id="064ec-257">Quando l'applicazione Web chiama l'API, include il token di accesso nell'intestazione Autenticazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-257">When the web application calls the API, it includes the access token in the Authentication header.</span></span> <span data-ttu-id="064ec-258">L'ID dell'applicazione viene inviato come attestazione dei destinatari ("aud") nel token di accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-258">The application ID is sent as the audience ('aud') claim in the access token.</span></span> 
1. <span data-ttu-id="064ec-259">L'API back-end convalida il token di accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-259">The backend API validates the access token.</span></span>

<span data-ttu-id="064ec-260">Per configurare l'autenticazione:</span><span class="sxs-lookup"><span data-stu-id="064ec-260">To configure authentication:</span></span>

- <span data-ttu-id="064ec-261">Registrare un'applicazione nel tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="064ec-261">Register an application in your Azure AD tenant.</span></span> <span data-ttu-id="064ec-262">Questa operazione genera un ID applicazione, che il client include con l'URL di accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-262">This generates an application ID, which the client includes with the login URL.</span></span>

- <span data-ttu-id="064ec-263">Abilitare l'autenticazione di Azure AD nell'app per le funzioni.</span><span class="sxs-lookup"><span data-stu-id="064ec-263">Enable Azure AD authentication inside the Function App.</span></span> <span data-ttu-id="064ec-264">Per altre informazioni, vedere [Autenticazione e autorizzazione nel servizio app di Azure][app-service-auth].</span><span class="sxs-lookup"><span data-stu-id="064ec-264">For more information, see [Authentication and authorization in Azure App Service][app-service-auth].</span></span>

- <span data-ttu-id="064ec-265">Aggiungere il [criterio validate-jwt][apim-validate-jwt] a Gestione API per preautorizzare la richiesta convalidando il token di accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-265">Add the [validate-jwt policy][apim-validate-jwt] to API Management to pre-authorize the request by validating the access token.</span></span>

<span data-ttu-id="064ec-266">Per altri dettagli, vedere il [file leggimi di GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="064ec-266">For more details, see the [GitHub readme][readme].</span></span>

<span data-ttu-id="064ec-267">È consigliabile creare registrazioni di app separate in Azure AD per l'applicazione client e l'API back-end.</span><span class="sxs-lookup"><span data-stu-id="064ec-267">It's recommended to create separate app registrations in Azure AD for the client application and the backend API.</span></span> <span data-ttu-id="064ec-268">Concedere all'applicazione client l'autorizzazione per chiamare l'API.</span><span class="sxs-lookup"><span data-stu-id="064ec-268">Grant the client application permission to call the API.</span></span> <span data-ttu-id="064ec-269">Questo approccio garantisce la possibilità di definire più API e client e controllare le autorizzazioni per ognuno.</span><span class="sxs-lookup"><span data-stu-id="064ec-269">This approach gives you the flexibility to define multiple APIs and clients and control the permissions for each.</span></span> 

<span data-ttu-id="064ec-270">All'interno di un'API, usare gli [ambiti][scopes] per assicurare alle applicazioni un controllo specifico sulle autorizzazioni che richiedono da un utente.</span><span class="sxs-lookup"><span data-stu-id="064ec-270">Within an API, use [scopes][scopes] to give applications fine-grained control over what permissions they request from a user.</span></span> <span data-ttu-id="064ec-271">Ad esempio, un'API potrebbe avere gli ambiti `Read` e `Write` e una determinata app client potrebbe chiedere all'utente di autorizzare solo le autorizzazioni `Read`.</span><span class="sxs-lookup"><span data-stu-id="064ec-271">For example, an API might have `Read` and `Write` scopes, and a particular client app might ask the user to authorize `Read` permissions only.</span></span>

### <a name="authorization"></a><span data-ttu-id="064ec-272">Authorization</span><span class="sxs-lookup"><span data-stu-id="064ec-272">Authorization</span></span>

<span data-ttu-id="064ec-273">In molte applicazioni l'API back-end deve verificare che l'utente disponga dell'autorizzazione per eseguire una determinata azione.</span><span class="sxs-lookup"><span data-stu-id="064ec-273">In many applications, the backend API must check whether a user has permission to perform a given action.</span></span> <span data-ttu-id="064ec-274">È consigliabile usare l'[autorizzazione basata sulle attestazioni][claims], in cui le informazioni relative all'utente vengono trasmesse dal provider di identità, in questo caso, Azure AD, e usate per prendere decisioni di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-274">It's recommended to use [claims-based authorization][claims], where information about the user is conveyed by the identity provider (in this case, Azure AD) and used to make authorization decisions.</span></span> 

<span data-ttu-id="064ec-275">Alcune attestazioni sono contenute all'interno del token ID restituito da Azure AD al client.</span><span class="sxs-lookup"><span data-stu-id="064ec-275">Some claims are provided inside the ID token that Azure AD returns to the client.</span></span> <span data-ttu-id="064ec-276">È possibile ottenerle nell'app per le funzioni, esaminando l'intestazione X-MS-CLIENT-PRINCIPAL nella richiesta.</span><span class="sxs-lookup"><span data-stu-id="064ec-276">You can get these claims from within the function app by examining the X-MS-CLIENT-PRINCIPAL header in the request.</span></span> <span data-ttu-id="064ec-277">Per le altre attestazioni, usare [Microsoft Graph][graph] per effettuare una query in Azure AD. A tale scopo è necessario il consenso dell'utente durante l'accesso.</span><span class="sxs-lookup"><span data-stu-id="064ec-277">For other claims, use [Microsoft Graph][graph] to query Azure AD (requires user consent during sign-in).</span></span> 

<span data-ttu-id="064ec-278">Ad esempio, quando si registra un'applicazione in Azure AD, è possibile definire un set di ruoli applicazione nel manifesto di registrazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-278">For example, when you register an application in Azure AD, you can define a set of application roles in the application's registration manifest.</span></span> <span data-ttu-id="064ec-279">Quando un utente accede all'applicazione, Azure AD include un'attestazione "ruoli" per ogni ruolo che viene concesso all'utente, inclusi i ruoli ereditati tramite l'appartenenza a un gruppo.</span><span class="sxs-lookup"><span data-stu-id="064ec-279">When a user signs into the application, Azure AD includes a "roles" claim for each role that the user has been granted (including roles that are inherited through group membership).</span></span> 

<span data-ttu-id="064ec-280">Nell'implementazione di riferimento la funzione controlla se l'utente autenticato è un membro del ruolo applicazione `GetStatus`.</span><span class="sxs-lookup"><span data-stu-id="064ec-280">In the reference implementation, the function checks whether the authenticated user is a member of the `GetStatus` application role.</span></span> <span data-ttu-id="064ec-281">Se non lo è, la funzione restituisce una risposta HTTP Non autorizzato (401).</span><span class="sxs-lookup"><span data-stu-id="064ec-281">If not, the function returns an HTTP Unauthorized (401) response.</span></span> 

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", "post", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    log.LogInformation("Processing GetStatus request.");

    return req.HandleIfAuthorizedForRoles(new[] { GetDeviceStatusRoleName },
        async () =>
        {
            string deviceId = req.Query["deviceId"];
            if (deviceId == null)
            {
                return new BadRequestObjectResult("Missing DeviceId");
            }

            return await Task.FromResult<IActionResult>(deviceStatus != null
                    ? (ActionResult)new OkObjectResult(deviceStatus)
                    : new NotFoundResult());
        },
        log);
}
```

<span data-ttu-id="064ec-282">In questo esempio di codice `HandleIfAuthorizedForRoles` è un metodo di estensione che verifica l'attestazione del ruolo e restituisce un errore HTTP 401 se l'attestazione non viene trovata.</span><span class="sxs-lookup"><span data-stu-id="064ec-282">In this code example, `HandleIfAuthorizedForRoles` is an extension method that checks for the role claim and returns HTTP 401 if the claim isn't found.</span></span> <span data-ttu-id="064ec-283">Il codice di origine è disponibile [qui][HttpRequestAuthorizationExtensions].</span><span class="sxs-lookup"><span data-stu-id="064ec-283">You can find the source code [here][HttpRequestAuthorizationExtensions].</span></span> <span data-ttu-id="064ec-284">Si noti che `HandleIfAuthorizedForRoles` prende un parametro `ILogger`.</span><span class="sxs-lookup"><span data-stu-id="064ec-284">Notice that `HandleIfAuthorizedForRoles` takes an `ILogger` parameter.</span></span> <span data-ttu-id="064ec-285">È consigliabile registrare le richieste non autorizzate in modo da avere un audit trail e poter diagnosticare i problemi se necessario.</span><span class="sxs-lookup"><span data-stu-id="064ec-285">You should log unauthorized requests so that you have an audit trail and can diagnose issues if needed.</span></span> <span data-ttu-id="064ec-286">Allo stesso tempo, evitare la perdita di eventuali informazioni dettagliate nella risposta HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="064ec-286">At the same time, avoid leaking any detailed information inside the HTTP 401 response.</span></span>

### <a name="cors"></a><span data-ttu-id="064ec-287">CORS</span><span class="sxs-lookup"><span data-stu-id="064ec-287">CORS</span></span>

<span data-ttu-id="064ec-288">In questa architettura di riferimento l'applicazione Web e l'API non condividono la stessa origine.</span><span class="sxs-lookup"><span data-stu-id="064ec-288">In this reference architecture, the web application and the API do not share the same origin.</span></span> <span data-ttu-id="064ec-289">Ciò significa che quando l'applicazione chiama l'API, si avvia una richiesta multiorigine.</span><span class="sxs-lookup"><span data-stu-id="064ec-289">That means when the application calls the API, it is a cross-origin request.</span></span> <span data-ttu-id="064ec-290">La sicurezza del browser impedisce a una pagina Web di creare richieste AJAX per un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="064ec-290">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="064ec-291">Questa restrizione è nota come *criteri di corrispondenza dell'origine* e impedisce a un sito dannoso di leggere dati sensibili da un altro sito.</span><span class="sxs-lookup"><span data-stu-id="064ec-291">This restriction is called the *same-origin policy* and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="064ec-292">Per abilitare una richiesta multiorigine, aggiungere un [criterio][cors-policy] Condivisione risorse tra le origini, ovvero CORS al gateway di Gestione API:</span><span class="sxs-lookup"><span data-stu-id="064ec-292">To enable a cross-origin request, add a Cross-Origin Resource Sharing (CORS) [policy][cors-policy] to the API Management gateway:</span></span>

```xml
<cors allow-credentials="true">
    <allowed-origins>
        <origin>[Website URL]</origin>
    </allowed-origins>
    <allowed-methods>
        <method>GET</method>
    </allowed-methods>
    <allowed-headers>
        <header>*</header>
    </allowed-headers>
</cors>
```

<span data-ttu-id="064ec-293">In questo esempio, l'attributo **allow-credentials** è **true**.</span><span class="sxs-lookup"><span data-stu-id="064ec-293">In this example, the **allow-credentials** attribute is **true**.</span></span> <span data-ttu-id="064ec-294">Questo autorizza il browser a inviare le credenziali, compresi i cookie, con la richiesta.</span><span class="sxs-lookup"><span data-stu-id="064ec-294">This authorizes the browser to send credentials (including cookies) with the request.</span></span> <span data-ttu-id="064ec-295">Per impostazione predefinita, altrimenti, il browser non invia le credenziali con una richiesta multiorigine.</span><span class="sxs-lookup"><span data-stu-id="064ec-295">Otherwise, by default the browser does not send credentials with a cross-origin request.</span></span>

> [!NOTE] 
> <span data-ttu-id="064ec-296">Prestare particolare attenzione nell'impostare **allow-credentials** su **true**, perché ciò implica che un sito Web può inviare le credenziali dell'utente all'API per conto dell'utente, senza che l'utente ne sia a conoscenza.</span><span class="sxs-lookup"><span data-stu-id="064ec-296">Be very careful about setting **allow-credentials** to **true**, because it means a website can send the user's credentials to your API on the user's behalf, without the user being aware.</span></span> <span data-ttu-id="064ec-297">L'origine consentita deve essere considerata attendibile.</span><span class="sxs-lookup"><span data-stu-id="064ec-297">You must trust the allowed origin.</span></span>

### <a name="enforce-https"></a><span data-ttu-id="064ec-298">Applicare HTTPS</span><span class="sxs-lookup"><span data-stu-id="064ec-298">Enforce HTTPS</span></span>

<span data-ttu-id="064ec-299">Per garantire la massima sicurezza, richiedere HTTPS attraverso la pipeline della richiesta:</span><span class="sxs-lookup"><span data-stu-id="064ec-299">For maximum security, require HTTPS throughout the request pipeline:</span></span>

- <span data-ttu-id="064ec-300">**Rete CDN**.</span><span class="sxs-lookup"><span data-stu-id="064ec-300">**CDN**.</span></span> <span data-ttu-id="064ec-301">Per impostazione predefinita, la rete CDN di Azure supporta HTTPS nel sottodominio `*.azureedge.net`.</span><span class="sxs-lookup"><span data-stu-id="064ec-301">Azure CDN supports HTTPS on the `*.azureedge.net` subdomain by default.</span></span> <span data-ttu-id="064ec-302">Per abilitare HTTPS nella rete CDN per i nomi di dominio personalizzati, vedere [Esercitazione: Configurare HTTPS in un dominio personalizzato della rete CDN di Azure][cdn-https].</span><span class="sxs-lookup"><span data-stu-id="064ec-302">To enable HTTPS in the CDN for custom domain names, see [Tutorial: Configure HTTPS on an Azure CDN custom domain][cdn-https].</span></span> 

- <span data-ttu-id="064ec-303">**Hosting di siti Web statici**.</span><span class="sxs-lookup"><span data-stu-id="064ec-303">**Static website hosting**.</span></span> <span data-ttu-id="064ec-304">Abilitare l'opzione "[Trasferimento sicuro obbligatorio][storage-https]" nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-304">Enable the "[Secure transfer required][storage-https]" option on the Storage account.</span></span> <span data-ttu-id="064ec-305">Quando questa opzione è abilitata, l'account di archiviazione consente solo le richieste dalle connessioni HTTPS sicure.</span><span class="sxs-lookup"><span data-stu-id="064ec-305">When this option is enabled, the storage account only allows requests from secure HTTPS connections.</span></span> 

- <span data-ttu-id="064ec-306">**Gestione API**.</span><span class="sxs-lookup"><span data-stu-id="064ec-306">**API Management**.</span></span> <span data-ttu-id="064ec-307">Configurare le API affinché usino solo il protocollo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="064ec-307">Configure the APIs to use HTTPS protocol only.</span></span> <span data-ttu-id="064ec-308">È possibile configurarle nel portale di Azure o tramite un modello di Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="064ec-308">You can configure this in the Azure portal or through a Resource Manager template:</span></span>

    ```json
    {
        "apiVersion": "2018-01-01",
        "type": "apis",
        "name": "dronedeliveryapi",
        "dependsOn": [
            "[concat('Microsoft.ApiManagement/service/', variables('apiManagementServiceName'))]"
        ],
        "properties": {
            "displayName": "Drone Delivery API",
            "description": "Drone Delivery API",
            "path": "api",
            "protocols": [ "HTTPS" ]
        },
        ...
    }
    ```

- <span data-ttu-id="064ec-309">**Funzioni di Azure**.</span><span class="sxs-lookup"><span data-stu-id="064ec-309">**Azure Functions**.</span></span> <span data-ttu-id="064ec-310">Abilitare l'impostazione "[Solo HTTPS][functions-https]".</span><span class="sxs-lookup"><span data-stu-id="064ec-310">Enable the "[HTTPS Only][functions-https]" setting.</span></span> 

### <a name="lock-down-the-function-app"></a><span data-ttu-id="064ec-311">Bloccare le app per le funzioni</span><span class="sxs-lookup"><span data-stu-id="064ec-311">Lock down the function app</span></span>

<span data-ttu-id="064ec-312">Tutte le chiamate alla funzione devono passare attraverso il gateway dell'API.</span><span class="sxs-lookup"><span data-stu-id="064ec-312">All calls to the function should go through the API gateway.</span></span> <span data-ttu-id="064ec-313">A tale scopo, procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="064ec-313">You can achieve this as follows:</span></span>

- <span data-ttu-id="064ec-314">Configurare l'app per le funzioni per richiedere una chiave della funzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-314">Configure the function app to require a function key.</span></span> <span data-ttu-id="064ec-315">Quando chiama l'app per le funzioni, il gateway di Gestione API include la chiave della funzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-315">The API Management gateway will include the function key when it calls the function app.</span></span> <span data-ttu-id="064ec-316">Questo impedisce ai client di chiamare direttamente la funzione, ignorando il gateway.</span><span class="sxs-lookup"><span data-stu-id="064ec-316">This prevents clients from calling the function directly, bypassing the gateway.</span></span> 

- <span data-ttu-id="064ec-317">Il gateway di Gestione API ha un [indirizzo IP statico][apim-ip].</span><span class="sxs-lookup"><span data-stu-id="064ec-317">The API Management gateway has a [static IP address][apim-ip].</span></span> <span data-ttu-id="064ec-318">Limitare Funzioni di Azure per consentire solo le chiamate da tale indirizzo IP statico.</span><span class="sxs-lookup"><span data-stu-id="064ec-318">Restrict the Azure Function to allow only calls from that static IP address.</span></span> <span data-ttu-id="064ec-319">Per altre informazioni, vedere [Restrizioni IP statico del Servizio app di Azure][app-service-ip-restrictions].</span><span class="sxs-lookup"><span data-stu-id="064ec-319">For more information, see [Azure App Service Static IP Restrictions][app-service-ip-restrictions].</span></span> <span data-ttu-id="064ec-320">Questa funzionalità è disponibile solo per i servizi di livello Standard.</span><span class="sxs-lookup"><span data-stu-id="064ec-320">(This feature is available for Standard tier services only.)</span></span> 

### <a name="protect-application-secrets"></a><span data-ttu-id="064ec-321">Proteggere i segreti dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="064ec-321">Protect application secrets</span></span>

<span data-ttu-id="064ec-322">Non archiviare i segreti dell'applicazione, come le credenziali del database, nel codice o nei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="064ec-322">Don't store application secrets, such as database credentials, in your code or configuration files.</span></span> <span data-ttu-id="064ec-323">Usare invece le impostazioni dell'app, che vengono archiviate con crittografia in Azure.</span><span class="sxs-lookup"><span data-stu-id="064ec-323">Instead, use App settings, which are stored encrypted in Azure.</span></span> <span data-ttu-id="064ec-324">Per altre informazioni vedere [Sicurezza in Servizio app di Azure e Funzioni di Azure][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="064ec-324">For more information, see [Security in Azure App Service and Azure Functions][app-service-security].</span></span>

<span data-ttu-id="064ec-325">In alternativa, è possibile archiviare i segreti dell'applicazione in Key Vault.</span><span class="sxs-lookup"><span data-stu-id="064ec-325">Alternatively, you can store application secrets in Key Vault.</span></span> <span data-ttu-id="064ec-326">In questo modo è possibile centralizzare l'archiviazione dei segreti, controllarne la distribuzione e monitorare i momenti e la modalità in cui sono accessibili.</span><span class="sxs-lookup"><span data-stu-id="064ec-326">This allows you to centralize the storage of secrets, control their distribution, and monitor how and when secrets are being accessed.</span></span> <span data-ttu-id="064ec-327">Per altre informazioni vedere [Configurare un'applicazione Web di Azure per la lettura di un segreto da un insieme di credenziali delle chiavi][key-vault-web-app].</span><span class="sxs-lookup"><span data-stu-id="064ec-327">For more information, see [Configure an Azure web application to read a secret from Key Vault][key-vault-web-app].</span></span> <span data-ttu-id="064ec-328">Si noti tuttavia che i trigger delle funzioni e le associazioni caricano le impostazioni di configurazione dalle impostazioni dell'app.</span><span class="sxs-lookup"><span data-stu-id="064ec-328">However, note that Functions triggers and bindings load their configuration settings from app settings.</span></span> <span data-ttu-id="064ec-329">Non esiste un metodo predefinito per configurare i trigger e le associazioni affinché usino i segreti di Key Vault.</span><span class="sxs-lookup"><span data-stu-id="064ec-329">There is no built-in way to configure the triggers and bindings to use Key Vault secrets.</span></span>

## <a name="devops-considerations"></a><span data-ttu-id="064ec-330">Considerazioni su DevOps</span><span class="sxs-lookup"><span data-stu-id="064ec-330">DevOps considerations</span></span>

### <a name="deployment"></a><span data-ttu-id="064ec-331">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="064ec-331">Deployment</span></span>

<span data-ttu-id="064ec-332">Per distribuire l'app per le funzioni è consigliabile usare [file di pacchetto][functions-run-from-package], ossia l'esecuzione dal pacchetto.</span><span class="sxs-lookup"><span data-stu-id="064ec-332">To deploy the function app, we recommend using [package files][functions-run-from-package] ("Run from package").</span></span> <span data-ttu-id="064ec-333">Con questo approccio, si carica un file ZIP in un contenitore di archiviazione BLOB e il runtime di Funzioni monta il file ZIP come file system di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="064ec-333">Using this approach, you upload a zip file to a Blob Storage container and the Functions runtime mounts the zip file as a read-only file system.</span></span> <span data-ttu-id="064ec-334">Questa operazione atomica riduce le probabilità che una distribuzione non riuscita lasci l'applicazione in uno stato non coerente.</span><span class="sxs-lookup"><span data-stu-id="064ec-334">This is an atomic operation, which reduces the chance that a failed deployment will leave the application in an inconsistent state.</span></span> <span data-ttu-id="064ec-335">Può anche migliorare i tempi di avvio a freddo, soprattutto per le app Node.js, perché viene effettuato lo swapping di tutti i file contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="064ec-335">It can also improve cold start times, especially for Node.js apps, because all of the files are swapped at once.</span></span>

### <a name="api-versioning"></a><span data-ttu-id="064ec-336">Controllo delle versioni API</span><span class="sxs-lookup"><span data-stu-id="064ec-336">API versioning</span></span>

<span data-ttu-id="064ec-337">Un'API è un contratto tra un servizio e i client.</span><span class="sxs-lookup"><span data-stu-id="064ec-337">An API is a contract between a service and clients.</span></span> <span data-ttu-id="064ec-338">In questa architettura, il contratto API è definito al livello di Gestione API.</span><span class="sxs-lookup"><span data-stu-id="064ec-338">In this architecture, the API contract is defined at the API Management layer.</span></span> <span data-ttu-id="064ec-339">Gestione API supporta due [concetti di controllo delle versioni][apim-versioning] distinti ma complementari.</span><span class="sxs-lookup"><span data-stu-id="064ec-339">API Management supports two distinct but complementary [versioning concepts][apim-versioning]:</span></span>

- <span data-ttu-id="064ec-340">*Versioni*: consentono ai consumer di API di scegliere una versione dell'API in base alle esigenze, ad esempio v1 o v2.</span><span class="sxs-lookup"><span data-stu-id="064ec-340">*Versions* allow API consumers to choose an API version based on their needs, such as v1 versus v2.</span></span> 

- <span data-ttu-id="064ec-341">*Revisioni*: consentono agli amministratori di API di apportare modifiche che non causano interruzioni e distribuirle insieme a un log delle modifiche per informare i consumer di API.</span><span class="sxs-lookup"><span data-stu-id="064ec-341">*Revisions* allow API administrators to make non-breaking changes in an API and deploy those changes, along with a change log to inform API consumers about the changes.</span></span>

<span data-ttu-id="064ec-342">Se si apporta una modifica che causa un'interruzione in un'API, pubblicare una nuova versione in Gestione API.</span><span class="sxs-lookup"><span data-stu-id="064ec-342">If you make a breaking change in an API, publish a new version in API Management.</span></span> <span data-ttu-id="064ec-343">Distribuire la nuova versione side-by-side con la versione originale, in un'app per le funzioni separata.</span><span class="sxs-lookup"><span data-stu-id="064ec-343">Deploy the new version side-by-side with the original version, in a separate Function App.</span></span> <span data-ttu-id="064ec-344">Ciò consente di eseguire la migrazione dei client esistenti alla nuova API senza interrompere le applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="064ec-344">This lets you migrate existing clients to the new API without breaking client applications.</span></span> <span data-ttu-id="064ec-345">Infine è possibile deprecare la versione precedente.</span><span class="sxs-lookup"><span data-stu-id="064ec-345">Eventually, you can deprecate the previous version.</span></span> <span data-ttu-id="064ec-346">Gestione API supporta diversi [schemi di controllo delle versioni][apim-versioning-schemes]: percorso URL, intestazione HTTP e stringa di query.</span><span class="sxs-lookup"><span data-stu-id="064ec-346">API Management supports several [versioning schemes][apim-versioning-schemes]: URL path, HTTP header, or query string.</span></span> <span data-ttu-id="064ec-347">Per altre informazioni sul controllo delle versioni delle API in generale, vedere [Controllo delle versioni di un'API Web RESTful][api-versioning].</span><span class="sxs-lookup"><span data-stu-id="064ec-347">For more information about API versioning in general, see [Versioning a RESTful web API][api-versioning].</span></span>

<span data-ttu-id="064ec-348">Per gli aggiornamenti che non interrompono le modifiche dell'API, distribuire la nuova versione in uno slot di staging nella stessa app per le funzioni.</span><span class="sxs-lookup"><span data-stu-id="064ec-348">For updates that are not breaking API changes, deploy the new version to a staging slot in the same Function App.</span></span> <span data-ttu-id="064ec-349">Verificare che la distribuzione abbia avuto esito positivo, quindi invertire la versione con gestione temporanea e la versione di produzione.</span><span class="sxs-lookup"><span data-stu-id="064ec-349">Verify the deployment succeeded and then swap the staged version with the production version.</span></span> <span data-ttu-id="064ec-350">Pubblicare una revisione in Gestione API.</span><span class="sxs-lookup"><span data-stu-id="064ec-350">Publish a revision in API Management.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="064ec-351">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="064ec-351">Deploy the solution</span></span>

<span data-ttu-id="064ec-352">Per distribuire questa architettura di riferimento, consultare il [file leggimi di GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="064ec-352">To deploy this reference architecture, view the [GitHub readme][readme].</span></span> 

<!-- links -->

[api-versioning]: ../../best-practices/api-design.md#versioning-a-restful-web-api
[apim]: /azure/api-management/api-management-key-concepts
[apim-ip]: /azure/api-management/api-management-faq#is-the-api-management-gateway-ip-address-constant-can-i-use-it-in-firewall-rules
[api-geo]: /azure/api-management/api-management-howto-deploy-multi-region
[apim-scale]: /azure/api-management/api-management-howto-autoscale
[apim-validate-jwt]: /azure/api-management/api-management-access-restriction-policies#ValidateJWT
[apim-versioning]: /azure/api-management/api-management-get-started-publish-versions
[apim-versioning-schemes]: /azure/api-management/api-management-get-started-publish-versions#choose-a-versioning-scheme
[app-service-auth]: /azure/app-service/app-service-authentication-overview
[app-service-ip-restrictions]: /azure/app-service/app-service-ip-restrictions
[app-service-security]: /azure/app-service/app-service-security
[ase]: /azure/app-service/environment/intro
[azure-messaging]: /azure/event-grid/compare-messaging-services
[claims]: https://en.wikipedia.org/wiki/Claims-based_identity
[cdn]: https://azure.microsoft.com/services/cdn/
[cdn-https]: /azure/cdn/cdn-custom-ssl
[cors-policy]: /azure/api-management/api-management-cross-domain-policies
[cosmosdb]: /azure/cosmos-db/introduction
[cosmosdb-geo]: /azure/cosmos-db/distribute-data-globally
[cosmosdb-input-binding]: /azure/azure-functions/functions-bindings-cosmosdb-v2#input
[cosmosdb-scale]: /azure/cosmos-db/partition-data
[event-driven]: ../../guide/architecture-styles/event-driven.md
[functions]: /azure/azure-functions/functions-overview
[functions-bindings]: /azure/azure-functions/functions-triggers-bindings
[functions-cold-start]: https://blogs.msdn.microsoft.com/appserviceteam/2018/02/07/understanding-serverless-cold-start/
[functions-https]: /azure/app-service/app-service-web-tutorial-custom-ssl#enforce-https
[functions-proxy]: /azure-functions/functions-proxies
[functions-run-from-package]: /azure/azure-functions/run-functions-from-deployment-package
[functions-scale]: /azure/azure-functions/functions-scale
[functions-timeout]: /azure/azure-functions/functions-scale#consumption-plan
[functions-zip-deploy]: /azure/azure-functions/deployment-zip-push
[graph]: https://developer.microsoft.com/graph/docs/concepts/overview
[key-vault-web-app]: /azure/key-vault/tutorial-web-application-keyvault
[microservices-domain-analysis]: ../../microservices/domain-analysis.md
[monitor]: /azure/azure-monitor/overview
[oauth-flow]: https://auth0.com/docs/api-auth/which-oauth-flow-to-use
[partition-key]: /azure/cosmos-db/partition-data
[pipelines]: /azure/devops/pipelines/index
[ru]: /azure/cosmos-db/request-units
[scopes]: /azure/active-directory/develop/v2-permissions-and-consent
[static-hosting]: /azure/storage/blobs/storage-blob-static-website
[static-hosting-preview]: https://azure.microsoft.com/blog/azure-storage-static-web-hosting-public-preview/
[storage-https]: /azure/storage/common/storage-require-secure-transfer
[tm]: /azure/traffic-manager/traffic-manager-overview

[github]: https://github.com/mspnp/serverless-reference-implementation
[HttpRequestAuthorizationExtensions]: https://github.com/mspnp/serverless-reference-implementation/blob/master/src/DroneStatus/dotnet/DroneStatusFunctionApp/HttpRequestAuthorizationExtensions.cs
[readme]: https://github.com/mspnp/serverless-reference-implementation/blob/master/README.md