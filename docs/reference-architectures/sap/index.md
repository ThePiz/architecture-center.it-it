---
title: Distribuire SAP NetWeaver e SAP HANA in Azure
description: "Procedure consolidate per l'esecuzione di SAP HANA in un ambiente a disponibilità elevata in Azure."
author: njray
ms.date: 06/29/2017
ms.openlocfilehash: 27a97103c0c6f305cb8e830d670c8d0ba7e22aa5
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/14/2017
---
# <a name="deploy-sap-netweaver-and-sap-hana-on-azure"></a><span data-ttu-id="2b8a0-103">Distribuire SAP NetWeaver e SAP HANA in Azure</span><span class="sxs-lookup"><span data-stu-id="2b8a0-103">Deploy SAP NetWeaver and SAP HANA on Azure</span></span>

<span data-ttu-id="2b8a0-104">Questa architettura di riferimento mostra un set di procedure consolidate per l'esecuzione di SAP HANA in un ambiente a disponibilità elevata in Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-104">This reference architecture shows a set of proven practices for running SAP HANA in a high availability environment on Azure.</span></span> [<span data-ttu-id="2b8a0-105">**Distribuire questa soluzione**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="2b8a0-106">![0][0]</span><span class="sxs-lookup"><span data-stu-id="2b8a0-106">![0][0]</span></span>

<span data-ttu-id="2b8a0-107">*Scaricare un [file di Visio][visio-download] di questa architettura.*</span><span class="sxs-lookup"><span data-stu-id="2b8a0-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="2b8a0-108">La distribuzione di questa architettura di riferimento richiede una licenza adeguata dei prodotti SAP e altre tecnologie non Microsoft.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-108">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span> <span data-ttu-id="2b8a0-109">Per informazioni sulla relazione tra Microsoft e SAP, vedere [SAP HANA in Azure][sap-hana-on-azure].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-109">For information about the partnership between Microsoft and SAP, see [SAP HANA on Azure][sap-hana-on-azure].</span></span>

## <a name="architecture"></a><span data-ttu-id="2b8a0-110">Architettura</span><span class="sxs-lookup"><span data-stu-id="2b8a0-110">Architecture</span></span>

<span data-ttu-id="2b8a0-111">Questa architettura è costituita dai componenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-111">The architecture consists of the following components.</span></span>

- <span data-ttu-id="2b8a0-112">**Rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-112">**Virtual network (VNet)**.</span></span> <span data-ttu-id="2b8a0-113">Una rete virtuale è una rappresentazione di una rete isolata logicamente in Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-113">A VNet is a representation of a logically isolated network in Azure.</span></span> <span data-ttu-id="2b8a0-114">Tutte le macchine virtuali in questa architettura di riferimento vengono distribuite nella stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-114">All of the VMs in this reference architecture are deployed to the same VNet.</span></span> <span data-ttu-id="2b8a0-115">La rete virtuale viene ulteriormente suddivisa in subnet.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-115">The VNet is further subdivided into subnets.</span></span> <span data-ttu-id="2b8a0-116">Creare una subnet separata per ogni livello, che comprenda applicazione (SAP NetWeaver), database (SAP HANA), gestione (il jumpbox) e Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-116">Create a separate subnet for each tier, including application (SAP NetWeaver), database (SAP HANA), management (the jumpbox), and Active Directory.</span></span>

- <span data-ttu-id="2b8a0-117">**Macchine virtuali (VM)**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-117">**Virtual machines (VMs)**.</span></span> <span data-ttu-id="2b8a0-118">Le macchine virtuali per questa architettura vengono raggruppate in diversi livelli diversi.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-118">The VMs for this architecture are grouped into several distinct tiers.</span></span>

    - <span data-ttu-id="2b8a0-119">**SAP NetWeaver**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-119">**SAP NetWeaver**.</span></span> <span data-ttu-id="2b8a0-120">Comprende SAP ASCS, SAP Dispatcher Web e i server applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-120">Includes SAP ASCS, SAP Web Dispatcher, and the SAP application servers.</span></span> 
    
    - <span data-ttu-id="2b8a0-121">**SAP HANA**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-121">**SAP HANA**.</span></span> <span data-ttu-id="2b8a0-122">Questa architettura di riferimento usa SAP HANA per il livello di database, in esecuzione su una singola istanza [GS5][vm-sizes-mem].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-122">This reference architecture uses SAP HANA for the database tier, running on a single [GS5][vm-sizes-mem] instance.</span></span> <span data-ttu-id="2b8a0-123">SAP HANA è certificato per i carichi di lavoro OLAP della produzione in GS5 o [SAP HANA in istanze grandi di Azure][azure-large-instances].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-123">SAP HANA is certified for production OLAP workloads on GS5 or [SAP HANA on Azure Large Instances][azure-large-instances].</span></span> <span data-ttu-id="2b8a0-124">Questa architettura di riferimento è per le macchine virtuali di Azure nella serie-G e nella serie-M.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-124">This reference architecture is for Azure virtual machines in the G-series and M-series.</span></span> <span data-ttu-id="2b8a0-125">Per informazioni su SAP HANA in istanze grandi di Azure, vedere [Panoramica di SAP HANA (istanze di grandi dimensioni) e l'architettura in Azure][azure-large-instances].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-125">For information about SAP HANA on Azure Large Instances, see [SAP HANA (large instances) overview and architecture on Azure][azure-large-instances].</span></span>
   
    - <span data-ttu-id="2b8a0-126">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-126">**Jumpbox**.</span></span> <span data-ttu-id="2b8a0-127">Detto anche bastion host.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-127">Also called a bastion host.</span></span> <span data-ttu-id="2b8a0-128">È una macchina virtuale sicura in rete che viene usata dagli amministratori per connettersi alle altre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-128">This is a secure VM on the network that administrators use to connect to the other VMs.</span></span> 
     
    - <span data-ttu-id="2b8a0-129">**Controller di dominio di Windows Server Active Directory (AD).**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-129">**Windows Server Active Directory (AD) domain controllers.**</span></span> <span data-ttu-id="2b8a0-130">I controller di dominio vengono usati per configurare il Cluster di Failover di Windows Server (vedere sotto).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-130">The domain controllers are used to configure the Windows Server Failover Cluster (see below).</span></span>
 
- <span data-ttu-id="2b8a0-131">**Set di disponibilità**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-131">**Availability sets**.</span></span> <span data-ttu-id="2b8a0-132">Posizionare le macchine virtuali per il SAP Dispatcher Web, il server dell'applicazione SAP e i ruoli ACSC SAP in set di disponibilità separati ed eseguire il provisioning di almeno due macchine virtuali per ogni ruolo.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-132">Place the VMs for the SAP Web Dispatcher, SAP application server, and SAP ACSC roles into separate availability sets, and provision at least two VMs for each role.</span></span> <span data-ttu-id="2b8a0-133">In questo modo le macchine virtuali sono idonee per un contratto di servizio di livello superiore.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-133">This makes the VMs eligible for a higher service level agreement (SLA).</span></span>
    
- <span data-ttu-id="2b8a0-134">**Schede di rete.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-134">**NICs.**</span></span> <span data-ttu-id="2b8a0-135">Le macchine virtuali che eseguono SAP NetWeaver e SAP HANA richiedono due interfacce di rete (NIC).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-135">The VMs that run SAP NetWeaver and SAP HANA require two network interfaces (NICs).</span></span> <span data-ttu-id="2b8a0-136">Ogni scheda di interfaccia di rete viene assegnata a una subnet diversa, per separare i diversi tipi di traffico.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-136">Each NIC is assigned to a different subnet, to segregate different types of traffic.</span></span> <span data-ttu-id="2b8a0-137">Vedere le [Raccomandazioni](#recommendations) indicate di seguito per altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-137">See [Recommendations](#recommendations) below for more information.</span></span>

- <span data-ttu-id="2b8a0-138">**Windows Server Failover Clustering**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-138">**Windows Server Failover Cluster**.</span></span> <span data-ttu-id="2b8a0-139">Le macchine virtuali che eseguono ACSC SAP sono configurate come cluster di failover per una disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-139">The VMs that run SAP ACSC are configured as a failover cluster for high availability.</span></span> <span data-ttu-id="2b8a0-140">Per supportare il cluster di failover, SIOS DataKeeper Cluster Edition esegue la funzione di volume condiviso (CSV) del cluster tramite la replica di dischi indipendenti di proprietà del nodi del cluster.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-140">To support the failover cluster, SIOS DataKeeper Cluster Edition performs the cluster shared volume (CSV) function by replicating independent disks owned by the cluster nodes.</span></span> <span data-ttu-id="2b8a0-141">Per informazioni dettagliate, vedere [Esecuzione di applicazioni SAP nella piattaforma Microsoft][running-sap].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-141">For details, see [Running SAP applications on the Microsoft platform][running-sap].</span></span>
    
- <span data-ttu-id="2b8a0-142">**Servizi di bilanciamento del carico**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-142">**Load balancers.**</span></span> <span data-ttu-id="2b8a0-143">Vengono usate due istanze di [Azure Load Balancer][azure-lb].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-143">Two [Azure Load Balancer][azure-lb] instances are used.</span></span> <span data-ttu-id="2b8a0-144">Il primo, mostrato a sinistra del diagramma, distribuisce il traffico alle macchine virtuali di SAP Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-144">The first, shown on the left of the diagram, distributes traffic to the SAP Web Dispatcher VMs.</span></span> <span data-ttu-id="2b8a0-145">Questa configurazione implementa l'opzione dispatcher web parallela descritta in [High Availability of the SAP Web Dispatcher (Disponibilità elevata del Dispatcher Web SAP)][sap-dispatcher-ha].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-145">This configuration implements the parallel web dispatcher option described in [High Availability of the SAP Web Dispatcher][sap-dispatcher-ha].</span></span> <span data-ttu-id="2b8a0-146">Il secondo bilanciamento del carico, visualizzato sulla destra, consente il failover nel cluster di failover di Windows Server, indirizzando le connessioni in ingresso verso il nodo attivo/integro.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-146">The second load balancer, shown on the right, enables failover in the Windows Server Failover Cluster, by directing incoming connections to the active/healthy node.</span></span>

- <span data-ttu-id="2b8a0-147">**Gateway VPN**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-147">**VPN Gateway.**</span></span> <span data-ttu-id="2b8a0-148">Il Gateway VPN estende la rete locale alla rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-148">The VPN Gateway extends your on-premises network to the Azure VNet.</span></span> <span data-ttu-id="2b8a0-149">È anche possibile usare ExpressRoute, che si serve di una connessione privata dedicata che non passa attraverso la rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-149">You can also use ExpressRoute, which uses a dedicated private connection that does not go over the public Internet.</span></span> <span data-ttu-id="2b8a0-150">La soluzione di esempio non distribuisce il gateway.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-150">The example solution does not deploy the gateway.</span></span> <span data-ttu-id="2b8a0-151">Per altre informazioni, vedere [Connect an on-premises network to Azure][hybrid-networking] (Connettere una rete locale ad Azure).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-151">For more information, see [Connect an on-premises network to Azure][hybrid-networking].</span></span>

## <a name="recommendations"></a><span data-ttu-id="2b8a0-152">Raccomandazioni</span><span class="sxs-lookup"><span data-stu-id="2b8a0-152">Recommendations</span></span>

<span data-ttu-id="2b8a0-153">I requisiti della propria organizzazione potrebbero essere diversi da quelli dell'architettura descritta in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-153">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="2b8a0-154">Usare queste indicazioni come punto di partenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-154">Use these recommendations as a starting point.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="2b8a0-155">Servizi di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="2b8a0-155">Load balancers</span></span>

<span data-ttu-id="2b8a0-156">[Dispatcher Web SAP][sap-dispatcher] gestisce il bilanciamento del carico del traffico HTTP(S) ai server dual-stack (ABAP e Java).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-156">[SAP Web Dispatcher][sap-dispatcher] handles load balancing of HTTP(S) traffic to dual-stack servers (ABAP and Java).</span></span> <span data-ttu-id="2b8a0-157">SAP raccomanda i server con applicazione single-stack da anni, pertanto sono poche oggigiorno le applicazioni che vengono eseguite su un modello di distribuzione dual stack.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-157">SAP has advocated single-stack application servers for years, so very few applications run on a dual-stack deployment model nowadays.</span></span> <span data-ttu-id="2b8a0-158">Il servizio di bilanciamento del carico di Azure illustrato nel diagramma dell'architettura implementa il cluster a disponibilità elevata per il SAP Dispatcher Web.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-158">The Azure load balancer shown in the architecture diagram implements the high availability cluster for the SAP Web Dispatcher.</span></span>

<span data-ttu-id="2b8a0-159">Il bilanciamento del carico del traffico ai server delle applicazioni viene gestito in SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-159">Load balancing of traffic to the application servers is handled within SAP.</span></span> <span data-ttu-id="2b8a0-160">Per il traffico dai client SAPGUI in connessione con un server SAP tramite DIAG e le Chiamate di funzione remota (RFC), il server di messaggistica SCS bilancia il carico tramite la creazione del Server dell'app SAP [Gruppi di accesso][logon-groups].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-160">For traffic from SAPGUI clients connecting to a SAP server via DIAG and Remote Function Calls (RFC), the SCS message server balances the load by creating SAP App Server [Logon Groups][logon-groups].</span></span> 

<span data-ttu-id="2b8a0-161">SMLG è una transazione ABAP SAP usata per gestire la funzionalità di bilanciamento del carico con accesso dei Servizi Centrali SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-161">SMLG is an SAP ABAP transaction used to manage the logon load balancing capability of SAP Central Services.</span></span> <span data-ttu-id="2b8a0-162">Il pool back-end del gruppo di accesso ha più di un server di applicazione ABAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-162">The backend pool of the logon group has more than one ABAP application server.</span></span> <span data-ttu-id="2b8a0-163">I client che accedono ai servizi di cluster ASCS si connettono al servizio di bilanciamento del carico di Azure tramite un indirizzo IP di front-end.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-163">Clients accessing ASCS cluster services connect to the Azure load balancer through a frontend IP address.</span></span> <span data-ttu-id="2b8a0-164">Il nome della rete virtuale del cluster ASCS dispone anche di un indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-164">The ASCS cluster virtual network name also has an IP address.</span></span> <span data-ttu-id="2b8a0-165">Facoltativamente, questo indirizzo può essere associato a un indirizzo IP aggiuntivo sul bilanciamento del carico di Azure, in modo che il cluster possa essere gestito in remoto.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-165">Optionally, this address can be associated with an additional IP address on the Azure load balancer, so that the cluster can be managed remotely.</span></span>  

### <a name="nics"></a><span data-ttu-id="2b8a0-166">Schede di interfaccia di rete</span><span class="sxs-lookup"><span data-stu-id="2b8a0-166">NICs</span></span>

<span data-ttu-id="2b8a0-167">Le funzioni di gestione orizzontale SAP richiedono la separazione del traffico del server in diverse schede di interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-167">SAP landscape management functions require segregation of server traffic on different NICs.</span></span> <span data-ttu-id="2b8a0-168">Ad esempio, i dati aziendali devono essere separati dal traffico amministrativo e dal traffico di backup.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-168">For example, business data should be separated from administrative traffic and backup traffic.</span></span> <span data-ttu-id="2b8a0-169">L'assegnazione di più schede di interfaccia di rete a subnet diverse consente la separazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-169">Assigning multiple NICs to different subnets enables this data segregation.</span></span> <span data-ttu-id="2b8a0-170">Per altre informazioni, vedere "Rete" in [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (Compilazione della disponibilità elevata per SAP NetWeaver e SAP HANA) in formato .pdf.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-170">For more information, see "Network" in [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (PDF).</span></span>

<span data-ttu-id="2b8a0-171">Assegnare la scheda di interfaccia di rete dell'amministrazione alla subnet di gestione e assegnare la scheda di interfaccia di rete della comunicazione dati a una subnet distinta.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-171">Assign the administration NIC to the management subnet, and assign the data communication NIC to a separate subnet.</span></span> <span data-ttu-id="2b8a0-172">Per i dettagli sulla configurazione, vedere [Create and manage a Windows virtual machine that has multiple NICs][multiple-vm-nics] (Creare e gestire una macchina virtuale di Windows che dispone di più schede di interfaccia di rete).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-172">For configuration details, see [Create and manage a Windows virtual machine that has multiple NICs][multiple-vm-nics].</span></span>

### <a name="azure-storage"></a><span data-ttu-id="2b8a0-173">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="2b8a0-173">Azure Storage</span></span>

<span data-ttu-id="2b8a0-174">Con tutte le macchine virtuali del server del database, è consigliabile usare Archiviazione Premium di Azure per una latenza di lettura/scrittura coerente.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-174">With all database server VMs, we recommend using Azure Premium Storage for consistent read/write latency.</span></span> <span data-ttu-id="2b8a0-175">Per i server dell'applicazione SAP, tra cui (A) SCS le macchine virtuali, è possibile usare l'archiviazione di Azure Standard, poiché l'esecuzione dell'applicazione viene eseguita in memoria e usa i dischi per la registrazione solo.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-175">For SAP application servers, including the (A)SCS virtual machines, you can use Azure Standard Storage, because application execution takes place in memory and uses disks for logging only.</span></span>

<span data-ttu-id="2b8a0-176">Per una migliore affidabilità, è consigliabile usare [Azure Managed Disks][managed-disks].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-176">For best reliability, we recommend using [Azure Managed Disks][managed-disks].</span></span> <span data-ttu-id="2b8a0-177">I dischi gestiti garantiscono che i dischi per le macchine virtuali all'interno di un set di disponibilità siano isolati per evitare singoli punti di guasto.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-177">Managed disks ensure that the disks for VMs within an availability set are isolated to avoid single points of failure.</span></span>

> [!NOTE]
> <span data-ttu-id="2b8a0-178">Attualmente il modello di Resource Manager per questa architettura di riferimento non usa dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-178">Currently the Resource Manager template for this reference architecture does not use managed disks.</span></span> <span data-ttu-id="2b8a0-179">È previsto l'aggiornamento del modello per consentire l'utilizzo di dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-179">We are planning to update the template to use managed disks.</span></span>

<span data-ttu-id="2b8a0-180">Per ottenere un numero elevato di IOPS e una velocità effettiva della larghezza di banda del disco, si applicano le comuni procedure di ottimizzazione delle prestazioni del volume di archiviazione al layout di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-180">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume performance optimization apply to Azure storage layout.</span></span> <span data-ttu-id="2b8a0-181">Ad esempio, lo striping di più dischi insieme per creare un volume di disco più grande migliora le prestazioni di IO.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-181">For example, striping multiple disks together to create a larger disk volume improves IO performance.</span></span> <span data-ttu-id="2b8a0-182">L'abilitazione della cache di lettura sul contenuto di archiviazione che viene modificato raramente migliora la velocità di recupero di dati.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-182">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="2b8a0-183">Per informazioni dettagliate sui requisiti delle prestazioni, vedere [SAP note 1943937 - Hardware Configuration Check Tool][sap-1943937] (Nota SAP 1943937 - Strumento di controllo della configurazione dell'Hardware).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-183">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool][sap-1943937].</span></span>

<span data-ttu-id="2b8a0-184">Per l'archivio dati di backup, è consigliabile usare il [livello di archiviazione ad accesso sporadico][cool-blob-storage] di archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-184">For the backup data store, we recommend using the [cool storage tier][cool-blob-storage] of Azure Blob storage.</span></span> <span data-ttu-id="2b8a0-185">Il livello di archiviazione ad accesso sporadico è un modo conveniente per archiviare i dati a cui si accede meno frequentemente e di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-185">The cool storage tier is a cost-effective way to store data that is less frequently accessed and long-lived.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="2b8a0-186">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="2b8a0-186">Scalability considerations</span></span>

<span data-ttu-id="2b8a0-187">Al livello dell'applicazione SAP, Azure offre un'ampia gamma di dimensioni delle macchine virtuali per la scalabilità verticale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-187">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up.</span></span> <span data-ttu-id="2b8a0-188">Per un elenco completo, vedere [SAP note 1928533 - SAP Applications on Azure: Supported Products and Azure VM Types][sap-1928533] (Nota SAP 1928533 - Applicazioni SAP in Azure: Prodotti supportati e Tipi di macchine virtuali di Azure).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-188">For an inclusive list, see [SAP note 1928533 - SAP Applications on Azure: Supported Products and Azure VM Types][sap-1928533].</span></span> <span data-ttu-id="2b8a0-189">Scalare orizzontale tramite l'aggiunta di più macchine virtuali per il set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-189">Scale out by adding more VMs to the availability set.</span></span>

<span data-ttu-id="2b8a0-190">Per SAP HANA in macchine virtuali di Azure con le applicazioni OLTP e OLAP SAP, le dimensioni della macchina virtuale certificata SAP sono di GS5 con una singola istanza della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-190">For SAP HANA on Azure virtual machines with both OLTP and OLAP SAP applications, the SAP-certified virtual machine size is GS5 with a single VM instance.</span></span> <span data-ttu-id="2b8a0-191">Per i carichi di lavoro più grandi, Microsoft offre anche [Istanze di grandi dimensioni di Azure][azure-large-instances] per SAP HANA in server fisici posizionati in un centro dati certificato di Microsoft Azure che fornisce fino a 4 TB di capacità di memoria per una singola istanza in questo momento.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-191">For larger workloads, Microsoft also offers [Azure Large Instances][azure-large-instances] for SAP HANA on physical servers co-located in a Microsoft Azure certified datacenter, which provides up to 4 TB of memory capacity for a single instance at this time.</span></span> <span data-ttu-id="2b8a0-192">La configurazione a più nodi è anche possibile con una capacità di memoria totale di 32 TB.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-192">Multi-node configuration is also possible with a total memory capacity of up to 32 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="2b8a0-193">Considerazioni sulla disponibilità</span><span class="sxs-lookup"><span data-stu-id="2b8a0-193">Availability considerations</span></span>

<span data-ttu-id="2b8a0-194">In questa installazione distribuita dell'applicazione SAP in un database centralizzato, l'installazione di base verrà replicata per ottenere la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-194">In this distributed installation of the SAP application on a centralized database, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="2b8a0-195">Per ogni livello dell'architettura, la progettazione a disponibilità elevata varia:</span><span class="sxs-lookup"><span data-stu-id="2b8a0-195">For each layer of the architecture, the high availability design varies:</span></span>

- <span data-ttu-id="2b8a0-196">**Dispatcher Web.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-196">**Web Dispatcher.**</span></span> <span data-ttu-id="2b8a0-197">Si ottiene le disponibilità elevata con istanze di SAP Dispatcher Web ridondanti con il traffico dell'applicazione SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-197">High availability is achieved with redundant SAP Web Dispatcher instances with SAP application traffic.</span></span> <span data-ttu-id="2b8a0-198">Vedere [SAP Dispatcher Web][swd] nella documentazione di SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-198">See [SAP Web Dispatcher][swd] in the SAP Documentation.</span></span>

- <span data-ttu-id="2b8a0-199">**ASCS.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-199">**ASCS.**</span></span> <span data-ttu-id="2b8a0-200">Per la disponibilità elevata di ASCS nelle macchine virtuali di Windows Azure, il Clustering di failover di Windows Server viene usato con SIOS DataKeeper per implementare il volume condiviso del cluster.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-200">For high availability of ASCS on Azure Windows virtual machines, Windows Sever Failover Clustering is used with SIOS DataKeeper to implement the cluster shared volume.</span></span> <span data-ttu-id="2b8a0-201">Per i dettagli di implementazione, vedere [Clustering SAP ASCS in Azure][clustering].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-201">For implementation details, see [Clustering SAP ASCS on Azure][clustering].</span></span>

- <span data-ttu-id="2b8a0-202">**Server applicazioni.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-202">**Application servers.**</span></span> <span data-ttu-id="2b8a0-203">Si ottiene la disponibilità elevata dal traffico del bilanciamento del carico in un pool di server di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-203">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

- <span data-ttu-id="2b8a0-204">**Livello del database.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-204">**Database tier.**</span></span> <span data-ttu-id="2b8a0-205">Questa architettura di riferimento distribuisce una singola istanza del database di SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-205">This reference architecture deploys a single SAP HANA database instance.</span></span> <span data-ttu-id="2b8a0-206">Per la disponibilità elevata, distribuire più di un'istanza e usare la replica di sistema HANA (HSR) per implementare il failover manuale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-206">For high availability, deploy more than one instance and use HANA System Replication (HSR) to implement manual failover.</span></span> <span data-ttu-id="2b8a0-207">Per abilitare il failover automatico, è richiesta un'estensione a disponibilità elevata per la distribuzione di Linux specifica.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-207">To enable automatic failover, an HA extension for the specific Linux distribution is required.</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="2b8a0-208">Considerazioni sul ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="2b8a0-208">Disaster recovery considerations</span></span>

<span data-ttu-id="2b8a0-209">Ogni livello usa una strategia diversa per fornire una protezione con ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-209">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="2b8a0-210">**Server applicazioni.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-210">**Application servers.**</span></span> <span data-ttu-id="2b8a0-211">I server dell'applicazione SAP non contengono dati aziendali.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-211">SAP application servers don't contain business data.</span></span> <span data-ttu-id="2b8a0-212">In Azure, una semplice strategia di ripristino di emergenza consiste nel creare i server dell'applicazione SAP in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-212">On Azure, a simple DR strategy is to create SAP application servers in another region.</span></span> <span data-ttu-id="2b8a0-213">Nel caso di eventuali modifiche alla configurazione o aggiornamenti del kernel sul server dell'applicazione principale, le stesse modifiche devono essere copiate nelle macchine virtuali nell'area di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-213">Upon any configuration changes or kernel updates on the primary application server, the same changes must be copied to VMs in the DR region.</span></span> <span data-ttu-id="2b8a0-214">Ad esempio, i file eseguibili del kernel copiati nelle macchine virtuali del ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-214">For example, the kernel executables copied to the DR VMs.</span></span>

- <span data-ttu-id="2b8a0-215">**Servizi centrali SAP.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-215">**SAP Central Services.**</span></span> <span data-ttu-id="2b8a0-216">Inoltre, questo componente dello stack dell'applicazione SAP non salva i dati aziendali.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-216">This component of the SAP application stack also doesn't persist business data.</span></span> <span data-ttu-id="2b8a0-217">È possibile compilare una macchina virtuale nell'area di ripristino di emergenza per eseguire il ruolo SCS.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-217">You can build a VM in the DR region to run the SCS role.</span></span> <span data-ttu-id="2b8a0-218">L'unico contenuto dal nodo SCS primario per la sincronizzazione è il contenuto di condivisione **/sapmnt**.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-218">The only content from the primary SCS node to synchronize is the **/sapmnt** share content.</span></span> <span data-ttu-id="2b8a0-219">Inoltre, se le modifiche di configurazione o gli aggiornamenti del kernel hanno luogo nei server SCS primari, essi devono essere ripetuti nell'SCS del ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-219">Also, if configuration changes or kernel updates take place on the primary SCS servers, they must be repeated on the DR SCS.</span></span> <span data-ttu-id="2b8a0-220">Per sincronizzare i due server, è sufficiente usare un normale processo pianificato di copia per copiare **/sapmnt** sul lato del ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-220">To synchronize the two servers, simply use a regularly scheduled copy job to copy **/sapmnt** to the DR side.</span></span> <span data-ttu-id="2b8a0-221">Per altre informazioni su come compilare, copiare ed eseguire il processo di failover del test, scaricare [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution][sap-netweaver-dr] (SAP NetWeaver: Compilazione di una soluzione di ripristino di emergenza basata su Hyper-V e Microsoft) e fare riferimento a "4.3.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-221">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution][sap-netweaver-dr], and refer to "4.3.</span></span> <span data-ttu-id="2b8a0-222">Livello di SPOF SAP (ASCS)."</span><span class="sxs-lookup"><span data-stu-id="2b8a0-222">SAP SPOF layer (ASCS)."</span></span>

- <span data-ttu-id="2b8a0-223">**Livello del database.**</span><span class="sxs-lookup"><span data-stu-id="2b8a0-223">**Database tier.**</span></span> <span data-ttu-id="2b8a0-224">Usare soluzioni di replica supportate da HANA, ad esempio HSR o Replica di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-224">Use HANA-supported replication solutions such as HSR or Storage Replication.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="2b8a0-225">Considerazioni sulla gestibilità</span><span class="sxs-lookup"><span data-stu-id="2b8a0-225">Manageability considerations</span></span>

<span data-ttu-id="2b8a0-226">SAP HANA dispone di una funzionalità di backup che usa l'infrastruttura di Azure sottostante.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-226">SAP HANA has a backup feature that uses the underlying Azure infrastructure.</span></span> <span data-ttu-id="2b8a0-227">Per eseguire il backup del database SAP HANA in esecuzione nelle macchine virtuali di Azure, sia lo snapshot di SAP HANA sia lo snapshot di archiviazione di Azure vengono usati per garantire la coerenza dei file di backup.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-227">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the consistency of backup files.</span></span> <span data-ttu-id="2b8a0-228">Per informazioni dettagliate, vedere [Guida del backup di SAP HANA in macchine virtuali di Azure][hana-backup] e [Domande frequenti sul servizio di Backup di Azure][backup-faq].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-228">For details, see [Backup guide for SAP HANA on Azure Virtual Machines][hana-backup] and the [Azure Backup service FAQ][backup-faq].</span></span>

<span data-ttu-id="2b8a0-229">Azure offre diverse funzioni per [il monitoraggio e la diagnostica][monitoring] dell'infrastruttura generale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-229">Azure provides several functions for [monitoring and diagnostics][monitoring] of the overall infrastructure.</span></span> <span data-ttu-id="2b8a0-230">Inoltre, il monitoraggio avanzato delle macchine virtuali di Azure (Linux o Windows) viene gestito da Azure Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-230">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span>

<span data-ttu-id="2b8a0-231">Per fornire le risorse di monitoraggio e le prestazioni del servizio basate su SAP dell'infrastruttura di SAP, usare l'estensione Azure Enhanced Monitoring SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-231">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, use the Azure SAP Enhanced Monitoring extension.</span></span> <span data-ttu-id="2b8a0-232">Questa estensione aumenta le statistiche di monitoraggio nell'applicazione SAP per il monitoraggio del sistema operativo e le funzioni del Pannello di controllo DBA.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-232">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="2b8a0-233">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="2b8a0-233">Security considerations</span></span>

<span data-ttu-id="2b8a0-234">SAP dispone del proprio motore di gestione di utenti (UME) per controllare l'accesso basato sui ruoli e l'autorizzazione all'interno dell'applicazione SAP.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-234">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="2b8a0-235">Per informazioni dettagliate, vedere [SAP HANA Security - An Overview][sap-security] (Sicurezza SAP HANA - Panoramica)</span><span class="sxs-lookup"><span data-stu-id="2b8a0-235">For details, see [SAP HANA Security - An Overview][sap-security].</span></span> <span data-ttu-id="2b8a0-236">(si richiede un account di SAP Service Marketplace per l'accesso).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-236">(A SAP Service Marketplace account is required for access.)</span></span>

<span data-ttu-id="2b8a0-237">Per la protezione dell'infrastruttura, i dati di protezione vengono salvaguardati quando in transito e quando inattivi.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-237">For infrastructure security, data is safeguarded in transit and at rest.</span></span> <span data-ttu-id="2b8a0-238">La sezione "Considerazioni relative alla sicurezza" di [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide ][netweaver-on-azure] (SAP NetWeaver in macchine virtuali di Azure (VM) – Guida alla pianificazione e all'implementazione) inizia indirizzando la protezione di rete.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-238">The “Security considerations” section of the [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][netweaver-on-azure] begins to address network security.</span></span> <span data-ttu-id="2b8a0-239">La guida specifica anche le porte di rete che devono essere aperte sui firewall per consentire la comunicazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-239">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span> 

<span data-ttu-id="2b8a0-240">Per la crittografia dei dischi della macchina virtuale di Azure, è possibile usare [Crittografia dischi di Azure][disk-encryption].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-240">To encrypt Windows and Linux IaaS virtual machine disks, you can use [Azure Disk Encryption][disk-encryption].</span></span> <span data-ttu-id="2b8a0-241">La Crittografia dischi di Azure usa la funzionalità BitLocker di Windows e la funzionalità DM-Crypt di Linux per fornire la crittografia del volume per i dischi dati e del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-241">Azure Disk Encryption uses the BitLocker feature of Windows and the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="2b8a0-242">La soluzione funziona anche con Azure Key Vault per consentire di controllare e gestire le chiavi di crittografia dei dischi e i segreti nella sottoscrizione dell'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-242">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your Key Vault subscription.</span></span> <span data-ttu-id="2b8a0-243">I dati nei dischi delle macchine virtuali vengano crittografati quando inattivi in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-243">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="2b8a0-244">Per la crittografia dei dati a riposo SAP HANA, è consigliabile usare la tecnologia di crittografia nativa SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-244">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span>

> [!NOTE]
> <span data-ttu-id="2b8a0-245">Non usare la crittografia di dati inattivi HANA con la crittografia del disco di Azure nello stesso server.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-245">Don't use the HANA data-at-rest encryption with Azure disk encryption on the same server.</span></span>

<span data-ttu-id="2b8a0-246">È consigliabile usare [gruppi di sicurezza di rete][nsg] (NSG) per limitare il traffico tra le varie subnet nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-246">Consider using [network security groups][nsg] (NSGs) to restrict traffic between the various subnets in the VNet.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="2b8a0-247">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="2b8a0-247">Deploy the solution</span></span> 

<span data-ttu-id="2b8a0-248">Gli script di distribuzione per questa architettura di riferimento è disponibile in [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-248">The deployment scripts for this reference architecture are available on [GitHub][github].</span></span>


### <a name="prerequisites"></a><span data-ttu-id="2b8a0-249">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="2b8a0-249">Prerequisites</span></span>

- <span data-ttu-id="2b8a0-250">È necessario avere accesso al Centro Download del Software SAP per completare l'installazione.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-250">You must have access to the SAP Software Download Center to complete the installation.</span></span>
 
- <span data-ttu-id="2b8a0-251">Installare la versione più recente di [Azure PowerShell][azure-ps].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-251">Install the latest version of [Azure PowerShell][azure-ps].</span></span> 

- <span data-ttu-id="2b8a0-252">Questa distribuzione richiede 51 Core.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-252">This deployment requires 51 cores.</span></span> <span data-ttu-id="2b8a0-253">Prima di distribuire, verificare che la sottoscrizione abbia una quota sufficiente per core della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-253">Before deploying, verify that your subscription has sufficient quota for VM cores.</span></span> <span data-ttu-id="2b8a0-254">In caso contrario, usare il portale di Azure per inviare una richiesta di supporto per più quote.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-254">If not, use the Azure portal to submit a support request for more quota.</span></span>
 
- <span data-ttu-id="2b8a0-255">Questa distribuzione usa una macchina virtuale di serie GS.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-255">This deployment uses a GS-series VM.</span></span> <span data-ttu-id="2b8a0-256">Controllare la disponibilità della serie GS per ogni area [qui][region-availability].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-256">Check the availability of the GS series per region [here][region-availability].</span></span>

- <span data-ttu-id="2b8a0-257">Per stimare il costo di questa distribuzione, vedere il [Calcolatore dei prezzi di Azure][azure-pricing].</span><span class="sxs-lookup"><span data-stu-id="2b8a0-257">To estimate the cost of this deployment, see the [Azure Pricing Calculator][azure-pricing].</span></span> 
 
<span data-ttu-id="2b8a0-258">Questa architettura di riferimento distribuisce le macchine virtuali seguenti:</span><span class="sxs-lookup"><span data-stu-id="2b8a0-258">This reference architecture deploys the following VMs:</span></span>

| <span data-ttu-id="2b8a0-259">Nome risorsa</span><span class="sxs-lookup"><span data-stu-id="2b8a0-259">Resource name</span></span> | <span data-ttu-id="2b8a0-260">Dimensioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="2b8a0-260">VM Size</span></span> | <span data-ttu-id="2b8a0-261">Scopo</span><span class="sxs-lookup"><span data-stu-id="2b8a0-261">Purpose</span></span>  |
|---------------|---------|----------|
| <span data-ttu-id="2b8a0-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span><span class="sxs-lookup"><span data-stu-id="2b8a0-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span></span> | <span data-ttu-id="2b8a0-263">DS11v2</span><span class="sxs-lookup"><span data-stu-id="2b8a0-263">DS11v2</span></span> | <span data-ttu-id="2b8a0-264">Servizi centrali SAP</span><span class="sxs-lookup"><span data-stu-id="2b8a0-264">SAP Central Services</span></span> |
| <span data-ttu-id="2b8a0-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span><span class="sxs-lookup"><span data-stu-id="2b8a0-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span></span> | <span data-ttu-id="2b8a0-266">DS11v2</span><span class="sxs-lookup"><span data-stu-id="2b8a0-266">DS11v2</span></span> | <span data-ttu-id="2b8a0-267">Applicazione di SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="2b8a0-267">SAP NetWeaver application</span></span> |
| <span data-ttu-id="2b8a0-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span><span class="sxs-lookup"><span data-stu-id="2b8a0-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span></span> | <span data-ttu-id="2b8a0-269">DS11v2</span><span class="sxs-lookup"><span data-stu-id="2b8a0-269">DS11v2</span></span> | <span data-ttu-id="2b8a0-270">Dispatcher Web SAP</span><span class="sxs-lookup"><span data-stu-id="2b8a0-270">SAP Web Dispatcher</span></span> |
| `ra-sap-data-vm1` | <span data-ttu-id="2b8a0-271">GS5</span><span class="sxs-lookup"><span data-stu-id="2b8a0-271">GS5</span></span> | <span data-ttu-id="2b8a0-272">Istanza di database SAP HANA</span><span class="sxs-lookup"><span data-stu-id="2b8a0-272">SAP HANA database instance</span></span> |
| `ra-sap-jumpbox-vm1` | <span data-ttu-id="2b8a0-273">DS1V2</span><span class="sxs-lookup"><span data-stu-id="2b8a0-273">DS1V2</span></span> | <span data-ttu-id="2b8a0-274">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="2b8a0-274">Jumpbox</span></span> |

<span data-ttu-id="2b8a0-275">Viene distribuita un'istanza singola SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-275">A single SAP HANA instance is deployed.</span></span> <span data-ttu-id="2b8a0-276">Per le macchine virtuali dell'applicazione, il numero di istanze da distribuire è specificato nei parametri del modello.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-276">For the application VMs, the number of instances to deploy is specified in the template parameters.</span></span>

### <a name="deploy-sap-infrastructure"></a><span data-ttu-id="2b8a0-277">Distribuire l'infrastruttura SAP</span><span class="sxs-lookup"><span data-stu-id="2b8a0-277">Deploy SAP infrastructure</span></span>

<span data-ttu-id="2b8a0-278">È possibile distribuire questa architettura in modo incrementale o in una sola volta.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-278">You can deploy this architecture incrementally or all at once.</span></span> <span data-ttu-id="2b8a0-279">La prima volta è consigliabile una distribuzione incrementale, in modo tale da poter vedere cosa accade in ogni passaggio di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-279">The first time, we recommend an incremental deployment, so that you can see what each deployment step does.</span></span> <span data-ttu-id="2b8a0-280">Specificare l'incremento usando uno dei seguenti parametri di *modalità*</span><span class="sxs-lookup"><span data-stu-id="2b8a0-280">Specify the increment using one of the following *mode* parameters</span></span>

| <span data-ttu-id="2b8a0-281">Mode</span><span class="sxs-lookup"><span data-stu-id="2b8a0-281">Mode</span></span>           | <span data-ttu-id="2b8a0-282">Risultato</span><span class="sxs-lookup"><span data-stu-id="2b8a0-282">What it does</span></span>                                                                                                            |
|----------------|-----------------------------------------------------|
| <span data-ttu-id="2b8a0-283">infrastructure</span><span class="sxs-lookup"><span data-stu-id="2b8a0-283">infrastructure</span></span> | <span data-ttu-id="2b8a0-284">Distribuisce l'infrastruttura di rete in Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-284">Deploys the network infrastructure in Azure.</span></span>        |
| <span data-ttu-id="2b8a0-285">workload</span><span class="sxs-lookup"><span data-stu-id="2b8a0-285">workload</span></span>       | <span data-ttu-id="2b8a0-286">Distribuisce i server SAP nella rete.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-286">Deploys the SAP servers to the network.</span></span>             |
| <span data-ttu-id="2b8a0-287">tutti</span><span class="sxs-lookup"><span data-stu-id="2b8a0-287">all</span></span>            | <span data-ttu-id="2b8a0-288">Implementa tutte le distribuzioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-288">Deploys all the preceding deployments.</span></span>              |

<span data-ttu-id="2b8a0-289">Per eliminare la soluzione, eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="2b8a0-289">To deploy the solution, perform the following steps:</span></span>

1. <span data-ttu-id="2b8a0-290">Scaricare o clonare il [repository GitHub][github] nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-290">Download or clone the [GitHub repo][github] to your local computer.</span></span>

2. <span data-ttu-id="2b8a0-291">Aprire una finestra di PowerShell e passare alla cartella `/sap/sap-hana/`.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-291">Open a PowerShell window and navigate to the `/sap/sap-hana/` folder.</span></span>

3. <span data-ttu-id="2b8a0-292">Eseguire il cmdlet di PowerShell seguente.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-292">Run the following PowerShell cmdlet.</span></span> <span data-ttu-id="2b8a0-293">Per `<subscription id>`, usare l'ID della sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-293">For `<subscription id>`, use your Azure subscription ID.</span></span> <span data-ttu-id="2b8a0-294">Per `<location>`, specificare un'area di Azure, come `eastus` o `westus`.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-294">For `<location>`, specify an Azure region, such as `eastus` or `westus`.</span></span> <span data-ttu-id="2b8a0-295">Per `<mode>`, specificare una delle modalità elencate in precedenza.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-295">For `<mode>`, specify one of the modes listed above.</span></span>

    ```powershell
     .\Deploy-ReferenceArchitecture -SubscriptionId <subscription id> -Location <location> -ResourceGroupName <resource group> <mode>
    ```

4.  <span data-ttu-id="2b8a0-296">Quando richiesto, accedere all'account di Azure.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-296">When prompted, log on to your Azure account.</span></span> 

<span data-ttu-id="2b8a0-297">Gli script di distribuzione possono richiedere diverse ore per essere completati, a seconda della modalità selezionata.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-297">The deployment scripts can take up to several hours to complete, depending on the mode you selected.</span></span>

> [!WARNING]
> <span data-ttu-id="2b8a0-298">I file dei parametri comprendono una password hardcoded (`AweS0me@PW`) in diverse posizioni.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-298">The parameter files include a hard-coded password (`AweS0me@PW`) in various places.</span></span> <span data-ttu-id="2b8a0-299">Modificare questi valori prima di eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-299">Change these values before you deploy.</span></span>
 
### <a name="configure-sap-applications-and-database"></a><span data-ttu-id="2b8a0-300">Configurare le applicazioni e i database SAP</span><span class="sxs-lookup"><span data-stu-id="2b8a0-300">Configure SAP applications and database</span></span>

<span data-ttu-id="2b8a0-301">Dopo aver distribuito l'infrastruttura SAP, installare e configurare le applicazioni SAP e il database HANA nelle macchine virtuali come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-301">After deploying the SAP infrastructure, install and configure your SAP applications and HANA database on the virtual machines as follows.</span></span>

> [!NOTE]
> <span data-ttu-id="2b8a0-302">Per istruzioni sull'installazione di SAP, è necessario disporre di un nome utente del portale di supporto SAP e di una password per eseguire il download delle [SAP installation guides][sap-guide] (Guide all'installazione di SAP).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-302">For SAP installation instructions, you must have a SAP Support Portal username and password to download the [SAP installation guides][sap-guide].</span></span>

1. <span data-ttu-id="2b8a0-303">Accedere al jumpbox (`ra-sap-jumpbox-vm1`).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-303">Log into the jumpbox (`ra-sap-jumpbox-vm1`).</span></span> <span data-ttu-id="2b8a0-304">Si userà il jumpbox per accedere alle altre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-304">You will use the jumpbox to log into the other VMs.</span></span> 

2.  <span data-ttu-id="2b8a0-305">Per ogni macchina virtuale denominata `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`, accedere alla macchina virtuale, installare e configurare l'istanza di SAP Dispatcher Web eseguendo la procedura descritta nella wiki [Web Dispatcher Installation][sap-dispatcher-install] (Installazione di Web Dispatcher).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-305">For each VM named `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`, log into the VM, and install and configure the SAP Web Dispatcher instance using the steps described in the [Web Dispatcher Installation][sap-dispatcher-install] wiki.</span></span>

3.  <span data-ttu-id="2b8a0-306">Accedere alla macchina virtuale denominata `ra-sap-data-vm1`.</span><span class="sxs-lookup"><span data-stu-id="2b8a0-306">Log into the VM named `ra-sap-data-vm1`.</span></span> <span data-ttu-id="2b8a0-307">Installare e configurare l'istanza del Database SAP HANA con [SAP HANA Server Installation and Update Guide][hana-guide] (Guida all'installazione e all'aggiornamento del server SAP HANA).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-307">Install and configure the SAP Hana Database instance using the [SAP HANA Server Installation and Update Guide][hana-guide].</span></span>

4. <span data-ttu-id="2b8a0-308">Per ogni macchina virtuale denominata `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`, accedere alla macchina virtuale, installare e configurare SAP Central Services (SCS) usando le [SAP installation guides][sap-guide] (Guide all'installazione di SAP).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-308">For each VM named `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`, log into the VM, and install and configure the SAP Central Services (SCS) using the [SAP installation guides][sap-guide].</span></span>

5.  <span data-ttu-id="2b8a0-309">Per ogni macchina virtuale denominata `ra-sapApps-vm1` ... `ra-sapApps-vmN`, accedere alla macchina virtuale, installare e configurare l'applicazione SAP NetWeaver usando le [SAP installation guides][sap-guide] (Guide all'installazione di SAP).</span><span class="sxs-lookup"><span data-stu-id="2b8a0-309">For each VM named `ra-sapApps-vm1` ... `ra-sapApps-vmN`, log into the VM, and install and configure the SAP NetWeaver application using the [SAP installation guides][sap-guide].</span></span>

<span data-ttu-id="2b8a0-310">**_Collaboratori di questa architettura di riferimento_** &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span><span class="sxs-lookup"><span data-stu-id="2b8a0-310">**_Contributors to this reference architecture_** &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span></span>

[azure-large-instances]: /azure/virtual-machines/workloads/sap/hana-overview-architecture
[azure-lb]: /azure/load-balancer/load-balancer-overview
[azure-pricing]: https://azure.microsoft.com/pricing/calculator/
[azure-ps]: /powershell/azure/overview
[backup-faq]: /azure/backup/backup-azure-backup-faq
[clustering]: https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/20/clustering-sap-ascs-instance-using-windows-server-failover-cluster-on-microsoft-azure-with-sios-datakeeper-and-azure-internal-load-balancer/
[cool-blob-storage]: /azure/storage/storage-blob-storage-tiers
[disk-encryption]: /azure/security/azure-security-disk-encryption
[github]: https://github.com/mspnp/reference-architectures/tree/master/sap/sap-hana
[hana-backup]: /azure/virtual-machines/workloads/sap/sap-hana-backup-guide
[hana-guide]: https://help.sap.com/viewer/2c1988d620e04368aa4103bf26f17727/2.0.01/en-US/7eb0167eb35e4e2885415205b8383584.html
[hybrid-networking]: ../hybrid-networking/index.md
[logon-groups]: https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing
[managed-disks]: /azure/storage/storage-managed-disks-overview
[monitoring]: /azure/architecture/best-practices/monitoring
[multiple-vm-nics]: /azure/virtual-machines/windows/multiple-nics
[netweaver-on-azure]: /azure/virtual-machines/workloads/sap/planning-guide
[nsg]: /azure/virtual-network/virtual-networks-nsg
[region-availability]: https://azure.microsoft.com/regions/services/
[running-SAP]: https://blogs.msdn.microsoft.com/saponsqlserver/2016/06/07/sap-on-sql-general-update-for-customers-partners-june-2016/
[sap-1943937]: https://launchpad.support.sap.com/#/notes/1943937
[sap-1928533]: https://launchpad.support.sap.com/#/notes/1928533
[sap-dispatcher]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm
[sap-dispatcher-ha]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/9a9a6b48c673e8e10000000a42189b/frameset.htm
[sap-dispatcher-install]: https://wiki.scn.sap.com/wiki/display/SI/Web+Dispatcher+Installation
[sap-guide]: https://service.sap.com/instguides
[sap-ha]: https://support.sap.com/content/dam/SAAP/SAP_Activate/AGS_70.pdf
[sap-hana-on-azure]: https://azure.microsoft.com/services/virtual-machines/sap-hana/
[sap-netweaver-dr]: http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx
[sap-security]: https://archive.sap.com/documents/docs/DOC-62943
[visio-download]: https://archcenter.azureedge.net/cdn/SAP-HANA-architecture.vsdx
[vm-sizes-mem]: /azure/virtual-machines/windows/sizes-memory
[swd]: https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm
[0]: ./images/sap-hana.png "Architettura di SAP HANA con Microsoft Azure"
