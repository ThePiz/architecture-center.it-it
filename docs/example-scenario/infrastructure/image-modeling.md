---
title: Accelerare la modellazione basata su immagini digitali in Azure
titleSuffix: Azure Example Scenarios
description: Accelerare la modellazione basata su immagini digitali in Azure con Avere e Agisoft PhotoScan
author: adamboeglin
ms.date: 01/11/2019
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: cat-team, Linux, HPC
social_image_url: /azure/architecture/example-scenario/infrastructure/media/architecture-image-modeling.png
ms.openlocfilehash: 981d9f01ef12f75d9b292196f754f3a0affa791a
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640380"
---
# <a name="accelerate-digital-image-based-modeling-on-azure"></a><span data-ttu-id="9fb14-103">Accelerare la modellazione basata su immagini digitali in Azure</span><span class="sxs-lookup"><span data-stu-id="9fb14-103">Accelerate digital image-based modeling on Azure</span></span>

<span data-ttu-id="9fb14-104">Questo scenario di esempio fornisce indicazioni relative ad architettura e progettazione per le organizzazioni che vogliono eseguire la modellazione basata su immagini nell'infrastruttura distribuita come servizio (IaaS) di Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb14-104">This example scenario provides architecture and design guidance for any organization that wants to perform image-based modeling on Azure infrastructure-as-a-service (IaaS).</span></span> <span data-ttu-id="9fb14-105">Lo scenario è progettato per eseguire software di fotogrammetria su macchine virtuali di Azure usando una soluzione di archiviazione con prestazioni elevate che accelera i tempi di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9fb14-105">The scenario is designed for running photogrammetry software on Azure Virtual Machines (VMs) using high-performance storage that accelerates processing time.</span></span> <span data-ttu-id="9fb14-106">L'ambiente può essere ridimensionato secondo necessità e supporta diversi terabyte di spazio di archiviazione senza compromettere le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9fb14-106">The environment can be scaled up and down as needed and supports terabytes of storage without sacrificing performance.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="9fb14-107">Casi d'uso pertinenti</span><span class="sxs-lookup"><span data-stu-id="9fb14-107">Relevant use cases</span></span>

<span data-ttu-id="9fb14-108">I casi d'uso pertinenti includono:</span><span class="sxs-lookup"><span data-stu-id="9fb14-108">Relevant use cases include:</span></span>

- <span data-ttu-id="9fb14-109">Modellazione e misurazione di edifici, strutture ingegneristiche e scene di incidenti forensi.</span><span class="sxs-lookup"><span data-stu-id="9fb14-109">Modeling and measuring buildings, engineering structures, and forensic accident scenes.</span></span>
- <span data-ttu-id="9fb14-110">Creazione di effetti visivi per videogiochi e film.</span><span class="sxs-lookup"><span data-stu-id="9fb14-110">Creating visual effects for computer games and movies.</span></span>
- <span data-ttu-id="9fb14-111">Uso di immagini digitali per generare indirettamente le misurazioni di oggetti di varie scale, ad esempio nella pianificazione urbanistica e in altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9fb14-111">Using digital images to indirectly generate measurements of objects of various scales as in urban planning and other applications.</span></span>

## <a name="architecture"></a><span data-ttu-id="9fb14-112">Architettura</span><span class="sxs-lookup"><span data-stu-id="9fb14-112">Architecture</span></span>

<span data-ttu-id="9fb14-113">Questo esempio descrive l'uso del software di fotogrammetria Agisoft PhotoScan supportato dalla soluzione di archiviazione Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-113">This example describes the use of Agisoft PhotoScan photogrammetry software backed by Avere vFXT storage.</span></span> <span data-ttu-id="9fb14-114">Il software PhotoScan è stato scelto per la sua ampia diffusione in applicazioni GIS (Geographic Information System), documentazione del patrimonio culturale, sviluppo di giochi e produzione di effetti visivi.</span><span class="sxs-lookup"><span data-stu-id="9fb14-114">PhotoScan was chosen for its popularity in geographic information system (GIS) applications, cultural heritage documentation, game development, and visual effects production.</span></span> <span data-ttu-id="9fb14-115">È indicato sia per la fotogrammetria a corto raggio che per quella aerea.</span><span class="sxs-lookup"><span data-stu-id="9fb14-115">It is suitable for both close-range photogrammetry and aerial photogrammetry.</span></span>

<span data-ttu-id="9fb14-116">I concetti di questo articolo si applicano a qualsiasi carico di lavoro HPC (High Performance Computing) basato su un'utilità di pianificazione e su nodi di lavoro gestiti come un'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="9fb14-116">The concepts in this article apply to any high-performance computing (HPC) workload based on a scheduler and worker nodes managed as infrastructure.</span></span>  <span data-ttu-id="9fb14-117">Per questo carico di lavoro, è stata scelta la soluzione Avere vFXT per le prestazioni superiori dimostrate durante i test di benchmark.</span><span class="sxs-lookup"><span data-stu-id="9fb14-117">For this workload, Avere vFXT was selected for its superior performance during benchmark tests.</span></span>  <span data-ttu-id="9fb14-118">Tuttavia, lo scenario separa l'archiviazione dall'elaborazione, quindi è possibile usare altre soluzioni di archiviazione (vedere le [alternative](#alternatives) più avanti in questo documento).</span><span class="sxs-lookup"><span data-stu-id="9fb14-118">However, the scenario decouples the storage from the processing so that other storage solutions can be used (see [alternatives](#alternatives) later in this document).</span></span>

<span data-ttu-id="9fb14-119">Questa architettura include anche controller di dominio Active Directory per controllare l'accesso alle risorse di Azure e fornire la risoluzione dei nomi interna tramite DNS (Domain Name System).</span><span class="sxs-lookup"><span data-stu-id="9fb14-119">This architecture also includes Active Directory domain controllers to control access to Azure resources and provide internal name resolution through the Domain Name System (DNS).</span></span> <span data-ttu-id="9fb14-120">I jumpbox forniscono agli amministratori l'accesso alle macchine virtuali Windows e Linux che eseguono la soluzione.</span><span class="sxs-lookup"><span data-stu-id="9fb14-120">Jump boxes provide administrator access to the Windows and Linux VMs that run the solution.</span></span>

![diagramma dell'architettura](./media/architecture-image-modeling.png)

1. <span data-ttu-id="9fb14-122">L'utente invia diverse immagini a PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="9fb14-122">User submits a number of images to PhotoScan.</span></span>
2. <span data-ttu-id="9fb14-123">L'utilità di pianificazione di PhotoScan viene eseguita in una macchina virtuale Windows che funge da nodo head e gestisce l'elaborazione delle immagini dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9fb14-123">The PhotoScan Scheduler runs on a Windows VM that serves as the head node and directs processing of the user's images.</span></span>
3. <span data-ttu-id="9fb14-124">PhotoScan cerca punti comuni sulle fotografie e crea la geometria (mesh) usando i nodi di elaborazione di PhotoScan in esecuzione sulle macchine virtuali con unità di elaborazione grafica (GPU).</span><span class="sxs-lookup"><span data-stu-id="9fb14-124">PhotoScan searches for common points on the photographs and constructs the geometry (mesh) using the PhotoScan processing nodes running on VMs with graphics processing units (GPUs).</span></span>
4. <span data-ttu-id="9fb14-125">Avere vFXT fornisce una soluzione di archiviazione con prestazioni elevate in Azure basata su Network File System versione 3 (NFSv3) e costituita da almeno quattro macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9fb14-125">Avere vFXT provides a high-performance storage solution on Azure based on Network File System version 3 (NFSv3) and comprised of at least four VMs.</span></span>
5. <span data-ttu-id="9fb14-126">PhotoScan esegue il rendering del modello.</span><span class="sxs-lookup"><span data-stu-id="9fb14-126">PhotoScan renders the model.</span></span>

### <a name="components"></a><span data-ttu-id="9fb14-127">Componenti</span><span class="sxs-lookup"><span data-stu-id="9fb14-127">Components</span></span>

- <span data-ttu-id="9fb14-128">[Agisoft PhotoScan](http://www.agisoft.com/): l'utilità di pianificazione di PhotoScan viene eseguita in una macchina virtuale Windows 2016 Server e i nodi di elaborazione usano cinque macchine virtuali con GPU basate su CentOS Linux 7.5.</span><span class="sxs-lookup"><span data-stu-id="9fb14-128">[Agisoft PhotoScan](http://www.agisoft.com/): The PhotoScan Scheduler runs on a Windows 2016 Server VM, and the processing nodes use five VMs with GPUs that run CentOS Linux 7.5.</span></span>
- <span data-ttu-id="9fb14-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) è una soluzione di memorizzazione nella cache di file che usa l'archiviazione di oggetti e un tradizionale dispositivo NAS (Network Attached Storage) per ottimizzare l'archiviazione di grandi set di dati.</span><span class="sxs-lookup"><span data-stu-id="9fb14-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) is a file caching solution that uses object storage and traditional network-attached storage (NAS) to optimize storage of large datasets.</span></span> <span data-ttu-id="9fb14-130"> Sono inclusi:</span><span class="sxs-lookup"><span data-stu-id="9fb14-130">It includes:</span></span>
  - <span data-ttu-id="9fb14-131">Controller Avere.</span><span class="sxs-lookup"><span data-stu-id="9fb14-131">Avere Controller.</span></span> <span data-ttu-id="9fb14-132">Questa macchina virtuale esegue lo script che installa il cluster Avere vFXT ed esegue Ubuntu 18.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="9fb14-132">This VM executes the script that installs the Avere vFXT cluster and runs Ubuntu 18.04 LTS.</span></span> <span data-ttu-id="9fb14-133">La macchina virtuale può essere usata in seguito per aggiungere o rimuovere nodi di cluster, oltre che per eliminare definitivamente il cluster.</span><span class="sxs-lookup"><span data-stu-id="9fb14-133">The VM can be used later to add or remove cluster nodes and to destroy the cluster as well.</span></span>
  - <span data-ttu-id="9fb14-134">Cluster vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-134">vFXT cluster.</span></span> <span data-ttu-id="9fb14-135">Vengono usate almeno tre macchine virtuali, una per ogni nodo di Avere vFXT basato su sistema operativo Avere 5.0.2.1.</span><span class="sxs-lookup"><span data-stu-id="9fb14-135">At least three VMs are used, one for each of the Avere vFXT nodes based on Avere OS 5.0.2.1.</span></span> <span data-ttu-id="9fb14-136">Queste macchine virtuali costituiscono il cluster vFXT, che è collegato ad archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb14-136">These VMs form the vFXT cluster, which is attached to Azure Blob storage.</span></span>
- <span data-ttu-id="9fb14-137">I [controller di dominio Microsoft Active Directory](/windows/desktop/ad/active-directory-domain-services) consentono all'host di accedere alle risorse del dominio e forniscono la risoluzione dei nomi DNS.</span><span class="sxs-lookup"><span data-stu-id="9fb14-137">[Microsoft Active Directory domain controllers](/windows/desktop/ad/active-directory-domain-services) allow the host access to domain resources and provide DNS name resolution.</span></span> <span data-ttu-id="9fb14-138">Avere vFXT aggiunge il numero di record &mdash; , ad esempio, ogni record a in un cluster vFXT punti all'indirizzo IP di ogni nodo vFXT Avere.</span><span class="sxs-lookup"><span data-stu-id="9fb14-138">Avere vFXT adds a number of A records &mdash; for example, each A record in a vFXT cluster points to the IP address of each Avere vFXT node.</span></span> <span data-ttu-id="9fb14-139">In questa configurazione tutte le macchine virtuali usano il criterio round robin per accedere alle esportazioni di vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-139">In this setup, all VMs use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="9fb14-140">Le [altre macchine virtuali](/azure/virtual-machines/) servono da jumpbox usati dall'amministratore per accedere all'utilità di pianificazione e ai nodi di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9fb14-140">[Other VMs](/azure/virtual-machines/) serve as jump boxes used by the administrator to access the scheduler and processing nodes.</span></span> <span data-ttu-id="9fb14-141">Il jumpbox Windows è obbligatorio per consentire all'amministratore di accedere al nodo head tramite Remote Desktop Protocol.</span><span class="sxs-lookup"><span data-stu-id="9fb14-141">The Windows jumpbox is mandatory to allow the administrator to access the head node via remote desktop protocol.</span></span> <span data-ttu-id="9fb14-142">Il secondo jumpbox è facoltativo ed esegue Linux per l'amministrazione dei nodi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9fb14-142">The second jumpbox is optional and runs Linux for administration of the worker nodes.</span></span>
- <span data-ttu-id="9fb14-143">I [gruppi di sicurezza di rete](/azure/virtual-network/manage-network-security-group) (NSG) limitano l'accesso all'indirizzo IP pubblico e rendono disponibili le porte 3389 e 22 per l'accesso alle macchine virtuali collegate alla subnet di jumpbox.</span><span class="sxs-lookup"><span data-stu-id="9fb14-143">[Network security groups](/azure/virtual-network/manage-network-security-group) (NSGs) limit access to the public IP address (PIP) and allow ports 3389 and 22 for access to the VMs attached to the Jumpbox subnet.</span></span>
- <span data-ttu-id="9fb14-144">Il [peering di rete virtuale](/azure/virtual-network/virtual-network-peering-overview) connette una rete virtuale PhotoScan a una rete virtuale Avere.</span><span class="sxs-lookup"><span data-stu-id="9fb14-144">[Virtual network peering](/azure/virtual-network/virtual-network-peering-overview) connects a PhotoScan virtual network to an Avere virtual network.</span></span>
- <span data-ttu-id="9fb14-145">[Archiviazione BLOB di Azure](/azure/storage/blobs/storage-blobs-introduction) insieme ad Avere vFXT funge da core filer per archiviare i dati di cui è stato eseguito il commit da elaborare.</span><span class="sxs-lookup"><span data-stu-id="9fb14-145">[Azure Blob storage](/azure/storage/blobs/storage-blobs-introduction) works with Avere vFXT as the core filer to store the committed data being processed.</span></span> <span data-ttu-id="9fb14-146">Avere vFXT identifica i dati attivi archiviati in BLOB di Azure e li dispone in livelli nelle unità SSD usate per la memorizzazione nella cache nei relativi nodi di calcolo durante l'esecuzione di un processo di PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="9fb14-146">Avere vFXT identifies the active data stored in Azure Blob and tiers it into solid-state drives (SSD) used for caching in its compute nodes while a PhotoScan job is running.</span></span> <span data-ttu-id="9fb14-147">Se vengono apportate modifiche, viene eseguito il commit dei dati in modo asincrono nel core filer.</span><span class="sxs-lookup"><span data-stu-id="9fb14-147">If changes are made, the data is asynchronously committed back to the core filer.</span></span>
- <span data-ttu-id="9fb14-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) si usa per archiviare le password dell'amministratore e il codice di attivazione di PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="9fb14-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) is used to store the administrator passwords and PhotoScan activation code.</span></span>

### <a name="alternatives"></a><span data-ttu-id="9fb14-149">Alternative</span><span class="sxs-lookup"><span data-stu-id="9fb14-149">Alternatives</span></span>

- <span data-ttu-id="9fb14-150">Per sfruttare i servizi di Azure per la gestione di un cluster HPC, usare strumenti come Azure CycleCloud o Azure Batch invece di gestire le risorse tramite modelli o script.</span><span class="sxs-lookup"><span data-stu-id="9fb14-150">To take advantage of Azure services for managing an HPC cluster, use tools such as Azure CycleCloud or Azure Batch instead of managing the resources through templates or scripts.</span></span>
- <span data-ttu-id="9fb14-151">Distribuire il file system virtuale parallelo BeeGFS come sistema di archiviazione back-end in Azure invece di Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-151">Deploy the BeeGFS parallel virtual file system as the back-end storage on Azure instead of Avere vFXT.</span></span> <span data-ttu-id="9fb14-152">Usare il [modello BeeGFS](https://github.com/paulomarquesc/beegfs-template) per distribuire questa soluzione end-to-end in Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb14-152">Use the [BeeGFS template](https://github.com/paulomarquesc/beegfs-template) to deploy this end-to-end solution on Azure.</span></span>
- <span data-ttu-id="9fb14-153">Distribuire una soluzione di archiviazione a scelta, ad esempio GlusterFS, Lustre o Spazi di archiviazione diretta di Windows.</span><span class="sxs-lookup"><span data-stu-id="9fb14-153">Deploy the storage solution of your choice, such as GlusterFS, Lustre, or Windows Storage Spaces Direct.</span></span> <span data-ttu-id="9fb14-154">A questo scopo, modificare il [modello di PhotoScan](https://github.com/paulomarquesc/photoscan-template) in modo che sia compatibile con la soluzione di archiviazione scelta.</span><span class="sxs-lookup"><span data-stu-id="9fb14-154">To do this, edit the [PhotoScan template](https://github.com/paulomarquesc/photoscan-template) to work with the storage solution you want.</span></span>
- <span data-ttu-id="9fb14-155">Distribuire i nodi di lavoro con il sistema operativo Windows invece di Linux, che è l'opzione predefinita.</span><span class="sxs-lookup"><span data-stu-id="9fb14-155">Deploy the worker nodes with the Windows operating system instead of Linux, the default option.</span></span> <span data-ttu-id="9fb14-156">Se si scelgono i nodi di Windows, le opzioni di integrazione dell'archiviazione non vengono eseguiti dai modelli di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="9fb14-156">When choosing Windows nodes, storage integration options are not executed by the deployment templates.</span></span> <span data-ttu-id="9fb14-157">È necessario integrare manualmente l'ambiente con una soluzione di archiviazione esistente oppure personalizzare il modello di PhotoScan in modo che fornisca tale automazione, come descritto nel [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span><span class="sxs-lookup"><span data-stu-id="9fb14-157">You must manually integrate the environment with an existing storage solution, or customize the PhotoScan template to provide such automation, as described in the [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span></span>

## <a name="considerations"></a><span data-ttu-id="9fb14-158">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="9fb14-158">Considerations</span></span>

<span data-ttu-id="9fb14-159">Questo scenario è progettato specificamente per fornire una risorsa di archiviazione con prestazioni elevate per un carico di lavoro HPC, sia che venga distribuito in Windows o in Linux.</span><span class="sxs-lookup"><span data-stu-id="9fb14-159">This scenario is designed specifically to provide high-performance storage for an HPC workload, whether it is deployed on Windows or Linux.</span></span> <span data-ttu-id="9fb14-160">In generale, la configurazione dell'archiviazione del carico di lavoro HPC deve corrispondere alle procedure consigliate appropriate usate per le distribuzioni locali.</span><span class="sxs-lookup"><span data-stu-id="9fb14-160">In general, the storage configuration of the HPC workload should match the appropriate best practices used for on-premises deployments.</span></span>

<span data-ttu-id="9fb14-161">Le considerazioni sulla distribuzione dipendono dalle applicazioni e dai servizi usati, ma tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="9fb14-161">Deployment considerations depend on the applications and services used, but a few notes apply:</span></span>

- <span data-ttu-id="9fb14-162">Per lo sviluppo di applicazioni con prestazioni elevate, usare Archiviazione Premium di Azure e [ottimizzare il livello dell'applicazione](/azure/virtual-machines/windows/premium-storage-performance).</span><span class="sxs-lookup"><span data-stu-id="9fb14-162">When building high-performance applications, use Azure Premium Storage and [optimize the application layer](/azure/virtual-machines/windows/premium-storage-performance).</span></span> <span data-ttu-id="9fb14-163">Ottimizzare l'archiviazione per l'accesso frequente usando il [livello di accesso frequente](/azure/storage/blobs/storage-blob-storage-tiers) di BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb14-163">Optimize storage for frequent access using Azure Blob [hot tier access](/azure/storage/blobs/storage-blob-storage-tiers).</span></span>
- <span data-ttu-id="9fb14-164">Usare una risorsa di archiviazione [l'opzione di replica](/azure/storage/common/storage-redundancy) che soddisfa i requisiti di disponibilità e prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9fb14-164">Use a storage [replication option](/azure/storage/common/storage-redundancy) that meets your availability and performance requirements.</span></span> <span data-ttu-id="9fb14-165">In questo esempio la soluzione Avere vFXT è configurata per la disponibilità elevata per impostazione predefinita, con archiviazione con ridondanza locale.</span><span class="sxs-lookup"><span data-stu-id="9fb14-165">In this example, Avere vFXT is configured for high availability by default, with locally redundant storage (LRS).</span></span> <span data-ttu-id="9fb14-166">Per il bilanciamento del carico, tutte le macchine virtuali di questa configurazione usano il criterio round robin per accedere alle esportazioni di vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-166">For load balancing, all VMs in this setup use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="9fb14-167">Se il sistema di archiviazione back-end verrà usato sia da client Windows che da client Linux, usare server Samba per supportare i nodi di Windows.</span><span class="sxs-lookup"><span data-stu-id="9fb14-167">If the backend storage will be consumed by both Windows clients and Linux clients, use Samba servers to support the Windows nodes.</span></span> <span data-ttu-id="9fb14-168">Una [versione](https://github.com/paulomarquesc/beegfs-template) di questo scenario di esempio basata su BeeGFS usa Samba per supportare il nodo dell'utilità di pianificazione del carico di lavoro HPC (PhotoScan) in esecuzione in Windows.</span><span class="sxs-lookup"><span data-stu-id="9fb14-168">A [version](https://github.com/paulomarquesc/beegfs-template) of this example scenario based on BeeGFS uses Samba to support the scheduler node of the HPC workload (PhotoScan) running on Windows.</span></span> <span data-ttu-id="9fb14-169">Viene distribuito un servizio di bilanciamento del carico che funge da sostituto intelligente del round robin DNS.</span><span class="sxs-lookup"><span data-stu-id="9fb14-169">A load balancer is deployed to act like a smart replacement for DNS round robin.</span></span>
- <span data-ttu-id="9fb14-170">Eseguire le applicazioni HPC usando il tipo di macchina virtuale maggiormente indicato per lo specifico carico di lavoro di [Windows](/azure/virtual-machines/windows/sizes-hpc) o di [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="9fb14-170">Run HPC applications using the VM type best suited for your [Windows](/azure/virtual-machines/windows/sizes-hpc) or [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) workload.</span></span>
- <span data-ttu-id="9fb14-171">Per isolare il carico di lavoro HPC dalle risorse di archiviazione, distribuirli in due apposite reti virtuali, quindi usare il [peering](/azure/virtual-network/virtual-network-peering-overview) di rete virtuale per connetterle.</span><span class="sxs-lookup"><span data-stu-id="9fb14-171">To isolate the HPC workload from the storage resources, deploy each in its own virtual network, then use virtual network [peering](/azure/virtual-network/virtual-network-peering-overview) to connect the two.</span></span> <span data-ttu-id="9fb14-172">Il peering crea una connessione a bassa latenza e ad ampia larghezza di banda tra le risorse di reti virtuali diverse e instrada il traffico attraverso l'infrastruttura backbone Microsoft solo tramite indirizzi IP privati.</span><span class="sxs-lookup"><span data-stu-id="9fb14-172">Peering creates a low-latency, high-bandwidth connection between resources in different virtual networks and routes traffic through the Microsoft backbone infrastructure through private IP addresses only.</span></span>

### <a name="security"></a><span data-ttu-id="9fb14-173">Security</span><span class="sxs-lookup"><span data-stu-id="9fb14-173">Security</span></span>

<span data-ttu-id="9fb14-174">Questo esempio è incentrato sulla distribuzione di una soluzione di archiviazione con prestazioni elevate per un carico di lavoro HPC e non si tratta di una soluzione di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="9fb14-174">This example focuses on deploying a high-performance storage solution for an HPC workload and is not a security solution.</span></span> <span data-ttu-id="9fb14-175">Assicurarsi di coinvolgere il proprio team di sicurezza per eventuali modifiche.</span><span class="sxs-lookup"><span data-stu-id="9fb14-175">Make sure to involve your security team for any changes.</span></span>

<span data-ttu-id="9fb14-176">Per una maggiore sicurezza, questa infrastruttura di esempio consente l'aggiunta al dominio di tutte le macchine virtuali Windows e usa Active Directory per l'autenticazione centrale.</span><span class="sxs-lookup"><span data-stu-id="9fb14-176">For added security, this example infrastructure enables all the Windows VMs to be domain-joined and uses Active Directory for central authentication.</span></span> <span data-ttu-id="9fb14-177">Prevede inoltre servizi DNS personalizzati per tutte le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9fb14-177">It also provides custom DNS services for all VMs.</span></span> <span data-ttu-id="9fb14-178">Per proteggere l'ambiente, questo modello si basa su [gruppi di sicurezza di rete (NGS)](/azure/virtual-network/security-overview),</span><span class="sxs-lookup"><span data-stu-id="9fb14-178">To help protect the environment, this template relies on [network security groups (NSGs)](/azure/virtual-network/security-overview).</span></span> <span data-ttu-id="9fb14-179">che offrono filtri del traffico e regole di sicurezza di base.</span><span class="sxs-lookup"><span data-stu-id="9fb14-179">NSGs offer basic traffic filters and security rules.</span></span>

<span data-ttu-id="9fb14-180">Valutare le opzioni seguenti per migliorare ulteriormente la sicurezza in questo scenario:</span><span class="sxs-lookup"><span data-stu-id="9fb14-180">Consider the following options to further improve security in this scenario:</span></span>

- <span data-ttu-id="9fb14-181">Usare appliance virtuali di rete come Fortinet, Checkpoint e Juniper.</span><span class="sxs-lookup"><span data-stu-id="9fb14-181">Use network virtual appliances such as Fortinet, Checkpoint, and Juniper.</span></span>
- <span data-ttu-id="9fb14-182">Applicare il [controllo degli accessi in base al ruolo](/azure/role-based-access-control/overview) ai gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="9fb14-182">Apply [role-based access control](/azure/role-based-access-control/overview) to the resource groups.</span></span>
- <span data-ttu-id="9fb14-183">Abilitare l'accesso [JIT](/azure/security-center/security-center-just-in-time) delle macchine virtuali se l'accesso ai jumpbox avviene tramite Internet.</span><span class="sxs-lookup"><span data-stu-id="9fb14-183">Enable VM [JIT](/azure/security-center/security-center-just-in-time) access if jump boxes are accessed via the Internet.</span></span>
- <span data-ttu-id="9fb14-184">Usare [Azure Key Vault](/azure/key-vault/quick-create-portal) per archiviare le password degli account di amministratore.</span><span class="sxs-lookup"><span data-stu-id="9fb14-184">Use [Azure Key Vault](/azure/key-vault/quick-create-portal) to store the passwords used by administrator accounts.</span></span>

## <a name="pricing"></a><span data-ttu-id="9fb14-185">Prezzi</span><span class="sxs-lookup"><span data-stu-id="9fb14-185">Pricing</span></span>

<span data-ttu-id="9fb14-186">Il costo dell'esecuzione di questo scenario può variare notevolmente in base a più fattori.</span><span class="sxs-lookup"><span data-stu-id="9fb14-186">The cost of running this scenario can vary greatly depending on multiple factors.</span></span>  <span data-ttu-id="9fb14-187">Il numero e le dimensioni delle macchine virtuali, la quantità necessaria di spazio di archiviazione e il tempo richiesto per completare un processo determineranno il costo finale.</span><span class="sxs-lookup"><span data-stu-id="9fb14-187">The number and size of VMs, how much storage is required, and the amount of time to complete a job will determine your cost.</span></span>

<span data-ttu-id="9fb14-188">Il profilo di costo dell'esempio seguente nel [calcolatore dei prezzi di Azure](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) si basa su una tipica configurazione di Avere vFXT e PhotoScan:</span><span class="sxs-lookup"><span data-stu-id="9fb14-188">The following sample cost profile in the [Azure pricing calculator](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) is based on a typical configuration for Avere vFXT and PhotoScan:</span></span>

- <span data-ttu-id="9fb14-189">1 macchina virtuale Ubuntu A1\_v2 per eseguire il controller Avere.</span><span class="sxs-lookup"><span data-stu-id="9fb14-189">1 A1\_v2 Ubuntu VM to run the Avere controller.</span></span>
- <span data-ttu-id="9fb14-190">3 macchine virtuali con sistema operativo Avere D16s\_v3, una per ciascuno dei nodi di Avere vFXT che costituiscono il cluster vFXT.</span><span class="sxs-lookup"><span data-stu-id="9fb14-190">3 D16s\_v3 Avere OS VMs, one for each of the Avere vFXT nodes that form the vFXT cluster.</span></span>
- <span data-ttu-id="9fb14-191">5 macchine virtuali Linux NC24\_v2 per fornire le GPU necessarie per i nodi di elaborazione di PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="9fb14-191">5 NC24\_v2 Linux VMs to provide the GPUs needed by the PhotoScan processing nodes.</span></span>
- <span data-ttu-id="9fb14-192">1 macchina virtuale CentOS D8s\_v3 per il nodo dell'utilità di pianificazione di PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="9fb14-192">1 D8s\_v3 CentOS VM for the PhotoScan scheduler node.</span></span>
- <span data-ttu-id="9fb14-193">1 dispositivo CentOS DS2\_v2 usato come jumpbox di amministratore.</span><span class="sxs-lookup"><span data-stu-id="9fb14-193">1 DS2\_v2 CentOS used as administrator jumpbox.</span></span>
- <span data-ttu-id="9fb14-194">2 macchine virtuali DS2\_v2 per i controller di dominio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9fb14-194">2 DS2\_v2 VMs for the Active Directory domain controllers.</span></span>
- <span data-ttu-id="9fb14-195">Dischi gestiti Premium.</span><span class="sxs-lookup"><span data-stu-id="9fb14-195">Premium managed disks.</span></span>
- <span data-ttu-id="9fb14-196">Archiviazione BLOB per utilizzo generico v2 (GPv2) con archiviazione con ridondanza locale e livello di accesso frequente (solo gli account di archiviazione GPv2 espongono l'attributo del livello di accesso).</span><span class="sxs-lookup"><span data-stu-id="9fb14-196">General purpose v2 (GPv2) Blob storage with LRS and hot tier access (only GPv2 storage accounts expose the Access Tier attribute).</span></span>
- <span data-ttu-id="9fb14-197">Rete virtuale con supporto per il trasferimento di 10 TB di dati.</span><span class="sxs-lookup"><span data-stu-id="9fb14-197">Virtual network with support for 10 TB data transfer.</span></span>

<span data-ttu-id="9fb14-198">Per i dettagli su questa configurazione, vedere l'[eBook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span><span class="sxs-lookup"><span data-stu-id="9fb14-198">For details about this architecture, see the [ebook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span> <span data-ttu-id="9fb14-199">Per verificare la variazione dei prezzi per un determinato caso d'uso, scegliere dimensioni di macchine virtuali diverse nel calcolatore dei prezzi in base alla distribuzione prevista.</span><span class="sxs-lookup"><span data-stu-id="9fb14-199">To see how the pricing would change for your particular use case, choose different VM sizes in the pricing calculator to match your expected deployment.</span></span>

## <a name="deployment"></a><span data-ttu-id="9fb14-200">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="9fb14-200">Deployment</span></span>

<span data-ttu-id="9fb14-201">Per le istruzioni dettagliate per la distribuzione di questa architettura, inclusi i prerequisiti per l'uso di Avere FxT o BeeGFS, scaricare l'eBook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/) (Distribuire Agisoft PhotoScan in Azure con Avere vFXT per Azure o BeeGFS).</span><span class="sxs-lookup"><span data-stu-id="9fb14-201">For step-by-step instructions for deploying this architecture, including all the prerequisites for using either Avere FxT or BeeGFS, download the ebook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span>

## <a name="related-resources"></a><span data-ttu-id="9fb14-202">Risorse correlate</span><span class="sxs-lookup"><span data-stu-id="9fb14-202">Related resources</span></span>

<span data-ttu-id="9fb14-203">Le risorse seguenti includono altre informazioni sui componenti utilizzati in questo scenario, oltra ad approcci alternativi per il batch computing in Azure.</span><span class="sxs-lookup"><span data-stu-id="9fb14-203">The following resources will provide more information on the components utilized in this scenario, along with alternative approaches for batch computing on Azure.</span></span>

- <span data-ttu-id="9fb14-204">Panoramica di [Avere vFXT per Azure](/azure/avere-vfxt/avere-vfxt-overview)</span><span class="sxs-lookup"><span data-stu-id="9fb14-204">Overview of [Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview)</span></span>
- <span data-ttu-id="9fb14-205">Home page di [Agisoft PhotoScan](https://www.agisoft.com/)</span><span class="sxs-lookup"><span data-stu-id="9fb14-205">[Agisoft PhotoScan](https://www.agisoft.com/) home Page</span></span>
- [<span data-ttu-id="9fb14-206">Elenco di controllo di prestazioni e scalabilità di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="9fb14-206">Azure Storage Performance and Scalability Checklist</span></span>](/azure/storage/common/storage-performance-checklist)
- <span data-ttu-id="9fb14-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF) (File system virtuali paralleli in Microsoft Azure: test delle prestazioni di Lustre, GlusterFS e BeeGFS)</span><span class="sxs-lookup"><span data-stu-id="9fb14-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span></span>
- <span data-ttu-id="9fb14-208">Lo scenario di esempio illustrato in[Un servizio CAE (Computer-Aided Engineering) in Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span><span class="sxs-lookup"><span data-stu-id="9fb14-208">An example scenario for [computer-aided engineering (CAE) on Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span></span>
- <span data-ttu-id="9fb14-209">Home page di [HPC in Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/)</span><span class="sxs-lookup"><span data-stu-id="9fb14-209">[HPC on Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) home page</span></span>
- <span data-ttu-id="9fb14-210">Panoramica di [Big Compute: HPC e Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span><span class="sxs-lookup"><span data-stu-id="9fb14-210">Overview of [Big Compute: HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span></span>