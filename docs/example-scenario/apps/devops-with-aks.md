---
title: DevOps con Jenkins e il servizio Kubernetes di Azure
description: Soluzione collaudata per creare una pipeline DevOps per un'app Web Node.js con Jenkins, Registro contenitori di Azure, il servizio Kubernetes di Azure, Cosmos DB e Grafana.
author: iainfoulds
ms.date: 07/05/2018
ms.openlocfilehash: 9dbd1cb335f1c03c54ea342466594048e907d040
ms.sourcegitcommit: 5d99b195388b7cabba383c49a81390ac48f86e8a
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 07/06/2018
ms.locfileid: "37891337"
---
# <a name="deploy-a-container-based-devops-pipeline-for-modern-application-development-with-jenkins-and-azure-kubernetes-service"></a><span data-ttu-id="e9c20-103">Distribuire una pipeline DevOps basata su contenitori per lo sviluppo di applicazioni moderne con Jenkins e il servizio Kubernetes di Azure</span><span class="sxs-lookup"><span data-stu-id="e9c20-103">Deploy a container-based DevOps pipeline for modern application development with Jenkins and Azure Kubernetes Service</span></span>

<span data-ttu-id="e9c20-104">Questo scenario di esempio è applicabile ad aziende che vogliono modernizzare lo sviluppo di applicazioni usando contenitori e flussi di lavoro DevOps.</span><span class="sxs-lookup"><span data-stu-id="e9c20-104">This example scenario is applicable to businesses that want to modernize application development by using containers and DevOps workflows.</span></span> <span data-ttu-id="e9c20-105">In questa soluzione, un'app Web Node.js viene compilata e distribuita tramite Jenkins in un'istanza di Registro contenitori di Azure e nel servizio Kubernetes di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-105">In this solution, a Node.js web app is built and deployed by Jenkins into an Azure Container Registry and Azure Kubernetes Service.</span></span> <span data-ttu-id="e9c20-106">Per un livello database distribuito a livello globale, viene usato Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e9c20-106">For a globally distributed database tier, Azure Cosmos DB is used.</span></span> <span data-ttu-id="e9c20-107">Per monitorare le prestazioni dell'applicazione e risolvere i relativi problemi, Monitoraggio di Azure si integra con un dashboard e un'istanza di Grafana.</span><span class="sxs-lookup"><span data-stu-id="e9c20-107">To monitor and troubleshoot application performance, Azure Monitor integrates with a Grafana instance and dashboard.</span></span>

<span data-ttu-id="e9c20-108">Gli scenari di applicazione di esempio includono l'implementazione di un ambiente di sviluppo automatizzato, la convalida di nuovi commit di codice e il push di nuove distribuzioni in ambienti di staging o di produzione.</span><span class="sxs-lookup"><span data-stu-id="e9c20-108">Example application scenarios include providing an automated development environment, validating new code commits, and pushing new deployments into staging or production environments.</span></span> <span data-ttu-id="e9c20-109">Generalmente le aziende devono creare e compilare manualmente le applicazioni e gli aggiornamenti e gestire una base di codice monolitica di grande dimensioni.</span><span class="sxs-lookup"><span data-stu-id="e9c20-109">Traditionally, businesses had to manually build and compile applications and updates, and maintain a large, monolithic code base.</span></span> <span data-ttu-id="e9c20-110">Con un approccio moderno allo sviluppo di applicazioni con integrazione continua e distribuzione continua, è possibile compilare, testare e distribuire servizi più rapidamente.</span><span class="sxs-lookup"><span data-stu-id="e9c20-110">With a modern approach to application development that uses continuous integration (CI) and continuous deployment (CD), you can more quickly build, test, and deploy services.</span></span> <span data-ttu-id="e9c20-111">Questo approccio moderno consente di rilasciare applicazioni e aggiornamenti ai clienti più velocemente e di rispondere a esigenze aziendali mutevoli con maggiore flessibilità.</span><span class="sxs-lookup"><span data-stu-id="e9c20-111">This modern approach lets you release applications and updates to your customers faster, and respond to changing business demands in a more agile manner.</span></span>

<span data-ttu-id="e9c20-112">Con servizi di Azure come il servizio Kubernetes di Azure, Registro contenitori e Cosmos DB, le aziende possono usare le tecniche e gli strumenti di sviluppo di applicazioni più innovativi per semplificare il processo di implementazione della disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="e9c20-112">By using Azure services such as Azure Kubernetes Service, Container Registry, and Cosmos DB, companies can use the latest in application development techniques and tools to simplify the process of implementing high availability.</span></span>

## <a name="potential-use-cases"></a><span data-ttu-id="e9c20-113">Potenziali casi d'uso</span><span class="sxs-lookup"><span data-stu-id="e9c20-113">Potential use cases</span></span>

<span data-ttu-id="e9c20-114">Prendere in considerazione questa soluzione per i casi d'uso seguenti:</span><span class="sxs-lookup"><span data-stu-id="e9c20-114">Consider this solution for the following use cases:</span></span>

* <span data-ttu-id="e9c20-115">Modernizzazione delle procedure di sviluppo di applicazioni con un approccio basato su contenitori e microservizi.</span><span class="sxs-lookup"><span data-stu-id="e9c20-115">Modernizing application development practices to a microservices, container-based approach.</span></span>
* <span data-ttu-id="e9c20-116">Velocizzazione dei cicli di vita di sviluppo e di distribuzione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e9c20-116">Speeding up application development and deployment lifecycles.</span></span>
* <span data-ttu-id="e9c20-117">Automazione delle distribuzioni in ambienti di testing o di accettazione per la convalida.</span><span class="sxs-lookup"><span data-stu-id="e9c20-117">Automating deployments to test or acceptance environments for validation.</span></span>

## <a name="architecture"></a><span data-ttu-id="e9c20-118">Architettura</span><span class="sxs-lookup"><span data-stu-id="e9c20-118">Architecture</span></span>

![Panoramica dell'architettura dei componenti di Azure coinvolti in una soluzione DevOps con Jenkins, Registro contenitori di Azure e il servizio Kubernetes di Azure][architecture]

<span data-ttu-id="e9c20-120">Questa soluzione include una pipeline DevOps per un'applicazione Web Node.js e un database back-end.</span><span class="sxs-lookup"><span data-stu-id="e9c20-120">This solution covers a DevOps pipeline for a Node.js web application and database backend.</span></span> <span data-ttu-id="e9c20-121">Il flusso dei dati attraverso la soluzione avviene come segue:</span><span class="sxs-lookup"><span data-stu-id="e9c20-121">The data flows through the solution as follows:</span></span>

1. <span data-ttu-id="e9c20-122">Uno sviluppatore apporta modifiche al codice sorgente dell'applicazione Web Node.js.</span><span class="sxs-lookup"><span data-stu-id="e9c20-122">A developer makes changes to the Node.js web application source code.</span></span>
2. <span data-ttu-id="e9c20-123">Viene eseguito il commit della modifica al codice in un repository di controllo del codice sorgente, come GitHub.</span><span class="sxs-lookup"><span data-stu-id="e9c20-123">The code change is committed to a source control respository, such as GitHub.</span></span>
3. <span data-ttu-id="e9c20-124">Per avviare il processo di integrazione continua, un webhook GitHub attiva la compilazione di un progetto Jenkins.</span><span class="sxs-lookup"><span data-stu-id="e9c20-124">To start the continuous integration (CI) process, a GitHub webhook triggers a Jenkins project build.</span></span>
4. <span data-ttu-id="e9c20-125">Il processo di compilazione Jenkins usa un agente di compilazione dinamico nel servizio Kubernetes di Azure per eseguire un processo di compilazione di contenitori.</span><span class="sxs-lookup"><span data-stu-id="e9c20-125">The Jenkins build job uses a dynamic build agent in Azure Kubernetes Service to perform a container build process.</span></span>
5. <span data-ttu-id="e9c20-126">Viene creata un'immagine del contenitore dal codice nel controllo del codice sorgente e ne viene quindi eseguito il push in un'istanza di Registro contenitori di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-126">A container image is created from the code in source control, and is then pushed to an Azure Container Registry.</span></span>
6. <span data-ttu-id="e9c20-127">Tramite funzionalità di distribuzione continua, Jenkins distribuisce questa immagine del contenitore aggiornata nel cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="e9c20-127">Through continuous deployment (CD), Jenkins deploys this updated container image to the Kubernetes cluster.</span></span>
7. <span data-ttu-id="e9c20-128">L'applicazione Web Node.js usa Azure Cosmos DB come back-end.</span><span class="sxs-lookup"><span data-stu-id="e9c20-128">The Node.js web application uses Azure Cosmos DB as it's backend.</span></span> <span data-ttu-id="e9c20-129">Sia Cosmos DB che il servizio Kubernetes di Azure segnalano le metriche a Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-129">Both Cosmos DB and Azure Kubernetes Service report metrics to Azure Monitor.</span></span>
8. <span data-ttu-id="e9c20-130">Un'istanza di Grafana offre dashboard visivi delle prestazioni dell'applicazione in base ai dati provenienti da Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-130">A Grafana instance provides visual dashboards of the application performance based on the data from Azure Monitor.</span></span>

### <a name="components"></a><span data-ttu-id="e9c20-131">Componenti</span><span class="sxs-lookup"><span data-stu-id="e9c20-131">Components</span></span>

* <span data-ttu-id="e9c20-132">[Jenkins][jenkins] è un server di automazione open source che può integrarsi con i servizi di Azure per supportare l'integrazione continua e la distribuzione continua.</span><span class="sxs-lookup"><span data-stu-id="e9c20-132">[Jenkins][jenkins] is an open-source automation server that can integrate with Azure services to enable continuous integration (CI) and continuous deployment (CD).</span></span> <span data-ttu-id="e9c20-133">In questa soluzione, Jenkins orchestra la creazione di nuove immagini del contenitore in base ai commit nel controllo del codice sorgente, esegue il push di tali immagini in Registro contenitori di Azure e quindi aggiorna le istanze dell'applicazione nel servizio Kubernetes di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-133">In this solution, Jenkins orchestrates the creation of new container images based on commits to source control, pushes those images to Azure Container Registry, then updates application instances in Azure Kubernetes Service.</span></span>
* <span data-ttu-id="e9c20-134">[Macchine virtuali Linux di Azure][azurevm-docs] vengono usate per eseguire le istanze di Jenkins e Grafana.</span><span class="sxs-lookup"><span data-stu-id="e9c20-134">[Azure Linux Virtual Machines][azurevm-docs] are used to run the Jenkins and Grafana instances.</span></span>
* <span data-ttu-id="e9c20-135">[Registro contenitori di Azure][azureacr-docs] archivia e gestisce le immagini del contenitore usate dal cluster del servizio Kubernetes di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-135">[Azure Container Registry][azureacr-docs] stores and manages container images that are used by the Azure Kubernetes Service cluster.</span></span> <span data-ttu-id="e9c20-136">Le immagini vengono archiviate in modo sicuro e possono essere replicate dalla piattaforma Azure in altre aree per ridurre i tempi di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e9c20-136">Images are securely stored, and can replicated to other regions by the Azure platform to speed up deployment times.</span></span>
* <span data-ttu-id="e9c20-137">Il [servizio Kubernetes di Azure][azureaks-docs] è una piattaforma Kubernetes gestita che consente di distribuire e gestire applicazioni in contenitori senza competenze nell'orchestrazione di contenitori.</span><span class="sxs-lookup"><span data-stu-id="e9c20-137">[Azure Kubernetes Service][azureaks-docs] is a managed Kubernetes platform that lets you deploy and manage containerized applications without container orchestration expertise.</span></span> <span data-ttu-id="e9c20-138">Come servizio Kubernetes ospitato, Azure gestisce attività critiche quali il monitoraggio dell'integrità e la manutenzione per l'utente.</span><span class="sxs-lookup"><span data-stu-id="e9c20-138">As a hosted Kubernetes service, Azure handles critical tasks like health monitoring and maintenance for you.</span></span>
* <span data-ttu-id="e9c20-139">[Azure Cosmos DB][azurecosmosdb-docs] è un database multimodello distribuito a livello globale che consente di scegliere tra vari modelli di database e di coerenza in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="e9c20-139">[Azure Cosmos DB][azurecosmosdb-docs] is a globally distributed, multi-model database that allows you to choose from various database and consistency models to suit your needs.</span></span> <span data-ttu-id="e9c20-140">Con Cosmos DB è possibile eseguire la replica dei dati a livello globale e non è necessario distribuire e configurare componenti di replica o gestione cluster.</span><span class="sxs-lookup"><span data-stu-id="e9c20-140">With Cosmos DB, your data can be globally replicated, and there is no cluster management or replication components to deploy and configure.</span></span>
* <span data-ttu-id="e9c20-141">[Monitoraggio di Azure][azuremonitor-docs] consente di tenere traccia delle prestazioni, gestire la sicurezza e identificare le tendenze.</span><span class="sxs-lookup"><span data-stu-id="e9c20-141">[Azure Monitor][azuremonitor-docs] helps you track performance, maintain security, and identify trends.</span></span> <span data-ttu-id="e9c20-142">Le metriche ottenute da Monitoraggio possono essere usate da altri strumenti e risorse, come Grafana.</span><span class="sxs-lookup"><span data-stu-id="e9c20-142">Metrics obtained by Monitor can be used by other resources and tools, such as Grafana.</span></span>
* <span data-ttu-id="e9c20-143">[Grafana][grafana] è una soluzione open source per l'esecuzione di query, la visualizzazione, la generazione di avvisi e la comprensione delle metriche.</span><span class="sxs-lookup"><span data-stu-id="e9c20-143">[Grafana][grafana] is an open-source solution to query, visualize, alert, and understand metrics.</span></span> <span data-ttu-id="e9c20-144">Un plug-in di origine dati per Monitoraggio di Azure consente a Grafana di creare dashboard visivi per monitorare le prestazioni delle applicazioni che vengono eseguite nel servizio Kubernetes di Azure e usano Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e9c20-144">A data source plugin for Azure Monitor allows Grafana to create visual dashboards to monitor the performance of your applications running in Azure Kubernetes Service and using Cosmos DB.</span></span>

### <a name="alternatives"></a><span data-ttu-id="e9c20-145">Alternative</span><span class="sxs-lookup"><span data-stu-id="e9c20-145">Alternatives</span></span>

* <span data-ttu-id="e9c20-146">[Visual Studio Team Services][vsts] e Team Foundation Server consentono di implementare una pipeline di integrazione, test e distribuzione continui per qualsiasi app.</span><span class="sxs-lookup"><span data-stu-id="e9c20-146">[Visual Studio Team Services][vsts] and Team Foundation Server help you implement a continuous integration (CI), test, and deployment (CD) pipeline for any app.</span></span>
* <span data-ttu-id="e9c20-147">[Kubernetes][kubernetes] può essere eseguito direttamente in VM di Azure anziché tramite un servizio gestito, se si vuole ottenere maggiore controllo sul cluster.</span><span class="sxs-lookup"><span data-stu-id="e9c20-147">[Kubernetes][kubernetes] can be run directly on Azure VMs instead of via a managed service if you would like more control over the cluster.</span></span>
* <span data-ttu-id="e9c20-148">[Service Fabric][service-fabric] è un altro agente di orchestrazione di contenitori che può sostituire il servizio Kubernetes di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-148">[Service Fabric][service-fabric] is another alternate container orchestrator that can replace AKS.</span></span>

## <a name="considerations"></a><span data-ttu-id="e9c20-149">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="e9c20-149">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="e9c20-150">Disponibilità</span><span class="sxs-lookup"><span data-stu-id="e9c20-150">Availability</span></span>

<span data-ttu-id="e9c20-151">Per monitorare le prestazioni dell'applicazione e segnalare i problemi, questa soluzione combina Monitoraggio di Azure e Grafana per offrire dashboard visivi.</span><span class="sxs-lookup"><span data-stu-id="e9c20-151">To monitor your application performance and report on issues, this solution combines Azure Monitor with Grafana for visual dashboards.</span></span> <span data-ttu-id="e9c20-152">Questi strumenti consentono il monitoraggio e la risoluzione dei problemi di prestazioni che potrebbero richiedere aggiornamenti del codice, che possono quindi essere distribuiti tutti con la pipeline di integrazione continua/distribuzione continua.</span><span class="sxs-lookup"><span data-stu-id="e9c20-152">These tools let you monitor and troubleshoot performance issues that may require code updates, which can all then be deployed with the CI/CD pipeline.</span></span>

<span data-ttu-id="e9c20-153">Nell'ambito del cluster del servizio Kubernetes di Azure, un servizio di bilanciamento del carico distribuisce il traffico dell'applicazione a uno o più contenitori (pod) in cui viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="e9c20-153">As part of the Azure Kubernetes Service cluster, a load balancer distributes application traffic to one or more containers (pods) that run your application.</span></span> <span data-ttu-id="e9c20-154">Questo approccio per l'esecuzione di applicazioni in contenitori in Kubernetes offre un'infrastruttura a disponibilità elevata per i clienti.</span><span class="sxs-lookup"><span data-stu-id="e9c20-154">This approach to running containerized applications in Kubernetes provides a highly-available infrastructure for your customers.</span></span>

<span data-ttu-id="e9c20-155">Per altri argomenti relativi alla scalabilità, vedere l'[elenco di controllo per la disponibilità][availability] in Centro architetture.</span><span class="sxs-lookup"><span data-stu-id="e9c20-155">For other scalability topics, see the [availability checklist][availability] available in the architecure center.</span></span>

### <a name="scalability"></a><span data-ttu-id="e9c20-156">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="e9c20-156">Scalability</span></span>

<span data-ttu-id="e9c20-157">Il servizio Kubernetes di Azure consente di ridimensionare il numero di nodi del cluster in base alle esigenze delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e9c20-157">Azure Kubernetes Service lets you scale the number of cluster nodes to meet the demands of your applications.</span></span> <span data-ttu-id="e9c20-158">Con la crescita dell'applicazione, è possibile aumentare il numero di nodi Kubernetes che eseguono il servizio.</span><span class="sxs-lookup"><span data-stu-id="e9c20-158">As your application increases, you can scale out the number of Kubernetes nodes that run your service.</span></span>

<span data-ttu-id="e9c20-159">I dati dell'applicazione vengono archiviati in Azure Cosmos DB, un database multimodello con distribuzione e scalabilità a livello globale.</span><span class="sxs-lookup"><span data-stu-id="e9c20-159">Application data is stored in Azure Cosmos DB, a globally distributed, multi-model database that can scale globally.</span></span> <span data-ttu-id="e9c20-160">Con Cosmos DB non è necessario ridimensionare l'infrastruttura come con i componenti di database tradizionali ed è possibile scegliere di eseguire la replica di Cosmos DB a livello globale per soddisfare le esigenze dei clienti.</span><span class="sxs-lookup"><span data-stu-id="e9c20-160">Cosmos DB abstracts the need to scale your  infrastructure as with traditional database components, and you can choose to replicate your Cosmos DB globally to meet the demands of your customers.</span></span>

<span data-ttu-id="e9c20-161">Per altri argomenti relativi alla scalabilità, vedere l'[elenco di controllo per la scalabilità][scalability] disponibile in Centro architetture.</span><span class="sxs-lookup"><span data-stu-id="e9c20-161">For other scalability topics, see the [scalability checklist][scalability] available in the architecure center.</span></span>

### <a name="security"></a><span data-ttu-id="e9c20-162">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="e9c20-162">Security</span></span>

<span data-ttu-id="e9c20-163">Per ridurre al minimo la superficie di attacco, questa soluzione non espone l'istanza di VM Jenkins tramite HTTP.</span><span class="sxs-lookup"><span data-stu-id="e9c20-163">To minimize the attack footprint, this solutions does not expose the Jenkins VM instance over HTTP.</span></span> <span data-ttu-id="e9c20-164">Per tutte le attività di gestione che richiedono l'interazione con Jenkins, si crea una connessione remota sicura usando un tunnel SSH dal computer locale.</span><span class="sxs-lookup"><span data-stu-id="e9c20-164">For any management tasks that require you to interact with Jenkins, you create a secure remote connection using an SSH tunnel from your local machine.</span></span> <span data-ttu-id="e9c20-165">Per le istanze di VM Jenkins e Grafana è consentita solo l'autenticazione con chiave pubblica SSH.</span><span class="sxs-lookup"><span data-stu-id="e9c20-165">Only SSH public key authentication is allowed for the Jenkins and Grafana VM instances.</span></span> <span data-ttu-id="e9c20-166">Gli accessi basati su password sono disabilitati.</span><span class="sxs-lookup"><span data-stu-id="e9c20-166">Password-based logins are disabled.</span></span> <span data-ttu-id="e9c20-167">Per altre informazioni, vedere [Eseguire un server Jenkins in Azure](../../reference-architectures/jenkins/index.md).</span><span class="sxs-lookup"><span data-stu-id="e9c20-167">For more information, see [Run a Jenkins server on Azure](../../reference-architectures/jenkins/index.md).</span></span>

<span data-ttu-id="e9c20-168">Per la separazione delle credenziali e delle autorizzazioni, questa soluzione usa un'entità servizio dedicata di Azure Active Directory (AD).</span><span class="sxs-lookup"><span data-stu-id="e9c20-168">For separation of credentials and permissions, this solution uses a dedicated Azure Active Directory (AD) service principal.</span></span> <span data-ttu-id="e9c20-169">Le credenziali per questa entità servizio vengono archiviate come oggetto credenziali sicuro in Jenkins in modo che non siano direttamente esposte e visibili negli script o nella pipeline di compilazione.</span><span class="sxs-lookup"><span data-stu-id="e9c20-169">The credentials for this service principal are stored as a secure credential object in Jenkins so that they are not directly exposed and visible within scripts or the build pipeline.</span></span>

<span data-ttu-id="e9c20-170">Per indicazioni generali sulla progettazione di soluzioni sicure, vedere la [documentazione sulla sicurezza di Azure][security].</span><span class="sxs-lookup"><span data-stu-id="e9c20-170">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="e9c20-171">Resilienza</span><span class="sxs-lookup"><span data-stu-id="e9c20-171">Resiliency</span></span>

<span data-ttu-id="e9c20-172">Questa soluzione usa il servizio Kubernetes di Azure per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e9c20-172">This solution uses Azure Kubernetes Service for your application.</span></span> <span data-ttu-id="e9c20-173">In Kubernetes sono integrati componenti di resilienza che monitorano e riavviano i contenitori (pod) in caso di problemi.</span><span class="sxs-lookup"><span data-stu-id="e9c20-173">Built into Kubernetes are resiliency components that monitor and restart the containers (pods) if there is an issue.</span></span> <span data-ttu-id="e9c20-174">Con l'esecuzione di più nodi Kubernetes, l'applicazione può tollerare l'indisponibilità di un pod o un nodo.</span><span class="sxs-lookup"><span data-stu-id="e9c20-174">Combined with running multiple Kubernetes nodes, your application can tolerate a pod or node being unavailable.</span></span>

<span data-ttu-id="e9c20-175">Per indicazioni generali sulla progettazione di soluzioni resilienti, vedere [Progettazione di applicazioni resilienti per Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="e9c20-175">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="e9c20-176">Distribuire la soluzione</span><span class="sxs-lookup"><span data-stu-id="e9c20-176">Deploy the solution</span></span>

<span data-ttu-id="e9c20-177">**Prerequisiti**</span><span class="sxs-lookup"><span data-stu-id="e9c20-177">**Prerequisites.**</span></span>

* <span data-ttu-id="e9c20-178">È necessario un account Azure esistente.</span><span class="sxs-lookup"><span data-stu-id="e9c20-178">You must have an existing Azure account.</span></span> <span data-ttu-id="e9c20-179">Se non si ha una sottoscrizione di Azure, creare un [account gratuito](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) prima di iniziare.</span><span class="sxs-lookup"><span data-stu-id="e9c20-179">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
* <span data-ttu-id="e9c20-180">È necessaria una coppia di chiavi con chiave pubblica SSH.</span><span class="sxs-lookup"><span data-stu-id="e9c20-180">You need an SSH public key pair.</span></span> <span data-ttu-id="e9c20-181">Per la procedura per crearne una, vedere [Creare e usare una coppia di chiavi SSH per le macchine virtuali Linux][sshkeydocs].</span><span class="sxs-lookup"><span data-stu-id="e9c20-181">For steps on how to create a public key pair, see [Create and use an SSH key pair for Linux VMs][sshkeydocs].</span></span>
* <span data-ttu-id="e9c20-182">È necessaria un'entità servizio di Azure Active Directory (AD) per l'autenticazione del servizio e delle risorse.</span><span class="sxs-lookup"><span data-stu-id="e9c20-182">You need an Azure Active Directory (AD) service principal for the authentication of service and resources.</span></span> <span data-ttu-id="e9c20-183">Se necessario, è possibile creare un'entità servizio con [az ad sp create-for-rbac][createsp].</span><span class="sxs-lookup"><span data-stu-id="e9c20-183">If needed, you can create a service principal with [az ad sp create-for-rbac][createsp]</span></span>

    ```azurecli-interactive
    az ad sp create-for-rbac --name myDevOpsSolution
    ```

    <span data-ttu-id="e9c20-184">Prendere nota dei valori di *appId* e *password* nell'output di questo comando,</span><span class="sxs-lookup"><span data-stu-id="e9c20-184">Make a note of the *appId* and *password* in the output from this command.</span></span> <span data-ttu-id="e9c20-185">perché verranno passati al modello durante la distribuzione della soluzione.</span><span class="sxs-lookup"><span data-stu-id="e9c20-185">You provide these values to the template when you deploy the solution.</span></span>

<span data-ttu-id="e9c20-186">Per distribuire la soluzione con un modello di Azure Resource Manager, seguire questa procedura.</span><span class="sxs-lookup"><span data-stu-id="e9c20-186">To deploy this solution with an Azure Resource Manager template, perform the following steps.</span></span>

1. <span data-ttu-id="e9c20-187">Fare clic sul pulsante **Distribuisci in Azure**:</span><span class="sxs-lookup"><span data-stu-id="e9c20-187">Click the **Deploy to Azure** button:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fsolution-architectures%2Fmaster%2Fapps%2Fdevops-with-aks%2Fazuredeploy.json" target="_blank"><img src="https://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="e9c20-188">Attendere l'apertura della distribuzione del modello nel portale di Azure e quindi completare la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="e9c20-188">Wait for the template deployment to open in the Azure portal, then complete the following steps:</span></span>
   * <span data-ttu-id="e9c20-189">Scegliere **Crea nuovo** per creare un nuovo gruppo di risorse e quindi specificare un nome, ad esempio *myAKSDevOpsSolution*, nella casella di testo.</span><span class="sxs-lookup"><span data-stu-id="e9c20-189">Choose to **Create new** resource group, then provide a name such as *myAKSDevOpsSolution* in the text box.</span></span>
   * <span data-ttu-id="e9c20-190">Selezionare un'area nella casella a discesa **Località**.</span><span class="sxs-lookup"><span data-stu-id="e9c20-190">Select a region from the **Location** drop-down box.</span></span>
   * <span data-ttu-id="e9c20-191">Immettere l'ID app e la password dell'entità servizio ottenuti con il comando `az ad sp create-for-rbac`.</span><span class="sxs-lookup"><span data-stu-id="e9c20-191">Enter your service principal app ID and password from the `az ad sp create-for-rbac` command.</span></span>
   * <span data-ttu-id="e9c20-192">Specificare un nome utente e una password sicura per l'istanza di Jenkins e la console di Grafana.</span><span class="sxs-lookup"><span data-stu-id="e9c20-192">Provide a username and secure password for the Jenkins instance and Grafana console.</span></span>
   * <span data-ttu-id="e9c20-193">Specificare una chiave SSH per proteggere gli accessi alle VM Linux.</span><span class="sxs-lookup"><span data-stu-id="e9c20-193">Provide an SSH key to secure logins to the Linux VMs.</span></span>
   * <span data-ttu-id="e9c20-194">Esaminare le condizioni e quindi selezionare **Accetto le condizioni riportate sopra**.</span><span class="sxs-lookup"><span data-stu-id="e9c20-194">Review the terms and conditions, then check **I agree to the terms and conditions stated above**.</span></span>
   * <span data-ttu-id="e9c20-195">Selezionare il pulsante **Acquista**.</span><span class="sxs-lookup"><span data-stu-id="e9c20-195">Select the **Purchase** button.</span></span>

<span data-ttu-id="e9c20-196">Il completamento della distribuzione può richiedere 15-20 minuti.</span><span class="sxs-lookup"><span data-stu-id="e9c20-196">It can take 15-20 minutes for the deployment to complete.</span></span>

## <a name="pricing"></a><span data-ttu-id="e9c20-197">Prezzi</span><span class="sxs-lookup"><span data-stu-id="e9c20-197">Pricing</span></span>

<span data-ttu-id="e9c20-198">Per esaminare il costo di esecuzione della soluzione, nel calcolatore dei costi sono preconfigurati tutti i servizi.</span><span class="sxs-lookup"><span data-stu-id="e9c20-198">To explore the cost of running this solution, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="e9c20-199">Per verificare la variazione dei prezzi per un determinato caso d'uso, modificare le variabili appropriate in base</span><span class="sxs-lookup"><span data-stu-id="e9c20-199">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected traffic.</span></span> <span data-ttu-id="e9c20-200">al traffico previsto.</span><span class="sxs-lookup"><span data-stu-id="e9c20-200">match your expected traffic.</span></span>

<span data-ttu-id="e9c20-201">Sono stati definiti tre profili di costo di esempio in base al numero di immagini di contenitori da archiviare e ai nodi Kubernetes per l'esecuzione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e9c20-201">We have provided three sample cost profiles based on the number of container images to store and Kubernetes nodes to run your applications.</span></span>

* <span data-ttu-id="e9c20-202">[Small][small-pricing]: correlato a 1000 compilazioni di contenitori al mese.</span><span class="sxs-lookup"><span data-stu-id="e9c20-202">[Small][small-pricing]: this correlates to 1000 container builds per month.</span></span>
* <span data-ttu-id="e9c20-203">[Medium][medium-pricing]: correlato a 100.000 compilazioni di contenitori al mese.</span><span class="sxs-lookup"><span data-stu-id="e9c20-203">[Medium][medium-pricing]: this correlates to 100,000 container builds per month.</span></span>
* <span data-ttu-id="e9c20-204">[Large][large-pricing]: correlato a 1.000.000 compilazioni di contenitori al mese.</span><span class="sxs-lookup"><span data-stu-id="e9c20-204">[Large][large-pricing]: this correlates to 1,000,000 container builds per month.</span></span>

## <a name="related-resources"></a><span data-ttu-id="e9c20-205">Risorse correlate</span><span class="sxs-lookup"><span data-stu-id="e9c20-205">Related Resources</span></span>

<span data-ttu-id="e9c20-206">In questa soluzione sono stati usati Registro contenitori di Azure e il servizio Kubernetes di Azure per archiviare ed eseguire applicazioni basate su contenitori.</span><span class="sxs-lookup"><span data-stu-id="e9c20-206">This solution used Azure Container Registry and Azure Kubernetes Service to store and run your container-based applications.</span></span> <span data-ttu-id="e9c20-207">Per eseguire applicazioni basate su contenitori senza dover effettuare il provisioning di componenti di orchestrazione, è anche possibile usare Istanze di contenitore di Azure.</span><span class="sxs-lookup"><span data-stu-id="e9c20-207">Azure Container Instances can also be used to run container-based applications, without having to provision any orchestration components.</span></span> <span data-ttu-id="e9c20-208">Per altre informazioni, vedere la [panoramica di Istanze di contenitore di Azure][azureaci-docs].</span><span class="sxs-lookup"><span data-stu-id="e9c20-208">For more information, see [Azure Container Instances overview][azureaci-docs].</span></span>

<!-- links -->
[architecture]: ./media/devops-with-aks/architecture-devops-with-aks.png
[autoscaling]: ../../best-practices/auto-scaling.md
[availability]: ../../checklist/availability.md
[azureaci-docs]: /azure/container-instances/container-instances-overview
[azureacr-docs]: /azure/container-registry/container-registry-intro
[azurecosmosdb-docs]: /azure/cosmos-db/introduction
[azureaks-docs]: /azure/aks/intro-kubernetes
[azuremonitor-docs]: /azure/monitoring-and-diagnostics/monitoring-overview
[azurevm-docs]: /azure/virtual-machines/linux/overview
[createsp]: /cli/azure/ad/sp#az-ad-sp-create
[grafana]: https://grafana.com/
[jenkins]: https://jenkins.io/
[resiliency]: ../../resiliency/index.md
[resource-groups]: /azure/azure-resource-manager/resource-group-overview
[security]: /azure/security/
[scalability]: ../../checklist/scalability.md
[sshkeydocs]: /azure/virtual-machines/linux/mac-create-ssh-keys
[vsts]: /vsts/?view=vsts
[kubernetes]: https://kubernetes.io/
[service-fabric]: /azure/service-fabric/

[small-pricing]: https://azure.com/e/841f0a75b1ea4802ba1ac8f7918a71e7
[medium-pricing]: https://azure.com/e/eea0e6d79b4e45618a96d33383ec77ba
[large-pricing]: https://azure.com/e/3faab662c54c473da55a1e93a27e0e64