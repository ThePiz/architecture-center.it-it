---
title: Ripristino di emergenza per le applicazioni basate su Azure
description: Panoramiche tecniche e informazioni approfondite sulla progettazione e la creazione di applicazioni per il ripristino di emergenza in Microsoft Azure.
author: adamglick
ms.date: 05/26/2017
ms.openlocfilehash: d415b27dd7928996e2a6dc7fd8fcf6a77c835768
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="disaster-recovery-for-azure-applications"></a><span data-ttu-id="ef6e5-103">Ripristino di emergenza per le applicazioni basate su Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-103">Disaster recovery for Azure applications</span></span>
<span data-ttu-id="ef6e5-104">La resilienza e le strategie a disponibilità elevata sono state concepite per gestire condizioni di errore temporaneo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-104">Resiliency and high availability strategies are intended to handling temporary failure conditions.</span></span> <span data-ttu-id="ef6e5-105">Il ripristino di emergenza è incentrato sul recupero dalla perdita irreversibile di funzionalità delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-105">Disaster recovery (DR) is focused on recovering from a catastrophic loss of application functionality.</span></span> <span data-ttu-id="ef6e5-106">Se, ad esempio, un'area di Azure che ospita l'applicazione non è più disponibile, è necessario un piano per eseguire l'applicazione o accedere ai dati in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-106">For example, if an Azure region hosting your application becomes unavailable, you need a plan for running your application or accessing your data in another region.</span></span> <span data-ttu-id="ef6e5-107">L'esecuzione di questo piano prevede l'impiego di persone, processi e applicazioni di supporto che consentono al sistema di continuare a funzionare.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-107">Executing this plan involves people, processes, and supporting applications that allow the system to continue functioning.</span></span> <span data-ttu-id="ef6e5-108">Per verificare che sia valido, il piano deve includere le prove di errore e il test del ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-108">Your plan should include rehearsing failures and testing the recovery of databases to ensure the plan is sound.</span></span> <span data-ttu-id="ef6e5-109">Il livello di funzionalità del servizio richiesto durante un'emergenza è determinato dai proprietari dei processi aziendali e delle tecnologie, che definiscono le modalità operative del sistema in caso di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-109">The business and technology owners who define the system's operational mode for a disaster also determine the level of service functionality required during a disaster.</span></span> <span data-ttu-id="ef6e5-110">Questo livello di funzionalità può assumere forme diverse e prevedere la completa indisponibilità, una disponibilità parziale, con funzionalità ridotte o ritardi nell'elaborazione, o la disponibilità completa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-110">This level of functionality can take a few forms: completely unavailable, partially available via reduced functionality or delayed processing, or fully available.</span></span>

## <a name="azure-disaster-recovery-features"></a><span data-ttu-id="ef6e5-111">Funzionalità del ripristino di emergenza in Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-111">Azure disaster recovery features</span></span>
<span data-ttu-id="ef6e5-112">Come per la disponibilità, Azure offre [indicazioni tecniche sulla resilienza](./index.md) concepite per supportare il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-112">As with availability considerations, Azure provides [resiliency technical guidance](./index.md) designed to support disaster recovery.</span></span> <span data-ttu-id="ef6e5-113">Esiste anche un rapporto tra le funzionalità di disponibilità di Azure e il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-113">There is also a relationship between availability features of Azure and disaster recovery.</span></span> <span data-ttu-id="ef6e5-114">Ad esempio, la gestione dei ruoli tra domini di errore aumenta la disponibilità di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-114">For example, the management of roles across fault domains increases the availability of an application.</span></span> <span data-ttu-id="ef6e5-115">Senza questo tipo di gestione, un errore hardware non gestito diventerebbe uno scenario di "emergenza".</span><span class="sxs-lookup"><span data-stu-id="ef6e5-115">Without that management, an unhandled hardware failure would become a “disaster” scenario.</span></span> <span data-ttu-id="ef6e5-116">L'applicazione corretta delle funzionalità e delle strategie di disponibilità deve essere considerata una parte importante delle iniziative per rendere le applicazioni a prova di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-116">Leveraging these availability features and strategies is an important part of disaster-proofing your application.</span></span> <span data-ttu-id="ef6e5-117">Questo articolo, tuttavia, va oltre i problemi generali relativi alla disponibilità per illustrare eventi di emergenza più gravi e più rari.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-117">However, this article goes beyond general availability issues to more serious (and rarer) disaster events.</span></span>

## <a name="multiple-datacenter-regions"></a><span data-ttu-id="ef6e5-118">Più aree di data center</span><span class="sxs-lookup"><span data-stu-id="ef6e5-118">Multiple datacenter regions</span></span>
<span data-ttu-id="ef6e5-119">I data center di Azure sono dislocati in diverse aree del mondo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-119">Azure maintains datacenters in many regions around the world.</span></span> <span data-ttu-id="ef6e5-120">Questa infrastruttura supporta diversi scenari di ripristino di emergenza, ad esempio la replica geografica fornita dal sistema di Archiviazione di Azure nelle aree secondarie.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-120">This infrastructure supports several disaster recovery scenarios, such as system-provided geo-replication of Azure Storage to secondary regions.</span></span> <span data-ttu-id="ef6e5-121">È inoltre possibile distribuire in modo semplice ed economico un servizio cloud in diverse località del mondo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-121">You can also easily and inexpensively deploy a cloud service to multiple locations around the world.</span></span> <span data-ttu-id="ef6e5-122">È utile confrontare questo con i costi e le difficoltà correlate alla creazione e alla gestione di data center propri in più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-122">Compare this with the cost and difficulty of building and maintaining your own datacenters in multiple regions.</span></span> <span data-ttu-id="ef6e5-123">La distribuzione di dati e servizi in più aree consente di proteggere l'applicazione dal rischio di gravi interruzioni in una singola area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-123">Deploying data and services to multiple regions helps protect your application from a major outage in a single region.</span></span> <span data-ttu-id="ef6e5-124">Quando si progetta il piano di ripristino di emergenza, è importante comprendere il concetto di aree abbinate.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-124">As you design your disaster recovery plan, it’s important to understand the concept of paired regions.</span></span> <span data-ttu-id="ef6e5-125">Per altre informazioni, vedere [Continuità aziendale e ripristino di emergenza nelle aree geografiche abbinate di Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-125">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

## <a name="azure-traffic-manager"></a><span data-ttu-id="ef6e5-126">Gestione traffico di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-126">Azure Traffic Manager</span></span>
<span data-ttu-id="ef6e5-127">Quando si verifica un problema specifico di un'area, è necessario reindirizzare il traffico a servizi o distribuzioni in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-127">When a region-specific failure occurs, you must redirect traffic to services or deployments in another region.</span></span> <span data-ttu-id="ef6e5-128">Questa operazione risulta più efficace se eseguita tramite servizi, ad esempio Gestione traffico di Azure, che consente di automatizzare il failover del traffico utente in un'altra area se l'area primaria non riesce.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-128">It is most effective to handle this via services such as Azure Traffic Manager, which automates the failover of user traffic to another region if the primary region fails.</span></span> <span data-ttu-id="ef6e5-129">Quando si progetta una strategia di ripristino di emergenza efficace, è importante comprendere le nozioni di base di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-129">Understanding the fundamentals of Traffic Manager is important when designing an effective DR strategy.</span></span>

<span data-ttu-id="ef6e5-130">Gestione traffico usa il sistema DNS (Domain Name System) per indirizzare le richieste del client all'endpoint più appropriato in base a un metodo di routing del traffico e all'integrità degli endpoint.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-130">Traffic Manager uses the Domain Name System (DNS) to direct client requests to the most appropriate endpoint based on a traffic-routing method and the health of the endpoints.</span></span> <span data-ttu-id="ef6e5-131">Nel diagramma seguente gli utenti si connettono a un URL di Gestione traffico (`http://myATMURL.trafficmanager.net`) che astrae gli URL del sito effettivo (`http://app1URL.cloudapp.net` e `http://app2URL.cloudapp.net`).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-131">In the following diagram, users connect to a Traffic Manager URL (`http://myATMURL.trafficmanager.net`) which abstracts the actual site URLs (`http://app1URL.cloudapp.net` and `http://app2URL.cloudapp.net`).</span></span> <span data-ttu-id="ef6e5-132">Le richieste utente vengono indirizzate all'URL sottostante appropriato in base al [metodo di instradamento di Gestione traffico](/azure/traffic-manager/traffic-manager-routing-methods) configurato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-132">User requests are routed to the proper underlying URL based on your configured [Traffic Manager routing method](/azure/traffic-manager/traffic-manager-routing-methods).</span></span> <span data-ttu-id="ef6e5-133">Ai fini di questo articolo si esaminerà solo l'opzione di failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-133">For the sake of this article, we will be concerned with only the failover option.</span></span>

![Routing tramite Gestione traffico di Microsoft Azure](./images/disaster-recovery-azure-applications/routing-using-azure-traffic-manager.png)

<span data-ttu-id="ef6e5-135">Quando si configura Gestione traffico, si fornisce un nuovo prefisso DNS di Gestione traffico che servirà agli utenti per accedere al servizio.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-135">When configuring Traffic Manager, you provide a new Traffic Manager DNS prefix, which users will use to access your service.</span></span> <span data-ttu-id="ef6e5-136">Gestione traffico astrae ora il bilanciamento del carico a un livello superiore rispetto a quello di area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-136">Traffic Manager now abstracts load balancing one level higher that the regional level.</span></span> <span data-ttu-id="ef6e5-137">Viene eseguito il mapping del DNS di Gestione traffico a un CNAME per tutte le distribuzioni gestite.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-137">The Traffic Manager DNS maps to a CNAME for all the deployments that it manages.</span></span>

<span data-ttu-id="ef6e5-138">In Gestione traffico si specifica la priorità delle distribuzioni a cui gli utenti saranno instradati in caso di errori.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-138">Within Traffic Manager, you specify a prioritized list of deployments that users will be routed to when failure occurs.</span></span> <span data-ttu-id="ef6e5-139">Gestione traffico monitora gli endpoint di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-139">Traffic Manager monitors the deployment endpoints.</span></span> <span data-ttu-id="ef6e5-140">Se la distribuzione primaria diventa non disponibile, Gestione traffico indirizza gli utenti alla distribuzione successiva nell'elenco delle priorità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-140">If the primary deployment becomes unavailable, Traffic Manager routes users to the next deployment on the priority list.</span></span>

<span data-ttu-id="ef6e5-141">Nonostante spetti a Gestione traffico scegliere la destinazione in caso di failover, è possibile decidere se il dominio di failover deve essere inattivo o attivo quando non è in modalità di failover. Questa impostazione non è correlata a Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-141">Although Traffic Manager decides where to go during a failover, you can decide whether your failover domain is dormant or active while you're not in failover mode (which is unrelated to Traffic Manager).</span></span> <span data-ttu-id="ef6e5-142">Gestione traffico rileva un errore nel sito primario ed esegue il rollover al sito di failover, anche se gli utenti stanno usando il sito.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-142">Traffic Manager detects a failure in the primary site and rolls over to the failover site, regardless of whether that site is currently serving users.</span></span>

<span data-ttu-id="ef6e5-143">Per altre informazioni sul funzionamento di Gestione traffico, vedere i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="ef6e5-143">For more information on how Azure Traffic Manager works, refer to:</span></span>

* [<span data-ttu-id="ef6e5-144">Panoramica di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="ef6e5-144">Traffic Manager overview</span></span>](/azure/traffic-manager/traffic-manager-overview/)
* [<span data-ttu-id="ef6e5-145">Metodi di routing di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="ef6e5-145">Traffic Manager routing methods</span></span>](/azure/traffic-manager/traffic-manager-routing-methods)
* [<span data-ttu-id="ef6e5-146">Configurare metodo di routing failover</span><span class="sxs-lookup"><span data-stu-id="ef6e5-146">Configure failover routing method</span></span>](/azure/traffic-manager/traffic-manager-configure-failover-routing-method/)

## <a name="azure-disaster-scenarios"></a><span data-ttu-id="ef6e5-147">Scenari di emergenza in Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-147">Azure disaster scenarios</span></span>
<span data-ttu-id="ef6e5-148">Le sezioni seguenti illustrano diversi tipi di scenari di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-148">The following sections cover several different types of disaster scenarios.</span></span> <span data-ttu-id="ef6e5-149">Le interruzioni dei servizi a livello di area non sono l'unica causa di errori a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-149">Region-wide service disruptions are not the only cause of application-wide failures.</span></span> <span data-ttu-id="ef6e5-150">Le interruzioni dei servizi possono essere determinate anche da errori di progettazione o di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-150">Poor design and administrative errors can also lead to outages.</span></span> <span data-ttu-id="ef6e5-151">È importante prendere in considerazione le possibili cause di un errore durante le fasi di progettazione e di test del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-151">It's important to consider the possible causes of a failure during both the design and testing phases of your recovery plan.</span></span> <span data-ttu-id="ef6e5-152">Un buon piano sfrutta le funzionalità di Azure e le integra con strategie specifiche dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-152">A good plan takes advantage of Azure features and augments them with application-specific strategies.</span></span> <span data-ttu-id="ef6e5-153">La risposta scelta è determinata dall'importanza dell'applicazione nonché dagli obiettivi punto di ripristino (RPO) e tempo di ripristino (RTO).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-153">The chosen response is determined by the importance of the application, the recovery point objective (RPO), and the recovery time objective (RTO).</span></span>

### <a name="application-failure"></a><span data-ttu-id="ef6e5-154">Errore dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="ef6e5-154">Application failure</span></span>
<span data-ttu-id="ef6e5-155">Gestione traffico di Microsoft Azure gestisce automaticamente gli errori derivanti dal software del sistema operativo o dall'hardware sottostante della macchina virtuale host.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-155">Azure Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span> <span data-ttu-id="ef6e5-156">Azure crea una nuova istanza del ruolo e la aggiunge al pool disponibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-156">Azure creates a new role instance and adds it to the available pool.</span></span> <span data-ttu-id="ef6e5-157">Se il numero di istanze del ruolo è maggiore di uno, Azure passa l'elaborazione alle altre istanze del ruolo in esecuzione, sostituendo il nodo che non funziona.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-157">If  more than one role instance was already running, Azure shifts processing to the other running role instances while replacing the failed node.</span></span>

<span data-ttu-id="ef6e5-158">Si possono verificare errori gravi di applicazione senza alcun errore dell'hardware o del sistema operativo sottostante.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-158">Serious application errors can occur without any underlying failure of the hardware or operating system.</span></span> <span data-ttu-id="ef6e5-159">L'applicazione può smettere di funzionare a causa di eccezioni irreversibili dovute a logica non corretta o a problemi di integrità dei dati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-159">The application might fail due to catastrophic exceptions caused by bad logic or data integrity issues.</span></span> <span data-ttu-id="ef6e5-160">È necessario integrare dati di telemetria sufficienti nel codice dell'applicazione in modo che un sistema di monitoraggio possa rilevare le condizioni di errore e inviare notifiche a un amministratore dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-160">You must include sufficient telemetry in the application code so that a monitoring system can detect failure conditions and notify an application administrator.</span></span> <span data-ttu-id="ef6e5-161">Un amministratore che conosce bene i processi di ripristino di emergenza può decidere se attivare un processo di failover o accettare un'interruzione della disponibilità durante la risoluzione di errori critici.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-161">An administrator who has full knowledge of the disaster recovery processes can decide whether to trigger a failover process or accept an availability outage while resolving the critical errors.</span></span>

### <a name="data-corruption"></a><span data-ttu-id="ef6e5-162">Danneggiamento dei dati</span><span class="sxs-lookup"><span data-stu-id="ef6e5-162">Data corruption</span></span>
<span data-ttu-id="ef6e5-163">Azure archivia automaticamente i dati del database SQL di Azure e di Archiviazione di Azure tre volte, in modo ridondante, in diversi domini di errore nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-163">Azure automatically stores Azure SQL Database and Azure Storage data three times redundantly within different fault domains in the same region.</span></span> <span data-ttu-id="ef6e5-164">Se si usa la replica geografica, i dati vengono archiviati altre tre volte in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-164">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="ef6e5-165">Se tuttavia gli utenti o l'applicazione danneggiano i dati nella copia primaria, questi vengono replicati rapidamente in altre copie.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-165">However, if your users or your application corrupts that data in the primary copy, the data quickly replicates to the other copies.</span></span> <span data-ttu-id="ef6e5-166">Ciò comporta purtroppo la creazione di più copie di dati danneggiati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-166">Unfortunately, this results in multiple copies of corrupt data.</span></span>

<span data-ttu-id="ef6e5-167">Per gestire il possibile danneggiamento dei dati, sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-167">To manage potential corruption of your data, you have two options.</span></span> <span data-ttu-id="ef6e5-168">Prima di tutto, è possibile gestire una strategia di backup personalizzata.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-168">First, you can manage a custom backup strategy.</span></span> <span data-ttu-id="ef6e5-169">È possibile archiviare i backup in Azure oppure in locale in base ai requisiti aziendali o alle normative di governance.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-169">You can store your backups in Azure or on-premises, depending on your business requirements or governance regulations.</span></span> <span data-ttu-id="ef6e5-170">Un'altra possibilità consiste nell'usare l'opzione Ripristino temporizzato per un database SQL.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-170">Another option is to use the point-in-time restore option to recover a SQL database.</span></span> <span data-ttu-id="ef6e5-171">Per altre informazioni, vedere la sezione [Strategie dei dati per il ripristino di emergenza](#data-strategies-for-disaster-recovery) di seguito.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-171">For more information, see the [data strategies for disaster recovery](#data-strategies-for-disaster-recovery) section below.</span></span>

### <a name="network-outage"></a><span data-ttu-id="ef6e5-172">Interruzione della rete</span><span class="sxs-lookup"><span data-stu-id="ef6e5-172">Network outage</span></span>
<span data-ttu-id="ef6e5-173">Se parti della rete di Azure non sono accessibili, potrebbe non essere possibile accedere all'applicazione o ai dati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-173">When parts of the Azure network are inaccessible, you may be unable to access your application or data.</span></span> <span data-ttu-id="ef6e5-174">Se una o più istanze del ruolo non risultano disponibili a causa di problemi di rete, Azure sfrutta le istanze rimanenti dell'applicazione ancora disponibili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-174">If one or more role instances are unavailable due to network issues, Azure uses the remaining available instances of your application.</span></span> <span data-ttu-id="ef6e5-175">Se l'applicazione non può accedere ai dati a causa di un'interruzione della rete di Azure, è possibile ricorrere all'esecuzione locale in modalità con funzionalità ridotte usando i dati memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-175">If your application cannot access its data because of an Azure network outage, you can potentially run with reduced application functionality locally by using cached data.</span></span> <span data-ttu-id="ef6e5-176">È necessario progettare la strategia di ripristino di emergenza per l'esecuzione con funzionalità ridotte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-176">You need to design the disaster recovery strategy to run with reduced functionality in your application.</span></span> <span data-ttu-id="ef6e5-177">Per alcune applicazioni questa opzione potrebbe non essere praticabile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-177">For some applications, this might not be practical.</span></span>

<span data-ttu-id="ef6e5-178">Un'altra opzione consiste nell'archiviare i dati in una posizione alternativa finché non viene ripristinata la connettività.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-178">Another option is to store data in an alternate location until connectivity is restored.</span></span> <span data-ttu-id="ef6e5-179">Se la modalità con funzionalità ridotte non è praticabile, le opzioni rimanenti sono l'interruzione dell'applicazione o il failover a un'area alternativa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-179">If reducing functionality is not an option, the remaining options are application downtime or failover to an alternate region.</span></span> <span data-ttu-id="ef6e5-180">La progettazione di un'applicazione per l'esecuzione con funzionalità ridotte dipende da considerazioni sia di natura aziendale che tecnica.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-180">The design of an application running with reduced functionality is as much a business decision as a technical one.</span></span> <span data-ttu-id="ef6e5-181">Questi aspetti sono illustrati dettagliatamente nella sezione [Esecuzione delle applicazioni con funzionalità ridotte](#reduced-application-functionality).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-181">This is discussed further in the section on [reduced application functionality](#reduced-application-functionality).</span></span>

### <a name="failure-of-a-dependent-service"></a><span data-ttu-id="ef6e5-182">Errore di un servizio dipendente</span><span class="sxs-lookup"><span data-stu-id="ef6e5-182">Failure of a dependent service</span></span>
<span data-ttu-id="ef6e5-183">Azure fornisce molti servizi in cui si possono verificare periodicamente tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-183">Azure provides many services that can experience periodic downtime.</span></span> <span data-ttu-id="ef6e5-184">Ad esempio, [Cache Redis di Azure](https://azure.microsoft.com/services/cache/) è un servizio multi-tenant che fornisce funzionalità di memorizzazione nella cache per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-184">For example, [Azure Redis Cache](https://azure.microsoft.com/services/cache/) is a multi-tenant service which provides caching capabilities to your application.</span></span> <span data-ttu-id="ef6e5-185">È importante valutare l'impatto sull'applicazione qualora un servizio dipendente non fosse disponibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-185">It's important to consider what happens in your application if the dependent service is unavailable.</span></span> <span data-ttu-id="ef6e5-186">Per molti aspetti questo scenario è analogo a quello di un'interruzione della rete,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-186">In many ways, this scenario is similar to the network outage scenario.</span></span> <span data-ttu-id="ef6e5-187">tuttavia se si considera ogni servizio singolarmente, è possibile apportare miglioramenti al piano generale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-187">However, considering each service independently results in potential improvements to your overall plan.</span></span>

<span data-ttu-id="ef6e5-188">Cache Redis di Azure conferisce all'applicazione funzionalità di memorizzazione nella cache all'interno della distribuzione del servizio cloud, con conseguenti vantaggi per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-188">Azure Redis Cache provides caching to your application from within your cloud service deployment, which provides disaster recovery benefits.</span></span> <span data-ttu-id="ef6e5-189">Prima di tutto, il servizio ora viene eseguito su ruoli locali rispetto alla distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-189">First, the service now runs on roles that are local to your deployment.</span></span> <span data-ttu-id="ef6e5-190">È quindi possibile monitorare e gestire in modo più efficace lo stato della cache come parte dei processi di gestione complessivi del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-190">Therefore, you're better able to monitor and manage the status of the cache as part of your overall management processes for the cloud service.</span></span> <span data-ttu-id="ef6e5-191">Questo tipo di memorizzazione nella cache presenta anche nuove funzionalità, ad esempio la disponibilità elevata per i dati memorizzati nella cache che, in caso di errore di un singolo nodo, conserva copie duplicate dei dati della cache in altri nodi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-191">This type of caching also exposes new features such as high availability for cached data, which preserves cached data if a single node fails by maintaining duplicate copies on other nodes.</span></span>

<span data-ttu-id="ef6e5-192">Si noti che la disponibilità elevata riduce la velocità effettiva e aumenta la latenza in quanto nelle operazioni di scrittura devono essere aggiornate anche le copie secondarie.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-192">Note that high availability decreases throughput and increases latency because write operations must also upedate any secondary copies.</span></span> <span data-ttu-id="ef6e5-193">Quando si pianifica la capacità, si deve tener conto che la quantità di memoria necessaria per archiviare i dati memorizzati nella cache è di fatto raddoppiata.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-193">The amount of memory required to store the cached data is effectively doubled, which must be taken into account during capacity planning.</span></span>  <span data-ttu-id="ef6e5-194">Questo esempio dimostra che ogni servizio dipendente può avere funzionalità che migliorano in generale la disponibilità e la resistenza agli errori irreversibili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-194">This example demonstrates that each dependent service might have capabilities that improve your overall availability and resistance to catastrophic failures.</span></span>

<span data-ttu-id="ef6e5-195">È consigliabile comprendere le implicazioni di un'interruzione per ogni servizio dipendente</span><span class="sxs-lookup"><span data-stu-id="ef6e5-195">With each dependent service, you should understand the implications of a service disruption.</span></span> <span data-ttu-id="ef6e5-196">Nell'esempio di memorizzazione nella cache, potrebbe risultare possibile accedere ai dati direttamente da un database finché non si ripristina la cache.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-196">In the caching example, it might be possible to access the data directly from a database until you restore your cache.</span></span> <span data-ttu-id="ef6e5-197">Ciò comporta una riduzione delle prestazioni fornendo nel contempo l'accesso completo ai dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-197">This would result in reduced performance while providing full access to application data.</span></span>

### <a name="region-wide-service-disruption"></a><span data-ttu-id="ef6e5-198">Interruzione del servizio a livello di area</span><span class="sxs-lookup"><span data-stu-id="ef6e5-198">Region-wide service disruption</span></span>
<span data-ttu-id="ef6e5-199">Gli errori indicati in precedenza sono principalmente errori gestibili nella stessa area di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-199">The previous failures have primarily been failures that can be managed within the same Azure region.</span></span> <span data-ttu-id="ef6e5-200">È tuttavia necessario prepararsi anche all'eventualità che si verifichi un'interruzione del servizio nell'intera area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-200">However, you must also prepare for the possibility that there is a service disruption of the entire region.</span></span> <span data-ttu-id="ef6e5-201">Se si verifica un'interruzione del servizio a livello di area, le copie ridondanti locali dei dati non sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-201">If a region-wide service disruption occurs, the locally redundant copies of your data are not available.</span></span> <span data-ttu-id="ef6e5-202">Se è stata abilitata la replica geografica, esistono altre tre copie dei BLOB e delle tabelle in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-202">If you have enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="ef6e5-203">Se Microsoft dichiara l'area perdita di un'area, Azure esegue di nuovo il mapping di tutte le voci DNS all'area con replica geografica.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-203">If Microsoft declares the region lost, Azure remaps all of the DNS entries to the geo-replicated region.</span></span>

> [!NOTE]
> <span data-ttu-id="ef6e5-204">Tenere presente che non è possibile controllare questo processo e che verrà eseguito solo in caso di interruzione del servizio a livello di area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-204">Be aware that you don't have any control over this process, and it will occur only for region-wide service disruption.</span></span> <span data-ttu-id="ef6e5-205">Per questo motivo, è necessario affidarsi ad altre strategie di backup specifiche dell'applicazione per ottenere il massimo livello di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-205">Because of this, you must rely on other application-specific backup strategies to achieve the highest level of availability.</span></span> <span data-ttu-id="ef6e5-206">Per altre informazioni, vedere la sezione sulle [strategie dei dati per il ripristino di emergenza](#data-strategies-for-disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-206">For more information, see the section on [data strategies for disaster recovery](#data-strategies-for-disaster-recovery).</span></span>
> 
> 

### <a name="azure-wide-service-disruption"></a><span data-ttu-id="ef6e5-207">Interruzione del servizio a livello di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-207">Azure-wide service disruption</span></span>
<span data-ttu-id="ef6e5-208">Nella pianificazione delle emergenze, è necessario considerare l'intera gamma delle possibili condizioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-208">In disaster planning, you must consider the entire range of possible disasters.</span></span> <span data-ttu-id="ef6e5-209">Una delle interruzioni del servizio più gravi riguarda l'eventuale coinvolgimento contemporaneo di tutte le aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-209">One of the most severe service disruptions would involve all Azure regions simultaneously.</span></span> <span data-ttu-id="ef6e5-210">Come per altre interruzioni del servizio, anche in questo caso è possibile scegliere di accettare il rischio di un tempo di inattività temporaneo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-210">As with other service disruptions, you might decide to accept the risk of temporary downtime in that event.</span></span> <span data-ttu-id="ef6e5-211">Le interruzioni del servizio diffuse che si estendono a più aree dovrebbero essere più rare rispetto a quelle isolate che interessano servizi dipendenti o singole aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-211">Widespread service disruptions that span regions are much rarer than isolated service disruptions involving dependent services or single regions.</span></span>

<span data-ttu-id="ef6e5-212">Tuttavia, è possibile specificare che alcune applicazioni critiche richiedano un piano di backup per un'interruzione del servizio in più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-212">However, you may decide that certain mission-critical applications require a backup plan for a multi-region service disruption.</span></span> <span data-ttu-id="ef6e5-213">Il piano può includere il failover a servizi in [cloud alternativi](#alternative-cloud) o [soluzioni cloud ibride locali](#hybrid-on-premises-and-cloud-solution).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-213">This plan might include failing over to services in an [alternative cloud](#alternative-cloud) or a [hybrid on-premises and cloud solution](#hybrid-on-premises-and-cloud-solution).</span></span>

### <a name="reduced-application-functionality"></a><span data-ttu-id="ef6e5-214">Applicazioni con funzionalità ridotte</span><span class="sxs-lookup"><span data-stu-id="ef6e5-214">Reduced application functionality</span></span>
<span data-ttu-id="ef6e5-215">Un'applicazione ben progettata in genere usa servizi che comunicano tra loro tramite l'implementazione di modelli di scambio di informazioni a regime di controllo libero.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-215">A well-designed application typically uses services that communicate with each other though the implementation of loosely coupled information-interchange patterns.</span></span> <span data-ttu-id="ef6e5-216">Un'applicazione adatta a scenari di ripristino di emergenza richiede la separazione delle responsabilità a livello di servizio,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-216">A DR-friendly application requires separation of responsibilities at the service level.</span></span> <span data-ttu-id="ef6e5-217">in modo che l'interruzione di un servizio dipendente non causi l'interruzione dell'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-217">This prevents the disruption of a dependent service from bringing down the entire application.</span></span> <span data-ttu-id="ef6e5-218">Si consideri, ad esempio, un'applicazione Web di e-commerce di una società Y, che potrebbe essere costituita dai moduli seguenti:</span><span class="sxs-lookup"><span data-stu-id="ef6e5-218">For example, consider a web commerce application for Company Y. The following modules might constitute the application:</span></span>

* <span data-ttu-id="ef6e5-219">**Catalogo prodotti** : consente agli utenti di esplorare i prodotti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-219">**Product Catalog** allows users to browse products.</span></span>
* <span data-ttu-id="ef6e5-220">**Carrello acquisti** : consente agli utenti di aggiungere o rimuovere prodotti nel carrello.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-220">**Shopping Cart** allows users to add/remove products in their shopping cart.</span></span>
* <span data-ttu-id="ef6e5-221">**Stato dell'ordine** : mostra lo stato di spedizione degli ordini dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-221">**Order Status** shows the shipping status of user orders.</span></span>
* <span data-ttu-id="ef6e5-222">**Invio dell'ordine** : finalizza la sessione di acquisto tramite l'invio dell'ordine con il pagamento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-222">**Order Submission** finalizes the shopping session by submitting the order with payment.</span></span>
* <span data-ttu-id="ef6e5-223">**Elaborazione dell'ordine** : convalida l'integrità dei dati dell'ordine e verifica la disponibilità della quantità richiesta.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-223">**Order Processing** validates the order for data integrity and performs a quantity availability check.</span></span>

<span data-ttu-id="ef6e5-224">Quando una dipendenza del servizio in questa applicazione non è disponibile, come fa a funzionare un servizio fino a quando non si ripristina la dipendenza?</span><span class="sxs-lookup"><span data-stu-id="ef6e5-224">When a service dependency in this application becomes unavailable, how does the service function until the dependency recovers?</span></span> <span data-ttu-id="ef6e5-225">Un sistema ben strutturato implementa limiti di isolamento con la separazione delle responsabilità sia in fase di progettazione che di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-225">A well-designed system implements isolation boundaries through separation of responsibilities, both at design time and at runtime.</span></span> <span data-ttu-id="ef6e5-226">È possibile classificare ogni errore come reversibile o irreversibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-226">You can categorize every failure as recoverable and non-recoverable.</span></span> <span data-ttu-id="ef6e5-227">Gli errori irreversibili interrompono il funzionamento del servizio, mentre quelli reversibili possono essere attenuati con alternative.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-227">Non-recoverable errors will bring down the service, but you can mitigate a recoverable error through alternatives.</span></span> <span data-ttu-id="ef6e5-228">Alcuni problemi risolti mediante la gestione automatica degli errori e azioni alternative sono trasparenti all'utente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-228">Certain problems addressed by automatically handling faults and taking alternate actions are transparent to the user.</span></span> <span data-ttu-id="ef6e5-229">In caso di un'interruzione del servizio più grave, l'applicazione potrebbe risultare completamente non disponibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-229">During a more serious service disruption, the application might be completely unavailable.</span></span> <span data-ttu-id="ef6e5-230">Una terza opzione consiste nel continuare a gestire le richieste degli utenti con funzionalità ridotte.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-230">A third option is to continue handling user requests with reduced functionality.</span></span>

<span data-ttu-id="ef6e5-231">Se ad esempio il database che ospita gli ordini diventa inattivo, il servizio di elaborazione degli ordini non riesce più a elaborare le transazioni di vendita.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-231">For instance, if the database for hosting orders goes down, the Order Processing service loses its ability to process sales transactions.</span></span> <span data-ttu-id="ef6e5-232">A seconda dell'architettura, potrebbe essere difficile, se non impossibile, continuare a usare i servizi dell'applicazione per l'invio e l'elaborazione degli ordini.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-232">Depending on the architecture, it might be difficult or impossible for the Order Submission and Order Processing services of the application to continue.</span></span> <span data-ttu-id="ef6e5-233">Se l'applicazione non è progettata per gestire questo scenario, potrebbe passare completamente in modalità offline.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-233">If the application is not designed to handle this scenario, the entire application might go offline.</span></span> <span data-ttu-id="ef6e5-234">Tuttavia, se i dati dei prodotti sono archiviati in un percorso diverso, è ancora possibile usare il modulo Catalogo di prodotti per visualizzare i prodotti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-234">However, if the product data is stored in a different location, then the Product Catalog module can still be used for viewing products.</span></span> <span data-ttu-id="ef6e5-235">Altre parti dell'applicazione, come le query sugli ordini o sull'inventario, non sono invece disponibili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-235">However, other parts of the application are unavailable, such as ordering or inventory queries.</span></span>

<span data-ttu-id="ef6e5-236">Stabilire quale funzionalità ridotta dell'applicazione deve essere disponibile è una decisione sia aziendale sia tecnica.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-236">Deciding what reduced application functionality is available is both a business decision and a technical decision.</span></span> <span data-ttu-id="ef6e5-237">È inoltre necessario stabilire in che modo l'applicazione informerà gli utenti di eventuali problemi temporanei.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-237">You must decide how the application will inform the users of any temporary problems.</span></span> <span data-ttu-id="ef6e5-238">Nell'esempio l'applicazione può consentire la visualizzazione dei prodotti e la relativa aggiunta al carrello acquisti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-238">In the example above, the application might allow viewing products and adding them to a shopping cart.</span></span> <span data-ttu-id="ef6e5-239">Quando però l'utente prova a eseguire un acquisto, l'applicazione informa l'utente che la funzionalità di creazione degli ordini è temporaneamente non disponibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-239">However, when the user attempts to make a purchase, the application notifies the user that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="ef6e5-240">Non è una situazione ideale per il cliente, ma impedisce un'interruzione del servizio a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-240">This isn't ideal for the customer, but it does prevent an application-wide service disruption.</span></span>

## <a name="data-strategies-for-disaster-recovery"></a><span data-ttu-id="ef6e5-241">strategie dei dati per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-241">Data strategies for disaster recovery</span></span>
<span data-ttu-id="ef6e5-242">La gestione corretta dei dati è un aspetto complesso di un piano di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-242">Proper data handling is a challenging aspect of a disaster recovery plan.</span></span> <span data-ttu-id="ef6e5-243">Durante il processo di ripristino, il recupero dei dati richiede in genere più tempo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-243">During the recovery process, data restoration typically takes the most time.</span></span> <span data-ttu-id="ef6e5-244">Le diverse opzioni relative ai servizi con funzionalità ridotte implicano sfide complesse per il ripristino e la coerenza dei dati in seguito a un errore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-244">Different choices for reducing functionality result in difficult challenges for data recovery from failure and consistency after failure.</span></span>

<span data-ttu-id="ef6e5-245">Uno degli aspetti riguarda la necessità di ripristinare o mantenere una copia dei dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-245">One consideration is the need to restore or maintain a copy of the application’s data.</span></span> <span data-ttu-id="ef6e5-246">Questi dati verranno usati per finalità transazionali o di riferimento in un sito secondario.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-246">You will use this data for reference and transactional purposes at a secondary site.</span></span> <span data-ttu-id="ef6e5-247">Una distribuzione locale richiede un processo di pianificazione lungo e costoso per implementare una strategia di ripristino di emergenza in più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-247">An on-premises deployment requires an expensive and lengthy planning process to implement a multiple-region disaster recovery strategy.</span></span> <span data-ttu-id="ef6e5-248">Per praticità, la maggior parte dei provider di servizi cloud, incluso Azure, consente l'immediata distribuzione di applicazioni in più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-248">Conveniently, most cloud providers, including Azure, readily allow the deployment of applications to multiple regions.</span></span> <span data-ttu-id="ef6e5-249">Queste aree sono distribuite geograficamente in modo che l'eventualità che si verifichi un'interruzione del servizio in più aree sia estremamente rara.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-249">These regions are geographically distributed in such a way that multiple-region service disruption should be extremely rare.</span></span> <span data-ttu-id="ef6e5-250">La strategia di gestione dei dati tra più aree è uno dei fattori determinanti per il successo di qualsiasi piano di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-250">The strategy for handling data across regions is one of the contributing factors for the success of any disaster recovery plan.</span></span>

<span data-ttu-id="ef6e5-251">Le sezioni seguenti illustrano le tecniche di ripristino di emergenza correlate ai backup dei dati, ai dati di riferimento e ai dati transazionali.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-251">The following sections discuss disaster recovery techniques related to data backups, reference data, and transactional data.</span></span>

### <a name="backup-and-restore"></a><span data-ttu-id="ef6e5-252">Backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="ef6e5-252">Backup and restore</span></span>
<span data-ttu-id="ef6e5-253">I backup regolari dei dati delle applicazioni possono supportare alcuni scenari di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-253">Regular backups of application data can support some disaster recovery scenarios.</span></span> <span data-ttu-id="ef6e5-254">Le tecniche variano a seconda delle diverse risorse di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-254">Different storage resources require different techniques.</span></span>

#### <a name="sql-database"></a><span data-ttu-id="ef6e5-255">Database SQL</span><span class="sxs-lookup"><span data-stu-id="ef6e5-255">SQL Database</span></span>
<span data-ttu-id="ef6e5-256">Per i livelli Basic, Standard e Premium del database SQL è possibile sfruttare la funzionalità di ripristino temporizzato del database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-256">For the Basic, Standard, and Premium SQL Database tiers, you can take advantage of point-in-time restore to recover your database.</span></span> <span data-ttu-id="ef6e5-257">Per altre informazioni, vedere [Panoramica: Continuità aziendale del cloud e ripristino di emergenza del database con database SQL](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-257">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="ef6e5-258">Un'altra possibilità consiste nell'usare la replica geografica attiva per il database SQL.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-258">Another option is to use Active Geo-Replication for SQL Database.</span></span> <span data-ttu-id="ef6e5-259">Questa opzione replica automaticamente le modifiche al database nei database secondari nella stessa area di Azure o in un'area di Azure diversa</span><span class="sxs-lookup"><span data-stu-id="ef6e5-259">This automatically replicates database changes to secondary databases in the same Azure region or even in a different Azure region.</span></span> <span data-ttu-id="ef6e5-260">e offre una potenziale alternativa per alcune delle tecniche di sincronizzazione dei dati più manuali illustrate in questo documento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-260">This provides a potential alternative to some of the more manual data synchronization techniques presented in this article.</span></span> <span data-ttu-id="ef6e5-261">Per altre informazioni, vedere [Panoramica: Replica geografica attiva per il database SQL di Azure](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-261">For more information, see [Overview: SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="ef6e5-262">È anche possibile usare un approccio più manuale per backup e ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-262">You can also use a more manual approach for backup and restore.</span></span> <span data-ttu-id="ef6e5-263">Usare il comando DATABASE COPY per creare una copia di backup del database con coerenza transazionale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-263">Use the DATABASE COPY command to create a backup copy of the database with transactional consistency.</span></span> <span data-ttu-id="ef6e5-264">È inoltre possibile usare il servizio di importazione/esportazione di Database di SQL Azure, che supporta l'esportazione dei database nei file BACPAC (file compressi contenenti lo schema del database e i dati associati) che vengono archiviati nella risorsa di archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-264">You can also use the import/export service of Azure SQL Database, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span>

<span data-ttu-id="ef6e5-265">La ridondanza predefinita del servizio di archiviazione di Azure crea due repliche del file di backup nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-265">The built-in redundancy of Azure Storage creates two replicas of the backup file in the same region.</span></span> <span data-ttu-id="ef6e5-266">La frequenza di esecuzione del processo di backup determina tuttavia l'RPO, ovvero la quantità di dati che potrebbero andare persi negli scenari di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-266">However, the frequency of running the backup process determines your RPO, which is the amount of data you might lose in disaster scenarios.</span></span> <span data-ttu-id="ef6e5-267">Se ad esempio si esegue un backup ogni ora esatta e l'emergenza si verifica due minuti prima dello scadere dell'ora,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-267">For example, imagine that you perform a backup at the top of each hour, and a disaster occurs two minutes before the top of the hour.</span></span> <span data-ttu-id="ef6e5-268">si perderanno 58 minuti di dati registrati dopo l'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-268">You lose 58 minutes of data recorded after the last backup was performed.</span></span> <span data-ttu-id="ef6e5-269">Inoltre, per tutelarsi da un'eventuale interruzione a livello di un'area, è consigliabile copiare i file BACPAC in un'area alternativa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-269">Also, to protect against a region-wide service disruption, you should copy the BACPAC files to an alternate region.</span></span> <span data-ttu-id="ef6e5-270">Sarà quindi possibile ripristinare questi backup nell'area alternativa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-270">You then have the option of restoring those backups in the alternate region.</span></span> <span data-ttu-id="ef6e5-271">Per altre informazioni, vedere [Panoramica: Continuità aziendale del cloud e ripristino di emergenza del database con database SQL](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-271">For more details, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span>

#### <a name="azure-storage"></a><span data-ttu-id="ef6e5-272">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-272">Azure Storage</span></span>
<span data-ttu-id="ef6e5-273">Per Archiviazione di Azure è possibile sviluppare un processo di backup personalizzato o usare strumenti di backup di terze parti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-273">For Azure Storage, you can develop a custom backup process or use one of many third-party backup tools.</span></span> <span data-ttu-id="ef6e5-274">Si noti che nella maggior parte delle progettazioni di applicazioni in cui le risorse di archiviazione fanno riferimento le une alle altre esistono complessità aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-274">Note that most application designs have additional complexities where storage resources reference each other.</span></span> <span data-ttu-id="ef6e5-275">Si consideri ad esempio un database SQL con una colonna di collegamento a un BLOB in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-275">For example, consider a SQL database that has a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="ef6e5-276">Se i backup non vengono eseguiti contemporaneamente, è possibile che il database contenga il puntatore a un BLOB di cui non è stato eseguito il backup prima dell'errore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-276">If the backups do not happen simultaneously, the database might have a pointer to a blob that was not backed up before the failure.</span></span> <span data-ttu-id="ef6e5-277">L'applicazione o il piano di ripristino di emergenza devono implementare i processi per la gestione di questa incoerenza dopo un ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-277">The application or disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

#### <a name="other-data-platforms"></a><span data-ttu-id="ef6e5-278">Altre piattaforme di dati</span><span class="sxs-lookup"><span data-stu-id="ef6e5-278">Other data platforms</span></span>
<span data-ttu-id="ef6e5-279">Altre piattaforme di dati ospitati IaaS (infrastructure-as-a-service), ad esempio Elasticsearch o MongoDB, prevedono funzionalità e considerazioni specifiche per la creazione di un processo di backup e ripristino integrato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-279">Other infrastructure-as-a-service (IaaS) hosted data platforms, such as Elasticsearch or MongoDB, have their own capabilities and considerations when creating an integrated backup and restore process.</span></span> <span data-ttu-id="ef6e5-280">Per queste piattaforme di dati, la raccomandazione generale consiste nell'usare qualsiasi capacità di replica o creazione di snapshot nativa o disponibile basata sull'integrazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-280">For these data platforms, the general recommendation is to use any native or available integration-based replication or snapshotting capabilities.</span></span> <span data-ttu-id="ef6e5-281">Se queste capacità non esistono o non sono appropriate, valutare l'opportunità di usare il servizio di backup di Azure o gli snapshot dei dischi gestiti/non gestiti per creare una copia identica dei dati di applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-281">If those capabilities do not exist or are not suitable, then consider using Azure Backup Service or managed/unmanaged disk snapshots to create a point-in-time copy of application data.</span></span> <span data-ttu-id="ef6e5-282">In tutti i casi, è importante stabilire come eseguire backup coerenti, soprattutto quando i dati dell'applicazione sono distribuiti in più file system o se più unità sono combinate in un file system singolo che usa responsabili di volume o un sistema RAID basato su software.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-282">In all cases, it’s important to determine how to achieve consistent backups, especially when application data spans multiple files systems, or when multiple drives are combined into a single file system using volume managers or software-based RAID.</span></span>

### <a name="reference-data-pattern-for-disaster-recovery"></a><span data-ttu-id="ef6e5-283">Modelli di dati di riferimento per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-283">Reference data pattern for disaster recovery</span></span>
<span data-ttu-id="ef6e5-284">I dati di riferimento sono dati di sola lettura che supportano le funzionalità di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-284">Reference data is read-only data that supports application functionality.</span></span> <span data-ttu-id="ef6e5-285">In genere non sono soggetti a modifiche frequenti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-285">It typically does not change frequently.</span></span> <span data-ttu-id="ef6e5-286">Anche se il backup e il ripristino rappresentano un metodo per gestire le interruzioni a livello di area, l'RTO è relativamente lungo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-286">Although backup and restore is one method to handle region-wide service disruptions, the RTO is relatively long.</span></span> <span data-ttu-id="ef6e5-287">Quando si distribuisce l'applicazione in un'area secondaria, è possibile adottare alcune strategie che migliorano l'RTO per i dati di riferimento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-287">When you deploy the application to a secondary region, some strategies can improve the RTO for reference data.</span></span>

<span data-ttu-id="ef6e5-288">Poiché i dati di riferimento vengono raramente modificati, è possibile migliorare l'RTO mantenendo una copia permanente di tali dati nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-288">Because reference data changes infrequently, you can improve the RTO by maintaining a permanent copy of the reference data in the secondary region.</span></span> <span data-ttu-id="ef6e5-289">Ciò consente di eliminare i tempi necessari per ripristinare i backup in caso di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-289">This eliminates the time required to restore backups in the event of a disaster.</span></span> <span data-ttu-id="ef6e5-290">Per soddisfare i requisiti di ripristino di emergenza in più aree, è necessario distribuire insieme l'applicazione e i dati di riferimento in più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-290">To meet the multiple-region disaster recovery requirements, you must deploy the application and the reference data together in multiple regions.</span></span> <span data-ttu-id="ef6e5-291">Come indicato in [Modello dei dati di riferimento per la disponibilità elevata](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), i dati di riferimento possono essere distribuiti al ruolo stesso, a una risorsa di archiviazione esterna o a una combinazione di entrambi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-291">As mentioned in [Reference data pattern for high availability](high-availability-azure-applications.md#reference-data-pattern-for-high-availability), you can deploy reference data to the role itself, to external storage, or to a combination of both.</span></span>

<span data-ttu-id="ef6e5-292">Il modello di distribuzione dei dati di riferimento tra nodi di calcolo soddisfa i requisiti di ripristino di emergenza in modo implicito.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-292">The reference data deployment model within compute nodes implicitly satisfies the disaster recovery requirements.</span></span> <span data-ttu-id="ef6e5-293">La distribuzione dei dati di riferimento al database SQL richiede la distribuzione di una copia dei dati in ogni area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-293">Reference data deployment to SQL Database requires that you deploy a copy of the reference data to each region.</span></span> <span data-ttu-id="ef6e5-294">La stessa strategia è applicabile ad Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-294">The same strategy applies to Azure Storage.</span></span> <span data-ttu-id="ef6e5-295">È necessario distribuire una copia di tutti i dati di riferimento archiviati nel servizio Archiviazione di Azure all'area primaria e a quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-295">You must deploy a copy of any reference data that's stored in Azure Storage to the primary and secondary regions.</span></span>

![Pubblicazione dei dati di riferimento nelle aree primaria e secondaria](./images/disaster-recovery-azure-applications/reference-data-publication-to-both-primary-and-secondary-regions.png)

<span data-ttu-id="ef6e5-297">È necessario implementare routine di backup personalizzate specifiche dell'applicazione per tutti i dati, inclusi quelli di riferimento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-297">You must implement your own application-specific backup routines for all data, including reference data.</span></span> <span data-ttu-id="ef6e5-298">Le copie con replica geografica tra aree vengono usate solo in caso di interruzione del servizio a livello di un'intera area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-298">Geo-replicated copies across regions are used only in a region-wide service disruption.</span></span> <span data-ttu-id="ef6e5-299">Per evitare tempi di inattività prolungati, distribuire le parti cruciali dei dati dell'applicazione nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-299">To prevent extended downtime, deploy the mission-critical parts of the application’s data to the secondary region.</span></span> <span data-ttu-id="ef6e5-300">Per un esempio di questa topologia, vedere il [modello attivo-passivo](#active-passive).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-300">For an example of this topology, see the [active-passive model](#active-passive).</span></span>

### <a name="transactional-data-pattern-for-disaster-recovery"></a><span data-ttu-id="ef6e5-301">Modelli di dati transazionali per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-301">Transactional data pattern for disaster recovery</span></span>
<span data-ttu-id="ef6e5-302">L'implementazione di una strategia che prevede la disponibilità di funzionalità complete in caso di emergenza richiede una replica asincrona dei dati transazionali nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-302">Implementation of a fully functional disaster mode strategy requires asynchronous replication of the transactional data to the secondary region.</span></span> <span data-ttu-id="ef6e5-303">Le finestre temporali possibili in cui può essere eseguita la replica determinano le caratteristiche dell'RPO dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-303">The practical time windows within which the replication can occur will determine the RPO characteristics of the application.</span></span> <span data-ttu-id="ef6e5-304">I dati persi durante la finestra di replica saranno comunque ripristinabili dall'area primaria</span><span class="sxs-lookup"><span data-stu-id="ef6e5-304">You might still recover the data that was lost from the primary region during the replication window.</span></span> <span data-ttu-id="ef6e5-305">e potranno anche essere uniti successivamente a quelli nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-305">You might also be able to merge with the secondary region later.</span></span>

<span data-ttu-id="ef6e5-306">Le architetture di esempio seguenti offrono alcune idee sui diversi modi possibili di gestire i dati transazionali in uno scenario di failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-306">The following architecture examples provide some ideas on different ways of handling transactional data in a failover scenario.</span></span> <span data-ttu-id="ef6e5-307">È importante notare che questi esempi non sono esaustivi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-307">It's important to note that these examples are not exhaustive.</span></span> <span data-ttu-id="ef6e5-308">Ad esempio, le posizioni di archiviazione intermedie, come le code, possono essere sostituite dal database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-308">For example, intermediate storage locations such as queues might be replaced with Azure SQL Database.</span></span> <span data-ttu-id="ef6e5-309">Le code stesse possono essere del servizio Archiviazione di Azure o del bus di servizio di Azure. Vedere [Analogie e differenze tra le code di Azure e le code del bus di servizio](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-309">The queues themselves might be either Azure Storage or Azure Service Bus queues (see [Azure queues and Service Bus queues - compared and contrasted](/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted/)).</span></span> <span data-ttu-id="ef6e5-310">Anche le destinazioni di archiviazione server possono variare, ad esempio tabelle di Azure invece del database SQL.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-310">Server storage destinations might also vary, such as Azure tables instead of SQL Database.</span></span> <span data-ttu-id="ef6e5-311">Potrebbero inoltre essere presenti ruoli di lavoro inseriti come intermediari in vari passaggi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-311">In addition, worker roles might be inserted as intermediaries in various steps.</span></span> <span data-ttu-id="ef6e5-312">Lo scopo è non emulare queste architetture in modo preciso, ma valutare varie alternative per il ripristino di dati transazionali e dei moduli correlati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-312">The intent is not to emulate these architectures exactly, but to consider various alternatives in the recovery of transactional data and related modules.</span></span>

#### <a name="replication-of-transactional-data-in-preparation-for-disaster-recovery"></a><span data-ttu-id="ef6e5-313">Replica di dati transazionali in preparazione del ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-313">Replication of transactional data in preparation for disaster recovery</span></span>
<span data-ttu-id="ef6e5-314">Si consideri un'applicazione che usa le code di Archiviazione di Azure per i dati transazionali</span><span class="sxs-lookup"><span data-stu-id="ef6e5-314">Consider an application that uses Azure Storage queues to hold transactional data.</span></span> <span data-ttu-id="ef6e5-315">In questo modo i ruoli di lavoro possono elaborare i dati transazionali nel database server in un'architettura separata.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-315">This allows worker roles to process the transactional data to the server database in a decoupled architecture.</span></span> <span data-ttu-id="ef6e5-316">Ciò richiede l'uso di una qualche forma di memorizzazione temporanea nella cache per le transazioni, se i ruoli front-end richiedono l'esecuzione immediata di query sui dati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-316">This requires the transactions to use some form of temporary caching if the front-end roles require the immediate query of that data.</span></span> <span data-ttu-id="ef6e5-317">A seconda del livello di tolleranza alla perdita dei dati, si può scegliere di replicare le code, il database o tutte le risorse di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-317">Depending on the level of data-loss tolerance, you might choose to replicate the queues, the database, or all of the storage resources.</span></span> <span data-ttu-id="ef6e5-318">Limitandosi alla replica del database, in caso di interruzione dell'area primaria, i dati nelle code possono essere comunque ripristinati quando l'area primaria torna disponibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-318">With only database replication, if the primary region goes down, you can still recover the data in the queues when the primary region comes back.</span></span>

<span data-ttu-id="ef6e5-319">Il diagramma seguente illustra un'architettura in cui il database server è sincronizzato tra più in aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-319">The following diagram shows an architecture where the server database is synchronized across regions.</span></span>

![Replica di dati transazionali in preparazione del ripristino di emergenza](./images/disaster-recovery-azure-applications/replicate-transactional-data-in-preparation-for-disaster-recovery.png)

<span data-ttu-id="ef6e5-321">Il problema maggiore nell'implementazione di questa architettura consiste nella strategia di replica tra aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-321">The biggest challenge to implementing this architecture is the replication strategy between regions.</span></span> <span data-ttu-id="ef6e5-322">Questo tipo di replica può essere eseguito grazie al [servizio di sincronizzazione dati SQL Azure](/azure/sql-database/sql-database-get-started-sql-data-sync/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-322">The [Azure SQL Data Sync](/azure/sql-database/sql-database-get-started-sql-data-sync/) service enables this type of replication.</span></span> <span data-ttu-id="ef6e5-323">Attualmente questo servizio è ancora in anteprima e non è consigliabile usarlo in ambienti di produzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-323">As of this writing, the service is in preview and is not yet recommended for production environments.</span></span> <span data-ttu-id="ef6e5-324">Per altre informazioni, vedere [Panoramica: Continuità aziendale del cloud e ripristino di emergenza del database con database SQL](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-324">For more information, see [Overview: Cloud business continuity and database disaster recovery with SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span> <span data-ttu-id="ef6e5-325">Per le applicazioni di produzione, è necessario investire in una soluzione di terze parti o creare una logica di replica personalizzata nel codice.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-325">For production applications, you must invest in a third-party solution or create your own replication logic in code.</span></span> <span data-ttu-id="ef6e5-326">In base all'architettura, la replica può anche essere bidirezionale, più complessa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-326">Depending on the architecture, the replication might be bidirectional, which is more complex.</span></span>

<span data-ttu-id="ef6e5-327">In una potenziale implementazione si potrebbe usare la coda intermedia illustrata nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-327">One potential implementation might make use of the intermediate queue in the previous example.</span></span> <span data-ttu-id="ef6e5-328">Il ruolo di lavoro che elabora i dati nella destinazione di archiviazione finale può apportare la modifica sia nell'area primaria che in quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-328">The worker role that processes the data to the final storage destination might make the change in both the primary region and the secondary region.</span></span> <span data-ttu-id="ef6e5-329">Non si tratta di attività semplici, ma le istruzioni complete relative al codice di replica non rientrano nell'ambito di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-329">These are not trivial tasks, and complete guidance for replication code is beyond the scope of this article.</span></span> <span data-ttu-id="ef6e5-330">Investire tempo per realizzare la strategia di replica dei dati nell'area secondaria e verificarne la validità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-330">Invest significant time and testing into the approach for replicating data to the secondary region.</span></span> <span data-ttu-id="ef6e5-331">Si consiglia di eseguire anche attività di elaborazione e test aggiuntive per accertarsi che i processi di failover e ripristino gestiscano correttamente eventuali incoerenze dei dati o transazioni duplicate.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-331">Additional processing and testing can help ensure that the failover and recovery processes correctly handle any possible data inconsistencies or duplicate transactions.</span></span>

> [!NOTE]
> <span data-ttu-id="ef6e5-332">Questo articolo si incentra soprattutto sulla piattaforma distribuita come servizio (PaaS).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-332">Most of this paper focuses on platform as a service (PaaS).</span></span> <span data-ttu-id="ef6e5-333">Esistono comunque altre opzioni di replica e disponibilità per applicazioni ibride che usano macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-333">However, additional replication and availability options for hybrid applications use Azure Virtual Machines.</span></span> <span data-ttu-id="ef6e5-334">Queste applicazioni ibride usano l'infrastruttura come servizio (IaaS) per ospitare SQL Server in macchine virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-334">These hybrid applications use infrastructure as a service (IaaS) to host SQL Server on virtual machines in Azure.</span></span> <span data-ttu-id="ef6e5-335">Ciò consente di adottare gli approcci tradizionali di SQL Server alla disponibilità, ad esempio Gruppi di disponibilità AlwaysOn o il log shipping.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-335">This allows traditional availability approaches in SQL Server, such as AlwaysOn Availability Groups or Log Shipping.</span></span> <span data-ttu-id="ef6e5-336">Alcune tecniche, come AlwaysOn, funzionano solo tra istanze di SQL Server locali e macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-336">Some techniques, such as AlwaysOn, work only between on-premises SQL Server instances and Azure virtual machines.</span></span> <span data-ttu-id="ef6e5-337">Per altre informazioni, vedere [Disponibilità elevata e ripristino di emergenza per SQL Server nelle macchine virtuali di Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-337">For more information, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>
> 
> 

#### <a name="reduced-application-functionality-for-transaction-capture"></a><span data-ttu-id="ef6e5-338">Funzionalità ridotte dell'applicazione per l'acquisizione di transazioni</span><span class="sxs-lookup"><span data-stu-id="ef6e5-338">Reduced application functionality for transaction capture</span></span>
<span data-ttu-id="ef6e5-339">Si consideri una seconda architettura che opera in modalità con funzionalità ridotte.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-339">Consider a second architecture that operates with reduced functionality.</span></span> <span data-ttu-id="ef6e5-340">L'applicazione nell'area secondaria disattiva tutte le funzionalità, ad esempio creazione di report, business intelligence o svuotamento delle code.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-340">The application in the secondary region deactivates all the functionality, such as reporting, business intelligence (BI), or draining queues.</span></span> <span data-ttu-id="ef6e5-341">Accetta solo i tipi di flussi di lavoro transazionali più importanti, secondo quanto definito dai requisiti aziendali.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-341">It accepts only the most important types of transactional workflows, as defined by business requirements.</span></span> <span data-ttu-id="ef6e5-342">Il sistema acquisisce le transazioni e le scrive nelle code.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-342">The system captures the transactions and writes them to queues.</span></span> <span data-ttu-id="ef6e5-343">Può differire l'elaborazione dei dati durante la fase iniziale dell'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-343">The system might postpone processing the data during the initial stage of the service disruption.</span></span> <span data-ttu-id="ef6e5-344">Se il sistema nell'area primaria si riattiva entro l'intervallo di tempo previsto, le code possono essere svuotate dai ruoli di lavoro dell'area primaria,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-344">If the system on the primary region is reactivated within the expected time window, the worker roles in the primary region can drain the queues.</span></span> <span data-ttu-id="ef6e5-345">eliminando così la necessità di unire i database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-345">This process eliminates the need for database merging.</span></span> <span data-ttu-id="ef6e5-346">Se l'interruzione del servizio nell'area primaria si prolunga oltre l'intervallo accettabile, può iniziare a elaborare le code.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-346">If the primary region service disruption goes beyond the tolerable window, the application can start processing the queues.</span></span>

<span data-ttu-id="ef6e5-347">In questo scenario il database nell'area secondaria contiene dati transazionali incrementali che devono essere uniti dopo la riattivazione dell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-347">In this scenario, the database in the secondary region contains incremental transactional data that must be merged after the primary is reactivated.</span></span> <span data-ttu-id="ef6e5-348">Il diagramma seguente illustra questa strategia per l'archiviazione temporanea di dati transazionali fino al ripristino dell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-348">The following diagram shows this strategy for temporarily storing transactional data until the primary region is restored.</span></span>

![Funzionalità ridotte dell'applicazione per l'acquisizione di transazioni](./images/disaster-recovery-azure-applications/reduced-application-functionality-for-transaction-capture.png)

<span data-ttu-id="ef6e5-350">Per altre informazioni sulle tecniche di gestione dati per applicazioni Azure resilienti, vedere l'articolo su [FailSafe: Informazioni aggiuntive per architetture cloud resilienti](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-350">For more discussion of data management techniques for resilient Azure applications, see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="deployment-topologies-for-disaster-recovery"></a><span data-ttu-id="ef6e5-351">Topologie di distribuzione per il ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-351">Deployment topologies for disaster recovery</span></span>
<span data-ttu-id="ef6e5-352">È necessario preparare le applicazioni cruciali per eventuali interruzioni del servizio a livello di area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-352">You must prepare mission-critical applications to handle region-wide service disruptions.</span></span> <span data-ttu-id="ef6e5-353">Integrare una strategia di distribuzione in più aree nella pianificazione operativa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-353">Incorporate a multiple-region deployment strategy into the operational planning.</span></span>

<span data-ttu-id="ef6e5-354">Le distribuzioni in più aree possono includere processi IT avanzati per pubblicare l'applicazione e i dati di riferimento nell'area secondaria in seguito a un'emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-354">Multiple-region deployments might involve IT processes to publish the application and reference data to the secondary region after a disaster.</span></span> <span data-ttu-id="ef6e5-355">Se l'applicazione richiede il failover immediato, il processo di distribuzione può comportare una configurazione di tipo attivo/passivo o attivo/attivo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-355">If the application requires instant failover, the deployment process might involve an active/passive setup or an active/active setup.</span></span> <span data-ttu-id="ef6e5-356">Questo tipo di distribuzione include istanze esistenti dell'applicazione in esecuzione nell'area alternativa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-356">This type of deployment has existing instances of the application running in the alternate region.</span></span> <span data-ttu-id="ef6e5-357">Un servizio di routing come Gestione traffico di Azure offre servizi di bilanciamento del carico a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-357">A routing service such as Azure Traffic Manager provides load-balancing services at the DNS level.</span></span> <span data-ttu-id="ef6e5-358">Può rilevare le interruzioni del servizio e indirizzare gli utenti in aree diverse, quando necessario.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-358">It can detect service disruptions and route the users to different regions when needed.</span></span>

<span data-ttu-id="ef6e5-359">Perché un ripristino di emergenza di Azure sia efficace, è importante che venga creato all'interno della soluzione fin dall'inizio.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-359">A successful Azure disaster recovery includes building that recovery into the solution from the start.</span></span> <span data-ttu-id="ef6e5-360">Il cloud offre opzioni aggiuntive per il ripristino da condizioni di errore durante un'emergenza che non sono disponibili in un provider di hosting tradizionale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-360">The cloud provides additional options for recovering from failures during a disaster that are not available in a traditional hosting provider.</span></span> <span data-ttu-id="ef6e5-361">In particolare, è possibile allocare risorse in modo rapido e dinamico in un'area diversa, evitando i costi di risorse inattive prima di un errore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-361">Specifically, you can dynamically and quickly allocate resources in a different region, avoiding the cost of idle resources prior to a failure.</span></span>

<span data-ttu-id="ef6e5-362">Le sezioni seguenti illustrano diverse topologie di distribuzioni per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-362">The following sections cover different deployment topologies for disaster recovery.</span></span> <span data-ttu-id="ef6e5-363">Una maggiore disponibilità comporta generalmente un compromesso in termini di aumento dei costi o della complessità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-363">Typically, there's a tradeoff in increased cost or complexity for additional availability.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="ef6e5-364">Distribuzione in una singola area</span><span class="sxs-lookup"><span data-stu-id="ef6e5-364">Single-region deployment</span></span>
<span data-ttu-id="ef6e5-365">Le distribuzioni in una singola area non sono in effetti topologie di ripristino di emergenza, ma sono illustrate come termine di confronto rispetto ad altre architetture.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-365">A single-region deployment is not really a disaster recovery topology, but is meant to contrast with the other architectures.</span></span> <span data-ttu-id="ef6e5-366">Le distribuzioni in una singola area sono frequenti per le applicazioni in Azure, tuttavia, non soddisfano i requisiti delle topologie di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-366">Single-region deployments are common for applications in Azure; however, they do not meet the requirements of a disaster recovery topology.</span></span>

<span data-ttu-id="ef6e5-367">Il diagramma seguente illustra un'applicazione in esecuzione in una singola area di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-367">The following diagram depicts an application running in a single Azure region.</span></span> <span data-ttu-id="ef6e5-368">Gestione traffico di Azure e l'uso di domini di errore e di aggiornamento aumentano la disponibilità dell'applicazione nell'area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-368">Azure Traffic Manager and the use of fault and upgrade domains increase availability of the application within the region.</span></span>

![Distribuzione in una singola area](./images/disaster-recovery-azure-applications/single-region-deployment.png)

<span data-ttu-id="ef6e5-370">In questo scenario il database rappresenta un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-370">In this scenario, the database is a single point of failure.</span></span> <span data-ttu-id="ef6e5-371">Anche se Azure replica i dati tra diversi domini di errore in repliche interne, il tutto avviene nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-371">Though Azure replicates the data across different fault domains to internal replicas, this replication occurs only within the same region.</span></span> <span data-ttu-id="ef6e5-372">L'applicazione non può quindi supportare un errore irreversibile.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-372">The application cannot withstand a catastrophic failure.</span></span> <span data-ttu-id="ef6e5-373">Se l'area diventa inattiva, tutti i domini di errore diventano inattivi, incluse tutte le istanze dei servizi e le risorse di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-373">If the region becomes unavailable, then so do the fault domains, including all service instances and storage resources.</span></span>

<span data-ttu-id="ef6e5-374">Per tutte le applicazioni tranne le meno importanti è necessario definire un piano per la distribuzione tra più aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-374">For all but the least critical applications, you must devise a plan to deploy your applications across multiple regions.</span></span> <span data-ttu-id="ef6e5-375">È inoltre consigliabile tenere conto dell'RTO e dei vincoli di costi quando si valuta la topologia di distribuzione da usare.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-375">You should also consider RTO and cost constraints in considering which deployment topology to use.</span></span>

<span data-ttu-id="ef6e5-376">Di seguito vengono esaminati approcci specifici che supportano il failover tra aree diverse.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-376">Let’s take a look now at specific approaches to supporting failover across different regions.</span></span> <span data-ttu-id="ef6e5-377">In entrambi questi esempi si usano due aree per descrivere il processo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-377">These examples all use two regions to describe the process.</span></span>

### <a name="redeployment-to-a-secondary-azure-region"></a><span data-ttu-id="ef6e5-378">Ridistribuzione in un'area di Azure secondaria</span><span class="sxs-lookup"><span data-stu-id="ef6e5-378">Redeployment to a secondary Azure region</span></span>
<span data-ttu-id="ef6e5-379">Nell'approccio di ridistribuzione a un'area secondaria, solo l'area primaria presenta applicazioni e database in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-379">For the approach of redeployment to a secondary region, only the primary region has applications and databases running.</span></span> <span data-ttu-id="ef6e5-380">L'area secondaria non è configurata per un failover automatico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-380">The secondary region is not set up for an automatic failover.</span></span> <span data-ttu-id="ef6e5-381">Quando si verifica un'emergenza, è quindi necessario attivare tutti i componenti del servizio nella nuova area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-381">So when a disaster occurs, you must spin up all the parts of the service in the new region.</span></span> <span data-ttu-id="ef6e5-382">Sono inclusi il caricamento di un servizio cloud in Azure, la distribuzione del servizio cloud, il ripristino dei dati e la modifica del DNS per il reindirizzamento del traffico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-382">This includes uploading a cloud service to Azure, deploying the cloud service, restoring the data, and changing DNS to reroute the traffic.</span></span>

<span data-ttu-id="ef6e5-383">Anche se si tratta della più economica tra le opzioni per più aree, è la soluzione con le funzionalità peggiori in termini di RTO.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-383">Although this is the most affordable of the multiple-region options, it has the worst RTO characteristics.</span></span> <span data-ttu-id="ef6e5-384">In questo modello i backup del database e del pacchetto del servizio vengono archiviati in locale o nell'archiviazione BLOB di Azure dell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-384">In this model, the service package and database backups are stored either on-premises or in the Azure Blob storage instance of the secondary region.</span></span> <span data-ttu-id="ef6e5-385">È tuttavia necessario distribuire un nuovo servizio e ripristinare i dati prima di tornare operativi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-385">However, you must deploy a new service and restore the data before it resumes operation.</span></span> <span data-ttu-id="ef6e5-386">Anche se si automatizza completamente il trasferimento dati dall'archivio di backup, il provisioning del nuovo ambiente di database richiede comunque molto tempo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-386">Even with full automation of the data transfer from backup storage, provisioning a new database environment consumes a lot of time.</span></span> <span data-ttu-id="ef6e5-387">Lo spostamento di dati dall'archiviazione del disco di backup al database vuoto nell'area secondaria costituisce la parte più onerosa del processo di ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-387">Moving data from the backup disk storage to the empty database on the secondary region is the most expensive part of the restore process.</span></span> <span data-ttu-id="ef6e5-388">Si tratta tuttavia di un'operazione necessaria per portare il nuovo database a uno stato operativo dal momento che non viene replicato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-388">You must do this, however, to bring the new database to an operational state because it isn't replicated.</span></span>

<span data-ttu-id="ef6e5-389">L'approccio migliore consiste nell'archiviare i pacchetti del servizio nell'archiviazione BLOB nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-389">The best approach is to store the service packages in Blob storage in the secondary region.</span></span> <span data-ttu-id="ef6e5-390">Questo elimina la necessità di caricare il pacchetto in Azure, come invece avviene quando si esegue la distribuzione da un computer di sviluppo locale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-390">This eliminates the need to upload the package to Azure, which is what happens when you deploy from an on-premises development machine.</span></span> <span data-ttu-id="ef6e5-391">I pacchetti del servizio possono essere distribuiti rapidamente in un nuovo servizio cloud dall'archiviazione BLOB tramite script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-391">You can quickly deploy the service packages to a new cloud service from Blob storage by using PowerShell scripts.</span></span>

<span data-ttu-id="ef6e5-392">Questa opzione è utile solo per applicazioni non cruciali che possono tollerare un RTO elevato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-392">This option is practical only for non-critical applications that can tolerate a high RTO.</span></span> <span data-ttu-id="ef6e5-393">Ad esempio, questa soluzione può funzionare per un'applicazione che può rimanere non disponibile per diverse ore, ma che deve tornare operativa entro 24 ore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-393">For instance, this might work for an application that can be down for several hours but is required to be available within 24 hours.</span></span>

![Ridistribuzione in un'area di Azure secondaria](./images/disaster-recovery-azure-applications/redeploy-to-a-secondary-azure-region.png)

### <a name="active-passive"></a><span data-ttu-id="ef6e5-395">Modello attivo/passivo</span><span class="sxs-lookup"><span data-stu-id="ef6e5-395">Active-passive</span></span>
<span data-ttu-id="ef6e5-396">La topologia di tipo attivo/passivo rappresenta la scelta preferita da molte società.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-396">An active-passive topology is the choice that many companies favor.</span></span> <span data-ttu-id="ef6e5-397">Offre miglioramenti in termini di RTO con un aumento dei costi relativamente contenuto rispetto all'approccio di ridistribuzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-397">This topology provides improvements to the RTO with a relatively small increase in cost over the redeployment approach.</span></span> <span data-ttu-id="ef6e5-398">Anche questo scenario prevede un'area di Azure primaria e una secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-398">In this scenario, there is again a primary and a secondary Azure region.</span></span> <span data-ttu-id="ef6e5-399">Tutti il traffico è indirizzato alla distribuzione attiva nell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-399">All of the traffic goes to the active deployment on the primary region.</span></span> <span data-ttu-id="ef6e5-400">L'area secondaria è preparata in modo ottimale per il ripristino di emergenza, perché il database è in esecuzione in entrambe le aree</span><span class="sxs-lookup"><span data-stu-id="ef6e5-400">The secondary region is better prepared for disaster recovery because the database is running on both regions.</span></span> <span data-ttu-id="ef6e5-401">e tra di esse è inoltre presente un meccanismo di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-401">Additionally, a synchronization mechanism is in place between them.</span></span> <span data-ttu-id="ef6e5-402">Questo approccio in stand-by può comportare due varianti: un approccio con il solo database o una distribuzione completa nell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-402">This standby approach can involve two variations: a database-only approach or a complete deployment in the secondary region.</span></span>

#### <a name="database-only"></a><span data-ttu-id="ef6e5-403">Solo database</span><span class="sxs-lookup"><span data-stu-id="ef6e5-403">Database only</span></span>
<span data-ttu-id="ef6e5-404">Nella prima variante della topologia di tipo attivo/passivo, l'applicazione del servizio cloud è distribuita solo nell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-404">In the first variation of the active-passive topology, only the primary region has a deployed cloud service application.</span></span> <span data-ttu-id="ef6e5-405">Tuttavia, a differenza dell'approccio di ridistribuzione, il contenuto del database è sincronizzato con entrambe le aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-405">However, unlike the redeployment approach, both regions are synchronized with the contents of the database.</span></span> <span data-ttu-id="ef6e5-406">Per altre informazioni, vedere la sezione [Modelli di dati transazionali per il ripristino di emergenza](#transactional-data-pattern-for-disaster-recovery). In caso di emergenza, i requisiti di attivazione sono minori.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-406">(For more information, see the section on [transactional data pattern for disaster recovery](#transactional-data-pattern-for-disaster-recovery).) When a disaster occurs, there are fewer activation requirements.</span></span> <span data-ttu-id="ef6e5-407">Si avvia l'applicazione nell'area secondaria, si modificano le stringhe di connessione al nuovo database e si modificano le voci DNS per reindirizzare il traffico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-407">You start the application in the secondary region, change connection strings to the new database, and change the DNS entries to reroute traffic.</span></span>

<span data-ttu-id="ef6e5-408">Come nell'approccio di ridistribuzione, i pacchetti del servizio devono essere già archiviati nella risorsa di archiviazione BLOB di Azure nell'area secondaria per una distribuzione più rapida.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-408">Like the redeployment approach, you should have already stored the service packages in Azure Blob storage in the secondary region for faster deployment.</span></span> <span data-ttu-id="ef6e5-409">Tuttavia, dal momento che il database è pronto e in esecuzione, non si incorre nella maggior parte degli oneri aggiuntivi necessari per l'operazione di ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-409">However, you don’t incur the majority of the overhead that database restore operation requires, because the database is ready and running.</span></span> <span data-ttu-id="ef6e5-410">Ciò consente di risparmiare una notevole quantità di tempo e rende questo modello conveniente. Non a caso è quello usato con maggiore frequenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-410">This saves a significant amount of time, making this an affordable DR pattern (and the one most frequently used).</span></span>

![Modello attivo/passivo, solo database](./images/disaster-recovery-azure-applications/active-passive-database-only.png)

#### <a name="full-replica"></a><span data-ttu-id="ef6e5-412">Replica completa</span><span class="sxs-lookup"><span data-stu-id="ef6e5-412">Full replica</span></span>
<span data-ttu-id="ef6e5-413">Nella seconda variante della topologia di tipo attivo/passivo è presente una distribuzione completa sia nell'area primaria che in quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-413">In the second variation of the active-passive topology, both the primary region and the secondary region have a full deployment.</span></span> <span data-ttu-id="ef6e5-414">Questa distribuzione include i servizi cloud e un database sincronizzato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-414">This deployment includes the cloud services and a synchronized database.</span></span> <span data-ttu-id="ef6e5-415">Tuttavia, solo l'area primaria gestisce attivamente le richieste di rete degli utenti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-415">However, only the primary region is actively handling network requests from the users.</span></span> <span data-ttu-id="ef6e5-416">Quella secondaria si attiva solo quando nell'area primaria si verifica un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-416">The secondary region becomes active only when the primary region experiences a service disruption.</span></span> <span data-ttu-id="ef6e5-417">In questo caso tutte le richieste di rete vengono reindirizzate all'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-417">In that case, all new network requests route to the secondary region.</span></span> <span data-ttu-id="ef6e5-418">Gestione traffico di Azure può gestire automaticamente questo tipo di failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-418">Azure Traffic Manager can manage this failover automatically.</span></span>

<span data-ttu-id="ef6e5-419">Il failover avviene più rapidamente rispetto alla variante con il solo database, perché i servizi sono già distribuiti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-419">Failover occurs faster than the database-only variation because the services are already deployed.</span></span> <span data-ttu-id="ef6e5-420">Questa topologia assicura un RTO molto basso:</span><span class="sxs-lookup"><span data-stu-id="ef6e5-420">This topology provides a very low RTO.</span></span> <span data-ttu-id="ef6e5-421">l'area di failover secondaria deve essere immediatamente pronta in caso di problemi con quella primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-421">The secondary failover region must be ready to go immediately after failure of the primary region.</span></span>

<span data-ttu-id="ef6e5-422">Oltre a prevedere un tempo di risposta più rapido, questa topologia presuppone la preallocazione e consente di distribuire servizi di backup evitando che si verifichino problemi di mancanza di spazio per allocare nuove istanze durante un'emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-422">Along with a quicker response time, this topology pre-allocates and deploys backup services, avoiding the possibility of a lack of space to allocate new instances during a disaster.</span></span> <span data-ttu-id="ef6e5-423">Si tratta di un aspetto importante se la capacità dell'area di Azure secondaria è prossima all'esaurimento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-423">This is important if your secondary Azure region is nearing capacity.</span></span> <span data-ttu-id="ef6e5-424">Nessun contratto di servizio (SLA) garantisce che sia possibile distribuire immediatamente uno o più nuovi servizi cloud in un'area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-424">No service-level agreement (SLA) guarantees that you can instantly deploy one or more new cloud services in any region.</span></span>

<span data-ttu-id="ef6e5-425">Per ottenere il tempo di risposta più rapido con questo modello, è necessario avere un numero di istanze del ruolo simile nell'area primaria e in quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-425">For the fastest response time with this model, you must have similar scale (number of role instances) in the primary and secondary regions.</span></span> <span data-ttu-id="ef6e5-426">Nonostante i vantaggi, i costi associati alle istanze di calcolo inutilizzate sono elevati e questa potrebbe non essere quindi la scelta finanziaria più prudente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-426">Despite the advantages, paying for unused compute instances is costly, and this might not be the most prudent financial choice.</span></span> <span data-ttu-id="ef6e5-427">Per questo motivo, nell'area secondaria spesso viene usata una versione leggermente ridotta dei servizi cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-427">Because of this, it's more common to use a slightly scaled-down version of cloud services on the secondary region.</span></span> <span data-ttu-id="ef6e5-428">È quindi possibile eseguire rapidamente il failover e aumentare il numero di istanze della distribuzione secondaria, se necessario.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-428">Then you can quickly fail over and scale out the secondary deployment if necessary.</span></span> <span data-ttu-id="ef6e5-429">È consigliabile automatizzare il processo di failover in modo che, se l'area primaria non è accessibile, vengano attivate istanze aggiuntive a seconda del carico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-429">You should automate the failover process so that after the primary region is inaccessible, you activate additional instances, depending on the load.</span></span> <span data-ttu-id="ef6e5-430">Ciò può implicare un meccanismo di ridimensionamento automatico come i [set di scalabilità di macchine virtuali](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-430">This might involve the use of an autoscaling mechanism like [virtual machine scale sets](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

<span data-ttu-id="ef6e5-431">Il diagramma seguente illustra un modello in cui l'area primaria e quella secondaria contengono una distribuzione completa del servizio cloud secondo la topologia di tipo attivo/passivo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-431">The following diagram shows the model where the primary and secondary regions contain a fully deployed cloud service in an active-passive topology.</span></span>

![Modello attivo/passivo, replica completa](./images/disaster-recovery-azure-applications/active-passive-full-replica.png)

### <a name="active-active"></a><span data-ttu-id="ef6e5-433">Modello attivo/attivo</span><span class="sxs-lookup"><span data-stu-id="ef6e5-433">Active-active</span></span>
<span data-ttu-id="ef6e5-434">In una topologia di tipo attivo/attivo i servizi cloud e il database sono distribuiti completamente in entrambe le aree.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-434">In an active-active topology, the cloud services and database are fully deployed in both regions.</span></span> <span data-ttu-id="ef6e5-435">A differenza del modello attivo/passivo, entrambe le aree ricevono il traffico degli utenti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-435">Unlike the active-passive model, both regions receive user traffic.</span></span> <span data-ttu-id="ef6e5-436">Questa opzione implica il tempo di ripristino più rapido.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-436">This option yields the quickest recovery time.</span></span> <span data-ttu-id="ef6e5-437">I servizi sono già ridimensionati per gestire una parte del carico in ognuna delle aree</span><span class="sxs-lookup"><span data-stu-id="ef6e5-437">The services are already scaled to handle a portion of the load at each region.</span></span> <span data-ttu-id="ef6e5-438">e il DNS è già abilitato all'uso dell'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-438">DNS is already enabled to use the secondary region.</span></span> <span data-ttu-id="ef6e5-439">La complessità aggiuntiva consiste nel determinare la modalità di indirizzamento degli utenti all'area appropriata.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-439">There's additional complexity in determining how to route users to the appropriate region.</span></span> <span data-ttu-id="ef6e5-440">È possibile adottare una pianificazione di tipo round-robin,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-440">Round-robin scheduling might be possible.</span></span> <span data-ttu-id="ef6e5-441">ma è più probabile che determinati utenti preferiscano usare un'area specifica in cui risiede la copia primaria dei propri dati.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-441">It's more likely that certain users would use a specific region where the primary copy of their data resides.</span></span>

<span data-ttu-id="ef6e5-442">In caso di failover, è sufficiente disabilitare il DNS per l'area primaria,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-442">In case of failover, simply disable DNS to the primary region.</span></span> <span data-ttu-id="ef6e5-443">in modo da indirizzare tutto il traffico a quella secondaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-443">This routes all traffic to the secondary region.</span></span>

<span data-ttu-id="ef6e5-444">Anche in questo modello esistono alcune varianti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-444">Even in this model, there are some variations.</span></span> <span data-ttu-id="ef6e5-445">Ad esempio, il diagramma seguente illustra un modello in cui la copia master del database è di proprietà dell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-445">For example, the following diagram depicts a primary region which owns the master copy of the database.</span></span> <span data-ttu-id="ef6e5-446">I servizi cloud in entrambe le aree scrivono sul database primario.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-446">The cloud services in both regions write to that primary database.</span></span> <span data-ttu-id="ef6e5-447">La distribuzione secondaria può leggere il database primario o quello replicato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-447">The secondary deployment can read from the primary or replicated database.</span></span> <span data-ttu-id="ef6e5-448">La replica in questo esempio è unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-448">Replication in this example is one-way.</span></span>

![Modello attivo/attivo](./images/disaster-recovery-azure-applications/active-active.png)

<span data-ttu-id="ef6e5-450">Il diagramma precedente presenta un aspetto negativo dell'architettura di tipo attivo/attivo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-450">There is a downside to the active-active architecture in the preceding diagram.</span></span> <span data-ttu-id="ef6e5-451">La seconda area deve accedere al database nella prima, perché la copia master risiede in quest'ultima.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-451">The second region must access the database in the first region because the master copy resides there.</span></span> <span data-ttu-id="ef6e5-452">Le prestazioni si riducono sensibilmente quando si accede a dati dall'esterno di un'area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-452">Performance significantly drops off when you access data from outside a region.</span></span> <span data-ttu-id="ef6e5-453">Nelle chiamate di database tra aree è necessario prendere in considerazione un tipo di strategia di invio in batch per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-453">In cross-region database calls, you should consider some type of batching strategy to improve the performance of these calls.</span></span> <span data-ttu-id="ef6e5-454">Per altre informazioni, vedere [Come usare l'invio in batch per migliorare le prestazioni delle applicazioni di database SQL](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-454">For more information, see [How to use batching to improve SQL Database application performance](/azure/sql-database/sql-database-use-batching-to-improve-performance/).</span></span>

<span data-ttu-id="ef6e5-455">Un'architettura alternativa può prevedere che ogni area acceda direttamente il proprio database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-455">An alternative architecture might involve each region accessing its own database directly.</span></span> <span data-ttu-id="ef6e5-456">In questo modello è necessario un tipo di replica bidirezionale per sincronizzare i database in ogni area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-456">In that model, some type of bidirectional replication is required to synchronize the databases in each region.</span></span>

<span data-ttu-id="ef6e5-457">Nelle topologie precedenti la riduzione dell'RTO generalmente comporta un aumento di costi e complessità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-457">With the previous topologies, decreasing RTO generally increases costs and complexity.</span></span> <span data-ttu-id="ef6e5-458">La topologia di tipo attivo-attivo si discosta da questo modello di costo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-458">The active-active topology deviates from this cost pattern.</span></span> <span data-ttu-id="ef6e5-459">Nella topologia attivo/attivo può non essere necessario avere nell'area primaria lo stesso numero di istanze della topologia di tipo attivo/passivo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-459">In the active-active topology, you might not need as many instances on the primary region as you would in the active-passive topology.</span></span> <span data-ttu-id="ef6e5-460">Se in un'architettura di tipo attivo/passivo sono disponibili dieci istanze nell'area primaria, in un'architettura di tipo attivo/attivo potrebbero esserne sufficienti solo cinque in ogni area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-460">If you have 10 instances on the primary region in an active-passive architecture, you might need only 5 in each region in an active-active architecture.</span></span> <span data-ttu-id="ef6e5-461">Entrambe le aree ora condividono il carico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-461">Both regions now share the load.</span></span> <span data-ttu-id="ef6e5-462">Ciò può determinare una riduzione dei costi rispetto alla topologia di tipo attivo/passivo, se si tiene in warm standby l'area passiva con 10 istanze in attesa di failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-462">This might be a cost savings over the active-passive topology if you keep a warm standby on the passive region with 10 instances waiting for failover.</span></span>

<span data-ttu-id="ef6e5-463">Tenere presente che fino a quando non si ripristina l'area primaria, quella secondaria potrebbe ricevere un aumento improvviso di nuovi utenti.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-463">Realize that until you restore the primary region, the secondary region might receive a sudden surge of new users.</span></span> <span data-ttu-id="ef6e5-464">Se sono presenti 10.000 utenti in ogni server quando si verifica un'interruzione del servizio nell'area primaria, quella secondaria potrebbe trovarsi improvvisamente a doverne gestire 20.000.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-464">If there are 10,000 users on each server when the primary region experiences a service disruption, the secondary region suddenly has to handle 20,000 users.</span></span> <span data-ttu-id="ef6e5-465">Le regole di monitoraggio nell'area secondaria devono rilevare questo aumento e raddoppiare le istanze in questa area.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-465">Monitoring rules on the secondary region must detect this increase and double the instances in the secondary region.</span></span> <span data-ttu-id="ef6e5-466">Per altre informazioni su questo aspetto, vedere la sezione sul [rilevamento degli errori](#failure-detection).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-466">For more information on this, see the section on [failure detection](#failure-detection).</span></span>

## <a name="hybrid-on-premises-and-cloud-solution"></a><span data-ttu-id="ef6e5-467">soluzioni ibride locali e cloud</span><span class="sxs-lookup"><span data-stu-id="ef6e5-467">Hybrid on-premises and cloud solution</span></span>
<span data-ttu-id="ef6e5-468">Un'altra strategia per il ripristino di emergenza consiste nel progettare un'applicazione ibrida eseguita sia in locale che nel cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-468">One additional strategy for disaster recovery is to architect a hybrid application that runs on-premises and in the cloud.</span></span> <span data-ttu-id="ef6e5-469">A seconda dell'applicazione, l'area primaria può trovarsi in una posizione o nell'altra.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-469">Depending on the application, the primary region might be either location.</span></span> <span data-ttu-id="ef6e5-470">Si considerino le architetture precedenti e si immagini l'area primaria o secondaria come una posizione locale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-470">Consider the previous architectures and imagine the primary or secondary region as an on-premises location.</span></span>

<span data-ttu-id="ef6e5-471">Le architetture ibride presentano alcune sfide.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-471">There are some challenges in these hybrid architectures.</span></span> <span data-ttu-id="ef6e5-472">Per prima cosa, la maggior parte di questo articolo è incentrata su modelli di architettura PaaS.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-472">First, most of this article has addressed PaaS architecture patterns.</span></span> <span data-ttu-id="ef6e5-473">Le applicazioni PaaS in Azure si basano in genere su costrutti specifici di Azure, ad esempio ruoli, servizi cloud e Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-473">Typical PaaS applications in Azure rely on Azure-specific constructs such as roles, cloud services, and Traffic Manager.</span></span> <span data-ttu-id="ef6e5-474">Per creare una soluzione locale per questo tipo di applicazione PaaS, è necessaria un'architettura sostanzialmente diversa.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-474">Creating an on-premises solution for this type of PaaS application would require a significantly different architecture.</span></span> <span data-ttu-id="ef6e5-475">Ciò potrebbe non essere fattibile dal punto di vista della gestione o dei costi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-475">This might not be feasible from a management or cost perspective.</span></span>

<span data-ttu-id="ef6e5-476">Una soluzione ibrida per il ripristino di emergenza presenta tuttavia meno ostacoli per le architetture tradizionali che sono state trasferite nel cloud, ad esempio quelle basate su IaaS.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-476">However, a hybrid solution for disaster recovery has fewer challenges for traditional architectures that have been migrated to the cloud, such as IaaS-based architectures.</span></span> <span data-ttu-id="ef6e5-477">Le applicazioni IaaS usano macchine virtuali nel cloud per le quali possono esistere equivalenti diretti in locale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-477">IaaS applications use virtual machines in the cloud that can have direct on-premises equivalents.</span></span> <span data-ttu-id="ef6e5-478">L'uso di reti virtuali consente anche di connettere macchine nel cloud a risorse di rete locali.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-478">You can also use virtual networks to connect machines in the cloud with on-premises network resources.</span></span> <span data-ttu-id="ef6e5-479">Ciò offre diverse opportunità che non sono possibili con le applicazioni solo PaaS.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-479">This allows several possibilities that are not possible with PaaS-only applications.</span></span> <span data-ttu-id="ef6e5-480">Ad esempio, SQL Server può trarre vantaggio dalle soluzioni di ripristino di emergenza come Gruppi di disponibilità AlwaysOn e il mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-480">For example, SQL Server can take advantage of disaster recovery solutions such as AlwaysOn Availability Groups and database mirroring.</span></span> <span data-ttu-id="ef6e5-481">Per informazioni dettagliate, vedere [Disponibilità elevata e ripristino di emergenza per SQL Server nelle macchine virtuali di Azure](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-481">For details, see [High availability and disaster recovery for SQL Server in Azure virtual machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

<span data-ttu-id="ef6e5-482">Le soluzioni di tipo IaaS forniscono inoltre alle applicazioni locali una modalità più semplice per usare Azure come opzione di failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-482">IaaS solutions also provide an easier path for on-premises applications to use Azure as the failover option.</span></span> <span data-ttu-id="ef6e5-483">È possibile avere un'applicazione completamente funzionante in un'area locale esistente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-483">You might have a fully functioning application in an existing on-premises region.</span></span> <span data-ttu-id="ef6e5-484">Se tuttavia non sono disponibili risorse sufficienti per gestire un'area geograficamente separata per il failover,</span><span class="sxs-lookup"><span data-stu-id="ef6e5-484">However, what if you lack the resources to maintain a geographically separate region for failover?</span></span> <span data-ttu-id="ef6e5-485">è possibile scegliere di usare macchine e reti virtuali per eseguire l'applicazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-485">You might decide to use virtual machines and virtual networks to get your application running in Azure.</span></span> <span data-ttu-id="ef6e5-486">In questo caso, è necessario definire i processi per la sincronizzazione dei dati nel cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-486">In that case, define processes that synchronize data to the cloud.</span></span> <span data-ttu-id="ef6e5-487">La distribuzione di Azure diventa quindi l'area secondaria da usare per il failover.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-487">The Azure deployment then becomes the secondary region to use for failover.</span></span> <span data-ttu-id="ef6e5-488">L'area primaria rimane l'applicazione locale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-488">The primary region remains the on-premises application.</span></span> <span data-ttu-id="ef6e5-489">Per altre informazioni sulle architetture e le funzionalità IaaS, vedere [Macchine virtuali - Documentazione](https://azure.microsoft.com/documentation/services/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-489">For more information about IaaS architectures and capabilities, see the [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="alternative-cloud"></a><span data-ttu-id="ef6e5-490">Cloud alternativi</span><span class="sxs-lookup"><span data-stu-id="ef6e5-490">Alternative cloud</span></span>
<span data-ttu-id="ef6e5-491">Esistono casi in cui le funzionalità generali di Microsoft Azure potrebbero comunque non soddisfare le regole di conformità interne o i criteri richiesti dall'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-491">There are situations where the broad capabilities of Microsoft Azure still may not meet internal compliance rules or policies required by your organization.</span></span> <span data-ttu-id="ef6e5-492">Neanche i sistemi di backup meglio progettati e la migliore preparazione possono sopperire a un'interruzione globale del servizio di un provider di servizi cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-492">Even the best preparation and design to implement backup systems during a disaster are inadequate during a global service disruption of a cloud service provider.</span></span>

<span data-ttu-id="ef6e5-493">È consigliabile confrontare i requisiti di disponibilità con i costi e la complessità di una disponibilità maggiore.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-493">You should compare availability requirements with the cost and complexity of increased availability.</span></span> <span data-ttu-id="ef6e5-494">Eseguire un'analisi dei rischi e definire gli obiettivi per RTO e RPO della soluzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-494">Perform a risk analysis, and define the RTO and RPO for your solution.</span></span> <span data-ttu-id="ef6e5-495">Se l'applicazione non può tollerare alcun tipo di interruzione, può essere opportuno valutare l'uso di una soluzione cloud aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-495">If your application cannot tolerate any downtime, you might consider using an additional cloud solution.</span></span> <span data-ttu-id="ef6e5-496">A meno che l'intera rete Internet non diventi inaccessibile, un'altra soluzione cloud può essere ancora disponibile se Azure dovesse diventare inaccessibile a livello globale.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-496">Unless the entire Internet goes down, another cloud solution might still be available if Azure becomes globally inaccessible.</span></span>

<span data-ttu-id="ef6e5-497">Come nello scenario ibrido, le distribuzioni di failover nelle architetture di ripristino di emergenza precedenti possono essere presenti anche in un'altra soluzione cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-497">As with the hybrid scenario, the failover deployments in the previous disaster recovery architectures can also exist within another cloud solution.</span></span> <span data-ttu-id="ef6e5-498">I siti cloud di ripristino di emergenza alternativi devono essere usati solo per soluzioni con un RTO che non ammette periodi di inattività, se non brevissimi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-498">Alternative cloud DR sites should be used only for solutions whose RTO allows very little, if any, downtime.</span></span> <span data-ttu-id="ef6e5-499">Si noti che una soluzione che usa un sito di ripristino di emergenza esterno ad Azure richiede maggiore impegno per le operazioni di configurazione, sviluppo, distribuzione e gestione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-499">Note that a solution that uses a DR site outside Azure will require more work to configure, develop, deploy, and maintain.</span></span> <span data-ttu-id="ef6e5-500">Risulta inoltre più difficile implementare le procedure consolidate nelle architetture tra cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-500">It's also more difficult to implement proven practices in a cross-cloud architecture.</span></span> <span data-ttu-id="ef6e5-501">Nonostante le piattaforme cloud si basino su concetti generali simili, le API e le architetture sono diverse.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-501">Although cloud platforms have similar high-level concepts, the APIs and architectures are different.</span></span>

<span data-ttu-id="ef6e5-502">Se la strategia di ripristino di emergenza si basa su più piattaforme cloud, è utile includere i livelli di astrazione nella progettazione della soluzione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-502">If your DR strategy relies upon multiple cloud platforms, it's valuable to include abstraction layers in the design of the solution.</span></span> <span data-ttu-id="ef6e5-503">In questo modo non sarà necessario sviluppare e gestire due versioni diverse della stessa applicazione per diverse piattaforme cloud in caso di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-503">This eliminates the need to develop and maintain two different versions of the same application for different cloud platforms in case of disaster.</span></span> <span data-ttu-id="ef6e5-504">Come nello scenario ibrido, l'uso di macchine virtuali di Azure o del servizio contenitore di Azure potrebbe essere più facile in questi casi rispetto alle progettazioni PaaS specifiche del cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-504">As with the hybrid scenario, the use of Azure Virtual Machines or Azure Container Service might be easier in these cases than the use of cloud-specific PaaS designs.</span></span>

## <a name="automation"></a><span data-ttu-id="ef6e5-505">Automazione</span><span class="sxs-lookup"><span data-stu-id="ef6e5-505">Automation</span></span>
<span data-ttu-id="ef6e5-506">Alcuni modelli fin qui illustrati richiedono l'attivazione rapida delle distribuzioni offline, nonché il ripristino di parti specifiche di un sistema.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-506">Some of the patterns that we just discussed require quick activation of offline deployments as well as restoration of specific parts of a system.</span></span> <span data-ttu-id="ef6e5-507">Gli script di automazione possono attivare le risorse su richiesta e distribuire rapidamente le soluzioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-507">Automation scripts can activate resources on demand and deploy solutions rapidly.</span></span> <span data-ttu-id="ef6e5-508">Gli esempi di automazione correlata al ripristino di emergenza sottostanti usano [Azure PowerShell](https://msdn.microsoft.com/library/azure/jj156055.aspx), tuttavia altre opzioni valide sono l'[interfaccia della riga di comando di Azure](https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli) e l'[API REST di gestione dei servizi](https://msdn.microsoft.com/library/azure/ee460799.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-508">The DR-related automation examples below use [Azure PowerShell](https://msdn.microsoft.com/library/azure/jj156055.aspx), but using the [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli) or the [Service Management REST API](https://msdn.microsoft.com/library/azure/ee460799.aspx) are also good options.</span></span>

<span data-ttu-id="ef6e5-509">Gli script di automazione gestiscono aspetti del ripristino di emergenza gestiti da Azure in modo non trasparente.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-509">Automation scripts manage aspects of DR not transparently handled by Azure.</span></span> <span data-ttu-id="ef6e5-510">In questo modo si producono risultati coerenti e ripetibili, riducendo al minimo l'errore umano.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-510">This produces consistent and repeatable results, minimizing human error.</span></span> <span data-ttu-id="ef6e5-511">Gli script di ripristino di emergenza predefiniti consentono inoltre di ridurre i tempi di ricompilazione di un sistema e dei relativi componenti durante una condizione di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-511">Predefined DR scripts also reduce the time to rebuild a system and its constituent parts during a disaster.</span></span> <span data-ttu-id="ef6e5-512">Quando il sito è inattivo e si continua a perdere denaro, non è certo il momento adatto per provare a definire manualmente una procedura di ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-512">You don’t want to try to manually figure out how to restore your site while it's down and losing money every minute.</span></span>

<span data-ttu-id="ef6e5-513">Verificare gli script più volte dall'inizio alla fine.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-513">Test your scripts repeatedly from start to finish.</span></span> <span data-ttu-id="ef6e5-514">Dopo avere verificato le funzionalità di base, testarli nella [simulazione di un'emergenza](#disaster-simulation).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-514">After verifying their basic functionality, make sure to test them in [disaster simulation](#disaster-simulation).</span></span> <span data-ttu-id="ef6e5-515">Ciò consente di rilevare difetti negli script o nei processi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-515">This helps uncover defects in the scripts or processes.</span></span>

<span data-ttu-id="ef6e5-516">Una procedura consigliata per l'automazione consiste nel creare un repository di script di PowerShell, o script dell'interfaccia della riga di comando, per il ripristino di emergenza di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-516">A best practice with automation is to create a repository of PowerShell scripts or command-line interface (CLI) scripts for Azure disaster recovery.</span></span> <span data-ttu-id="ef6e5-517">Contrassegnarli e classificarli chiaramente per agevolare l'accesso.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-517">Clearly mark and categorize them for quick access.</span></span> <span data-ttu-id="ef6e5-518">Designare una persona principale che gestisca il repository e il controllo delle versioni degli script.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-518">Designate a primary person to manage the repository and versioning of the scripts.</span></span> <span data-ttu-id="ef6e5-519">Documentarli accuratamente con spiegazioni dei parametri ed esempi di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-519">Document them well with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="ef6e5-520">Accertarsi anche che la documentazione sia sincronizzata con le distribuzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-520">Also ensure that you keep this documentation in sync with your Azure deployments.</span></span> <span data-ttu-id="ef6e5-521">Ciò evidenzia lo scopo di avere una persona principale responsabile di tutte le parti del repository.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-521">This underscores the purpose of having a primary person in charge of all parts of the repository.</span></span>

## <a name="failure-detection"></a><span data-ttu-id="ef6e5-522">rilevamento degli errori</span><span class="sxs-lookup"><span data-stu-id="ef6e5-522">Failure detection</span></span>
<span data-ttu-id="ef6e5-523">Per poter gestire correttamente i problemi relativi a disponibilità e ripristino di emergenza, è necessario poter rilevare e diagnosticare gli errori.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-523">To correctly handle problems with availability and disaster recovery, you must be able to detect and diagnose failures.</span></span> <span data-ttu-id="ef6e5-524">Eseguire il monitoraggio avanzato del server e della distribuzione per riconoscere rapidamente quando un sistema o i relativi componenti diventano improvvisamente non disponibili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-524">Perform advanced server and deployment monitoring to quickly recognize when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="ef6e5-525">Parte di questa attività può essere eseguita dagli strumenti di monitoraggio che valutano lo stato complessivo del servizio cloud e delle relative dipendenze.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-525">Monitoring tools that assess the overall health of the cloud service and its dependencies can perform part of this work.</span></span> <span data-ttu-id="ef6e5-526">Uno strumento Microsoft appropriato è [System Center 2016](https://www.microsoft.com/en-us/server-cloud/products/system-center-2016/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-526">One suitable Microsoft tool is [System Center 2016](https://www.microsoft.com/en-us/server-cloud/products/system-center-2016/).</span></span> <span data-ttu-id="ef6e5-527">Anche strumenti di terze parti possono offrire funzionalità di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-527">Third-party tools can also provide monitoring capabilities.</span></span> <span data-ttu-id="ef6e5-528">La maggior parte delle soluzioni di monitoraggio controlla i contatori delle prestazioni chiave e la disponibilità dei servizi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-528">Most monitoring solutions track key performance counters and service availability.</span></span>

<span data-ttu-id="ef6e5-529">Anche se questi strumenti sono essenziali, è comunque necessario pianificare il rilevamento e la segnalazione degli errori in un servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-529">Although these tools are vital, you must plan for fault detection and reporting within a cloud service.</span></span> <span data-ttu-id="ef6e5-530">È necessaria anche una pianificazione per un uso corretto della Diagnostica di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-530">You must also plan to properly use Azure Diagnostics.</span></span> <span data-ttu-id="ef6e5-531">Anche contatori delle prestazioni personalizzati o voci del log eventi possono far parte della strategia complessiva.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-531">Custom performance counters or event-log entries can also be part of the overall strategy.</span></span> <span data-ttu-id="ef6e5-532">In questo modo è possibile avere più dati in caso di errore per diagnosticare rapidamente il problema e ripristinare tutte le funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-532">This provides more data during failures to quickly diagnose the problem and restore full capabilities.</span></span> <span data-ttu-id="ef6e5-533">Sono inoltre disponibili altre metriche che gli strumenti di monitoraggio possono usare per determinare l'integrità di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-533">It also provides additional metrics that the monitoring tools can use to determine application health.</span></span> <span data-ttu-id="ef6e5-534">Per altre informazioni, vedere [Abilitazione di Diagnostica di Azure in servizi cloud di Azure](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-534">For more information, see [Enabling Azure Diagnostics in Azure Cloud Services](/azure/cloud-services/cloud-services-dotnet-diagnostics/).</span></span> <span data-ttu-id="ef6e5-535">Per informazioni su come pianificare un "modello di integrità" generale, vedere l'articolo su [FailSafe: Informazioni aggiuntive per architetture cloud resilienti](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="ef6e5-535">For a discussion of how to plan for an overall “health model,” see [Failsafe: Guidance for Resilient Cloud Architectures](https://channel9.msdn.com/Series/FailSafe).</span></span>

## <a name="disaster-simulation"></a><span data-ttu-id="ef6e5-536">simulazione di un'emergenza</span><span class="sxs-lookup"><span data-stu-id="ef6e5-536">Disaster simulation</span></span>
<span data-ttu-id="ef6e5-537">I test di simulazione prevedono la creazione di situazioni reali nell'ambiente operativo effettivo, per osservare in che modo reagiscono i membri del team.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-537">Simulation testing involves creating small real-life situations on the work floor to observe how the team members react.</span></span> <span data-ttu-id="ef6e5-538">Consentono inoltre di valutare l'efficienza delle soluzioni descritte nel piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-538">Simulations also show how effective the solutions are in the recovery plan.</span></span> <span data-ttu-id="ef6e5-539">Le simulazioni devono essere eseguite in modo che gli scenari creati non interrompano le attività aziendali effettive, senza tuttavia risultare meno "reali".</span><span class="sxs-lookup"><span data-stu-id="ef6e5-539">Execute simulations so that the created scenarios don't disrupt actual business, while still feeling like real situations.</span></span>

<span data-ttu-id="ef6e5-540">Provare a progettare un tipo di "centralino" nell'applicazione per simulare manualmente problemi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-540">Consider architecting a type of “switchboard” in the application to manually simulate availability issues.</span></span> <span data-ttu-id="ef6e5-541">Ad esempio, tramite un commutatore software, attivare eccezioni di accesso al database per il modulo di elaborazione degli ordini, causandone il malfunzionamento.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-541">For instance, through a soft switch, trigger database access exceptions for an ordering module by causing it to malfunction.</span></span> <span data-ttu-id="ef6e5-542">Approcci semplici di questo tipo possono essere adottati per altri moduli a livello di interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-542">You can take similar lightweight approaches for other modules at the network interface level.</span></span>

<span data-ttu-id="ef6e5-543">Durante la simulazione vengono evidenziati eventuali problemi non gestiti in modo adeguato.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-543">The simulation highlights any issues that were inadequately addressed.</span></span> <span data-ttu-id="ef6e5-544">Gli scenari simulati devono essere completamente controllabili.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-544">The simulated scenarios must be completely controllable.</span></span> <span data-ttu-id="ef6e5-545">In questo modo, anche se il piano di ripristino ha esito negativo, è possibile ripristinare la situazione senza causare danni significativi.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-545">This means that, even if the recovery plan seems to be failing, you can restore the situation back to normal without causing any significant damage.</span></span> <span data-ttu-id="ef6e5-546">È inoltre importante che i responsabili ad alto livello siano informati sui tempi e sulle modalità di esecuzione delle simulazioni.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-546">It’s also important that you inform higher-level management about when and how the simulation exercises will be executed.</span></span> <span data-ttu-id="ef6e5-547">Questo piano deve indicare in modo dettagliato il tempo necessario o le risorse coinvolte durante la simulazione.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-547">This plan should detail the time or resources affected during the simulation.</span></span> <span data-ttu-id="ef6e5-548">Definire anche il grado di successo durante il test del piano di ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-548">Also define the measures of success when testing your disaster recovery plan.</span></span>

<span data-ttu-id="ef6e5-549">I piani di ripristino di emergenza possono essere sottoposti a test anche con altre tecniche.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-549">Several other techniques can test disaster recovery plans.</span></span> <span data-ttu-id="ef6e5-550">La maggior parte delle quali tuttavia è costituita semplicemente da varianti delle tecniche di base.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-550">However, most of them are simply variations of these basic techniques.</span></span> <span data-ttu-id="ef6e5-551">Lo scopo di questo test è valutare la fattibilità del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-551">The intent of this testing is to evaluate the feasibility of the recovery plan.</span></span> <span data-ttu-id="ef6e5-552">I test del piano di ripristino di emergenza sono incentrati sui dettagli per individuare le falle del piano di base.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-552">Disaster recovery testing focuses on the details to discover gaps in the basic recovery plan.</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="ef6e5-553">Indicazioni specifiche dei servizi</span><span class="sxs-lookup"><span data-stu-id="ef6e5-553">Service-specific guidance</span></span>

<span data-ttu-id="ef6e5-554">Gli argomenti che seguono descrivono i servizi di Azure specifici per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="ef6e5-554">The following topics describe disaster recovery specific Azure services:</span></span>

| <span data-ttu-id="ef6e5-555">Service</span><span class="sxs-lookup"><span data-stu-id="ef6e5-555">Service</span></span> | <span data-ttu-id="ef6e5-556">Argomento</span><span class="sxs-lookup"><span data-stu-id="ef6e5-556">Topic</span></span> |
|---------|-------|
| <span data-ttu-id="ef6e5-557">Servizi cloud</span><span class="sxs-lookup"><span data-stu-id="ef6e5-557">Cloud Services</span></span> | [<span data-ttu-id="ef6e5-558">Operazioni da eseguire in caso di un'interruzione del servizio Azure con impatto sui servizi cloud di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-558">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="ef6e5-559">Insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="ef6e5-559">Key Vault</span></span> | [<span data-ttu-id="ef6e5-560">Disponibilità e ridondanza in Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="ef6e5-560">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance) |
|<span data-ttu-id="ef6e5-561">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="ef6e5-561">Storage</span></span> | [<span data-ttu-id="ef6e5-562">Cosa fare se si verifica un'interruzione di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-562">What to do if an Azure Storage outage occurs</span></span>](/azure/storage/storage-disaster-recovery-guidance) |
| <span data-ttu-id="ef6e5-563">Database SQL</span><span class="sxs-lookup"><span data-stu-id="ef6e5-563">SQL Database</span></span> | [<span data-ttu-id="ef6e5-564">Ripristinare un database SQL di Azure o eseguire il failover in un database secondario</span><span class="sxs-lookup"><span data-stu-id="ef6e5-564">Restore an Azure SQL Database or failover to a secondary</span></span>](/azure/sql-database/sql-database-disaster-recovery) |
| <span data-ttu-id="ef6e5-565">Macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="ef6e5-565">Virtual machines</span></span> | [<span data-ttu-id="ef6e5-566">Cosa fare in caso di un'interruzione di servizio di Azure che influisce sulle macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="ef6e5-566">What to do in the event that an Azure service disruption impacts Azure virtual machines</span></span>](/azure/virtual-machines/virtual-machines-disaster-recovery-guidance) |
| <span data-ttu-id="ef6e5-567">Reti virtuali</span><span class="sxs-lookup"><span data-stu-id="ef6e5-567">Virtual networks</span></span> | [<span data-ttu-id="ef6e5-568">Rete virtuale - Continuità aziendale</span><span class="sxs-lookup"><span data-stu-id="ef6e5-568">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance) |


