---
title: Stile di architettura di microservizi
description: Descrive i vantaggi, le problematiche e le procedure consigliate per le architetture di microservizi in Azure
author: MikeWasson
ms.date: 08/30/2018
ms.openlocfilehash: fb23ac3e408f3a202d925a1bf684bc30d423f218
ms.sourcegitcommit: ae8a1de6f4af7a89a66a8339879843d945201f85
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 08/31/2018
ms.locfileid: "43325444"
---
# <a name="microservices-architecture-style"></a><span data-ttu-id="093d9-103">Stile di architettura di microservizi</span><span class="sxs-lookup"><span data-stu-id="093d9-103">Microservices architecture style</span></span>

<span data-ttu-id="093d9-104">Un'architettura di microservizi è costituita da un insieme di servizi ridotti autonomi.</span><span class="sxs-lookup"><span data-stu-id="093d9-104">A microservices architecture consists of a collection of small, autonomous services.</span></span> <span data-ttu-id="093d9-105">Ogni servizio è indipendente e deve implementare una singola funzionalità di business.</span><span class="sxs-lookup"><span data-stu-id="093d9-105">Each service is self-contained and should implement a single business capability.</span></span> <span data-ttu-id="093d9-106">Per indicazioni dettagliate per la creazione di un'architettura di microservizi in Azure, vedere [Progettazione, creazione e gestione di microservizi in Azure](../../microservices/index.md).</span><span class="sxs-lookup"><span data-stu-id="093d9-106">For detailed guidance about building a microservices architecture on Azure, see [Designing, building, and operating microservices on Azure](../../microservices/index.md).</span></span>

![](./images/microservices-logical.svg)
 
<span data-ttu-id="093d9-107">Per alcuni aspetti, i microservizi sono l'evoluzione naturale delle architetture orientate ai servizi (SOA), ma esistono alcune differenze tra i microservizi e le architetture SOA.</span><span class="sxs-lookup"><span data-stu-id="093d9-107">In some ways, microservices are the natural evolution of service oriented architectures (SOA), but there are differences between microservices and SOA.</span></span> <span data-ttu-id="093d9-108">Ecco alcune caratteristiche specifiche di un microservizio:</span><span class="sxs-lookup"><span data-stu-id="093d9-108">Here are some defining characteristics of a microservice:</span></span>

- <span data-ttu-id="093d9-109">In un'architettura di microservizi i servizi sono ridotti, indipendenti e a regime di controllo libero.</span><span class="sxs-lookup"><span data-stu-id="093d9-109">In a microservices architecture, services are small, independent, and loosely coupled.</span></span>

- <span data-ttu-id="093d9-110">Ogni servizio è una base di codici distinta, che può essere gestita da un team di sviluppo di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="093d9-110">Each service is a separate codebase, which can be managed by a small development team.</span></span>

- <span data-ttu-id="093d9-111">I servizi possono essere distribuiti in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="093d9-111">Services can be deployed independently.</span></span> <span data-ttu-id="093d9-112">Un team può aggiornare un servizio esistente senza ricompilare e ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="093d9-112">A team can update an existing service without rebuilding and redeploying the entire application.</span></span>

- <span data-ttu-id="093d9-113">I servizi sono responsabili della persistenza dei propri dati o dello stato esterno.</span><span class="sxs-lookup"><span data-stu-id="093d9-113">Services are responsible for persisting their own data or external state.</span></span> <span data-ttu-id="093d9-114">Questo comportamento differisce dal modello tradizionale, in cui la persistenza dei dati viene gestita da un livello dati distinto.</span><span class="sxs-lookup"><span data-stu-id="093d9-114">This differs from the traditional model, where a separate data layer handles data persistence.</span></span>

- <span data-ttu-id="093d9-115">I servizi comunicano tra loro tramite API ben definite.</span><span class="sxs-lookup"><span data-stu-id="093d9-115">Services communicate with each other by using well-defined APIs.</span></span> <span data-ttu-id="093d9-116">I dettagli di implementazione interna di ogni servizio sono nascosti da altri servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-116">Internal implementation details of each service are hidden from other services.</span></span>

- <span data-ttu-id="093d9-117">Non è necessario che i servizi condividano lo stesso stack di tecnologie, le stesse librerie o gli stessi framework.</span><span class="sxs-lookup"><span data-stu-id="093d9-117">Services don't need to share the same technology stack, libraries, or frameworks.</span></span>

<span data-ttu-id="093d9-118">Oltre ai servizi, in un'architettura di microservizi tipica compaiono alcuni altri componenti:</span><span class="sxs-lookup"><span data-stu-id="093d9-118">Besides for the services themselves, some other components appear in a typical microservices architecture:</span></span>

<span data-ttu-id="093d9-119">**Gestione**.</span><span class="sxs-lookup"><span data-stu-id="093d9-119">**Management**.</span></span> <span data-ttu-id="093d9-120">Il componente di gestione è responsabile del posizionamento dei servizi sui nodi, dell'identificazione degli errori, del ribilanciamento dei servizi tra i nodi e così via.</span><span class="sxs-lookup"><span data-stu-id="093d9-120">The management component is responsible for placing services on nodes, identifying failures, rebalancing services across nodes, and so forth.</span></span>  

<span data-ttu-id="093d9-121">**Individuazione del servizio**.</span><span class="sxs-lookup"><span data-stu-id="093d9-121">**Service Discovery**.</span></span>  <span data-ttu-id="093d9-122">Gestisce un elenco di servizi e dei nodi in cui si trovano.</span><span class="sxs-lookup"><span data-stu-id="093d9-122">Maintains a list of services and which nodes they are located on.</span></span> <span data-ttu-id="093d9-123">Consente la ricerca del servizio per individuare l'endpoint per un servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-123">Enables service lookup to find the endpoint for a service.</span></span> 

<span data-ttu-id="093d9-124">**Gateway API**.</span><span class="sxs-lookup"><span data-stu-id="093d9-124">**API Gateway**.</span></span> <span data-ttu-id="093d9-125">Il gateway API è il punto di ingresso per i client.</span><span class="sxs-lookup"><span data-stu-id="093d9-125">The API gateway is the entry point for clients.</span></span> <span data-ttu-id="093d9-126">I client non chiamano direttamente i servizi,</span><span class="sxs-lookup"><span data-stu-id="093d9-126">Clients don't call services directly.</span></span> <span data-ttu-id="093d9-127">ma chiamano il gateway API, che inoltra la chiamata ai servizi appropriati sul back-end.</span><span class="sxs-lookup"><span data-stu-id="093d9-127">Instead, they call the API gateway, which forwards the call to the appropriate services on the back end.</span></span> <span data-ttu-id="093d9-128">Il gateway API potrebbe aggregare le risposte da diversi servizi e restituire la risposta aggregata.</span><span class="sxs-lookup"><span data-stu-id="093d9-128">The API gateway might aggregate the responses from several services and return the aggregated response.</span></span> 

<span data-ttu-id="093d9-129">Tra i vantaggi dell'uso di un gateway API rientrano i seguenti:</span><span class="sxs-lookup"><span data-stu-id="093d9-129">The advantages of using an API gateway include:</span></span>

- <span data-ttu-id="093d9-130">Separa i client dai servizi,</span><span class="sxs-lookup"><span data-stu-id="093d9-130">It decouples clients from services.</span></span> <span data-ttu-id="093d9-131">di cui può essere effettuato il refactoring o il controllo delle versioni senza la necessità di aggiornare tutti i client.</span><span class="sxs-lookup"><span data-stu-id="093d9-131">Services can be versioned or refactored without needing to update all of the clients.</span></span>

-  <span data-ttu-id="093d9-132">I servizi possono usare protocolli di messaggistica non compatibili con il Web, come AMQP.</span><span class="sxs-lookup"><span data-stu-id="093d9-132">Services can use messaging protocols that are not web friendly, such as AMQP.</span></span>

- <span data-ttu-id="093d9-133">Il gateway API può eseguire altre funzioni trasversali, come l'autenticazione, la registrazione, la terminazione SSL e il bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="093d9-133">The API Gateway can perform other cross-cutting functions such as authentication, logging, SSL termination, and load balancing.</span></span>

## <a name="when-to-use-this-architecture"></a><span data-ttu-id="093d9-134">Quando usare questa architettura</span><span class="sxs-lookup"><span data-stu-id="093d9-134">When to use this architecture</span></span>

<span data-ttu-id="093d9-135">Prendere in considerazione questo stile di architettura per:</span><span class="sxs-lookup"><span data-stu-id="093d9-135">Consider this architecture style for:</span></span>

- <span data-ttu-id="093d9-136">Applicazioni di grandi dimensioni che richiedono una velocità elevata.</span><span class="sxs-lookup"><span data-stu-id="093d9-136">Large applications that require a high release velocity.</span></span>

- <span data-ttu-id="093d9-137">Applicazioni complesse che devono essere estremamente scalabili.</span><span class="sxs-lookup"><span data-stu-id="093d9-137">Complex applications that need to be highly scalable.</span></span>

- <span data-ttu-id="093d9-138">Applicazioni con domini avanzati o con un numero elevato di sottodomini.</span><span class="sxs-lookup"><span data-stu-id="093d9-138">Applications with rich domains or many subdomains.</span></span>

- <span data-ttu-id="093d9-139">Un'organizzazione costituita da team di sviluppo di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="093d9-139">An organization that consists of small development teams.</span></span>


## <a name="benefits"></a><span data-ttu-id="093d9-140">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="093d9-140">Benefits</span></span> 

- <span data-ttu-id="093d9-141">**Distribuzioni indipendenti**.</span><span class="sxs-lookup"><span data-stu-id="093d9-141">**Independent deployments**.</span></span> <span data-ttu-id="093d9-142">È possibile aggiornare un servizio senza ridistribuire l'intera applicazione ed eseguire il rollback o il roll forward di un aggiornamento in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="093d9-142">You can update a service without redeploying the entire application, and roll back or roll forward an update if something goes wrong.</span></span> <span data-ttu-id="093d9-143">Le correzioni di bug e i rilasci di funzionalità sono più semplici da gestire e meno rischiosi.</span><span class="sxs-lookup"><span data-stu-id="093d9-143">Bug fixes and feature releases are more manageable and less risky.</span></span>

- <span data-ttu-id="093d9-144">**Sviluppo indipendente**.</span><span class="sxs-lookup"><span data-stu-id="093d9-144">**Independent development**.</span></span> <span data-ttu-id="093d9-145">Un singolo team di sviluppo può compilare, testare e distribuire un servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-145">A single development team can build, test, and deploy a service.</span></span> <span data-ttu-id="093d9-146">Il risultato è un'innovazione continua e un ritmo di rilascio più veloce.</span><span class="sxs-lookup"><span data-stu-id="093d9-146">The result is continuous innovation and a faster release cadence.</span></span> 

- <span data-ttu-id="093d9-147">**Team focalizzati di piccole dimensioni**.</span><span class="sxs-lookup"><span data-stu-id="093d9-147">**Small, focused teams**.</span></span> <span data-ttu-id="093d9-148">I team possono concentrarsi su un servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-148">Teams can focus on one service.</span></span> <span data-ttu-id="093d9-149">L'ambito più ridotto di ciascun servizio rende la base di codici più facile da comprendere ed è più semplice per i nuovi membri del team essere immediatamente operativi.</span><span class="sxs-lookup"><span data-stu-id="093d9-149">The smaller scope of each service makes the code base easier to understand, and it's easier for new team members to ramp up.</span></span>

- <span data-ttu-id="093d9-150">**Isolamento degli errori**.</span><span class="sxs-lookup"><span data-stu-id="093d9-150">**Fault isolation**.</span></span> <span data-ttu-id="093d9-151">Se un servizio smette di funzionare, il problema non influirà sull'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="093d9-151">If a service goes down, it won't take out the entire application.</span></span> <span data-ttu-id="093d9-152">Ciò non implica tuttavia che la resilienza sia assicurata senza mettere in atto misure adeguate.</span><span class="sxs-lookup"><span data-stu-id="093d9-152">However, that doesn't mean you get resiliency for free.</span></span> <span data-ttu-id="093d9-153">È necessario seguire gli schemi progettuali e le procedure consigliate per la resilienza.</span><span class="sxs-lookup"><span data-stu-id="093d9-153">You still need to follow resiliency best practices and design patterns.</span></span> <span data-ttu-id="093d9-154">Vedere [Progettazione di applicazioni resilienti per Azure][resiliency-overview].</span><span class="sxs-lookup"><span data-stu-id="093d9-154">See [Designing resilient applications for Azure][resiliency-overview].</span></span>

- <span data-ttu-id="093d9-155">**Stack di tecnologie miste**.</span><span class="sxs-lookup"><span data-stu-id="093d9-155">**Mixed technology stacks**.</span></span> <span data-ttu-id="093d9-156">I team possono scegliere la tecnologia che meglio si adatta ai servizi in uso.</span><span class="sxs-lookup"><span data-stu-id="093d9-156">Teams can pick the technology that best fits their service.</span></span> 

- <span data-ttu-id="093d9-157">**Ridimensionamento granulare**.</span><span class="sxs-lookup"><span data-stu-id="093d9-157">**Granular scaling**.</span></span> <span data-ttu-id="093d9-158">I servizi possono essere ridimensionati in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="093d9-158">Services can be scaled independently.</span></span> <span data-ttu-id="093d9-159">Allo stesso tempo, la maggiore densità dei servizi per ogni macchina virtuale significa che le risorse delle macchine virtuali vengono pienamente usate.</span><span class="sxs-lookup"><span data-stu-id="093d9-159">At the same time, the higher density of services per VM means that VM resources are fully utilized.</span></span> <span data-ttu-id="093d9-160">Tramite i vincoli di posizionamento, un servizio può essere associato a un profilo di macchina virtuale (uso elevato della CPU, memoria alta e così via).</span><span class="sxs-lookup"><span data-stu-id="093d9-160">Using placement constraints, a services can be matched to a VM profile (high CPU, high memory, and so on).</span></span>

## <a name="challenges"></a><span data-ttu-id="093d9-161">Problematiche</span><span class="sxs-lookup"><span data-stu-id="093d9-161">Challenges</span></span>

- <span data-ttu-id="093d9-162">**Complessità**.</span><span class="sxs-lookup"><span data-stu-id="093d9-162">**Complexity**.</span></span> <span data-ttu-id="093d9-163">Un'applicazione di microservizi ha più parti mobili rispetto all'applicazione monolitica equivalente.</span><span class="sxs-lookup"><span data-stu-id="093d9-163">A microservices application has more moving parts than the equivalent monolithic application.</span></span> <span data-ttu-id="093d9-164">Ogni servizio è più semplice, ma l'intero sistema nella sua totalità è più complesso.</span><span class="sxs-lookup"><span data-stu-id="093d9-164">Each service is simpler, but the entire system as a whole is more complex.</span></span>

- <span data-ttu-id="093d9-165">**Sviluppo e test**.</span><span class="sxs-lookup"><span data-stu-id="093d9-165">**Development and test**.</span></span> <span data-ttu-id="093d9-166">L'attività di sviluppo rispetto alle dipendenze dei servizi richiede un approccio diverso.</span><span class="sxs-lookup"><span data-stu-id="093d9-166">Developing against service dependencies requires a different approach.</span></span> <span data-ttu-id="093d9-167">Gli strumenti esistenti non sono necessariamente progettati per poter essere usati con le dipendenze dei servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-167">Existing tools are not necessarily designed to work with service dependencies.</span></span> <span data-ttu-id="093d9-168">Effettuare il refactoring tra i limiti dei servizi può essere difficile.</span><span class="sxs-lookup"><span data-stu-id="093d9-168">Refactoring across service boundaries can be difficult.</span></span> <span data-ttu-id="093d9-169">Può risultare complesso anche testare le dipendenze dei servizi, specialmente quando l'applicazione è in rapida evoluzione.</span><span class="sxs-lookup"><span data-stu-id="093d9-169">It is also challenging to test service dependencies, especially when the application is evolving quickly.</span></span>

- <span data-ttu-id="093d9-170">**Mancanza di governance**.</span><span class="sxs-lookup"><span data-stu-id="093d9-170">**Lack of governance**.</span></span> <span data-ttu-id="093d9-171">L'approccio decentralizzato alla creazione di microservizi presenta alcuni vantaggi, ma può anche causare problemi.</span><span class="sxs-lookup"><span data-stu-id="093d9-171">The decentralized approach to building microservices has advantages, but it can also lead to problems.</span></span> <span data-ttu-id="093d9-172">Potrebbero esserci così tanti linguaggi e framework diversi che l'applicazione diventa difficile da gestire.</span><span class="sxs-lookup"><span data-stu-id="093d9-172">You may end up with so many different languages and frameworks that the application becomes hard to maintain.</span></span> <span data-ttu-id="093d9-173">Può essere utile applicare alcuni standard a livello di progetto, senza limitare eccessivamente la flessibilità dei team.</span><span class="sxs-lookup"><span data-stu-id="093d9-173">It may be useful to put some project-wide standards in place, without overly restricting teams' flexibility.</span></span> <span data-ttu-id="093d9-174">Questo vale in special modo per le funzionalità trasversali come la registrazione.</span><span class="sxs-lookup"><span data-stu-id="093d9-174">This especially applies to cross-cutting functionality such as logging.</span></span>

- <span data-ttu-id="093d9-175">**Congestione e latenza di rete**.</span><span class="sxs-lookup"><span data-stu-id="093d9-175">**Network congestion and latency**.</span></span> <span data-ttu-id="093d9-176">L'uso di molti servizi granulari di dimensioni ridotte può comportare una maggiore comunicazione tra i servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-176">The use of many small, granular services can result in more interservice communication.</span></span> <span data-ttu-id="093d9-177">Inoltre, se la catena delle dipendenze dei servizi diventa troppo lunga (il servizio A chiama il servizio B, che a sua volta chiama il servizio C...), l'ulteriore latenza può diventare un problema.</span><span class="sxs-lookup"><span data-stu-id="093d9-177">Also, if the chain of service dependencies gets too long (service A calls B, which calls C...), the additional latency can become a problem.</span></span> <span data-ttu-id="093d9-178">Sarà necessario progettare le API con attenzione.</span><span class="sxs-lookup"><span data-stu-id="093d9-178">You will need to design APIs carefully.</span></span> <span data-ttu-id="093d9-179">Evitare API eccessivamente "frammentate", considerare i formati di serializzazione e cercare posizioni appropriate in cui usare modelli di comunicazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="093d9-179">Avoid overly chatty APIs, think about serialization formats, and look for places to use asynchronous communication patterns.</span></span>

- <span data-ttu-id="093d9-180">**Integrità dei dati**.</span><span class="sxs-lookup"><span data-stu-id="093d9-180">**Data integrity**.</span></span> <span data-ttu-id="093d9-181">Con ogni microservizio responsabile della persistenza dei propri dati,</span><span class="sxs-lookup"><span data-stu-id="093d9-181">With each microservice responsible for its own data persistence.</span></span> <span data-ttu-id="093d9-182">la conseguenza è che la coerenza dei dati può risultare un problema.</span><span class="sxs-lookup"><span data-stu-id="093d9-182">As a result, data consistency can be a challenge.</span></span> <span data-ttu-id="093d9-183">Implementare la coerenza finale dove possibile.</span><span class="sxs-lookup"><span data-stu-id="093d9-183">Embrace eventual consistency where possible.</span></span>

- <span data-ttu-id="093d9-184">**Gestione**.</span><span class="sxs-lookup"><span data-stu-id="093d9-184">**Management**.</span></span> <span data-ttu-id="093d9-185">Per una corretta implementazione dei microservizi è necessaria una conoscenza avanzata di DevOps.</span><span class="sxs-lookup"><span data-stu-id="093d9-185">To be successful with microservices requires a mature DevOps culture.</span></span> <span data-ttu-id="093d9-186">La registrazione correlata tra i servizi può risultare complessa.</span><span class="sxs-lookup"><span data-stu-id="093d9-186">Correlated logging across services can be challenging.</span></span> <span data-ttu-id="093d9-187">In genere, la registrazione deve correlare più chiamate al servizio per un'operazione richiesta da un singolo utente.</span><span class="sxs-lookup"><span data-stu-id="093d9-187">Typically, logging must correlate multiple service calls for a single user operation.</span></span>

- <span data-ttu-id="093d9-188">**Controllo delle versioni**.</span><span class="sxs-lookup"><span data-stu-id="093d9-188">**Versioning**.</span></span> <span data-ttu-id="093d9-189">Gli aggiornamenti a un servizio non devono interrompere i servizi che dipendono da esso.</span><span class="sxs-lookup"><span data-stu-id="093d9-189">Updates to a service must not break services that depend on it.</span></span> <span data-ttu-id="093d9-190">Potrebbero essere aggiornati più servizi in un dato momento, pertanto senza un'attenta progettazione si potrebbero verificare problemi di compatibilità con le versioni precedenti o successive.</span><span class="sxs-lookup"><span data-stu-id="093d9-190">Multiple services could be updated at any given time, so without careful design, you might have problems with backward or forward compatibility.</span></span>

- <span data-ttu-id="093d9-191">**Competenze**.</span><span class="sxs-lookup"><span data-stu-id="093d9-191">**Skillset**.</span></span> <span data-ttu-id="093d9-192">I microservizi sono sistemi altamente distribuiti.</span><span class="sxs-lookup"><span data-stu-id="093d9-192">Microservices are highly distributed systems.</span></span> <span data-ttu-id="093d9-193">Valutare attentamente se il team dispone delle competenze e dell'esperienza per implementarli correttamente.</span><span class="sxs-lookup"><span data-stu-id="093d9-193">Carefully evaluate whether the team has the skills and experience to be successful.</span></span>

## <a name="best-practices"></a><span data-ttu-id="093d9-194">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="093d9-194">Best practices</span></span>

- <span data-ttu-id="093d9-195">Modellare i servizi attorno al dominio aziendale.</span><span class="sxs-lookup"><span data-stu-id="093d9-195">Model services around the business domain.</span></span> 

- <span data-ttu-id="093d9-196">Decentralizzare tutti gli elementi.</span><span class="sxs-lookup"><span data-stu-id="093d9-196">Decentralize everything.</span></span> <span data-ttu-id="093d9-197">I singoli team sono responsabili della progettazione e della creazione dei servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-197">Individual teams are responsible for designing and building services.</span></span> <span data-ttu-id="093d9-198">Evitare di condividere schemi di dati o codice.</span><span class="sxs-lookup"><span data-stu-id="093d9-198">Avoid sharing code or data schemas.</span></span> 

- <span data-ttu-id="093d9-199">L'archiviazione dei dati dovrebbe essere privata per il servizio proprietario dei dati.</span><span class="sxs-lookup"><span data-stu-id="093d9-199">Data storage should be private to the service that owns the data.</span></span> <span data-ttu-id="093d9-200">Usare l'archiviazione migliore per ogni servizio e tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="093d9-200">Use the best storage for each service and data type.</span></span> 

- <span data-ttu-id="093d9-201">I servizi comunicano attraverso API ben progettate.</span><span class="sxs-lookup"><span data-stu-id="093d9-201">Services communicate through well-designed APIs.</span></span> <span data-ttu-id="093d9-202">Evitare la divulgazione dei dettagli dell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="093d9-202">Avoid leaking implementation details.</span></span> <span data-ttu-id="093d9-203">Le API dovrebbero modellare il dominio, non l'implementazione interna del servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-203">APIs should model the domain, not the internal implementation of the service.</span></span>

- <span data-ttu-id="093d9-204">Evitare l'accoppiamento tra servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-204">Avoid coupling between services.</span></span> <span data-ttu-id="093d9-205">Le cause dell'accoppiamento includono schemi del database condivisi e protocolli di comunicazione rigidi.</span><span class="sxs-lookup"><span data-stu-id="093d9-205">Causes of coupling include shared database schemas and rigid communication protocols.</span></span>

- <span data-ttu-id="093d9-206">Delegare al gateway le questioni trasversali, come l'autenticazione e la terminazione SSL.</span><span class="sxs-lookup"><span data-stu-id="093d9-206">Offload cross-cutting concerns, such as authentication and SSL termination, to the gateway.</span></span>

- <span data-ttu-id="093d9-207">Non comunicare al gateway le informazioni di dominio.</span><span class="sxs-lookup"><span data-stu-id="093d9-207">Keep domain knowledge out of the gateway.</span></span> <span data-ttu-id="093d9-208">Il gateway dovrebbe gestire e instradare le richieste client senza dover necessariamente conoscere le regole business o la logica di dominio.</span><span class="sxs-lookup"><span data-stu-id="093d9-208">The gateway should handle and route client requests without any knowledge of the business rules or domain logic.</span></span> <span data-ttu-id="093d9-209">In caso contrario, il gateway diventa una dipendenza e può causare l'accoppiamento tra servizi.</span><span class="sxs-lookup"><span data-stu-id="093d9-209">Otherwise, the gateway becomes a dependency and can cause coupling between services.</span></span>

- <span data-ttu-id="093d9-210">I servizi dovrebbero avere un regime di controllo libero e un'elevata coesione funzionale.</span><span class="sxs-lookup"><span data-stu-id="093d9-210">Services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="093d9-211">Le funzioni che potrebbero essere modificate contemporaneamente devono essere inserite in pacchetto e distribuite insieme.</span><span class="sxs-lookup"><span data-stu-id="093d9-211">Functions that are likely to change together should be packaged and deployed together.</span></span> <span data-ttu-id="093d9-212">Se si trovano in servizi separati, tali servizi finiranno per risultare strettamente accoppiati, perché una modifica in un servizio richiederà l'aggiornamento dell'altro servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-212">If they reside in separate services, those services end up being tightly coupled, because a change in one service will require updating the other service.</span></span> <span data-ttu-id="093d9-213">Le comunicazioni eccessivamente "frammentate" tra due servizi possono essere un sintomo di accoppiamento stretto e bassa coesione.</span><span class="sxs-lookup"><span data-stu-id="093d9-213">Overly chatty communication between two services may be a symptom of tight coupling and low cohesion.</span></span> 

- <span data-ttu-id="093d9-214">Isolare gli errori.</span><span class="sxs-lookup"><span data-stu-id="093d9-214">Isolate failures.</span></span> <span data-ttu-id="093d9-215">Usare strategie di resilienza per impedire che gli errori all'interno di un servizio si propaghino.</span><span class="sxs-lookup"><span data-stu-id="093d9-215">Use resiliency strategies to prevent failures within a service from cascading.</span></span> <span data-ttu-id="093d9-216">Vedere [Resiliency patterns][resiliency-patterns] (Modelli di resilienza) e [Progettazione di applicazioni resilienti][resiliency-overview].</span><span class="sxs-lookup"><span data-stu-id="093d9-216">See [Resiliency patterns][resiliency-patterns] and [Designing resilient applications][resiliency-overview].</span></span>

## <a name="microservices-using-azure-container-service"></a><span data-ttu-id="093d9-217">Microservizi basati sull'uso del servizio contenitore di Azure</span><span class="sxs-lookup"><span data-stu-id="093d9-217">Microservices using Azure Container Service</span></span> 

<span data-ttu-id="093d9-218">È possibile usare il [servizio contenitore di Azure](/azure/container-service/) per configurare un cluster Docker ed effettuarne il provisioning.</span><span class="sxs-lookup"><span data-stu-id="093d9-218">You can use [Azure Container Service](/azure/container-service/) to configure and provision a Docker cluster.</span></span> <span data-ttu-id="093d9-219">Il servizio contenitore di Azure supporta diversi agenti di orchestrazione ampiamente diffusi, tra cui Kubernetes, DC/OS e Docker Swarm.</span><span class="sxs-lookup"><span data-stu-id="093d9-219">Azure Container Services supports several popular container orchestrators, including Kubernetes, DC/OS, and Docker Swarm.</span></span>

![](./images/microservices-acs.png)
 
<span data-ttu-id="093d9-220">**Nodi pubblici**.</span><span class="sxs-lookup"><span data-stu-id="093d9-220">**Public nodes**.</span></span> <span data-ttu-id="093d9-221">Questi nodi sono raggiungibili tramite un servizio di bilanciamento del carico pubblico.</span><span class="sxs-lookup"><span data-stu-id="093d9-221">These nodes are reachable through a public-facing load balancer.</span></span> <span data-ttu-id="093d9-222">Il gateway API è ospitato in questi nodi.</span><span class="sxs-lookup"><span data-stu-id="093d9-222">The API gateway is hosted on these nodes.</span></span>

<span data-ttu-id="093d9-223">**Nodi di back-end**.</span><span class="sxs-lookup"><span data-stu-id="093d9-223">**Backend nodes**.</span></span> <span data-ttu-id="093d9-224">Questi nodi eseguono servizi che i client raggiungono tramite il gateway API</span><span class="sxs-lookup"><span data-stu-id="093d9-224">These nodes run services that clients reach via the API gateway.</span></span> <span data-ttu-id="093d9-225">e non ricevono direttamente il traffico Internet.</span><span class="sxs-lookup"><span data-stu-id="093d9-225">These nodes don't receive Internet traffic directly.</span></span> <span data-ttu-id="093d9-226">I nodi di back-end potrebbero includere più pool di macchine virtuali, ognuno con un profilo hardware diverso.</span><span class="sxs-lookup"><span data-stu-id="093d9-226">The backend nodes might include more than one pool of VMs, each with a different hardware profile.</span></span> <span data-ttu-id="093d9-227">Ad esempio, è possibile creare pool distinti per carichi di lavoro di calcolo generale, carichi di lavoro di uso elevato della CPU e carichi di lavoro di memoria alta.</span><span class="sxs-lookup"><span data-stu-id="093d9-227">For example, you could create separate pools for general compute workloads, high CPU workloads, and high memory workloads.</span></span> 

<span data-ttu-id="093d9-228">**Macchine virtuali di gestione**.</span><span class="sxs-lookup"><span data-stu-id="093d9-228">**Management VMs**.</span></span> <span data-ttu-id="093d9-229">Queste macchine virtuali eseguono i nodi master per l'agente di orchestrazione del contenitore.</span><span class="sxs-lookup"><span data-stu-id="093d9-229">These VMs run the master nodes for the container orchestrator.</span></span> 

<span data-ttu-id="093d9-230">**Rete**.</span><span class="sxs-lookup"><span data-stu-id="093d9-230">**Networking**.</span></span> <span data-ttu-id="093d9-231">I nodi pubblici, i nodi di back-end e le macchine virtuali di gestione vengono inseriti in subnet distinte nella stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="093d9-231">The public nodes, backend nodes, and management VMs are placed in separate subnets within the same virtual network (VNet).</span></span> 

<span data-ttu-id="093d9-232">**Servizi di bilanciamento del carico**.</span><span class="sxs-lookup"><span data-stu-id="093d9-232">**Load balancers**.</span></span>  <span data-ttu-id="093d9-233">Un servizio di bilanciamento del carico pubblico esterno è posizionato davanti ai nodi pubblici</span><span class="sxs-lookup"><span data-stu-id="093d9-233">An externally facing load balancer sits in front of the public nodes.</span></span> <span data-ttu-id="093d9-234">e distribuisce le richieste Internet ai nodi pubblici.</span><span class="sxs-lookup"><span data-stu-id="093d9-234">It distributes internet requests to the public nodes.</span></span> <span data-ttu-id="093d9-235">Un altro servizio di bilanciamento del carico è posizionato davanti alle macchine virtuali di gestione, per consentire il traffico Secure Shell (SSH) per le macchine virtuali di gestione, usando le regole NAT.</span><span class="sxs-lookup"><span data-stu-id="093d9-235">Another load balancer is placed in front of the management VMs, to allow secure shell (ssh) traffic to the management VMs, using NAT rules.</span></span>

<span data-ttu-id="093d9-236">Per l'affidabilità e la scalabilità, ogni servizio viene replicato tra più macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="093d9-236">For reliability and scalability, each service is replicated across multiple VMs.</span></span> <span data-ttu-id="093d9-237">Tuttavia, poiché i servizi sono anche relativamente leggeri (rispetto a un'applicazione monolitica), in genere più servizi vengono compressi in un'unica macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="093d9-237">However, because services are also relatively lightweight (compared with a monolithic application), multiple services are usually packed into a single VM.</span></span> <span data-ttu-id="093d9-238">Una maggiore densità consente un uso ottimale delle risorse.</span><span class="sxs-lookup"><span data-stu-id="093d9-238">Higher density allows better resource utilization.</span></span> <span data-ttu-id="093d9-239">Se un determinato servizio non usa molte risorse, non occorre dedicare un'intera macchina virtuale all'esecuzione di tale servizio.</span><span class="sxs-lookup"><span data-stu-id="093d9-239">If a particular service doesn't use a lot of resources, you don't need to dedicate an entire VM to running that service.</span></span>

<span data-ttu-id="093d9-240">Il diagramma seguente mostra tre nodi che eseguono quattro diversi servizi (indicati da forme diverse).</span><span class="sxs-lookup"><span data-stu-id="093d9-240">The following diagram shows three nodes running four different services (indicated by different shapes).</span></span> <span data-ttu-id="093d9-241">Si noti che ogni servizio dispone di almeno due istanze.</span><span class="sxs-lookup"><span data-stu-id="093d9-241">Notice that each service has at least two instances.</span></span> 
 
![](./images/microservices-node-density.png)

## <a name="microservices-using-azure-service-fabric"></a><span data-ttu-id="093d9-242">Microservizi basati sull'uso di Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="093d9-242">Microservices using Azure Service Fabric</span></span>

<span data-ttu-id="093d9-243">Il diagramma seguente mostra un'architettura di microservizi con [Azure Service Fabric](/azure/service-fabric/).</span><span class="sxs-lookup"><span data-stu-id="093d9-243">The following diagram shows a microservices architecture using [Azure Service Fabric](/azure/service-fabric/).</span></span>

![](./images/service-fabric.png)

<span data-ttu-id="093d9-244">Il cluster di Service Fabric viene distribuito in uno o più set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="093d9-244">The Service Fabric cluster is deployed to one or more VM scale sets.</span></span> <span data-ttu-id="093d9-245">È possibile disporre di più set di scalabilità delle macchine virtuali nel cluster, in modo da avere una combinazione di tipi di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="093d9-245">You might have more than one VM scale set in the cluster, in order to have a mix of VM types.</span></span> <span data-ttu-id="093d9-246">Un gateway API è posizionato davanti al cluster di Service Fabric, con un servizio di bilanciamento del carico esterno per ricevere le richieste client.</span><span class="sxs-lookup"><span data-stu-id="093d9-246">An API Gateway is placed in front of the Service Fabric cluster, with an external load balancer to receive client requests.</span></span>

<span data-ttu-id="093d9-247">Il runtime di Service Fabric esegue la gestione del cluster, inclusi il posizionamento dei servizi, il failover dei nodi e il monitoraggio dello stato.</span><span class="sxs-lookup"><span data-stu-id="093d9-247">The Service Fabric runtime performs cluster management, including service placement, node failover, and health monitoring.</span></span> <span data-ttu-id="093d9-248">Il runtime viene distribuito nei nodi del cluster stessi.</span><span class="sxs-lookup"><span data-stu-id="093d9-248">The runtime is deployed on the cluster nodes themselves.</span></span> <span data-ttu-id="093d9-249">Non è disponibile un set distinto di macchine virtuali per la gestione del cluster.</span><span class="sxs-lookup"><span data-stu-id="093d9-249">There isn't a separate set of cluster management VMs.</span></span>

<span data-ttu-id="093d9-250">I servizi comunicano tra loro mediante il proxy inverso integrato in Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="093d9-250">Services communicate with each other using the reverse proxy that is built into Service Fabric.</span></span> <span data-ttu-id="093d9-251">Service Fabric fornisce un servizio di individuazione in grado di risolvere l'endpoint per un servizio denominato.</span><span class="sxs-lookup"><span data-stu-id="093d9-251">Service Fabric provides a discovery service that can resolve the endpoint for a named service.</span></span>


<!-- links -->

[resiliency-overview]: ../../resiliency/index.md
[resiliency-patterns]: ../../patterns/category/resiliency.md



