---
title: Stile di architettura guidato dagli eventi
titleSuffix: Azure Application Architecture Guide
description: Illustra i vantaggi, le problematiche e le procedure consigliate per le architetture IoT e guidate dagli eventi in Azure.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: b83a919e4ccd41d20b508b10604365a0b4ca90af
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54485469"
---
# <a name="event-driven-architecture-style"></a><span data-ttu-id="d5552-103">Stile di architettura guidato dagli eventi</span><span class="sxs-lookup"><span data-stu-id="d5552-103">Event-driven architecture style</span></span>

<span data-ttu-id="d5552-104">Un'architettura guidata dagli eventi è costituita da **producer eventi** che generano un flusso di eventi e **consumer eventi** che sono in ascolto degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-104">An event-driven architecture consists of **event producers** that generate a stream of events, and **event consumers** that listen for the events.</span></span>

![Diagramma dello stile di un'architettura guidata dagli eventi](./images/event-driven.svg)

<span data-ttu-id="d5552-106">Gli eventi vengono recapitati praticamente in tempo reale, in modo che i consumer possano rispondervi immediatamente non appena si verificano.</span><span class="sxs-lookup"><span data-stu-id="d5552-106">Events are delivered in near real time, so consumers can respond immediately to events as they occur.</span></span> <span data-ttu-id="d5552-107">I producer sono separati dai consumer: un producer è all'oscuro dei consumer in ascolto.</span><span class="sxs-lookup"><span data-stu-id="d5552-107">Producers are decoupled from consumers &mdash; a producer doesn't know which consumers are listening.</span></span> <span data-ttu-id="d5552-108">Anche i consumer sono separati tra loro e ognuno visualizza tutti gli eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-108">Consumers are also decoupled from each other, and every consumer sees all of the events.</span></span> <span data-ttu-id="d5552-109">Questo comportamento differisce da un modello con [consumer concorrenti][competing-consumers], in cui i consumer eseguono il pull di messaggi da una coda e un messaggio viene elaborato solo una volta (presupponendo l'assenza di errori).</span><span class="sxs-lookup"><span data-stu-id="d5552-109">This differs from a [Competing Consumers][competing-consumers] pattern, where consumers pull messages from a queue and a message is processed just once (assuming no errors).</span></span> <span data-ttu-id="d5552-110">In alcuni sistemi, ad esempio nei sistemi IoT, gli eventi devono essere inseriti a volumi molto elevati.</span><span class="sxs-lookup"><span data-stu-id="d5552-110">In some systems, such as IoT, events must be ingested at very high volumes.</span></span>

<span data-ttu-id="d5552-111">Un'architettura guidata dagli eventi può usare un modello di pubblicazione/sottoscrizione o un modello di flusso di eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-111">An event driven architecture can use a pub/sub model or an event stream model.</span></span>

- <span data-ttu-id="d5552-112">**Publicazione/sottoscrizione**: l'infrastruttura di messaggistica tiene traccia delle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="d5552-112">**Pub/sub**: The messaging infrastructure keeps track of subscriptions.</span></span> <span data-ttu-id="d5552-113">Quando viene pubblicato un evento, il modello lo invia a ogni sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="d5552-113">When an event is published, it sends the event to each subscriber.</span></span> <span data-ttu-id="d5552-114">Quando viene ricevuto un evento, non può essere riprodotto e i nuovi sottoscrittori non possono visualizzarlo.</span><span class="sxs-lookup"><span data-stu-id="d5552-114">After an event is received, it cannot be replayed, and new subscribers do not see the event.</span></span>

- <span data-ttu-id="d5552-115">**Streaming di eventi**: gli eventi vengono scritti in un log.</span><span class="sxs-lookup"><span data-stu-id="d5552-115">**Event streaming**: Events are written to a log.</span></span> <span data-ttu-id="d5552-116">Gli eventi sono rigorosamente ordinati (in una partizione) e durevoli.</span><span class="sxs-lookup"><span data-stu-id="d5552-116">Events are strictly ordered (within a partition) and durable.</span></span> <span data-ttu-id="d5552-117">I client non sottoscrivono il flusso, ma un client può invece leggere da qualsiasi parte del flusso.</span><span class="sxs-lookup"><span data-stu-id="d5552-117">Clients don't subscribe to the stream, instead a client can read from any part of the stream.</span></span> <span data-ttu-id="d5552-118">Il client è responsabile di far avanzare la propria posizione nel flusso.</span><span class="sxs-lookup"><span data-stu-id="d5552-118">The client is responsible for advancing its position in the stream.</span></span> <span data-ttu-id="d5552-119">Questo significa che un client può aggiungersi in qualsiasi momento e può riprodurre gli eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-119">That means a client can join at any time, and can replay events.</span></span>

<span data-ttu-id="d5552-120">Sul lato consumer si applicano alcune variazioni comuni:</span><span class="sxs-lookup"><span data-stu-id="d5552-120">On the consumer side, there are some common variations:</span></span>

- <span data-ttu-id="d5552-121">**Elaborazione semplice degli eventi**.</span><span class="sxs-lookup"><span data-stu-id="d5552-121">**Simple event processing**.</span></span> <span data-ttu-id="d5552-122">Un evento attiva immediatamente un'azione nel consumer.</span><span class="sxs-lookup"><span data-stu-id="d5552-122">An event immediately triggers an action in the consumer.</span></span> <span data-ttu-id="d5552-123">Ad esempio, è possibile usare Funzioni di Azure con un trigger del bus di servizio, in modo da eseguire una funzione ogni volta che viene pubblicato un messaggio in un argomento del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="d5552-123">For example, you could use Azure Functions with a Service Bus trigger, so that a function executes whenever a message is published to a Service Bus topic.</span></span>

- <span data-ttu-id="d5552-124">**Elaborazione complessa degli eventi**.</span><span class="sxs-lookup"><span data-stu-id="d5552-124">**Complex event processing**.</span></span> <span data-ttu-id="d5552-125">Un consumer elabora una serie di eventi, cercando i modelli nei dati di evento, tramite una tecnologia come Analisi di flusso di Azure o Apache Storm.</span><span class="sxs-lookup"><span data-stu-id="d5552-125">A consumer processes a series of events, looking for patterns in the event data, using a technology such as Azure Stream Analytics or Apache Storm.</span></span> <span data-ttu-id="d5552-126">Ad esempio, è possibile aggregare letture da un dispositivo incorporato in base a un intervallo di tempo e quindi generare una notifica se la media mobile supera una determinata soglia.</span><span class="sxs-lookup"><span data-stu-id="d5552-126">For example, you could aggregate readings from an embedded device over a time window, and generate a notification if the moving average crosses a certain threshold.</span></span>

- <span data-ttu-id="d5552-127">**Elaborazione di flussi di eventi**.</span><span class="sxs-lookup"><span data-stu-id="d5552-127">**Event stream processing**.</span></span> <span data-ttu-id="d5552-128">Usare una piattaforma di flussi di dati, come l'hub IoT di Azure o Apache Kafka, come pipeline per inserire gli eventi e fornirli agli elaboratori di flussi.</span><span class="sxs-lookup"><span data-stu-id="d5552-128">Use a data streaming platform, such as Azure IoT Hub or Apache Kafka, as a pipeline to ingest events and feed them to stream processors.</span></span> <span data-ttu-id="d5552-129">Gli elaboratori di flussi intervengono per elaborare o trasformare il flusso.</span><span class="sxs-lookup"><span data-stu-id="d5552-129">The stream processors act to process or transform the stream.</span></span> <span data-ttu-id="d5552-130">Possono essere presenti più elaboratori di flussi per sottosistemi diversi nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d5552-130">There may be multiple stream processors for different subsystems of the application.</span></span> <span data-ttu-id="d5552-131">Questo approccio è ideale per i carichi di lavoro IoT.</span><span class="sxs-lookup"><span data-stu-id="d5552-131">This approach is a good fit for IoT workloads.</span></span>

<span data-ttu-id="d5552-132">L'origine degli eventi può essere esterna al sistema, ad esempio può essere costituita da dispositivi fisici in una soluzione IoT.</span><span class="sxs-lookup"><span data-stu-id="d5552-132">The source of the events may be external to the system, such as physical devices in an IoT solution.</span></span> <span data-ttu-id="d5552-133">In questo caso, il sistema deve essere in grado di inserire i dati in base alla velocità effettiva e al volume richiesti dall'origine dati.</span><span class="sxs-lookup"><span data-stu-id="d5552-133">In that case, the system must be able to ingest the data at the volume and throughput that is required by the data source.</span></span>

<span data-ttu-id="d5552-134">Nel diagramma logico raffigurato sopra ogni tipo di consumer viene mostrato come singola casella.</span><span class="sxs-lookup"><span data-stu-id="d5552-134">In the logical diagram above, each type of consumer is shown as a single box.</span></span> <span data-ttu-id="d5552-135">In pratica, è prassi comune definire più istanze di un consumer, per evitare che il consumer diventi un singolo punto di guasto nel sistema.</span><span class="sxs-lookup"><span data-stu-id="d5552-135">In practice, it's common to have multiple instances of a consumer, to avoid having the consumer become a single point of failure in system.</span></span> <span data-ttu-id="d5552-136">Possono essere necessarie più istanze anche per gestire il volume e la frequenza degli eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-136">Multiple instances might also be necessary to handle the volume and frequency of events.</span></span> <span data-ttu-id="d5552-137">Inoltre, un singolo consumer può elaborare gli eventi in più thread.</span><span class="sxs-lookup"><span data-stu-id="d5552-137">Also, a single consumer might process events on multiple threads.</span></span> <span data-ttu-id="d5552-138">Questo approccio può rivelarsi problematico se gli eventi devono essere elaborati in ordine o se richiedono una semantica di recapito effettuato esattamente una volta.</span><span class="sxs-lookup"><span data-stu-id="d5552-138">This can create challenges if events must be processed in order, or require exactly-once semantics.</span></span> <span data-ttu-id="d5552-139">Vedere [Ridurre al minimo il coordinamento][minimize-coordination].</span><span class="sxs-lookup"><span data-stu-id="d5552-139">See [Minimize Coordination][minimize-coordination].</span></span>

## <a name="when-to-use-this-architecture"></a><span data-ttu-id="d5552-140">Quando usare questa architettura</span><span class="sxs-lookup"><span data-stu-id="d5552-140">When to use this architecture</span></span>

- <span data-ttu-id="d5552-141">Più sottosistemi devono elaborare gli stessi eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-141">Multiple subsystems must process the same events.</span></span>
- <span data-ttu-id="d5552-142">Elaborazione in tempo reale con ritardo minimo.</span><span class="sxs-lookup"><span data-stu-id="d5552-142">Real-time processing with minimum time lag.</span></span>
- <span data-ttu-id="d5552-143">Elaborazione complessa degli eventi, ad esempio con criteri di ricerca o aggregazione in base a intervalli di tempo.</span><span class="sxs-lookup"><span data-stu-id="d5552-143">Complex event processing, such as pattern matching or aggregation over time windows.</span></span>
- <span data-ttu-id="d5552-144">Volume elevato e alta velocità dei dati, ad esempio in sistemi IoT.</span><span class="sxs-lookup"><span data-stu-id="d5552-144">High volume and high velocity of data, such as IoT.</span></span>

## <a name="benefits"></a><span data-ttu-id="d5552-145">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="d5552-145">Benefits</span></span>

- <span data-ttu-id="d5552-146">I producer e i consumer sono separati.</span><span class="sxs-lookup"><span data-stu-id="d5552-146">Producers and consumers are decoupled.</span></span>
- <span data-ttu-id="d5552-147">Nessuna integrazione da punto a punto.</span><span class="sxs-lookup"><span data-stu-id="d5552-147">No point-to point-integrations.</span></span> <span data-ttu-id="d5552-148">È facile aggiungere nuovi consumer al sistema.</span><span class="sxs-lookup"><span data-stu-id="d5552-148">It's easy to add new consumers to the system.</span></span>
- <span data-ttu-id="d5552-149">I consumer possono rispondere agli eventi immediatamente, non appena arrivano.</span><span class="sxs-lookup"><span data-stu-id="d5552-149">Consumers can respond to events immediately as they arrive.</span></span>
- <span data-ttu-id="d5552-150">Scalabilità e distribuzione elevate.</span><span class="sxs-lookup"><span data-stu-id="d5552-150">Highly scalable and distributed.</span></span>
- <span data-ttu-id="d5552-151">I sottosistemi hanno viste indipendenti del flusso di eventi.</span><span class="sxs-lookup"><span data-stu-id="d5552-151">Subsystems have independent views of the event stream.</span></span>

## <a name="challenges"></a><span data-ttu-id="d5552-152">Problematiche</span><span class="sxs-lookup"><span data-stu-id="d5552-152">Challenges</span></span>

- <span data-ttu-id="d5552-153">Recapito garantito.</span><span class="sxs-lookup"><span data-stu-id="d5552-153">Guaranteed delivery.</span></span> <span data-ttu-id="d5552-154">In alcuni sistemi, in particolare in scenari IoT, è essenziale garantire che gli eventi vengano recapitati.</span><span class="sxs-lookup"><span data-stu-id="d5552-154">In some systems, especially in IoT scenarios, it's crucial to guarantee that events are delivered.</span></span>
- <span data-ttu-id="d5552-155">Elaborazione degli eventi in ordine o esattamente una volta.</span><span class="sxs-lookup"><span data-stu-id="d5552-155">Processing events in order or exactly once.</span></span> <span data-ttu-id="d5552-156">In genere, ogni tipo di consumer viene eseguito in più istanze, per motivi di resilienza e scalabilità.</span><span class="sxs-lookup"><span data-stu-id="d5552-156">Each consumer type typically runs in multiple instances, for resiliency and scalability.</span></span> <span data-ttu-id="d5552-157">Questo approccio può rivelarsi problematico se gli eventi devono essere elaborati in ordine (all'interno di un tipo di consumer) o se la logica di elaborazione non è idempotente.</span><span class="sxs-lookup"><span data-stu-id="d5552-157">This can create a challenge if the events must be processed in order (within a consumer type), or if the processing logic is not idempotent.</span></span>

 <!-- links -->

[competing-consumers]: ../../patterns/competing-consumers.md
[minimize-coordination]: ../design-principles/minimize-coordination.md
