---
title: Creare partizioni per ovviare ai limiti
titleSuffix: Azure Application Architecture Guide
description: Usare il partizionamento per risolvere il problema dei limiti a livello di calcolo, database e rete.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: 76590d2a0c16df9d599e7d4a856a84b5e3bdcec8
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/23/2019
ms.locfileid: "54486013"
---
# <a name="partition-around-limits"></a><span data-ttu-id="4f10a-103">Creare partizioni per ovviare ai limiti</span><span class="sxs-lookup"><span data-stu-id="4f10a-103">Partition around limits</span></span>

## <a name="use-partitioning-to-work-around-database-network-and-compute-limits"></a><span data-ttu-id="4f10a-104">Usare il partizionamento per risolvere il problema dei limiti a livello di calcolo, database e rete</span><span class="sxs-lookup"><span data-stu-id="4f10a-104">Use partitioning to work around database, network, and compute limits</span></span>

<span data-ttu-id="4f10a-105">Nel cloud tutti i servizi prevedono limiti di scalabilità verticale.</span><span class="sxs-lookup"><span data-stu-id="4f10a-105">In the cloud, all services have limits in their ability to scale up.</span></span> <span data-ttu-id="4f10a-106">I limiti dei servizi di Azure sono indicati in [Sottoscrizione di Azure e limiti, quote e vincoli dei servizi][azure-limits].</span><span class="sxs-lookup"><span data-stu-id="4f10a-106">Azure service limits are documented in [Azure subscription and service limits, quotas, and constraints][azure-limits].</span></span> <span data-ttu-id="4f10a-107">I limiti includono il numero di core, le dimensioni dei database, la velocità effettiva di query e la velocità effettiva della rete.</span><span class="sxs-lookup"><span data-stu-id="4f10a-107">Limits include number of cores, database size, query throughput, and network throughput.</span></span> <span data-ttu-id="4f10a-108">Se le dimensioni del sistema aumentano notevolmente, si potrebbero raggiungere uno o più di questi limiti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-108">If your system grows sufficiently large, you may hit one or more of these limits.</span></span> <span data-ttu-id="4f10a-109">Usare il partizionamento per ovviare a questi limiti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-109">Use partitioning to work around these limits.</span></span>

<span data-ttu-id="4f10a-110">Ci sono molti modi per partizionare un sistema, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="4f10a-110">There are many ways to partition a system, such as:</span></span>

- <span data-ttu-id="4f10a-111">Partizionare un database per ovviare ai limiti relativi a dimensioni del database, I/O dei dati o numero di sessioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="4f10a-111">Partition a database to avoid limits on database size, data I/O, or number of concurrent sessions.</span></span>

- <span data-ttu-id="4f10a-112">Partizionare una coda o un bus di messaggi per ovviare ai limiti relativi al numero di richieste o al numero di connessioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="4f10a-112">Partition a queue or message bus to avoid limits on the number of requests or the number of concurrent connections.</span></span>

- <span data-ttu-id="4f10a-113">Partizionare un'app Web del servizio app per ovviare ai limiti relativi al numero di istanze per ogni piano di servizio app.</span><span class="sxs-lookup"><span data-stu-id="4f10a-113">Partition an App Service web app to avoid limits on the number of instances per App Service plan.</span></span>

<span data-ttu-id="4f10a-114">Un database può essere partizionato *orizzontalmente*, *verticalmente* o dal punto di vista *funzionale*.</span><span class="sxs-lookup"><span data-stu-id="4f10a-114">A database can be partitioned *horizontally*, *vertically*, or *functionally*.</span></span>

- <span data-ttu-id="4f10a-115">Con il partizionamento orizzontale, ogni partizione contiene i dati di un subset del set di dati totale.</span><span class="sxs-lookup"><span data-stu-id="4f10a-115">In horizontal partitioning, also called sharding, each partition holds data for a subset of the total data set.</span></span> <span data-ttu-id="4f10a-116">Le partizioni condividono lo stesso schema dei dati.</span><span class="sxs-lookup"><span data-stu-id="4f10a-116">The partitions share the same data schema.</span></span> <span data-ttu-id="4f10a-117">Ad esempio, i clienti i cui nomi iniziano per A&ndash;M vengono inseriti in una partizione, quelli con i nomi che iniziano per N&ndash;Z in un'altra partizione.</span><span class="sxs-lookup"><span data-stu-id="4f10a-117">For example, customers whose names start with A&ndash;M go into one partition, N&ndash;Z into another partition.</span></span>

- <span data-ttu-id="4f10a-118">Con il partizionamento verticale, ogni partizione contiene un subset dei campi per gli elementi nell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="4f10a-118">In vertical partitioning, each partition holds a subset of the fields for the items in the data store.</span></span> <span data-ttu-id="4f10a-119">Inserire, ad esempio, i campi usati di frequente in una partizione e quelli usati raramente in un'altra partizione.</span><span class="sxs-lookup"><span data-stu-id="4f10a-119">For example, put frequently accessed fields in one partition, and less frequently accessed fields in another.</span></span>

- <span data-ttu-id="4f10a-120">Con il partizionamento funzionale, i dati vengono partizionati in base al modo in cui vengono usati da ogni contesto limitato nel sistema.</span><span class="sxs-lookup"><span data-stu-id="4f10a-120">In functional partitioning, data is partitioned according to how it is used by each bounded context in the system.</span></span> <span data-ttu-id="4f10a-121">Archiviare, ad esempio, i dati delle fatture in una partizione e quelli relativi all'inventario dei prodotti in un'altra.</span><span class="sxs-lookup"><span data-stu-id="4f10a-121">For example, store invoice data in one partition and product inventory data in another.</span></span> <span data-ttu-id="4f10a-122">Gli schemi sono indipendenti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-122">The schemas are independent.</span></span>

<span data-ttu-id="4f10a-123">Per informazioni più dettagliate, vedere [Data partitioning][data-partitioning-guidance] (Partizionamento dei dati).</span><span class="sxs-lookup"><span data-stu-id="4f10a-123">For more detailed guidance, see [Data partitioning][data-partitioning-guidance].</span></span>

## <a name="recommendations"></a><span data-ttu-id="4f10a-124">Consigli</span><span class="sxs-lookup"><span data-stu-id="4f10a-124">Recommendations</span></span>

<span data-ttu-id="4f10a-125">**Partizionare diverse parti dell'applicazione**.</span><span class="sxs-lookup"><span data-stu-id="4f10a-125">**Partition different parts of the application**.</span></span> <span data-ttu-id="4f10a-126">I database sono un candidato ottimale per il partizionamento, ma prendere in considerazione anche le risorse di archiviazione, la cache, le code e le istanze di calcolo.</span><span class="sxs-lookup"><span data-stu-id="4f10a-126">Databases are one obvious candidate for partitioning, but also consider storage, cache, queues, and compute instances.</span></span>

<span data-ttu-id="4f10a-127">**Progettare la chiave di partizione in modo da evitare sovraccarichi**.</span><span class="sxs-lookup"><span data-stu-id="4f10a-127">**Design the partition key to avoid hot spots**.</span></span> <span data-ttu-id="4f10a-128">Se si partiziona un database, ma una partizione riceve comunque la maggior parte delle richieste, il problema non si risolve.</span><span class="sxs-lookup"><span data-stu-id="4f10a-128">If you partition a database, but one shard still gets the majority of the requests, then you haven't solved your problem.</span></span> <span data-ttu-id="4f10a-129">Idealmente, il carico deve essere distribuito uniformemente tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="4f10a-129">Ideally, load gets distributed evenly across all the partitions.</span></span> <span data-ttu-id="4f10a-130">Ad esempio, eseguire l'hashing in base all'ID cliente e non alla prima lettera del nome del cliente, perché alcune lettere sono più frequenti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-130">For example, hash by customer ID and not the first letter of the customer name, because some letters are more frequent.</span></span> <span data-ttu-id="4f10a-131">Lo stesso principio vale per il partizionamento di una coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="4f10a-131">The same principle applies when partitioning a message queue.</span></span> <span data-ttu-id="4f10a-132">Scegliere una chiave di partizione che consenta una distribuzione uniforme dei messaggi nel set di code.</span><span class="sxs-lookup"><span data-stu-id="4f10a-132">Pick a partition key that leads to an even distribution of messages across the set of queues.</span></span> <span data-ttu-id="4f10a-133">Per altre informazioni, vedere [Sharding][sharding] (Partizionamento).</span><span class="sxs-lookup"><span data-stu-id="4f10a-133">For more information, see [Sharding][sharding].</span></span>

<span data-ttu-id="4f10a-134">**Creare partizioni per ovviare ai limiti dei servizi e della sottoscrizione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="4f10a-134">**Partition around Azure subscription and service limits**.</span></span> <span data-ttu-id="4f10a-135">I singoli componenti e servizi prevedono limiti, ma ci sono limiti anche per le sottoscrizioni e i gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="4f10a-135">Individual components and services have limits, but there are also limits for subscriptions and resource groups.</span></span> <span data-ttu-id="4f10a-136">Per le applicazioni molto grandi, potrebbe essere necessario creare partizioni per ovviare a tali limiti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-136">For very large applications, you might need to partition around those limits.</span></span>

<span data-ttu-id="4f10a-137">**Creare partizioni a livelli diversi**.</span><span class="sxs-lookup"><span data-stu-id="4f10a-137">**Partition at different levels**.</span></span> <span data-ttu-id="4f10a-138">Si consideri un server di database distribuito in una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="4f10a-138">Consider a database server deployed on a VM.</span></span> <span data-ttu-id="4f10a-139">La macchina virtuale ha un disco rigido virtuale supportato da Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="4f10a-139">The VM has a VHD that is backed by Azure Storage.</span></span> <span data-ttu-id="4f10a-140">L'account di archiviazione appartiene a una sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="4f10a-140">The storage account belongs to an Azure subscription.</span></span> <span data-ttu-id="4f10a-141">Si noti che ogni passaggio nella gerarchia prevede limiti.</span><span class="sxs-lookup"><span data-stu-id="4f10a-141">Notice that each step in the hierarchy has limits.</span></span> <span data-ttu-id="4f10a-142">Il server di database può avere un limite relativo al pool di connessioni.</span><span class="sxs-lookup"><span data-stu-id="4f10a-142">The database server may have a connection pool limit.</span></span> <span data-ttu-id="4f10a-143">Le macchine virtuali hanno limiti relativi a CPU e rete.</span><span class="sxs-lookup"><span data-stu-id="4f10a-143">VMs have CPU and network limits.</span></span> <span data-ttu-id="4f10a-144">Le risorse di archiviazione hanno limiti relativi alle operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="4f10a-144">Storage has IOPS limits.</span></span> <span data-ttu-id="4f10a-145">La sottoscrizione ha limiti relativi al numero di core delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="4f10a-145">The subscription has limits on the number of VM cores.</span></span> <span data-ttu-id="4f10a-146">In genere, è più facile creare partizioni ai livelli più bassi della gerarchia.</span><span class="sxs-lookup"><span data-stu-id="4f10a-146">Generally, it's easier to partition lower in the hierarchy.</span></span> <span data-ttu-id="4f10a-147">Solo le applicazioni di grandi dimensioni richiedono partizioni a livello di sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="4f10a-147">Only large applications should need to partition at the subscription level.</span></span>

<!-- links -->

[azure-limits]: /azure/azure-subscription-service-limits
[data-partitioning-guidance]: ../../best-practices/data-partitioning.md
[sharding]: ../../patterns/sharding.md
