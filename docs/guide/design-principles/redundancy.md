---
title: Rendere ogni elemento ridondante
titleSuffix: Azure Application Architecture Guide
description: Per evitare singoli punti di guasto, è consigliabile applicare la ridondanza nell'applicazione.
author: MikeWasson
ms.date: 08/30/2018
ms.custom: seojan19
ms.openlocfilehash: 784413f637e4f857a2ba3775f3d4de66c91fbd95
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2019
ms.locfileid: "54111847"
---
# <a name="make-all-things-redundant"></a><span data-ttu-id="1106d-103">Rendere ogni elemento ridondante</span><span class="sxs-lookup"><span data-stu-id="1106d-103">Make all things redundant</span></span>

## <a name="build-redundancy-into-your-application-to-avoid-having-single-points-of-failure"></a><span data-ttu-id="1106d-104">Applicare la ridondanza nell'applicazione per evitare singoli punti di guasto</span><span class="sxs-lookup"><span data-stu-id="1106d-104">Build redundancy into your application, to avoid having single points of failure</span></span>

<span data-ttu-id="1106d-105">Un'applicazione resiliente consente di risolvere più facilmente gli errori.</span><span class="sxs-lookup"><span data-stu-id="1106d-105">A resilient application routes around failure.</span></span> <span data-ttu-id="1106d-106">È quindi opportuno identificare i percorsi critici nell'applicazione</span><span class="sxs-lookup"><span data-stu-id="1106d-106">Identify the critical paths in your application.</span></span> <span data-ttu-id="1106d-107">e verificare se in ogni punto del percorso sia prevista una certa ridondanza,</span><span class="sxs-lookup"><span data-stu-id="1106d-107">Is there redundancy at each point in the path?</span></span> <span data-ttu-id="1106d-108">in modo che in caso di errore di un sottosistema, l'applicazione possa effettuare il failover in un altro sottosistema.</span><span class="sxs-lookup"><span data-stu-id="1106d-108">If a subsystem fails, will the application fail over to something else?</span></span>

## <a name="recommendations"></a><span data-ttu-id="1106d-109">Consigli</span><span class="sxs-lookup"><span data-stu-id="1106d-109">Recommendations</span></span>

<span data-ttu-id="1106d-110">**Prendere in considerazione i requisiti aziendali**.</span><span class="sxs-lookup"><span data-stu-id="1106d-110">**Consider business requirements**.</span></span> <span data-ttu-id="1106d-111">La ridondanza implementata in un sistema può influire sui costi e sulla complessità del sistema stesso.</span><span class="sxs-lookup"><span data-stu-id="1106d-111">The amount of redundancy built into a system can affect both cost and complexity.</span></span> <span data-ttu-id="1106d-112">L'architettura deve quindi tenere in considerazione i requisiti aziendali, tra cui il cosiddetto RTO (Recovery Time Objective), ovvero il tempo necessario per il recupero dell'operatività.</span><span class="sxs-lookup"><span data-stu-id="1106d-112">Your architecture should be informed by your business requirements, such as recovery time objective (RTO).</span></span> <span data-ttu-id="1106d-113">Ad esempio, una distribuzione in più aree è più costosa rispetto a una in una singola area ed è più complicata da gestire.</span><span class="sxs-lookup"><span data-stu-id="1106d-113">For example, a multi-region deployment is more expensive than a single-region deployment, and is more complicated to manage.</span></span> <span data-ttu-id="1106d-114">È quindi necessario definire apposite procedure operative per gestire il failover e il failback.</span><span class="sxs-lookup"><span data-stu-id="1106d-114">You will need operational procedures to handle failover and failback.</span></span> <span data-ttu-id="1106d-115">L'incremento dei costi e la maggiore complessità potrebbero essere giustificabili per alcuni scenari aziendali e non per altri.</span><span class="sxs-lookup"><span data-stu-id="1106d-115">The additional cost and complexity might be justified for some business scenarios and not others.</span></span>

<span data-ttu-id="1106d-116">**Prevedere un servizio di bilanciamento del carico prima delle macchine virtuali**.</span><span class="sxs-lookup"><span data-stu-id="1106d-116">**Place VMs behind a load balancer**.</span></span> <span data-ttu-id="1106d-117">Non usare una singola macchina virtuale per carichi di lavoro critici,</span><span class="sxs-lookup"><span data-stu-id="1106d-117">Don't use a single VM for mission-critical workloads.</span></span> <span data-ttu-id="1106d-118">ma prevedere un servizio di bilanciamento del carico da inserire prima delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="1106d-118">Instead, place multiple VMs behind a load balancer.</span></span> <span data-ttu-id="1106d-119">In questo modo se una qualsiasi macchina virtuale non è più disponibile, il servizio di bilanciamento del carico distribuirà il traffico alle rimanenti macchine virtuali integre.</span><span class="sxs-lookup"><span data-stu-id="1106d-119">If any VM becomes unavailable, the load balancer distributes traffic to the remaining healthy VMs.</span></span> <span data-ttu-id="1106d-120">Per informazioni su come distribuire questa configurazione, vedere [Run load-balanced VMs for scalability and availability][multi-vm-blueprint] (Eseguire macchine virtuali con bilanciamento del carico per la scalabilità e la disponibilità).</span><span class="sxs-lookup"><span data-stu-id="1106d-120">To learn how to deploy this configuration, see [Multiple VMs for scalability and availability][multi-vm-blueprint].</span></span>

![Diagramma di VM con bilanciamento del carico](./images/load-balancing.svg)

<span data-ttu-id="1106d-122">**Replicare i database**.</span><span class="sxs-lookup"><span data-stu-id="1106d-122">**Replicate databases**.</span></span> <span data-ttu-id="1106d-123">Il database SQL e Cosmos DB replicano automaticamente i dati in un'area. È inoltre possibile abilitare la replica geografica tra le diverse aree.</span><span class="sxs-lookup"><span data-stu-id="1106d-123">Azure SQL Database and Cosmos DB automatically replicate the data within a region, and you can enable geo-replication across regions.</span></span> <span data-ttu-id="1106d-124">Se si usa una soluzione con database IaaS, sceglierne una che supporti la replica e il failover, ad esempio i [gruppi di disponibilità Always On di SQL Server][sql-always-on].</span><span class="sxs-lookup"><span data-stu-id="1106d-124">If you are using an IaaS database solution, choose one that supports replication and failover, such as [SQL Server Always On Availability Groups][sql-always-on].</span></span>

<span data-ttu-id="1106d-125">**Abilitare la replica geografica**.</span><span class="sxs-lookup"><span data-stu-id="1106d-125">**Enable geo-replication**.</span></span> <span data-ttu-id="1106d-126">La replica geografica per il [database SQL di Azure][sql-geo-replication] e [Cosmos DB][cosmosdb-geo-replication] consente di creare repliche leggibili secondarie dei dati in una o più aree secondarie.</span><span class="sxs-lookup"><span data-stu-id="1106d-126">Geo-replication for [Azure SQL Database][sql-geo-replication] and [Cosmos DB][cosmosdb-geo-replication] creates secondary readable replicas of your data in one or more secondary regions.</span></span> <span data-ttu-id="1106d-127">In caso di interruzione del servizio, il database potrà quindi effettuare il failover all'area secondaria per le operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="1106d-127">In the event of an outage, the database can fail over to the secondary region for writes.</span></span>

<span data-ttu-id="1106d-128">**Usare il partizionamento per garantire la disponibilità**.</span><span class="sxs-lookup"><span data-stu-id="1106d-128">**Partition for availability**.</span></span> <span data-ttu-id="1106d-129">Il partizionamento del database viene spesso usato per migliorare la scalabilità, ma può anche consentire di migliorare la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="1106d-129">Database partitioning is often used to improve scalability, but it can also improve availability.</span></span> <span data-ttu-id="1106d-130">In caso di malfunzionamento di una partizione, è comunque possibile raggiungere le altre.</span><span class="sxs-lookup"><span data-stu-id="1106d-130">If one shard goes down, the other shards can still be reached.</span></span> <span data-ttu-id="1106d-131">Un errore in una partizione danneggerà inoltre solo un subset delle transazioni totali.</span><span class="sxs-lookup"><span data-stu-id="1106d-131">A failure in one shard will only disrupt a subset of the total transactions.</span></span>

<span data-ttu-id="1106d-132">**Eseguire la distribuzione in più aree**.</span><span class="sxs-lookup"><span data-stu-id="1106d-132">**Deploy to more than one region**.</span></span> <span data-ttu-id="1106d-133">Per garantire la massima disponibilità, distribuire l'applicazione in più aree.</span><span class="sxs-lookup"><span data-stu-id="1106d-133">For the highest availability, deploy the application to more than one region.</span></span> <span data-ttu-id="1106d-134">In tal modo, nel raro caso che un problema interessi un'intera area, l'applicazione potrà effettuare il failover a un'altra area.</span><span class="sxs-lookup"><span data-stu-id="1106d-134">That way, in the rare case when a problem affects an entire region, the application can fail over to another region.</span></span> <span data-ttu-id="1106d-135">Il diagramma seguente mostra un'applicazione in più aree che usa Gestione traffico di Azure per gestire il failover.</span><span class="sxs-lookup"><span data-stu-id="1106d-135">The following diagram shows a multi-region application that uses Azure Traffic Manager to handle failover.</span></span>

![Diagramma dell'uso di Gestione traffico di Azure per gestire il failover](./images/failover.svg)

<span data-ttu-id="1106d-137">**Sincronizzare il failover front-end e back-end**.</span><span class="sxs-lookup"><span data-stu-id="1106d-137">**Synchronize front and backend failover**.</span></span> <span data-ttu-id="1106d-138">Usare Gestione traffico di Azure per effettuare il failover del front-end.</span><span class="sxs-lookup"><span data-stu-id="1106d-138">Use Azure Traffic Manager to fail over the front end.</span></span> <span data-ttu-id="1106d-139">Se il front-end diventa irraggiungibile in un'area, Gestione traffico inoltrerà le nuove richieste all'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="1106d-139">If the front end becomes unreachable in one region, Traffic Manager will route new requests to the secondary region.</span></span> <span data-ttu-id="1106d-140">A seconda della soluzione di database usata, potrebbe essere necessario coordinare il failover del database.</span><span class="sxs-lookup"><span data-stu-id="1106d-140">Depending on your database solution, you may need to coordinate failing over the database.</span></span>

<span data-ttu-id="1106d-141">**Usare il failover automatico e il failback manuale**.</span><span class="sxs-lookup"><span data-stu-id="1106d-141">**Use automatic failover but manual failback**.</span></span> <span data-ttu-id="1106d-142">Usare Gestione traffico per il failover automatico, ma non per il failback automatico.</span><span class="sxs-lookup"><span data-stu-id="1106d-142">Use Traffic Manager for automatic failover, but not for automatic failback.</span></span> <span data-ttu-id="1106d-143">Il failback automatico è infatti rischioso perché il passaggio all'area primaria potrebbe avvenire prima che l'area sia completamente integra.</span><span class="sxs-lookup"><span data-stu-id="1106d-143">Automatic failback carries a risk that you might switch to the primary region before the region is completely healthy.</span></span> <span data-ttu-id="1106d-144">Verificare invece che tutti i sottosistemi dell'applicazione siano integri prima di eseguire il failback manuale.</span><span class="sxs-lookup"><span data-stu-id="1106d-144">Instead, verify that all application subsystems are healthy before manually failing back.</span></span> <span data-ttu-id="1106d-145">A seconda del database, inoltre, potrebbe essere necessario verificare la coerenza dei dati prima del failback.</span><span class="sxs-lookup"><span data-stu-id="1106d-145">Also, depending on the database, you might need to check data consistency before failing back.</span></span>

<span data-ttu-id="1106d-146">**Includere la ridondanza per Gestione traffico**.</span><span class="sxs-lookup"><span data-stu-id="1106d-146">**Include redundancy for Traffic Manager**.</span></span> <span data-ttu-id="1106d-147">Gestione traffico costituisce un possibile punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="1106d-147">Traffic Manager is a possible failure point.</span></span> <span data-ttu-id="1106d-148">Rivedere il contratto di servizio di Gestione traffico e determinare se l'uso di Gestione traffico da solo soddisfa i requisiti aziendali per la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="1106d-148">Review the Traffic Manager SLA, and determine whether using Traffic Manager alone meets your business requirements for high availability.</span></span> <span data-ttu-id="1106d-149">In caso contrario, provare ad aggiungere un'altra soluzione di gestione del traffico come failback.</span><span class="sxs-lookup"><span data-stu-id="1106d-149">If not, consider adding another traffic management solution as a failback.</span></span> <span data-ttu-id="1106d-150">In caso di errore del servizio Gestione traffico di Azure, modificare i record CNAME in DNS in modo che puntino all'altro servizio di gestione del traffico.</span><span class="sxs-lookup"><span data-stu-id="1106d-150">If the Azure Traffic Manager service fails, change your CNAME records in DNS to point to the other traffic management service.</span></span>

<!-- links -->

[multi-vm-blueprint]: ../../reference-architectures/virtual-machines-windows/multi-vm.md

[cassandra]: https://cassandra.apache.org/
[cosmosdb-geo-replication]: /azure/cosmos-db/distribute-data-globally
[sql-always-on]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-geo-replication]: /azure/sql-database/sql-database-geo-replication-overview
